<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;base&nbsp;href=&quot;http://fiji.sc/bugzilla/&quot;&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_NEW&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;NEW&nbsp;-&nbsp;Fiji&nbsp;hangs&nbsp;when&nbsp;installing&nbsp;macro&nbsp;tool&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=835#c9&quot;&gt;Comment&nbsp;#&nbsp;9&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_NEW&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;NEW&nbsp;-&nbsp;Fiji&nbsp;hangs&nbsp;when&nbsp;installing&nbsp;macro&nbsp;tool&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=835&quot;&gt;bug&nbsp;835&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;&lt;span&nbsp;class=&quot;vcard&quot;&gt;&lt;a&nbsp;class=&quot;email&quot;&nbsp;href=&quot;mailto:ilan.tal&#64;gmail.com&quot;&nbsp;title=&quot;Ilan&nbsp;Tal&nbsp;&lt;ilan.tal&#64;gmail.com&gt;&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;fn&quot;&gt;Ilan&nbsp;Tal&lt;/span&gt;&lt;/a&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Hi&nbsp;Mark,<br>
This&nbsp;is&nbsp;the&nbsp;case&nbsp;&quot;Install&nbsp;from&nbsp;more&quot;&nbsp;which&nbsp;is&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;attachment.cgi?id=181&quot;&nbsp;name=&quot;attach_181&quot;&nbsp;title=&quot;install&nbsp;from&nbsp;more&quot;&gt;attachment&nbsp;181&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;attachment.cgi?id=181&amp;action=edit&quot;&nbsp;title=&quot;install&nbsp;from&nbsp;more&quot;&gt;[details]&lt;/a&gt;&lt;/span&gt;.&nbsp;The&nbsp;process<br>
starts&nbsp;at&nbsp;Toolbar.itemStateChanged:1270&nbsp;and&nbsp;the&nbsp;critical&nbsp;difference&nbsp;is&nbsp;at<br>
Executer.runCommand:131.&nbsp;The&nbsp;interesting&nbsp;code&nbsp;is<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;runCommand(String&nbsp;cmd)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hashtable&nbsp;table&nbsp;=&nbsp;Menus.getCommands();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;className&nbsp;=&nbsp;(String)table.get(cmd);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(className!=null)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;arg&nbsp;=&nbsp;&quot;&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(className.endsWith(&quot;\&quot;)&quot;))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;extract&nbsp;string&nbsp;argument&nbsp;(e.g.&nbsp;className(&quot;arg&quot;))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;argStart&nbsp;=&nbsp;className.lastIndexOf(&quot;(\&quot;&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(argStart&gt;0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg&nbsp;=&nbsp;className.substring(argStart+2,<br>
className.length()-2);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className&nbsp;=&nbsp;className.substring(0,&nbsp;argStart);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(IJ.shiftKeyDown()&nbsp;&amp;&amp;<br>
className.startsWith(&quot;ij.plugin.Macro_Runner&quot;)&nbsp;&amp;&amp;<br>
!Menus.getShortcuts().contains(&quot;*&quot;+cmd))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IJ.open(IJ.getDirectory(&quot;plugins&quot;)+arg);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IJ.runPlugIn(cmd,&nbsp;className,&nbsp;arg);<br>
<br>
There&nbsp;is&nbsp;a&nbsp;hash&nbsp;table&nbsp;of&nbsp;commands&nbsp;and&nbsp;the&nbsp;question&nbsp;is:&nbsp;what&nbsp;is&nbsp;the&nbsp;command<br>
which&nbsp;gets&nbsp;picked&nbsp;up?&nbsp;In&nbsp;the&nbsp;ImageJ&nbsp;environment&nbsp;the&nbsp;className&nbsp;comes&nbsp;back&nbsp;as<br>
<br>
ij.plugin.Macro_Runner(&quot;Tools/Postage_Action_Tool.ijm&quot;)<br>
This&nbsp;ends&nbsp;with&nbsp;&quot;)&nbsp;so&nbsp;it&nbsp;is&nbsp;parsed&nbsp;into&nbsp;2&nbsp;strings:<br>
className&nbsp;=&nbsp;ij.plugin.Macro_Runner<br>
and&nbsp;arg&nbsp;=&nbsp;Tools/Postage_Action_Tool.ijm<br>
<br>
In&nbsp;Fiji&nbsp;something&nbsp;else&nbsp;comes&nbsp;out.&nbsp;The&nbsp;className&nbsp;comes&nbsp;back&nbsp;as<br>
script:/home/ilan/Fiji.app/plugins/Tools/Postage_Action_Tool.ijm<br>
<br>
Of&nbsp;course&nbsp;no&nbsp;parsing&nbsp;is&nbsp;performed&nbsp;and&nbsp;arg=&quot;&quot;<br>
Not&nbsp;surpringly&nbsp;the&nbsp;IJ.runPlugIn(cmd,&nbsp;className,&nbsp;arg)<br>
works&nbsp;totally&nbsp;differently.&nbsp;Later&nbsp;on&nbsp;down&nbsp;the&nbsp;line,&nbsp;this&nbsp;results&nbsp;in&nbsp;the&nbsp;crash.<br>
So&nbsp;the&nbsp;hash&nbsp;table&nbsp;has&nbsp;been&nbsp;changed.&nbsp;Where&nbsp;it&nbsp;has&nbsp;been&nbsp;changed&nbsp;and&nbsp;why&nbsp;it&nbsp;has<br>
been&nbsp;changed,&nbsp;I&nbsp;don't&nbsp;know,&nbsp;but&nbsp;the&nbsp;change&nbsp;results&nbsp;in&nbsp;a&nbsp;crash.<br>
If&nbsp;you&nbsp;have&nbsp;any&nbsp;idea&nbsp;why&nbsp;it&nbsp;isn't&nbsp;picking&nbsp;up&nbsp;&quot;ij.plugin.Macro_Runner&quot;&nbsp;but<br>
instead&nbsp;is&nbsp;using&nbsp;script:/....,&nbsp;I&nbsp;would&nbsp;be&nbsp;interested&nbsp;in&nbsp;hearing&nbsp;about&nbsp;it.<br>
<br>
Now&nbsp;I'll&nbsp;go&nbsp;look&nbsp;at&nbsp;the&nbsp;second&nbsp;case.<br>
Thanks,<br>
Ilan&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;You&nbsp;are&nbsp;receiving&nbsp;this&nbsp;mail&nbsp;because:&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;You&nbsp;are&nbsp;the&nbsp;assignee&nbsp;for&nbsp;the&nbsp;bug.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
