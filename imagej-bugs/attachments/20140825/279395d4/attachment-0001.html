<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;base&nbsp;href=&quot;http://fiji.sc/bugzilla/&quot;&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_NEW&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;NEW&nbsp;-&nbsp;Fiji&nbsp;hangs&nbsp;when&nbsp;installing&nbsp;macro&nbsp;tool&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=835#c11&quot;&gt;Comment&nbsp;#&nbsp;11&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_NEW&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;NEW&nbsp;-&nbsp;Fiji&nbsp;hangs&nbsp;when&nbsp;installing&nbsp;macro&nbsp;tool&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=835&quot;&gt;bug&nbsp;835&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;&lt;span&nbsp;class=&quot;vcard&quot;&gt;&lt;a&nbsp;class=&quot;email&quot;&nbsp;href=&quot;mailto:ilan.tal&#64;gmail.com&quot;&nbsp;title=&quot;Ilan&nbsp;Tal&nbsp;&lt;ilan.tal&#64;gmail.com&gt;&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;fn&quot;&gt;Ilan&nbsp;Tal&lt;/span&gt;&lt;/a&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;I&nbsp;managed&nbsp;to&nbsp;track&nbsp;down&nbsp;the&nbsp;problem&nbsp;to&nbsp;Menus.java.&nbsp;Here&nbsp;is&nbsp;the&nbsp;relevant&nbsp;code<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;Returns&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;plugins&nbsp;in&nbsp;the&nbsp;plugins&nbsp;menu.&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;synchronized&nbsp;String[]&nbsp;getPlugins()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;f&nbsp;=&nbsp;pluginsPath!=null?new&nbsp;File(pluginsPath):null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(f==null&nbsp;||&nbsp;(f!=null&nbsp;&amp;&amp;&nbsp;!f.isDirectory()))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String[]&nbsp;list&nbsp;=&nbsp;f.list();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(list==null)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector&nbsp;v&nbsp;=&nbsp;new&nbsp;Vector();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarFiles&nbsp;=&nbsp;null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;macroFiles&nbsp;=&nbsp;null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;list.length;&nbsp;i++)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;name&nbsp;=&nbsp;list[i];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;isClassFile&nbsp;=&nbsp;name.endsWith(&quot;.class&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;hasUnderscore&nbsp;=&nbsp;name.indexOf('_')&gt;=0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(hasUnderscore&nbsp;&amp;&amp;&nbsp;isClassFile&nbsp;&amp;&amp;&nbsp;name.indexOf('$')&lt;0&nbsp;)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;name.substring(0,&nbsp;name.length()-6);&nbsp;//&nbsp;remove&nbsp;&quot;.class&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.addElement(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hasUnderscore&nbsp;&amp;&amp;&nbsp;(name.endsWith(&quot;.jar&quot;)&nbsp;||<br>
name.endsWith(&quot;.zip&quot;)))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(jarFiles==null)&nbsp;jarFiles&nbsp;=&nbsp;new&nbsp;Vector();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarFiles.addElement(pluginsPath&nbsp;+&nbsp;name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(validMacroName(name,hasUnderscore))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(macroFiles==null)&nbsp;macroFiles&nbsp;=&nbsp;new&nbsp;Vector();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;macroFiles.addElement(name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isClassFile)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkSubdirectory(pluginsPath,&nbsp;name,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list&nbsp;=&nbsp;new&nbsp;String[v.size()];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.copyInto((String[])list);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringSorter.sort(list);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;list;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;Looks&nbsp;for&nbsp;plugins&nbsp;and&nbsp;jar&nbsp;files&nbsp;in&nbsp;a&nbsp;subdirectory&nbsp;of&nbsp;the&nbsp;plugins<br>
directory.&nbsp;*/<br>
&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;void&nbsp;checkSubdirectory(String&nbsp;path,&nbsp;String&nbsp;dir,&nbsp;Vector&nbsp;v)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(dir.endsWith(&quot;.java&quot;))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;f&nbsp;=&nbsp;new&nbsp;File(path,&nbsp;dir);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!f.isDirectory())<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String[]&nbsp;list&nbsp;=&nbsp;f.list();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(list==null)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dir&nbsp;+=&nbsp;&quot;/&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;classCount=0,&nbsp;otherCount=0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;className&nbsp;=&nbsp;null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i=0;&nbsp;i&lt;list.length;&nbsp;i++)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;name&nbsp;=&nbsp;list[i];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;hasUnderscore&nbsp;=&nbsp;name.indexOf('_')&gt;=0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(hasUnderscore&nbsp;&amp;&amp;&nbsp;name.endsWith(&quot;.class&quot;)&nbsp;&amp;&amp;<br>
name.indexOf('$')&lt;0)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;name.substring(0,&nbsp;name.length()-6);&nbsp;//&nbsp;remove&nbsp;&quot;.class&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.addElement(dir+name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classCount++;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className&nbsp;=&nbsp;name;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//IJ.write(&quot;File:&nbsp;&quot;+f+&quot;/&quot;+name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(hasUnderscore&nbsp;&amp;&amp;&nbsp;(name.endsWith(&quot;.jar&quot;)&nbsp;||<br>
name.endsWith(&quot;.zip&quot;)))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(jarFiles==null)&nbsp;jarFiles&nbsp;=&nbsp;new&nbsp;Vector();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jarFiles.addElement(f.getPath()&nbsp;+&nbsp;File.separator&nbsp;+&nbsp;name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherCount++;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(validMacroName(name,hasUnderscore))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(macroFiles==null)&nbsp;macroFiles&nbsp;=&nbsp;new&nbsp;Vector();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;macroFiles.addElement(dir&nbsp;+&nbsp;name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherCount++;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;f2&nbsp;=&nbsp;new&nbsp;File(f,&nbsp;name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(f2.isDirectory())&nbsp;installSubdirectorMacros(f2,&nbsp;dir+name);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Prefs.moveToMisc&nbsp;&amp;&amp;&nbsp;classCount==1&nbsp;&amp;&amp;&nbsp;otherCount==0&nbsp;&amp;&amp;<br>
dir.indexOf(&quot;_&quot;)==-1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setElementAt(&quot;Miscellaneous/&quot;&nbsp;+&nbsp;className,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.size()&nbsp;-&nbsp;1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
The&nbsp;problem&nbsp;is&nbsp;macroFiles&nbsp;never&nbsp;gets&nbsp;a&nbsp;non&nbsp;null&nbsp;value&nbsp;in&nbsp;Fiji.&nbsp;In&nbsp;ImageJ,&nbsp;it<br>
works&nbsp;with&nbsp;no&nbsp;problems.&nbsp;In&nbsp;the&nbsp;end&nbsp;the&nbsp;problem&nbsp;comes&nbsp;down&nbsp;to<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;boolean&nbsp;validMacroName(String&nbsp;name,&nbsp;boolean&nbsp;hasUnderscore)&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return<br>
(hasUnderscore&amp;&amp;name.endsWith(&quot;.txt&quot;))||name.endsWith(&quot;.ijm&quot;)||name.endsWith(&quot;.js&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
||(name.endsWith(&quot;.bsh&quot;)&amp;&amp;!isFiji)||(name.endsWith(&quot;.py&quot;)&amp;&amp;!isFiji);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;which&nbsp;returns&nbsp;a&nbsp;value&nbsp;of&nbsp;FALSE&nbsp;for&nbsp;a&nbsp;valid&nbsp;macro&nbsp;name.&nbsp;I&nbsp;verified&nbsp;that&nbsp;this<br>
routine&nbsp;hasn't&nbsp;changed&nbsp;even&nbsp;in&nbsp;the&nbsp;latest&nbsp;1.49f.&nbsp;It&nbsp;should&nbsp;return&nbsp;TRUE&nbsp;if&nbsp;the<br>
name&nbsp;end&nbsp;in&nbsp;&quot;.txt&quot;&nbsp;and&nbsp;has&nbsp;an&nbsp;underscore,&nbsp;or&nbsp;if&nbsp;name&nbsp;ends&nbsp;in&nbsp;&quot;.ijm&quot;&nbsp;without&nbsp;any<br>
connection&nbsp;to&nbsp;an&nbsp;underscore.&nbsp;Again,&nbsp;in&nbsp;ImageJ&nbsp;it&nbsp;works&nbsp;fine,&nbsp;but&nbsp;not&nbsp;in&nbsp;Fiji.<br>
<br>
The&nbsp;process&nbsp;begins&nbsp;in&nbsp;getPlugins&nbsp;where&nbsp;macroFiles&nbsp;gets&nbsp;initialized&nbsp;to&nbsp;null.<br>
&gt;From&nbsp;there&nbsp;it&nbsp;looks&nbsp;for&nbsp;valid&nbsp;macros&nbsp;to&nbsp;store.&nbsp;In&nbsp;my&nbsp;case&nbsp;I've&nbsp;got<br>
Postage_Action_Tool.ijm&nbsp;which&nbsp;is&nbsp;a&nbsp;perfectly&nbsp;valid&nbsp;macro&nbsp;file&nbsp;name.&nbsp;This&nbsp;file<br>
name&nbsp;is&nbsp;in&nbsp;the&nbsp;Tools&nbsp;directory&nbsp;inside&nbsp;the&nbsp;plugins&nbsp;directory.<br>
<br>
The&nbsp;getPlugins&nbsp;gets&nbsp;a&nbsp;file&nbsp;list&nbsp;where&nbsp;the&nbsp;interesting&nbsp;entry&nbsp;is&nbsp;Tools.&nbsp;Of&nbsp;course<br>
Tools&nbsp;isn't&nbsp;a&nbsp;macro&nbsp;so&nbsp;it&nbsp;gets&nbsp;down&nbsp;to&nbsp;checkSubdirectory(...).&nbsp;Inside<br>
checkSubdirectory&nbsp;there&nbsp;is&nbsp;directory&nbsp;list&nbsp;which&nbsp;includes&nbsp;my&nbsp;file<br>
Postage_Action_Tool.ijm.&nbsp;Even&nbsp;though&nbsp;this&nbsp;is&nbsp;a&nbsp;perfectly&nbsp;valid&nbsp;macro&nbsp;name,<br>
validMacroName&nbsp;insists&nbsp;it&nbsp;isn't&nbsp;valid.&nbsp;Thus&nbsp;macroFiles&nbsp;never&nbsp;gets&nbsp;a&nbsp;non&nbsp;null<br>
value&nbsp;and&nbsp;no&nbsp;elements&nbsp;are&nbsp;added&nbsp;to&nbsp;it.<br>
<br>
I&nbsp;thought&nbsp;maybe&nbsp;there&nbsp;were&nbsp;some&nbsp;invisible&nbsp;characters&nbsp;which&nbsp;might&nbsp;cause&nbsp;the<br>
endsWith(&quot;.ijm&quot;)&nbsp;to&nbsp;fail,&nbsp;so&nbsp;I&nbsp;copied&nbsp;over&nbsp;the&nbsp;exact&nbsp;same&nbsp;file&nbsp;from&nbsp;ImageJ&nbsp;into<br>
Fiji.&nbsp;I&nbsp;was&nbsp;going&nbsp;to&nbsp;suggest&nbsp;to&nbsp;add&nbsp;a&nbsp;trim&nbsp;to&nbsp;the&nbsp;list&nbsp;line<br>
<br>
String&nbsp;name&nbsp;=&nbsp;list[i].trim();<br>
<br>
but&nbsp;now&nbsp;I&nbsp;have&nbsp;strong&nbsp;doubts&nbsp;that&nbsp;it&nbsp;would&nbsp;help.&nbsp;This&nbsp;is&nbsp;especially&nbsp;after&nbsp;I<br>
looked&nbsp;at&nbsp;some&nbsp;other&nbsp;macros&nbsp;which&nbsp;should&nbsp;have&nbsp;been&nbsp;added.&nbsp;They&nbsp;are<br>
<br>
About_Plugins_Macros.txt<br>
batch_convert_any_to_tif.txt<br>
Polygon_.txt<br>
RGB_Histogram.txt<br>
<br>
All&nbsp;of&nbsp;them&nbsp;should&nbsp;have&nbsp;passed&nbsp;the&nbsp;test&nbsp;and&nbsp;none&nbsp;of&nbsp;them&nbsp;passed&nbsp;in&nbsp;fact.&nbsp;These<br>
are&nbsp;all&nbsp;.txt&nbsp;files,&nbsp;but&nbsp;they&nbsp;all&nbsp;have&nbsp;underscores.<br>
<br>
So&nbsp;the&nbsp;problem&nbsp;is&nbsp;wider&nbsp;than&nbsp;the&nbsp;bug&nbsp;I&nbsp;reported,&nbsp;but&nbsp;it&nbsp;also&nbsp;affects&nbsp;me,&nbsp;which<br>
is&nbsp;the&nbsp;part&nbsp;which&nbsp;is&nbsp;most&nbsp;annoying&nbsp;to&nbsp;me.&nbsp;Someone&nbsp;may&nbsp;be&nbsp;familiar&nbsp;with&nbsp;one&nbsp;or<br>
more&nbsp;of&nbsp;the&nbsp;above&nbsp;macros.&nbsp;If&nbsp;I&nbsp;knew&nbsp;what&nbsp;to&nbsp;expect&nbsp;from&nbsp;them,&nbsp;I&nbsp;might&nbsp;verify<br>
that&nbsp;they&nbsp;work&nbsp;differently&nbsp;in&nbsp;ImageJ.<br>
<br>
Thanks,<br>
Ilan&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;You&nbsp;are&nbsp;receiving&nbsp;this&nbsp;mail&nbsp;because:&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;You&nbsp;are&nbsp;the&nbsp;assignee&nbsp;for&nbsp;the&nbsp;bug.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
