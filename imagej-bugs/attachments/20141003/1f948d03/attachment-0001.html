<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;base&nbsp;href=&quot;http://fiji.sc/bugzilla/&quot;&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;&lt;span&nbsp;class=&quot;vcard&quot;&gt;&lt;a&nbsp;class=&quot;email&quot;&nbsp;href=&quot;mailto:g.landini&#64;bham.ac.uk&quot;&nbsp;title=&quot;G.&nbsp;Landini&nbsp;&lt;g.landini&#64;bham.ac.uk&gt;&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;fn&quot;&gt;G.&nbsp;Landini&lt;/span&gt;&lt;/a&gt;<br>
&lt;/span&gt;&nbsp;changed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_RESOLVED&nbsp;&nbsp;bz_closed&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;RESOLVED&nbsp;INVALID&nbsp;-&nbsp;Bug&nbsp;in&nbsp;the&nbsp;Intermodes&nbsp;algorithm&nbsp;of&nbsp;threshold&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=938&quot;&gt;bug&nbsp;938&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&nbsp;border=&quot;1&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;8&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;What&lt;/th&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Removed&lt;/th&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Added&lt;/th&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&nbsp;style=&quot;text-align:right;&quot;&gt;Status&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;NEEDSINFO<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;RESOLVED<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&nbsp;style=&quot;text-align:right;&quot;&gt;Resolution&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;---<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;INVALID<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;&lt;/table&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_RESOLVED&nbsp;&nbsp;bz_closed&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;RESOLVED&nbsp;INVALID&nbsp;-&nbsp;Bug&nbsp;in&nbsp;the&nbsp;Intermodes&nbsp;algorithm&nbsp;of&nbsp;threshold&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=938#c3&quot;&gt;Comment&nbsp;#&nbsp;3&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_RESOLVED&nbsp;&nbsp;bz_closed&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;RESOLVED&nbsp;INVALID&nbsp;-&nbsp;Bug&nbsp;in&nbsp;the&nbsp;Intermodes&nbsp;algorithm&nbsp;of&nbsp;threshold&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=938&quot;&gt;bug&nbsp;938&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;&lt;span&nbsp;class=&quot;vcard&quot;&gt;&lt;a&nbsp;class=&quot;email&quot;&nbsp;href=&quot;mailto:g.landini&#64;bham.ac.uk&quot;&nbsp;title=&quot;G.&nbsp;Landini&nbsp;&lt;g.landini&#64;bham.ac.uk&gt;&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;fn&quot;&gt;G.&nbsp;Landini&lt;/span&gt;&lt;/a&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Hi,&nbsp;just&nbsp;a&nbsp;quick&nbsp;update.&nbsp;The&nbsp;Intermodes&nbsp;threshold&nbsp;method&nbsp;'fails'&nbsp;in&nbsp;the&nbsp;16bit<br>
image&nbsp;because&nbsp;the&nbsp;histogram&nbsp;is&nbsp;not&nbsp;bimodal.&nbsp;The&nbsp;value&nbsp;of&nbsp;525&nbsp;is&nbsp;just&nbsp;the&nbsp;min<br>
value&nbsp;of&nbsp;the&nbsp;image-1.&nbsp;I&nbsp;do&nbsp;not&nbsp;consider&nbsp;this&nbsp;is&nbsp;a&nbsp;bug&nbsp;because&nbsp;the&nbsp;plugin<br>
explains&nbsp;the&nbsp;situation&nbsp;in&nbsp;the&nbsp;Log&nbsp;window.<br>
<br>
Now,&nbsp;about&nbsp;the&nbsp;issue&nbsp;of&nbsp;with&nbsp;why&nbsp;this&nbsp;works&nbsp;differently&nbsp;with&nbsp;the<br>
Adjust&gt;Threshod&nbsp;command.&nbsp;I&nbsp;am&nbsp;almost&nbsp;sure&nbsp;that&nbsp;this&nbsp;is&nbsp;because&nbsp;that&nbsp;command<br>
packs&nbsp;the&nbsp;16bit&nbsp;histogram&nbsp;into&nbsp;an&nbsp;8&nbsp;bit&nbsp;space&nbsp;(i.e.&nbsp;256&nbsp;bins)&nbsp;and&nbsp;thresholds<br>
that&nbsp;histogram.&nbsp;You&nbsp;get&nbsp;the&nbsp;'correct'&nbsp;result&nbsp;by&nbsp;converting&nbsp;the&nbsp;image&nbsp;to&nbsp;8&nbsp;bits<br>
and&nbsp;using&nbsp;the&nbsp;Auto_Threshold&nbsp;plugin&nbsp;Intermodes&nbsp;method&nbsp;(if&nbsp;you&nbsp;do&nbsp;it&nbsp;you&nbsp;will<br>
find&nbsp;that&nbsp;the&nbsp;binary&nbsp;result&nbsp;is&nbsp;identical&nbsp;on&nbsp;that&nbsp;neuron&nbsp;image).<br>
A&nbsp;bit&nbsp;counter-intuitive,&nbsp;but&nbsp;a&nbsp;16bit&nbsp;image&nbsp;and&nbsp;the&nbsp;same&nbsp;converted&nbsp;to&nbsp;8&nbsp;bits&nbsp;are<br>
not&nbsp;the&nbsp;same,&nbsp;and&nbsp;we&nbsp;should&nbsp;not&nbsp;expect&nbsp;the&nbsp;same&nbsp;result&nbsp;for&nbsp;all&nbsp;the&nbsp;methods.<br>
<br>
I&nbsp;am&nbsp;marking&nbsp;this&nbsp;as&nbsp;&quot;Invalid&quot;&nbsp;as&nbsp;I&nbsp;do&nbsp;not&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;bug,&nbsp;just&nbsp;a<br>
confusing&nbsp;situation,&nbsp;but&nbsp;please&nbsp;feel&nbsp;free&nbsp;to&nbsp;reopen&nbsp;if&nbsp;you&nbsp;think&nbsp;otherwise.<br>
<br>
By&nbsp;the&nbsp;way,&nbsp;the&nbsp;issue&nbsp;raised&nbsp;about&nbsp;line&nbsp;199,&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;correct&nbsp;as&nbsp;is.&nbsp;The<br>
histogram&nbsp;is&nbsp;sequentially,&nbsp;so&nbsp;this&nbsp;has&nbsp;to&nbsp;be&nbsp;done&nbsp;on&nbsp;the&nbsp;the&nbsp;same&nbsp;array.<br>
<br>
One&nbsp;more&nbsp;thing,&nbsp;I&nbsp;could&nbsp;add&nbsp;to&nbsp;the&nbsp;code&nbsp;to&nbsp;return&nbsp;&quot;-1&quot;&nbsp;if&nbsp;the&nbsp;method&nbsp;fails.&nbsp;Now<br>
it&nbsp;returns&nbsp;the&nbsp;minimum&nbsp;grey&nbsp;value&nbsp;of&nbsp;the&nbsp;histogram-1.&nbsp;Not&nbsp;sure&nbsp;if&nbsp;that&nbsp;makes&nbsp;it<br>
any&nbsp;clear;&nbsp;suggestions&nbsp;are&nbsp;welcome.&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;You&nbsp;are&nbsp;receiving&nbsp;this&nbsp;mail&nbsp;because:&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;You&nbsp;are&nbsp;the&nbsp;assignee&nbsp;for&nbsp;the&nbsp;bug.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
