<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-bugs] [Bug 854] Multithreading problem in javascript macro
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-bugs%40imagej.net?Subject=Re%3A%20%5BImageJ-bugs%5D%20%5BBug%20854%5D%20Multithreading%20problem%20in%20javascript%20macro&In-Reply-To=%3Cbug-854-19-EAB6FFipHP%40http.fiji.sc/bugzilla/%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000280.html">
   <LINK REL="Next"  HREF="000283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-bugs] [Bug 854] Multithreading problem in javascript macro</H1>
    <B>bugzilla at fiji.sc</B> 
    <A HREF="mailto:imagej-bugs%40imagej.net?Subject=Re%3A%20%5BImageJ-bugs%5D%20%5BBug%20854%5D%20Multithreading%20problem%20in%20javascript%20macro&In-Reply-To=%3Cbug-854-19-EAB6FFipHP%40http.fiji.sc/bugzilla/%3E"
       TITLE="[ImageJ-bugs] [Bug 854] Multithreading problem in javascript macro">bugzilla at fiji.sc
       </A><BR>
    <I>Wed Aug 20 05:47:55 CDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000280.html">[ImageJ-bugs] [Bug 910] New scripting plugin no longer imports stock python functions
</A></li>
        <LI>Next message: <A HREF="000283.html">[ImageJ-bugs] [Bug 465] Trackmate - missing Save dialog for Export	tracks to XML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#282">[ date ]</a>
              <a href="thread.html#282">[ thread ]</a>
              <a href="subject.html#282">[ subject ]</a>
              <a href="author.html#282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://fiji.sc/bugzilla/show_bug.cgi?id=854">http://fiji.sc/bugzilla/show_bug.cgi?id=854</A>

--- Comment #4 from Thomas Siegmund &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-bugs">thomas.siegmund at evotec.com</A>&gt; ---
Created attachment 204
  --&gt; <A HREF="http://fiji.sc/bugzilla/attachment.cgi?id=204&amp;action=edit">http://fiji.sc/bugzilla/attachment.cgi?id=204&amp;action=edit</A>
test script

Not what I would call a minimal test case, but I have at least tried to trim 
it down to something reasonable.

To reproduce the problem, please download a test image from Dropbox (60Mb tiff,
too big to attach here):

<A HREF="https://www.dropbox.com/s/8nvb42a0hum8rjg/test_image.tiff">https://www.dropbox.com/s/8nvb42a0hum8rjg/test_image.tiff</A> 

Put the image in an otherwise empty directory, run &quot;multithreading-bug_ij.js&quot;.

The script will ask for the image directory and open results and log windows.
it will then analyze the image once single threaded and then twice
multithreaded. On my systems in multithreaded mode it will log the error from
line 296 usually several times:

 ERROR: number of nuclei != number of ROIS !!!!: test_image.tiff 109, nNuclei
0, nucleiRoisLength 1

The number and details of the errors will vary from run to run.

Multithreading can be switched off completely in line 66. In this mode I have
never seen a problem with the analysis.

Best

Thomas

-- 
You are receiving this mail because:
You are the assignee for the bug.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://imagej.net/pipermail/imagej-bugs/attachments/20140820/a8e9da4b/attachment-0001.html">http://imagej.net/pipermail/imagej-bugs/attachments/20140820/a8e9da4b/attachment-0001.html</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000280.html">[ImageJ-bugs] [Bug 910] New scripting plugin no longer imports stock python functions
</A></li>
	<LI>Next message: <A HREF="000283.html">[ImageJ-bugs] [Bug 465] Trackmate - missing Save dialog for Export	tracks to XML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#282">[ date ]</a>
              <a href="thread.html#282">[ thread ]</a>
              <a href="subject.html#282">[ subject ]</a>
              <a href="author.html#282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-bugs">More information about the Imagej-bugs
mailing list</a><br>
</body></html>
