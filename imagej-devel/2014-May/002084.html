<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20%5BLOCI%20ImageJ%5D%20IJ2%20Plugin%20Service&In-Reply-To=%3CEEADA400-1ACF-4E15-9C65-BC64F3534478%40wisc.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002081.html">
   <LINK REL="Next"  HREF="002085.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service</H1>
    <B>Jay Warrick</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20%5BLOCI%20ImageJ%5D%20IJ2%20Plugin%20Service&In-Reply-To=%3CEEADA400-1ACF-4E15-9C65-BC64F3534478%40wisc.edu%3E"
       TITLE="[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service">warrick at wisc.edu
       </A><BR>
    <I>Tue May  6 17:13:18 CDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002081.html">[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service
</A></li>
        <LI>Next message: <A HREF="002085.html">[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2084">[ date ]</a>
              <a href="thread.html#2084">[ thread ]</a>
              <a href="subject.html#2084">[ subject ]</a>
              <a href="author.html#2084">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Johannes,

Thanks for the reply. 

If I try to force Eclipse to process annotations. I get this error...

java.io.IOException: org.eclipse.core.internal.resources.ResourceException: Resource '/JEX/bin/META-INF/json/org.scijava.plugin.Plugin' does not exist.
	at org.eclipse.jdt.internal.apt.pluggable.core.filer.IdeInputFileObject.openInputStream(IdeInputFileObject.java:88)
	at org.scijava.annotations.AnnotationProcessor$Writer.openInput(AnnotationProcessor.java:224)
	at org.scijava.annotations.AbstractIndexWriter.merge(AbstractIndexWriter.java:118)
	at org.scijava.annotations.AbstractIndexWriter.write(AbstractIndexWriter.java:91)
	at org.scijava.annotations.AnnotationProcessor.process(AnnotationProcessor.java:91)
	at org.eclipse.jdt.internal.compiler.apt.dispatch.RoundDispatcher.handleProcessor(RoundDispatcher.java:139)
	at org.eclipse.jdt.internal.compiler.apt.dispatch.RoundDispatcher.round(RoundDispatcher.java:121)
	at org.eclipse.jdt.internal.compiler.apt.dispatch.BaseAnnotationProcessorManager.processAnnotations(BaseAnnotationProcessorManager.java:159)
	at org.eclipse.jdt.internal.apt.pluggable.core.dispatch.IdeAnnotationProcessorManager.processAnnotations(IdeAnnotationProcessorManager.java:134)
	at org.eclipse.jdt.internal.compiler.Compiler.processAnnotations(Compiler.java:820)
	at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:434)
	at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:366)
	at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:178)
	at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:303)
	at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:60)
	at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:254)
	at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:173)
	at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:733)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:206)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:246)
	at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:299)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:302)
	at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
	at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:401)
	at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2345)
	at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
	at org.eclipse.core.internal.resources.Project.build(Project.java:114)
	at org.eclipse.jdt.internal.ui.util.CoreUtility$BuildJob.run(CoreUtility.java:161)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.eclipse.core.internal.resources.ResourceException: Resource '/JEX/bin/META-INF/json/org.scijava.plugin.Plugin' does not exist.
	at org.eclipse.core.internal.resources.Resource.checkExists(Resource.java:341)
	at org.eclipse.core.internal.resources.Resource.checkAccessible(Resource.java:215)
	at org.eclipse.core.internal.resources.File.getContents(File.java:287)
	at org.eclipse.core.internal.resources.File.getContents(File.java:278)
	at org.eclipse.jdt.internal.apt.pluggable.core.filer.IdeInputFileObject.openInputStream(IdeInputFileObject.java:86)
	... 31 more

Any idea why the file is not created on processing?

Thanks,

Jay



On May 6, 2014, at 12:43 PM, Johannes Schindelin &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">Johannes.Schindelin at gmx.de</A>&gt; wrote:

&gt;<i> Hi Jay,
</I>&gt;<i> 
</I>&gt;<i> On Tue, 6 May 2014, Jay Warrick wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> You run the application once, it fixes the jar file but the changes to
</I>&gt;&gt;<i> the jar file on disk are not reflected in the jar file that is loaded
</I>&gt;&gt;<i> already in memory for running the application (at least as indicated by
</I>&gt;&gt;<i> the getResources() method).
</I>&gt;<i> 
</I>&gt;<i> That is not the intended workflow -- as both Curtis &amp; I pointed out.
</I>&gt;<i> 
</I>&gt;<i> The annotation indexes are supposed to be generated at compile time. The
</I>&gt;<i> way we do that is fully compliant with the Java standard.
</I>&gt;<i> 
</I>&gt;<i> By using an environment that does not abide by that standard -- Eclipse --
</I>&gt;<i> you make it your responsibility to ensure that the annotation indexes are
</I>&gt;<i> generated correctly.
</I>&gt;<i> 
</I>&gt;<i> You could do that by making unit tests an integral part of your build
</I>&gt;<i> process *before* bundling into a .jar (which you should do anyway, if you
</I>&gt;<i> want to follow best Java practices), or by running the EclipseHelper in
</I>&gt;<i> another manner.
</I>&gt;<i> 
</I>&gt;<i> You could do that by making it a Maven project and importing it into
</I>&gt;<i> Eclipse.
</I>&gt;<i> 
</I>&gt;<i> You could do that by forcing Eclipse into running the annotation
</I>&gt;<i> processors (as mandated by the Java standard).
</I>&gt;<i> 
</I>&gt;<i> You could figure out another way to make the annotation indexing run
</I>&gt;<i> before packaging the sources into .jar files.
</I>&gt;<i> 
</I>&gt;<i> What will not work is to continue to try to generate the annotation
</I>&gt;<i> indexes at a stage that is way later than compile time.
</I>&gt;<i> 
</I>&gt;<i> Ciao,
</I>&gt;<i> Johannes
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002081.html">[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service
</A></li>
	<LI>Next message: <A HREF="002085.html">[ImageJ-devel] [LOCI ImageJ] IJ2 Plugin Service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2084">[ date ]</a>
              <a href="thread.html#2084">[ thread ]</a>
              <a href="subject.html#2084">[ subject ]</a>
              <a href="author.html#2084">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
