<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] OpenCL plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20OpenCL%20plugin&In-Reply-To=%3CAANLkTi%3DC-OPJ_jH1cGdk_nGMNWuzWir8YsyOz6obYiCW%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000296.html">
   <LINK REL="Next"  HREF="000300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] OpenCL plugin</H1>
    <B>Rick Lentz</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20OpenCL%20plugin&In-Reply-To=%3CAANLkTi%3DC-OPJ_jH1cGdk_nGMNWuzWir8YsyOz6obYiCW%40mail.gmail.com%3E"
       TITLE="[ImageJ-devel] OpenCL plugin">rwlentz at wisc.edu
       </A><BR>
    <I>Sat Jan 15 11:59:13 CST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000296.html">[ImageJ-devel] Biweekly milestone meeting on Tuesday Jan. 18
</A></li>
        <LI>Next message: <A HREF="000300.html">[ImageJ-devel] OpenCL plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#299">[ date ]</a>
              <a href="thread.html#299">[ thread ]</a>
              <a href="subject.html#299">[ subject ]</a>
              <a href="author.html#299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Pol,

  Thank you for trying the draft Getting Started with ImageJ OpenCL plugins
tutorial.  I made a few updates based on your feedback.  Specifically, I
changed sobel.cl to use floats vs doubles (this should take care of the
error you ran into).  I also corrected the line error to line 169 for the
update to the common.mk file.

   I am not sure about the ./oclParticles error.  I have a similar error
when running GL based apps - but my error is specific to tunneling X over
SSH.  I am not sure if you are tunneling or not.  Looks like a group at
Cambridge has a solid solution for GL over a SSH tunnel (see attached).

  Michael Bien (author of JOCL) has filed a ticket for JOCL regarding
working around a bug identified in the Apple implementation of
OpenCL&lt;<A HREF="https://jogamp.org/bugzilla/show_bug.cgi?id=458">https://jogamp.org/bugzilla/show_bug.cgi?id=458</A>&gt;.
 Either the Windows 32/64 or Linux 32/64 implementations should work for
you.  Let me know if you have any issues moving forward with your OpenCL /
CUDA ImageJ plugin.

Sincerely,

Rick Lentz




On Fri, Jan 14, 2011 at 3:19 AM, Pol kennel &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">pol.kennel at gmail.com</A>&gt; wrote:

&gt;<i> Rick,
</I>&gt;<i>
</I>&gt;<i> Your tutorial is so clear I dont understand why I get again an error with
</I>&gt;<i> sobel example, but I dont want to abuse of your helpfulness.
</I>&gt;<i>
</I>&gt;<i> I really do exactly the same as your tutorial (except line 137 of
</I>&gt;<i> common.mk that don't refers to a NVCCFLAGS so a replace line 169 and
</I>&gt;<i> compil was ok).
</I>&gt;<i>
</I>&gt;<i> SobelExample error :
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> com.jogamp.opencl.CLException$CLInvalidBinaryException:
</I>&gt;<i> CLDevice [id: 139780449736272 name: GeForce GTS 240 type: GPU profile:
</I>&gt;<i> FULL_PROFILE] build log:
</I>&gt;<i>
</I>&gt;<i> ptxas application ptx input, line 104; error   : Instruction 'cvt' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 105; error   : Instruction 'cvt' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 106; error   : Instruction 'mul' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 107; error   : Instruction 'mul' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 108; error   : Instruction 'add' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 109; error   : Instruction 'sqrt'
</I>&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas application ptx input, line 110; error   : Instruction 'cvt' requires
</I>&gt;<i> SM 1.3 or higher, or map_f64_to_f32 directive
</I>&gt;<i> ptxas fatal   : Ptx assembly aborted due to errors
</I>&gt;<i> error   : Ptx compilation failed: gpu='sm_11', device
</I>&gt;<i> code='cuModuleLoadDataEx_4'
</I>&gt;<i> : Considering profile 'compute_11' for gpu='sm_11' in
</I>&gt;<i> 'cuModuleLoadDataEx_4'
</I>&gt;<i> : Retrieving binary for 'cuModuleLoadDataEx_4', for gpu='sm_11', usage
</I>&gt;<i> mode='  '
</I>&gt;<i> : Considering profile 'compute_11' for gpu='sm_11' in
</I>&gt;<i> 'cuModuleLoadDataEx_4'
</I>&gt;<i> : Control flags for 'cuModuleLoadDataEx_4' disable search path
</I>&gt;<i> : Ptx binary found for 'cuModuleLoadDataEx_4', architecture='compute_11'
</I>&gt;<i> : Ptx compilation for 'cuModuleLoadDataEx_4', for gpu='sm_11', ocg
</I>&gt;<i> options='  '
</I>&gt;<i> ptxas application ptx input, line 104; warning : Double is not supported.
</I>&gt;<i> Demoting to float [error: CL_INVALID_BINARY]
</I>&gt;<i>     at com.jogamp.opencl.CLException.newException(CLException.java:78)
</I>&gt;<i>     at com.jogamp.opencl.CLProgram.build(CLProgram.java:363)
</I>&gt;<i>     at com.jogamp.opencl.CLProgram.build(CLProgram.java:245)
</I>&gt;<i>     at demos.SobelFilterExample.init(SobelFilterExample.java:66)
</I>&gt;<i>     at demos.SobelFilterExample.runTest(SobelFilterExample.java:240)
</I>&gt;<i>     at demos.SobelFilterExample.main(SobelFilterExample.java:193)
</I>&gt;<i>
</I>&gt;<i> I also noted that some examples in
</I>&gt;<i> /NVIDIA_GPU_Computing_SDK/OpenCL/bin/linux/release/ crash like
</I>&gt;<i> ./oclParticles with error :
</I>&gt;<i> X Error of failed request:  BadWindow (invalid Window parameter)
</I>&gt;<i>   Major opcode of failed request:  138 (NV-GLX)
</I>&gt;<i>   Minor opcode of failed request:  4 ()
</I>&gt;<i>   Resource id in failed request:  0x4e00002
</I>&gt;<i>   Serial number of failed request:  49
</I>&gt;<i>   Current serial number in output stream:  49
</I>&gt;<i>
</I>&gt;<i> ./oclBandWidthTest is ok.
</I>&gt;<i>
</I>&gt;<i> If you have an idea, please let me know. Have a nice day.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Pol
</I>&gt;<i>
</I>&gt;<i> 2011/1/14 Pol kennel &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">pol.kennel at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i> Hi Rick,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You perfectly understood what I need, this will lead to apply &quot;heavy&quot;
</I>&gt;&gt;<i> texture features extraction on large image aiming segmentation (the method
</I>&gt;&gt;<i> will be published soon).
</I>&gt;&gt;<i> I hope to have time in future to create a clear plugin for IJ that could
</I>&gt;&gt;<i> be shared with users and contribuate to IJ community :) So thanks for your
</I>&gt;&gt;<i> help, I'll try your last tutorial today, with hopes to get started with
</I>&gt;&gt;<i> OpenCL quick... I have a last (at least) question : are we constrained to
</I>&gt;&gt;<i> write gpu code in Cl ? could we use directly java codes ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Pol
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2011/1/13 Rick Lentz &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">rwlentz at wisc.edu</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Pol,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   I am thinking that the material under <A HREF="http://www.imagejdev.org/OpenCLwas">http://www.imagejdev.org/OpenCLwas</A> not going to be as useful for you as a getting started tutorial.  I have
</I>&gt;&gt;&gt;<i> removed the publication related material from our website.  I created a Getting
</I>&gt;&gt;&gt;<i> Started with OpenCL in ImageJ Tutorial&lt;<A HREF="https://docs.google.com/document/d/12aiL7urwcve7Mi-YyuOtAVlTZ5P6outcay75YiQlqyQ/edit?hl=en">https://docs.google.com/document/d/12aiL7urwcve7Mi-YyuOtAVlTZ5P6outcay75YiQlqyQ/edit?hl=en</A>&gt; with
</I>&gt;&gt;&gt;<i> the goal of helping ImageJ users get started quickly with OpenCL.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  Back to your issues, for the research publication I compiled the jogamp
</I>&gt;&gt;&gt;<i> files - but for your application, I do not think you need to do this.  The
</I>&gt;&gt;&gt;<i> compilation steps listed were specific to Ubuntu 9.10 and NVidia 3.1.  If I
</I>&gt;&gt;&gt;<i> am understanding your ImageJ need correctly, I think you are looking to run
</I>&gt;&gt;&gt;<i> a few Java examples that help you get into writing OpenCL plugins for
</I>&gt;&gt;&gt;<i> ImageJ.  I hope the attached draft copy of the tutorial will help you get
</I>&gt;&gt;&gt;<i> there quickly.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  Please let me know if you any troubles with the tutorial - and have any
</I>&gt;&gt;&gt;<i> feedback regarding the tutorial.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Best Regards,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Rick Lentz
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Pol,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   Can you do a fresh pull from our repository - You should not have to
</I>&gt;&gt;&gt;<i> build these unless you really want to.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   You can download the needed components directly from:
</I>&gt;&gt;&gt;<i>   <A HREF="http://jogamp.org/deployment/webstart/">http://jogamp.org/deployment/webstart/</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   I have also updated the ImageJ plugin demo source to include the most
</I>&gt;&gt;&gt;<i> recent Jogamp OpenCL binaries and native libs.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sincerely,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Rick
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Thu, Jan 13, 2011 at 9:55 AM, Pol kennel &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">pol.kennel at gmail.com</A>&gt;wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> In fact my *jocl* building also crash during Junit tests, with error
</I>&gt;&gt;&gt;&gt;<i> stacks like :
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> [junit] Testcase: createContextTest(com.jogamp.opencl.gl.CLGLTest): Caused
</I>&gt;&gt;&gt;&gt;<i> an ERROR
</I>&gt;&gt;&gt;&gt;<i>     [junit] test timed out after 5000 milliseconds
</I>&gt;&gt;&gt;&gt;<i>     [junit] java.lang.Exception: test timed out after 5000 milliseconds
</I>&gt;&gt;&gt;&gt;<i>     [junit] at java.lang.Object.wait(Native Method)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at java.lang.Object.wait(Object.java:485)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> com.jogamp.opengl.impl.SharedResourceRunner.doAndWait(SharedResourceRunner.java:152)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> com.jogamp.opengl.impl.SharedResourceRunner.getOrCreateShared(SharedResourceRunner.java:100)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> com.jogamp.opengl.impl.x11.glx.X11GLXDrawableFactory.getOrCreateSharedContextImpl(X11GLXDrawableFactory.java:253)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLDrawableFactory.getOrCreateSharedContext(GLDrawableFactory.java:275)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLDrawableFactory.getIsSharedContextAvailable(GLDrawableFactory.java:250)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLProfile.initProfilesForDeviceImpl(GLProfile.java:1251)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLProfile.initProfilesForDevice(GLProfile.java:1224)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLProfile.initProfilesForDefaultDevices(GLProfile.java:1192)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLProfile.access$000(GLProfile.java:66)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at javax.media.opengl.GLProfile$1.run(GLProfile.java:112)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at java.security.AccessController.doPrivileged(Native
</I>&gt;&gt;&gt;&gt;<i> Method)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> javax.media.opengl.GLProfile.initSingleton(GLProfile.java:110)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at com.jogamp.opencl.gl.CLGLTest.init(CLGLTest.java:70)
</I>&gt;&gt;&gt;&gt;<i>     [junit] at
</I>&gt;&gt;&gt;&gt;<i> com.jogamp.opencl.gl.CLGLTest.createContextTest(CLGLTest.java:102)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So there is another problem I don t identify...
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2011/1/13 Pol kennel &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">pol.kennel at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi Rick,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thank a lot for your detailed answers an to pay attention to my
</I>&gt;&gt;&gt;&gt;&gt;<i> problems !
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I finally resolved my problem with the OpenGL lib with your previous
</I>&gt;&gt;&gt;&gt;&gt;<i> mail : a link was not set correctly to the libGL.so file. I now have the
</I>&gt;&gt;&gt;&gt;&gt;<i> same output with *ldd /usr/lib/libGL.so *command. So I build correctly
</I>&gt;&gt;&gt;&gt;&gt;<i> C and OpenCL project, demos work well.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I also build correctly *gluegen*, *jogl*, *jocl* and *jocl-demos*projects (note that lines &quot;git clone
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://github.com/sgothel/gluegen.git">http://github.com/sgothel/gluegen.git</A> gluegen&quot; and &quot;git clone
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://github.com/sgothel/jogl-demos.git">http://github.com/sgothel/jogl-demos.git</A> jogl-demos&quot; are missing on
</I>&gt;&gt;&gt;&gt;&gt;<i> the <A HREF="http://www.imagejdev.org/setting-jocl-jogl-and-gluegen">http://www.imagejdev.org/setting-jocl-jogl-and-gluegen</A> page of
</I>&gt;&gt;&gt;&gt;&gt;<i> your tutorial).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> However, I stoped in building *joal* and *jogl-demos. *You probably
</I>&gt;&gt;&gt;&gt;&gt;<i> omit to precise the building of the *joal *project (but it could be
</I>&gt;&gt;&gt;&gt;&gt;<i> intended ?) ; when building *joal* with *ant* in the */joal/make/*directory I get an error :
</I>&gt;&gt;&gt;&gt;&gt;<i> &quot;*/home/pol/joal/make/build.xml:369: taskdef class
</I>&gt;&gt;&gt;&gt;&gt;<i> com.sun.gluegen.ant.GlueGenTask cannot be found*
</I>&gt;&gt;&gt;&gt;&gt;<i> * using the classloader
</I>&gt;&gt;&gt;&gt;&gt;<i> AntClassLoader[/home/pol/gluegen/build/gluegen.jar:/home/pol/gluegen/build/antlr.jar:/home/pol/gluegen/make/lib/antlr.jar]
</I>&gt;&gt;&gt;&gt;&gt;<i> *&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> (gluegen.jar and antlr.jar still in the right directory, is there
</I>&gt;&gt;&gt;&gt;&gt;<i> classpath to set for gluegen ?). In the *joal* readme file, I found
</I>&gt;&gt;&gt;&gt;&gt;<i> that OpenAL lib are need, so i downloaded  libopenal-dev/openal1 packets
</I>&gt;&gt;&gt;&gt;&gt;<i> from synaptic, and follow instructions saying to copy gluegen.properties and
</I>&gt;&gt;&gt;&gt;&gt;<i> joal.properties and jogl.properties into home directory but don't know how
</I>&gt;&gt;&gt;&gt;&gt;<i> to set correctly properties into this files.
</I>&gt;&gt;&gt;&gt;&gt;<i> *joal* building stills crash.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Regarding to *jogl-demos *when* *building with* ant *in *
</I>&gt;&gt;&gt;&gt;&gt;<i> ~/jogl-demos/make/*  i get 27 errors like :
</I>&gt;&gt;&gt;&gt;&gt;<i> [javac] Compiling 169 source files to
</I>&gt;&gt;&gt;&gt;&gt;<i> /home/pol/jogl-demos/build/classes
</I>&gt;&gt;&gt;&gt;&gt;<i> [javac] /home/pol/jogl-demos/src/demos/applets/GearsJOALApplet.java:11:
</I>&gt;&gt;&gt;&gt;&gt;<i> package com.jogamp.openal.util does not exist
</I>&gt;&gt;&gt;&gt;&gt;<i> [javac] import com.jogamp.openal.util.ALut;&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> [...]
</I>&gt;&gt;&gt;&gt;&gt;<i> I suppose it s due to joal, OpenAL again....
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> (How) Did you install it ?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On the other side, i have update the decon project from svn.
</I>&gt;&gt;&gt;&gt;&gt;<i> When running *SobelFilterExample.java *i get :
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *Retrieving test image...  *
</I>&gt;&gt;&gt;&gt;&gt;<i> *Starting iteration... 0*
</I>&gt;&gt;&gt;&gt;&gt;<i> *Local work size dimensions are max array size of*
</I>&gt;&gt;&gt;&gt;&gt;<i> *unavailable functions: [clCreateEventFromGLsyncKHR,
</I>&gt;&gt;&gt;&gt;&gt;<i> clIcdGetPlatformIDsKHR]*
</I>&gt;&gt;&gt;&gt;&gt;<i> *Discovered NVIDIA CUDA*
</I>&gt;&gt;&gt;&gt;&gt;<i> *com.jogamp.opencl.CLException$CLInvalidBinaryException: *
</I>&gt;&gt;&gt;&gt;&gt;<i> *CLDevice [id: 140626625730048 name: GeForce GTS 240 type: GPU
</I>&gt;&gt;&gt;&gt;&gt;<i> profile: FULL_PROFILE] build log:*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 104; error   : Instruction 'cvt'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 105; error   : Instruction 'cvt'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 106; error   : Instruction 'mul'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 107; error   : Instruction 'mul'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 108; error   : Instruction 'add'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 109; error   : Instruction 'sqrt'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 110; error   : Instruction 'cvt'
</I>&gt;&gt;&gt;&gt;&gt;<i> requires SM 1.3 or higher, or map_f64_to_f32 directive*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas fatal   : Ptx assembly aborted due to errors*
</I>&gt;&gt;&gt;&gt;&gt;<i> *error   : Ptx compilation failed: gpu='sm_11', device
</I>&gt;&gt;&gt;&gt;&gt;<i> code='cuModuleLoadDataEx_4'*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Considering profile 'compute_11' for gpu='sm_11' in
</I>&gt;&gt;&gt;&gt;&gt;<i> 'cuModuleLoadDataEx_4'*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Retrieving binary for 'cuModuleLoadDataEx_4', for gpu='sm_11',
</I>&gt;&gt;&gt;&gt;&gt;<i> usage mode='  '*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Considering profile 'compute_11' for gpu='sm_11' in
</I>&gt;&gt;&gt;&gt;&gt;<i> 'cuModuleLoadDataEx_4'*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Control flags for 'cuModuleLoadDataEx_4' disable search path*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Ptx binary found for 'cuModuleLoadDataEx_4',
</I>&gt;&gt;&gt;&gt;&gt;<i> architecture='compute_11'*
</I>&gt;&gt;&gt;&gt;&gt;<i> *: Ptx compilation for 'cuModuleLoadDataEx_4', for gpu='sm_11', ocg
</I>&gt;&gt;&gt;&gt;&gt;<i> options='  '*
</I>&gt;&gt;&gt;&gt;&gt;<i> *ptxas application ptx input, line 104; warning : Double is not
</I>&gt;&gt;&gt;&gt;&gt;<i> supported. Demoting to float*
</I>&gt;&gt;&gt;&gt;&gt;<i> *error: CL_INVALID_BINARY (man page:
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://www.khronos.org/opencl/sdk/1.1/docs/man/xhtml/errors.html">http://www.khronos.org/opencl/sdk/1.1/docs/man/xhtml/errors.html</A>)*
</I>&gt;&gt;&gt;&gt;&gt;<i> * at com.jogamp.opencl.CLException.newException(CLException.java:49)*
</I>&gt;&gt;&gt;&gt;&gt;<i> * at com.jogamp.opencl.CLProgram.build(CLProgram.java:335)*
</I>&gt;&gt;&gt;&gt;&gt;<i> * at com.jogamp.opencl.CLProgram.build(CLProgram.java:174)*
</I>&gt;&gt;&gt;&gt;&gt;<i> * at publication.SobelFilterExample.&lt;init&gt;(SobelFilterExample.java:66)
</I>&gt;&gt;&gt;&gt;&gt;<i> *
</I>&gt;&gt;&gt;&gt;&gt;<i> * at
</I>&gt;&gt;&gt;&gt;&gt;<i> publication.SobelFilterExample.runTest(SobelFilterExample.java:204)*
</I>&gt;&gt;&gt;&gt;&gt;<i> * at publication.SobelFilterExample.main(SobelFilterExample.java:155)*
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> So I suppose it s due to miss installation of JOAL.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I'll be so thankful if you can get me out of this deadlock.... I can
</I>&gt;&gt;&gt;&gt;&gt;<i> already see the light far away :)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Best regards,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>  Pol
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> PS : I'm often connected on google chat so if you prefer answer me
</I>&gt;&gt;&gt;&gt;&gt;<i> online please let me know you gmail address.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> 2011/1/12 Rick Lentz &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">rwlentz at wisc.edu</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi Pol,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>   Regarding your first question it is likely that the linker is
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> missing a reference to OpenGL.  My instructions were for a prior major
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> release of Ubuntu as well as a prior minor release of NVidia's CUDA SDK.  I
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> have updated the setup instructions to reflect the current versions as well
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> as tested against 64bit Mac and Linux OSs.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>   With regard to your specific problem, many of NVidia's examples
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> include use of OpenGL.  NVidia's documentation indicates that libgl.so is
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> referenced via static link to appear to be located in /usr/lib/libgl.so (per
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://developer.download.nvidia.com/compute/cuda/3_2_prod/drivers/docs/README_Linux.txtunder">http://developer.download.nvidia.com/compute/cuda/3_2_prod/drivers/docs/README_Linux.txtunder</A> Chapter 5, Listing of Installed Components, 4th bullet).  Chapter 5 of
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> NVidia's documentation goes on to describe the linking process that happens
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> when installing the developer drivers.  Perhaps this linking did not happen
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> when you installed the NVidia development drivers for Linux.  Did you get an
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> error during installation of the developer drivers reporting something in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> this regard?  Chapter 5 concludes on how to check a Linux dynamic library
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> using the command line tool ldd.  In this case, ldd /usr/lib/libGL.so
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Here is the output I get when running ldd /usr/lib/libGL.so
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> ldd /usr/lib/libGL.so
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> linux-vdso.so.1 =&gt;  (0x00007ffff33e6000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  libnvidia-tls.so.260.19.14 =&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /usr/lib/tls/libnvidia-tls.so.260.19.14 (0x00007fc82b46b000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> libnvidia-glcore.so.260.19.14 =&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> /usr/lib/libnvidia-glcore.so.260.19.14 (0x00007fc82987f000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  libX11.so.6 =&gt; /usr/lib/libX11.so.6 (0x00007fc829549000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> libXext.so.6 =&gt; /usr/lib/libXext.so.6 (0x00007fc829337000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  libc.so.6 =&gt; /lib/libc.so.6 (0x00007fc828f93000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> libdl.so.2 =&gt; /lib/libdl.so.2 (0x00007fc828d8f000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  libm.so.6 =&gt; /lib/libm.so.6 (0x00007fc828b0c000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> libxcb.so.1 =&gt; /usr/lib/libxcb.so.1 (0x00007fc8288ef000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  /lib64/ld-linux-x86-64.so.2 (0x00007fc82b974000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> libXau.so.6 =&gt; /usr/lib/libXau.so.6 (0x00007fc8286eb000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>  libXdmcp.so.6 =&gt; /usr/lib/libXdmcp.so.6 (0x00007fc8284e5000)
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> If the libGL.so file is present and linked property, you can double
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> check for inclusion of libGL.so path by ensuring its path in your bash
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> profile under the variable LD_LIBRARY_PATH.  NVidia asks for the installer
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> to add these additions in the Linux install documents.  Here is the line in
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> my .bashrc file that allows the linker to find libGL.so (specifically the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> &quot;:/usr/lib&quot; portion of this line):
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> export
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> LD_LIBRARY_PATH=&quot;/usr/lib:/usr/local/cuda/lib64:/usr/local/cuda/lib:/usr/lib32:/usr/local/lib&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I also had issues compiling the most recent version of NVidia's C
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> samples.  I reflected a work around in the updated web documents (see the
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> bottom of: <A HREF="http://www.imagejdev.org/setting-host-machine">http://www.imagejdev.org/setting-host-machine</A> ).
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Please let me know if you have any more questions or difficulties with
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> the ImageJ OpenCL plugin examples.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Sincerely,
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Rick Lentz
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> On Tue, Jan 11, 2011 at 4:20 AM, Pol kennel &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">pol.kennel at gmail.com</A>&gt;wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> I am a PhD student working on image segmentation by texture analysis
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> with an application on remote sensing images (Montpellier, France). So i
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> have to process very large images (e.g. 15000*8000).
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> All methods I developed are formed as plugin under ImageJ API that I
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> really like, but not yet applicable on this sort of image.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Recently, I tough to use finally my graphic card (Nvidia GTS240)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> which I think will help me a lot in my process. So after several search on
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> the web, I found this &lt;<A HREF="http://imagejdev.org/plugins/opencl-plugin">http://imagejdev.org/plugins/opencl-plugin</A>&gt; (OpenCL
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> plugin you wrote) great ! it's precisely what i need.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> So I decided to follow your tutorial to setup the environment but met
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> some problems... :
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    1. When launching makefile in &quot;~/NVIDIA_GPU_Computing_SDK/C/ &quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    and &quot;~/NVIDIA_GPU_Computing_SDK/OpenCL&quot; I had following error &quot;/usr/bin/ld:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    cannot find -lGL&quot;. Plus, I dont have the same demo files, maybe because of
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    version ? (cudatoolkit_3.2.16_linux_64, gpucomputingsdk_3.2.16 and
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    devdriver_3.2_linux_64_260.19.26 on Ubuntu 10.10). On the other side demos I
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    have work perfectly (ooclDCT8x8, oclHistogram,...)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    2. *Main problem is that the repository you indicate to get the
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    example project (<A HREF="http://www.loci.wisc.edu/svn/decon">http://www.loci.wisc.edu/svn/decon</A>) doesn't
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    work... *&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    <A HREF="http://dev.loci.wisc.edu/svn/software/branches/maven/projects/opencl-decon">http://dev.loci.wisc.edu/svn/software/branches/maven/projects/opencl-decon</A>&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    repository works well. Is is the same ?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Thanks a lot if you find time to answer me (and sorry for my
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> english).
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> And thanks you for work you are doing on ImageJ.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Best regards,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> *
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> *
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Pol Kennel
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;&gt;<i> Pol Kennel
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> Pol Kennel
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Pol Kennel
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Pol Kennel
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://imagej.net/pipermail/imagej-devel/attachments/20110115/850a582f/attachment.html">http://imagej.net/pipermail/imagej-devel/attachments/20110115/850a582f/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dell-remote-virtualisation.pdf
Type: application/pdf
Size: 511417 bytes
Desc: not available
URL: &lt;<A HREF="http://imagej.net/pipermail/imagej-devel/attachments/20110115/850a582f/attachment.pdf">http://imagej.net/pipermail/imagej-devel/attachments/20110115/850a582f/attachment.pdf</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000296.html">[ImageJ-devel] Biweekly milestone meeting on Tuesday Jan. 18
</A></li>
	<LI>Next message: <A HREF="000300.html">[ImageJ-devel] OpenCL plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#299">[ date ]</a>
              <a href="thread.html#299">[ thread ]</a>
              <a href="subject.html#299">[ subject ]</a>
              <a href="author.html#299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
