<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] get current image when implementing a Command	interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20get%20current%20image%20when%20implementing%20a%20Command%0A%09interface&In-Reply-To=%3CCAPOrs_1-_XTWvwo0qy8SO1BBfo2G1ududYgqX%2B0M1dcuuTRaQQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002185.html">
   <LINK REL="Next"  HREF="002187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] get current image when implementing a Command	interface</H1>
    <B>Carn&#235; Draug</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20get%20current%20image%20when%20implementing%20a%20Command%0A%09interface&In-Reply-To=%3CCAPOrs_1-_XTWvwo0qy8SO1BBfo2G1ududYgqX%2B0M1dcuuTRaQQ%40mail.gmail.com%3E"
       TITLE="[ImageJ-devel] get current image when implementing a Command	interface">carandraug+dev at gmail.com
       </A><BR>
    <I>Thu Aug 14 12:18:21 CDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="002185.html">[ImageJ-devel] latest update broke jython &quot;import os&quot;
</A></li>
        <LI>Next message: <A HREF="002187.html">[ImageJ-devel] get current image when implementing a Command	interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2186">[ date ]</a>
              <a href="thread.html#2186">[ thread ]</a>
              <a href="subject.html#2186">[ subject ]</a>
              <a href="author.html#2186">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm trying to write an ImageJ plugin but I'm failing at the most basic
step which I thought would be getting the current image (last selected
image). I am using the @Parameter annotation to get a Dataset and
implementing a Command interface but I'm unsure of what it's
happening. Using:

  @Parameter
  private Dataset dataset;

as suggested on the tutorials [1], seems to use what the image was
when opened. After reading the javadocs [2], I have tried to set
persist to false but go no change.

Please, consider my very small case which should simply print the
image data type [3] (it requires closing the text window after each
call). I open the sample image &quot;blobs&quot; and the plugin will print
&quot;8-bit&quot; (expected). Then I open the sample &quot;CT&quot; and it prints &quot;16-bit&quot;
(expected). I then select the blobs image, run it again but get
&quot;16-bit&quot; (that was a surprise, I guess it's choosing the last opened
image). So I change the CT to 8-bit using &quot;Edit &gt; Type&quot;, run the
plugin again but still get back &quot;16-bit&quot; (uh! I have no idea of what's
going on).

I'm probably doing something very stupid as I'm still getting to grips
with java. Could anyone explain to me how to get the current image? I
did found the ImageJ1 getCurrentImage() method but I'm trying to use
ImgLib2 to later on get a RandomAccessible and implement some
N-dimensional algorithms.

Thank you,
Carn&#235;

[1] <A HREF="https://github.com/imagej/imagej-tutorials/blob/master/simple-commands/src/main/java/ComputeStats.java">https://github.com/imagej/imagej-tutorials/blob/master/simple-commands/src/main/java/ComputeStats.java</A>
[2] <A HREF="http://jenkins.imagej.net/job/SciJava-common-javadoc/javadoc/org/scijava/plugin/Parameter.html">http://jenkins.imagej.net/job/SciJava-common-javadoc/javadoc/org/scijava/plugin/Parameter.html</A>
[3] <A HREF="http://pastebin.com/ZVt1YsJ0">http://pastebin.com/ZVt1YsJ0</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002185.html">[ImageJ-devel] latest update broke jython &quot;import os&quot;
</A></li>
	<LI>Next message: <A HREF="002187.html">[ImageJ-devel] get current image when implementing a Command	interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2186">[ date ]</a>
              <a href="thread.html#2186">[ thread ]</a>
              <a href="subject.html#2186">[ subject ]</a>
              <a href="author.html#2186">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
