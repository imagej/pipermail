<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] Problems running Versatile Wand in batch mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20Problems%20running%20Versatile%20Wand%20in%20batch%20mode&In-Reply-To=%3CCADN69yn0TVK3uBqs0%2BLhOSzUyaqo-2uMZCT5_rxE-7Rg-%2Bq%3DxQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002665.html">
   <LINK REL="Next"  HREF="002668.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] Problems running Versatile Wand in batch mode</H1>
    <B>Curtis Rueden</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20Problems%20running%20Versatile%20Wand%20in%20batch%20mode&In-Reply-To=%3CCADN69yn0TVK3uBqs0%2BLhOSzUyaqo-2uMZCT5_rxE-7Rg-%2Bq%3DxQ%40mail.gmail.com%3E"
       TITLE="[ImageJ-devel] Problems running Versatile Wand in batch mode">ctrueden at wisc.edu
       </A><BR>
    <I>Fri Aug 21 22:35:17 CDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002665.html">[ImageJ-devel] (headless) command execution
</A></li>
        <LI>Next message: <A HREF="002668.html">[ImageJ-devel] RegionOfInterest vs Region
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2666">[ date ]</a>
              <a href="thread.html#2666">[ thread ]</a>
              <a href="subject.html#2666">[ subject ]</a>
              <a href="author.html#2666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

Apologies for the long delay in follow up.

&gt;<i> Concerning the 'Compile&amp;Run' command, this is EXTREMELY handy and it
</I>&gt;<i> would be a major step backwards if this is not supported any more!
</I>
Just wanted to let you know that we are indeed planning to work on
restoring the Compile &amp; Run command in ImageJ2:

   <A HREF="https://github.com/imagej/imagej-ui-swing/issues/48">https://github.com/imagej/imagej-ui-swing/issues/48</A>

We will have to address several related issues surrounding the javac
compiler, javax.tools, and the switch to Java 8. (E.g., right now, you
cannot develop Java code in the Script Editor when running with Java 7 or
Java 8.) The goal is to make (a version of) Compile &amp; Run work again as
part of that effort.

Timeline might not be till first half of next year, but it is on the radar.

Regards,
Curtis

On Fri, May 29, 2015 at 4:02 AM, Michael Schmid &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>&gt;
wrote:

&gt;<i> Hi Curtis,
</I>&gt;<i>
</I>&gt;<i> Thank you for the additional information.
</I>&gt;<i>
</I>&gt;<i> It seems that Avital's problem was related to compiling, not to the
</I>&gt;<i> patches of the IJ1 code in Fiji.
</I>&gt;<i>
</I>&gt;<i> Concerning the 'Compile&amp;Run' command, this is EXTREMELY handy and it would
</I>&gt;<i> be a major step backwards if this is not supported any more!
</I>&gt;<i> If I get the java sources of a plugin, and it does not work exactly as I
</I>&gt;<i> want, I can quickly try any changes that come into my mind or insert
</I>&gt;<i> debugging code, try/catch statements, etc., and with a single click on
</I>&gt;<i> Compile&amp;Run (and the RETURN key to accept the same filename as before) I am
</I>&gt;<i> already testing it on an image.  This is independent of any programming
</I>&gt;<i> environment, I can do it on any computer anywhere in a lab, or on the
</I>&gt;<i> laptop of a colleague of mine who has a problem and asks me for help.  And
</I>&gt;<i> there won't be any automatic update reverting it to the published version.
</I>&gt;<i>
</I>&gt;<i> Also, for publishing a plugin, it's simpler to provide the java code on a
</I>&gt;<i> web page with the description than preparing an ImageJ update site in
</I>&gt;<i> addition.  I can also send experimental plugin code to others by email,
</I>&gt;<i> carry it around on a USB stick, etc.
</I>&gt;<i> All this would be gone without Compile&amp;Run!
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Michael
</I>&gt;<i> ________________________________________________________________
</I>&gt;<i> On May 28, 2015, at 20:42, Curtis Rueden wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi Michael,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [Added the imagej-devel mailing list to CC, since this discussion may
</I>&gt;<i> interest other ImageJ plugin developers.]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; A quick search for PlugInFilterRunner in the ij1-patcher seems to
</I>&gt;<i> &gt; &gt; indicate that the PlugInFilterRunner is not patched.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There is another project on top of ij1-patcher that does the bulk of the
</I>&gt;<i> actual patching for ImageJ2:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     <A HREF="https://github.com/imagej/imagej-legacy">https://github.com/imagej/imagej-legacy</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And it does have logic that affects PlugInFilters:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/IJ1Helper.java#L591-L621">https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/IJ1Helper.java#L591-L621</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But at first glance, this is only used for the Script Editor's Run
</I>&gt;<i> command in case the Java code being run is a PlugInFilter:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/LegacyJavaRunner.java#L54">https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/LegacyJavaRunner.java#L54</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I apologize that I will not have time to dig into this issue more over
</I>&gt;<i> the summer -- but I'm insanely busy with work on the ImageJ Common data
</I>&gt;<i> model and ImageJ OPS and SCIFIO APIs, ImageJ-OMERO integration, IT
</I>&gt;<i> infrastructure resources and Fiji plugin maintenance, upcoming Madison
</I>&gt;<i> ImageJ conference planning, paper writing, etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Backwards compatibility with ImageJ1 is extremely challenging,
</I>&gt;<i> especially as things continue to evolve -- e.g., the major changes to how
</I>&gt;<i> Java works on OS X, and the breaking changes of Java 8. The best we can do
</I>&gt;<i> right now is to prioritize work that critically affects a large number of
</I>&gt;<i> ImageJ users, where no easy workaround is possible. In the case of
</I>&gt;<i> compiling Java plugins, there are several ways of doing it that do not
</I>&gt;<i> require &quot;Compile and Run&quot; and similar, so for now that's what I'll
</I>&gt;<i> recommend. I hope that plugin developers will make installation easy for
</I>&gt;<i> their users by creating ImageJ update sites, rather than shipping bare
</I>&gt;<i> .java files.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Curtis
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; P.S. When searching for code, you might try <A HREF="http://search.imagej.net/">http://search.imagej.net/</A>
</I>&gt;<i> and click the GitHub button.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Thu, May 21, 2015 at 3:01 PM, Michael Schmid &lt;<A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Hi Curtis,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; thank you!
</I>&gt;<i> &gt; My fault was looking at the fiji, not the imagej repository.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; A quick search for PlugInFilterRunner in the ij1-patcher seems to
</I>&gt;<i> indicate that the PlugInFilterRunner is not patched.
</I>&gt;<i> &gt; I agree that the ij1-patcher is not easy too understand, and I did not
</I>&gt;<i> find anything that looks like it could cause the problem of Avital.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Michael
</I>&gt;<i> &gt; ________________________________________________________________
</I>&gt;<i> &gt; Michael Schmid                    email: <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>
</I>&gt;<i> &gt; Institut f&#252;r Angewandte Physik, Technische Universit&#228;t Wien
</I>&gt;<i> &gt; Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
</I>&gt;<i> &gt; Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
</I>&gt;<i> &gt; ________________________________________________________________
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On May 21, 2015, at 21:23, Curtis Rueden wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi Michael,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [I must admit, I know nothing about how Fiji modifies ImageJ; in a
</I>&gt;<i> &gt; &gt; &gt; quick search I did not find anything on fiji.sc or the github]
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The relevant project is:
</I>&gt;<i> &gt; &gt; <A HREF="https://github.com/imagej/ij1-patcher/">https://github.com/imagej/ij1-patcher/</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; But digging into it is a substantial endeavor.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; Curtis
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Thu, May 21, 2015 at 1:35 PM, Michael Schmid &lt;
</I>&gt;<i> <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hi Wayne,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; thank you for finding this out!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It must be a strange Fiji bug! When called like this, the Versatile
</I>&gt;<i> Wand behaves like an ordinary ExtendedPlugInFilter. It uses the ImagePlus
</I>&gt;<i> passed to the showDialog method, which comes directly from
</I>&gt;<i> WindowManager.getCurrentImage() executed by the PlugInFilterRunner.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; [I must admit, I know nothing about how Fiji modifies ImageJ; in a
</I>&gt;<i> quick search I did not find anything on fiji.sc or the github]
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Best regards,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Michael
</I>&gt;<i> &gt; &gt; ________________________________________________________________
</I>&gt;<i> &gt; &gt; Michael Schmid                    email: <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>
</I>&gt;<i> &gt; &gt; Institut f&#252;r Angewandte Physik, Technische Universit&#228;t Wien
</I>&gt;<i> &gt; &gt; Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
</I>&gt;<i> &gt; &gt; Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
</I>&gt;<i> &gt; &gt; ________________________________________________________________
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On May 21, 2015, at 18:54, Rasband, Wayne (NIH/NIMH) [E] wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Dear Avital,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; This is a Fiji issue. You should be able to work around it by
</I>&gt;<i> deleting the file &#8220;Versatile_Wand.java&quot; (location is shown in Console error
</I>&gt;<i> messages), copying Versatile_Wand.class into the Fiji.app/plugins folder,
</I>&gt;<i> and restarting Fiji. I have attached a copy of Versatile_Wand.class or you
</I>&gt;<i> can download it from the Versatile Wand webpage.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Best regards,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; -wayne
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; On May 21, 2015, at 3:03 AM, Avital Steinberg &lt;
</I>&gt;<i> <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">steinbergavital at GMAIL.COM</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Hi Wayne,
</I>&gt;<i> &gt; &gt; &gt;&gt; When I run your code (in which you create 2 images), I get an error
</I>&gt;<i> message - ROI manager, &quot;the active image does not have a selection&quot;. Also,
</I>&gt;<i> it didn't form an ROI - the ROI manager is empty.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; There is also a console window that shows red warnings - I've had
</I>&gt;<i> it for a long time, ever since I upgraded imageJ. This console shows up
</I>&gt;<i> both on my mac and also on my Linux machine. I don't remember when it first
</I>&gt;<i> showed up. It didn't bother me, since everything was working then.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Are the attached warning messages related to the problem?
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Thanks,
</I>&gt;<i> &gt; &gt; &gt;&gt; Avital
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; On Wed, May 20, 2015 at 6:42 PM, Rasband, Wayne (NIH/NIMH) [E] &lt;
</I>&gt;<i> <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">rasbandw at mail.nih.gov</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt; Dear Avital,
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; The following version of your test macro creates a selection in the
</I>&gt;<i> saved image.
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; Best regards,
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; -wayne
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;   setBatchMode(true);
</I>&gt;<i> &gt; &gt; &gt;&gt;   newImage(&quot;Untitled&quot;, &quot;8-bit ramp&quot;, 500, 500, 1);
</I>&gt;<i> &gt; &gt; &gt;&gt;   image1ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;   newImage(&quot;Untitled&quot;, &quot;8-bit ramp&quot;, 500, 500, 1);
</I>&gt;<i> &gt; &gt; &gt;&gt;   image2ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;   selectImage(image1ID);
</I>&gt;<i> &gt; &gt; &gt;&gt;   if(isActive(image1ID))
</I>&gt;<i> &gt; &gt; &gt;&gt;      print(&quot;The first image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   else
</I>&gt;<i> &gt; &gt; &gt;&gt;      print(&quot;The first image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   if (isActive(image2ID))
</I>&gt;<i> &gt; &gt; &gt;&gt;      print(&quot;The second image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   else
</I>&gt;<i> &gt; &gt; &gt;&gt;      print(&quot;The second image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   run(&quot;Gaussian Blur...&quot;, &quot;sigma=2&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   run(&quot;Set Scale...&quot;, &quot;distance=0&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   run(&quot;Versatile Wand&quot;, &quot;value=60 color=-100 gradient=10
</I>&gt;<i> connectedness=8-connected x=2 y=2 do&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   run(&quot;ROI Manager...&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   roiManager(&quot;Add&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;   saveAs(&quot;tiff&quot;, getDirectory(&quot;home&quot;)+&quot;test.tif&#8221;)
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; On May 20, 2015, at 5:35 AM, Avital Steinberg &lt;
</I>&gt;<i> <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">steinbergavital at GMAIL.COM</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; Thanks, but the problem isn't solved. Can anyone else check if
</I>&gt;<i> they're
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; having similar problems running this code? Does this code create a
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; selection in the saved image also for you?
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; setBatchMode(true);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; open();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; image1ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; open();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; image2ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; selectImage(image1ID);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; if(isActive(image1ID)){
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;   print(&quot;The first image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; else {
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;   print(&quot;The first image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; if(isActive(image2ID)){
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;   print(&quot;The second image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; else {
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;   print(&quot;The second image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; makePoint(1854, 726);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; run(&quot;Gaussian Blur...&quot;, &quot;sigma=2&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; run(&quot;Set Scale...&quot;, &quot;distance=0&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; run(&quot;Versatile Wand&quot;, &quot;value=60 color=-100 gradient=10
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; connectedness=8-connected x=2 y=2 do&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; run(&quot;ROI Manager...&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; roiManager(&quot;Add&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; saveAs(&quot;Tiff&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; I am using ImageJ 1.49t7, which came with Java 1.6.0_065 (64 bit).
</I>&gt;<i> I am
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; running it on a mac, but I had the same problems also on a Linux
</I>&gt;<i> machine
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; with ImageJ 1.49s and java 1.6.0_24.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; MakePoint isn't needed, but it's besides the point, since the bug
</I>&gt;<i> has
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; nothing to do with it and exists also without it.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; Thanks,
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; Avital
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; On Tue, May 19, 2015 at 6:25 PM, Michael Schmid &lt;
</I>&gt;<i> <A HREF="http://imagej.net/mailman/listinfo/imagej-devel">schmid at iap.tuwien.ac.at</A>&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; Hi Avital,
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; sorry, I can't reproduce the problem. Your macro works; it blurs
</I>&gt;<i> the first
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; image and does the wand selection on it. I also get the selection
</I>&gt;<i> in the
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; ROI Manager.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; I tried with both 8-bit grayscale as well as RGB images.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; What I don't understand is the &quot;makePoint(1854, 726)&quot; command;
</I>&gt;<i> Gaussian
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; Blur does not care about point selections. So it blurs the whole
</I>&gt;<i> image.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; I am using ImageJ 1.49u4, Java 1.6.0_45.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; Michael
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; ________________________________________________________________
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; On May 19, 2015, at 17:01, Avital Steinberg wrote:
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; Hi,
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; I'm trying to use Versatile Wand in batch mode. The following
</I>&gt;<i> macro works
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; well in batch mode:
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; setBatchMode(true);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; open();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; makePoint(1854, 726);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Gaussian Blur...&quot;, &quot;sigma=2&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Set Scale...&quot;, &quot;distance=0&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Versatile Wand&quot;, &quot;value=60 color=-100 gradient=10
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; connectedness=8-connected x=2 y=2 do&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;ROI Manager...&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; roiManager(&quot;Add&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; saveAs(&quot;Tiff&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; However - when I try to work with multiple images, select the
</I>&gt;<i> active
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; image
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; and then use the Versatile Wand, no selection is created:
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; setBatchMode(true);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; open();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; image1ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; open();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; image2ID = getImageID();
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; selectImage(image1ID);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; if(isActive(image1ID)){
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;  print(&quot;The first image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; else {
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;  print(&quot;The first image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; if(isActive(image2ID)){
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;  print(&quot;The second image is active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; else {
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;  print(&quot;The second image isn't active&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; }
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; makePoint(1854, 726);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Gaussian Blur...&quot;, &quot;sigma=2&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Set Scale...&quot;, &quot;distance=0&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;Versatile Wand&quot;, &quot;value=60 color=-100 gradient=10
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; connectedness=8-connected x=2 y=2 do&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; run(&quot;ROI Manager...&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; roiManager(&quot;Add&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; saveAs(&quot;Tiff&quot;);
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; Why wouldn't this script work? Only one image is active.
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; Thank you,
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;&gt; Avital
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; --
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt; ImageJ mailing list: <A HREF="http://imagej.nih.gov/ij/list.html">http://imagej.nih.gov/ij/list.html</A>
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; --
</I>&gt;<i> &gt; &gt; &gt;&gt;&gt; ImageJ mailing list: <A HREF="http://imagej.nih.gov/ij/list.html">http://imagej.nih.gov/ij/list.html</A>
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; &gt;&gt; &lt;OutputWindowsWaynesCode.jpg&gt;&lt;ConsoleWindowRedWarnings.jpg&gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &lt;Versatile_Wand.class&gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://imagej.net/pipermail/imagej-devel/attachments/20150821/31ec36fd/attachment-0001.html">http://imagej.net/pipermail/imagej-devel/attachments/20150821/31ec36fd/attachment-0001.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002665.html">[ImageJ-devel] (headless) command execution
</A></li>
	<LI>Next message: <A HREF="002668.html">[ImageJ-devel] RegionOfInterest vs Region
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2666">[ date ]</a>
              <a href="thread.html#2666">[ thread ]</a>
              <a href="subject.html#2666">[ subject ]</a>
              <a href="author.html#2666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
