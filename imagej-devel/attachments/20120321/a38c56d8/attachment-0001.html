<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi&nbsp;Tobias,&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;great!&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Just&nbsp;one&nbsp;question,&nbsp;should&nbsp;we&nbsp;always&nbsp;create&nbsp;the&nbsp;instance&nbsp;in&nbsp;each&nbsp;Img&nbsp;like&nbsp;ArrayImg&nbsp;from&nbsp;the&nbsp;beginning&nbsp;or&nbsp;maybe&nbsp;just&nbsp;instantiate&nbsp;it&nbsp;once&nbsp;equalIterationOrder&nbsp;is&nbsp;called&nbsp;the&nbsp;first&nbsp;time?&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;would&nbsp;reduce&nbsp;the&nbsp;initial&nbsp;overhead&nbsp;of&nbsp;each&nbsp;Img,&nbsp;just&nbsp;imagine&nbsp;you&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;small&nbsp;ones&nbsp;...&amp;nbsp;Because&nbsp;I&nbsp;guess&nbsp;there&nbsp;are&nbsp;a&nbsp;lot&nbsp;of&nbsp;examples&nbsp;where&nbsp;this&nbsp;method&nbsp;will&nbsp;never&nbsp;be&nbsp;called.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;color:&nbsp;rgb(119,&nbsp;119,&nbsp;119);&nbsp;&quot;&gt;@Override&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#7f2a67&quot;&gt;public&lt;/span&gt;&nbsp;Object&nbsp;iterationOrder()&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;{&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;if&nbsp;(&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(27,&nbsp;42,&nbsp;201);&nbsp;&quot;&gt;iterationOrder&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&gt;&amp;nbsp;==&nbsp;null&nbsp;)&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(27,&nbsp;42,&nbsp;201);&nbsp;&quot;&gt;iterationOrder&lt;/span&gt;&amp;nbsp;=&amp;nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#7f2a67&quot;&gt;new&lt;/span&gt;&nbsp;FlatIterationOrder(&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#7f2a67&quot;&gt;this&lt;/span&gt;&nbsp;);&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;color:&nbsp;rgb(27,&nbsp;42,&nbsp;201);&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#7f2a67&quot;&gt;return&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;&nbsp;&lt;/span&gt;iterationOrder&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Steffi&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Mar&nbsp;21,&nbsp;2012,&nbsp;at&nbsp;13:27&nbsp;,&nbsp;Tobias&nbsp;Pietzsch&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;cleaned&nbsp;up&nbsp;the&nbsp;&quot;equal&nbsp;iteration&nbsp;order&quot;&nbsp;mechanism.&lt;br&gt;&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;end,&nbsp;I&nbsp;did&nbsp;not&nbsp;use&nbsp;an&nbsp;interface&nbsp;&quot;FlatIterationOrder&quot;.&lt;br&gt;The&nbsp;reason&nbsp;was&nbsp;that&nbsp;this&nbsp;interface&nbsp;can&nbsp;not&nbsp;be&nbsp;propagated&nbsp;through&nbsp;wrapper&lt;br&gt;classes&nbsp;(like&nbsp;ImgPlus).&nbsp;Even&nbsp;though&nbsp;ImgPlus.equalIterationOrder(&nbsp;f&nbsp;)&lt;br&gt;propagates&nbsp;to&nbsp;its&nbsp;wrapped&nbsp;img&nbsp;like&lt;br&gt;&lt;br&gt;&nbsp;&amp;nbsp;return&nbsp;img.equalIterationOrder(&nbsp;f&nbsp;);&lt;br&gt;&lt;br&gt;this&nbsp;breaks&nbsp;when&nbsp;you&nbsp;try&nbsp;to&nbsp;compare&nbsp;the&nbsp;iteration&nbsp;orders&nbsp;of&nbsp;two&nbsp;ImgPlus&lt;br&gt;for&nbsp;instance.&nbsp;The&nbsp;first&nbsp;solution&nbsp;to&nbsp;this&nbsp;would&nbsp;be&nbsp;to&lt;br&gt;&lt;br&gt;&nbsp;&amp;nbsp;return&nbsp;f.equalIterationOrder(&nbsp;img&nbsp;);&lt;br&gt;&lt;br&gt;and&nbsp;assume&nbsp;f&nbsp;does&nbsp;the&nbsp;same&nbsp;and&nbsp;you&nbsp;propagate&nbsp;alternately&nbsp;down&nbsp;to&nbsp;the&lt;br&gt;un-wrapped&nbsp;IterableIntervals.&nbsp;However,&nbsp;you&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;super&lt;br&gt;careful&nbsp;not&nbsp;to&nbsp;provoke&nbsp;infinite&nbsp;loops&nbsp;in&nbsp;this&nbsp;way.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;So&nbsp;instead&nbsp;of&nbsp;this,&nbsp;I&nbsp;introduced&nbsp;a&nbsp;new&nbsp;method&nbsp;in&nbsp;the&lt;br&gt;IterableRealInterval&nbsp;interface:&lt;br&gt;&lt;br&gt;&nbsp;&amp;nbsp;public&nbsp;Object&nbsp;iterationOrder()&lt;br&gt;&lt;br&gt;It&nbsp;is&nbsp;supposed&nbsp;to&nbsp;return&nbsp;an&nbsp;Object&nbsp;that&nbsp;represents&nbsp;the&nbsp;particular&lt;br&gt;iteration&nbsp;order.&nbsp;Comparison&nbsp;of&nbsp;iteration&nbsp;orders&nbsp;is&nbsp;via&nbsp;Object.equals().&lt;br&gt;That&nbsp;is,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;find&nbsp;whether&nbsp;IterableIntervals&nbsp;A&nbsp;and&nbsp;B&nbsp;have&lt;br&gt;equal&nbsp;iteration&nbsp;order,&nbsp;you&nbsp;ask&nbsp;whether&lt;br&gt;&lt;br&gt;&nbsp;&amp;nbsp;A.iterationOrder().equals(B.iterationOrder()).&lt;br&gt;&lt;br&gt;equalIterationOrder()&nbsp;is&nbsp;deprecated.&nbsp;I&nbsp;still&nbsp;changed&nbsp;it&nbsp;everywhere&nbsp;to&lt;br&gt;have&nbsp;it&nbsp;still&nbsp;work&nbsp;but&nbsp;some&nbsp;day&nbsp;we&nbsp;should&nbsp;remove&nbsp;it&nbsp;to&nbsp;keep&nbsp;the&lt;br&gt;IterableRealInterval&nbsp;interface&nbsp;as&nbsp;small&nbsp;as&nbsp;possible.&lt;br&gt;&lt;br&gt;So,&nbsp;FlatIterationOrder&nbsp;is&nbsp;a&nbsp;class&nbsp;now.&nbsp;If&nbsp;you&nbsp;support&nbsp;flat&nbsp;iteration&lt;br&gt;order,&nbsp;then&nbsp;your&nbsp;iterationOrder()&nbsp;method&nbsp;should&nbsp;return&nbsp;a&lt;br&gt;FlatIterationOrder&nbsp;instance&nbsp;constructed&nbsp;with&nbsp;your&nbsp;Interval.&lt;br&gt;&lt;br&gt;&lt;br&gt;best&nbsp;regards,&lt;br&gt;Tobias&lt;br&gt;&lt;br&gt;On&nbsp;03/13/2012&nbsp;02:40&nbsp;PM,&nbsp;Albert&nbsp;Cardona&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;El&nbsp;13&nbsp;de&nbsp;març&nbsp;de&nbsp;2012&nbsp;9:39,&nbsp;Albert&nbsp;Cardona&amp;lt;&lt;a&nbsp;href=&quot;mailto:sapristi@gmail.com&quot;&gt;sapristi@gmail.com&lt;/a&gt;&amp;gt;&nbsp;&amp;nbsp;ha&nbsp;escrit:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;ImgLib2'ers:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Instead&nbsp;of&nbsp;this:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;(&nbsp;IterableRandomAccessibleInterval.class.isInstance(&nbsp;f&nbsp;)&nbsp;||&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;ArrayImg.class.isInstance(&nbsp;f&nbsp;)&nbsp;||&nbsp;ListImg.class.isInstance(&nbsp;f&nbsp;)&nbsp;)&nbsp;)&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Why&nbsp;not&nbsp;create&nbsp;the&nbsp;empty&nbsp;interface&nbsp;EqualIterationOrder&nbsp;and&nbsp;make&nbsp;all&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;the&nbsp;above&nbsp;classes&nbsp;implement&nbsp;it?&nbsp;This&nbsp;way&nbsp;code&nbsp;will&nbsp;be&nbsp;future-proof,&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;and&nbsp;flexible&nbsp;to&nbsp;user-defined&nbsp;new&nbsp;Img&nbsp;classes.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Albert&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Too&nbsp;early&nbsp;in&nbsp;the&nbsp;morning.&nbsp;I&nbsp;meant&nbsp;a&nbsp;new&nbsp;interface&nbsp;&quot;FlatIterationOrder&quot;.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Albert&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagej.net&quot;&gt;ImageJ-devel@imagej.net&lt;/a&gt;&lt;br&gt;http://imagej.net/mailman/listinfo/imagej-devel&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
