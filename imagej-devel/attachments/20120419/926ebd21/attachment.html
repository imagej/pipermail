<tt>
Hi&nbsp;all,&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
Surprising!&nbsp; That&nbsp;means&nbsp;that&nbsp;the&nbsp;runtime&nbsp;check&nbsp;is&nbsp;somehow&nbsp;erased&nbsp;by&nbsp;the&lt;br&gt;<br>
compiler---cool.&nbsp; Probably&nbsp;a&nbsp;special&nbsp;optimization&nbsp;rule&nbsp;for&nbsp;the&nbsp;oh&nbsp;so&lt;br&gt;<br>
common&nbsp;&#39;constructors&nbsp;with&nbsp;a&nbsp;boolean&#39;.&nbsp; Ok---if&nbsp;it&nbsp;is&nbsp;like&nbsp;that&nbsp;then&nbsp;I&lt;br&gt;<br>
have&nbsp;no&nbsp;concerns&nbsp;going&nbsp;for&nbsp;your&nbsp;suggestion.&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;OK,&nbsp;I&nbsp;updated&nbsp;the&nbsp;code:&lt;br&gt;   &nbsp;&lt;a&nbsp;href=&quot;https://github.com/imagej/imglib/commit/5239120f&quot;&gt;https://github.com/imagej/imglib/commit/5239120f&lt;/a&gt;&lt;br&gt;&lt;br&gt;Feel&nbsp;free&nbsp;to&nbsp;revert&nbsp;it&nbsp;if&nbsp;these&nbsp;changes&nbsp;cause&nbsp;any&nbsp;problems.&lt;br&gt;<br>
<br>
&lt;br&gt;Regards,&lt;br&gt;Curtis&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;22,&nbsp;2012&nbsp;at&nbsp;4:52&nbsp;PM,&nbsp;Stephan&nbsp;Saalfeld&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:saalfeld@mpi-cbg.de&quot;&gt;saalfeld@mpi-cbg.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
Surprising!&nbsp; That&nbsp;means&nbsp;that&nbsp;the&nbsp;runtime&nbsp;check&nbsp;is&nbsp;somehow&nbsp;erased&nbsp;by&nbsp;the&lt;br&gt;<br>
compiler---cool.&nbsp; Probably&nbsp;a&nbsp;special&nbsp;optimization&nbsp;rule&nbsp;for&nbsp;the&nbsp;oh&nbsp;so&lt;br&gt;<br>
common&nbsp;&#39;constructors&nbsp;with&nbsp;a&nbsp;boolean&#39;.&nbsp; Ok---if&nbsp;it&nbsp;is&nbsp;like&nbsp;that&nbsp;then&nbsp;I&lt;br&gt;<br>
have&nbsp;no&nbsp;concerns&nbsp;going&nbsp;for&nbsp;your&nbsp;suggestion.&lt;br&gt;<br>
&lt;br&gt;<br>
Best,&lt;br&gt;<br>
Stephan&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Wed,&nbsp;2012-03-21&nbsp;at&nbsp;13:25&nbsp;-0500,&nbsp;Curtis&nbsp;Rueden&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Stephan,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I&nbsp;agree&nbsp;that&nbsp;your&nbsp;version&nbsp;is&nbsp;easier&nbsp;to&nbsp;understand&nbsp;and&nbsp;cleaner&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to&nbsp;read&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;but&nbsp;it&nbsp;introduces&nbsp;a&nbsp;runtime&nbsp;check&nbsp;that&nbsp;although&nbsp;being&nbsp;tiny,&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;will&nbsp;slow&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;down&nbsp;the&nbsp;wrapping&nbsp;of&nbsp;Points&nbsp;and&nbsp;RealPoints&nbsp;slightly.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;explanation.&nbsp;But&nbsp;I&nbsp;don&#39;t&nbsp;I&nbsp;buy&nbsp;it.&nbsp;Here&nbsp;is&nbsp;a&nbsp;little&lt;br&gt;<br>
&gt;&nbsp;test:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;https://gist.github.com/2150639&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gist.github.com/2150639&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;my&nbsp;system:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Five&nbsp;trials&nbsp;of&nbsp;RealPointSS&nbsp;yields:&nbsp;418,&nbsp;361,&nbsp;357,&nbsp;359,&nbsp;370&lt;br&gt;<br>
&gt;&nbsp;Five&nbsp;trials&nbsp;of&nbsp;RealPointCR&nbsp;yields:&nbsp;365,&nbsp;357,&nbsp;357,&nbsp;372,&nbsp;360&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;With&nbsp;each&nbsp;trial&nbsp;consisting&nbsp;of&nbsp;10&nbsp;million&nbsp;object&nbsp;creations.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;difference&nbsp;looks&nbsp;negligible&nbsp;to&nbsp;me.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Regards,&lt;br&gt;<br>
&gt;&nbsp;Curtis&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Wed,&nbsp;Mar&nbsp;21,&nbsp;2012&nbsp;at&nbsp;3:48&nbsp;AM,&nbsp;Stephan&nbsp;Saalfeld&lt;br&gt;<br>
&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:saalfeld@mpi-cbg.de&quot;&gt;saalfeld@mpi-cbg.de&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Hi&nbsp;Curtis,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;since&nbsp;I&nbsp;am&nbsp;responsible&nbsp;for&nbsp;that&nbsp;construct,&nbsp;I&nbsp;take&nbsp;the&nbsp;freedom&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to&nbsp;reply.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I&nbsp;agree&nbsp;that&nbsp;your&nbsp;version&nbsp;is&nbsp;easier&nbsp;to&nbsp;understand&nbsp;and&nbsp;cleaner&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to&nbsp;read&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;but&nbsp;it&nbsp;introduces&nbsp;a&nbsp;runtime&nbsp;check&nbsp;that&nbsp;although&nbsp;being&nbsp;tiny,&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;will&nbsp;slow&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;down&nbsp;the&nbsp;wrapping&nbsp;of&nbsp;Points&nbsp;and&nbsp;RealPoints&nbsp;slightly.&nbsp; In&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;situations&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;where&nbsp;this&nbsp;is&nbsp;happening&nbsp;millions&nbsp;of&nbsp;times,&nbsp;I&nbsp;do&nbsp;not&nbsp;want&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;additional&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cost.&nbsp; So,&nbsp;I&nbsp;prefer&nbsp;your&nbsp;solution&nbsp;in&nbsp;business&nbsp;code&nbsp;but&nbsp;ImgLib2&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;aims&nbsp;to&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;be&nbsp;performance&nbsp;code&nbsp;:).&nbsp; For&nbsp;clarity,&nbsp;the&nbsp;constructor&nbsp;is&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;protected&nbsp;and&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;therefore&nbsp;not&nbsp;exposed&nbsp;to&nbsp;the&nbsp;normal&nbsp;API&nbsp;user,&nbsp;a&nbsp;clear&nbsp;Javadoc&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;should&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tell&nbsp;extenders&nbsp;about&nbsp;its&nbsp;expected&nbsp;use.&nbsp; Normally,&nbsp;you&nbsp;will&nbsp;use&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RealPoint.wrap(double[])&nbsp;factory&nbsp;method&nbsp;instead.&nbsp; We&nbsp;could&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;make&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;constructor&nbsp;private&nbsp;but&nbsp;then&nbsp;we&nbsp;would&nbsp;lose&nbsp;the&nbsp;option&nbsp;to&nbsp;use&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;it&nbsp;from&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;now&nbsp;extending&nbsp;classes.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;If&nbsp;this&nbsp;is&nbsp;still&nbsp;too&nbsp;ugly&nbsp;for&nbsp;your&nbsp;gusto,&nbsp;we&nbsp;could&nbsp;make&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;current&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RealPoint&nbsp;and&nbsp;Point&nbsp;AbstractRealPoint&nbsp;and&nbsp;AbstractPoint&nbsp;and&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;introduce&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;both&nbsp;this&nbsp;constructor&nbsp;and&nbsp;the&nbsp;static&nbsp;wrap&nbsp;method&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;extending&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RealPoint&nbsp;and&nbsp;Point&nbsp;classes.&nbsp; I&#39;d&nbsp;actually&nbsp;like&nbsp;that.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Best,&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Stephan&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;On&nbsp;Tue,&nbsp;2012-03-20&nbsp;at&nbsp;23:17&nbsp;-0500,&nbsp;Curtis&nbsp;Rueden&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;Hi&nbsp;Tobias,&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;First&nbsp;of&nbsp;all,&nbsp;thanks&nbsp;very&nbsp;much&nbsp;for&nbsp;all&nbsp;the&nbsp;API&nbsp;improvements!&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;I&nbsp;just&nbsp;have&nbsp;one&nbsp;comment...&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Why&nbsp;is&nbsp;there&nbsp;the&nbsp;Object&nbsp;x&nbsp;in&nbsp;there?&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;If&nbsp;it&nbsp;wouldn&#39;t&nbsp;be&nbsp;there,&nbsp;then&nbsp;the&nbsp;compiler&nbsp;would&nbsp;be&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;unable&nbsp;to&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;distinguish&nbsp;whether&nbsp;you&nbsp;call&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;protected&nbsp;Realpoint(&nbsp;final&nbsp;double[]&nbsp;position&nbsp;)&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;or&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;RealPoint(&nbsp;final&nbsp;double...&nbsp;position&nbsp;)&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;Sure,&nbsp;the&nbsp;dummy&nbsp;Object&nbsp;parameter&nbsp;differentiates&nbsp;the&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;constructors.&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;However,&nbsp;I&nbsp;do&nbsp;not&nbsp;believe&nbsp;such&nbsp;drastic&nbsp;measures&nbsp;are&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;necessary.&nbsp;Why&nbsp;not&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;do&nbsp;something&nbsp;like&nbsp;this&nbsp;instead:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;https://gist.github.com/2144264&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gist.github.com/2144264&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;easier&nbsp;to&nbsp;understand&nbsp;and&nbsp;accomplishes&nbsp;the&nbsp;same&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ends.&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;Regards,&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&nbsp;Curtis&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
