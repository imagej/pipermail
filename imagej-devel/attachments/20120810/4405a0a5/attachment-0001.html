<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Here&nbsp;is&nbsp;a&nbsp;discussion&nbsp;of&nbsp;changes&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;propose&nbsp;for&nbsp;dealing&nbsp;with&nbsp;histograms&nbsp;in&nbsp;IJ2.&nbsp;&nbsp;Sorry&nbsp;it's&nbsp;so&nbsp;length,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;something&nbsp;is&nbsp;unclear&nbsp;and&nbsp;please&nbsp;comment&nbsp;if&nbsp;you&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;interest&nbsp;in&nbsp;histograms;&nbsp;I&nbsp;do&nbsp;have&nbsp;some&nbsp;specific&nbsp;questions&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;group&nbsp;(&lt;b&gt;&lt;i&gt;in&nbsp;bold&nbsp;italics&lt;/i&gt;&lt;/b&gt;):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;&nbsp;First&nbsp;of&nbsp;all&nbsp;I&nbsp;would&nbsp;create&nbsp;some&nbsp;helper&nbsp;methods&nbsp;like&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;following&nbsp;(could&nbsp;just&nbsp;be&nbsp;static&nbsp;methods&nbsp;somewhere)...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;maps&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;bin&nbsp;index,&nbsp;given&nbsp;the&nbsp;range&nbsp;min...max&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;bins&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;valueToBin(int&nbsp;bins,&nbsp;double&nbsp;min,&nbsp;double&nbsp;max,&nbsp;double&nbsp;value);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;returns&nbsp;array&nbsp;of&nbsp;edge&nbsp;values&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double[]&nbsp;getEdgeValues(int&nbsp;bins,&nbsp;double&nbsp;min,&nbsp;double&nbsp;max);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;returns&nbsp;array&nbsp;of&nbsp;center&nbsp;values&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double[]&nbsp;getCenterValues(int&nbsp;bins,&nbsp;double&nbsp;min,&nbsp;double&nbsp;max);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...and&nbsp;equivalent&nbsp;set&nbsp;for&nbsp;integer&nbsp;values.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note&nbsp;that&nbsp;these&nbsp;methods&nbsp;would&nbsp;be&nbsp;used&nbsp;for&nbsp;both&nbsp;computing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histograms&nbsp;and&nbsp;assigning&nbsp;colors&nbsp;from&nbsp;a&nbsp;LUT.&nbsp;&nbsp;It's&nbsp;nice&nbsp;to&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exactly&nbsp;the&nbsp;same&nbsp;code&nbsp;for&nbsp;both.&nbsp;&nbsp;You&nbsp;can&nbsp;characterize&nbsp;a&nbsp;histogram<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin&nbsp;or&nbsp;LUT&nbsp;color&nbsp;by&nbsp;the&nbsp;starting&nbsp;or&nbsp;edge&nbsp;value&nbsp;or&nbsp;by&nbsp;the&nbsp;center<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,&nbsp;I've&nbsp;seen&nbsp;it&nbsp;both&nbsp;ways&nbsp;so&nbsp;I&nbsp;included&nbsp;both&nbsp;flavors.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Having&nbsp;these&nbsp;common&nbsp;methods&nbsp;would&nbsp;also&nbsp;avoid&nbsp;bugs:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i)&nbsp;One&nbsp;bug&nbsp;I&nbsp;saw&nbsp;in&nbsp;several&nbsp;places&nbsp;is&nbsp;to&nbsp;compute&nbsp;(value&nbsp;-&nbsp;min)&nbsp;/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(max&nbsp;-&nbsp;min)&nbsp;and&nbsp;get&nbsp;a&nbsp;value&nbsp;from&nbsp;0.0&nbsp;to&nbsp;1.0,&nbsp;but&nbsp;multiply&nbsp;that&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.&nbsp;&nbsp;The&nbsp;problem&nbsp;with&nbsp;that&nbsp;is&nbsp;the&nbsp;only&nbsp;way&nbsp;you&nbsp;get&nbsp;bin&nbsp;255&nbsp;is&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;==&nbsp;min.&nbsp;&nbsp;Ideally&nbsp;each&nbsp;bin&nbsp;should&nbsp;represent&nbsp;a&nbsp;range&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values;&nbsp;if&nbsp;the&nbsp;data&nbsp;set&nbsp;is&nbsp;uniformly&nbsp;distributed&nbsp;the&nbsp;size&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;range&nbsp;of&nbsp;values&nbsp;per&nbsp;bin&nbsp;would&nbsp;be&nbsp;about&nbsp;the&nbsp;same.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii)&nbsp;Another&nbsp;bug&nbsp;was&nbsp;to&nbsp;compute&nbsp;width&nbsp;=&nbsp;max&nbsp;-&nbsp;min&nbsp;+&nbsp;1.&nbsp;&nbsp;That's<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;certainly&nbsp;the&nbsp;way&nbsp;you&nbsp;do&nbsp;it&nbsp;for&nbsp;integer&nbsp;arithmetic&nbsp;but&nbsp;it&nbsp;doesn't<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work&nbsp;in&nbsp;floating&nbsp;point!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'd&nbsp;rather&nbsp;fix&nbsp;these&nbsp;bugs&nbsp;by&nbsp;refactoring&nbsp;to&nbsp;call&nbsp;the&nbsp;common&nbsp;helper<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;&nbsp;Regarding&nbsp;the&nbsp;&quot;ImageStatistics&quot;&nbsp;class&nbsp;idea&nbsp;that&nbsp;Curtis<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mentioned:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;example&nbsp;it&nbsp;might&nbsp;include&nbsp;methods:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;request&nbsp;certain&nbsp;things&nbsp;ahead&nbsp;of&nbsp;time&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doMinMax();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doHistogram(int&nbsp;bins);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doHistogram(int&nbsp;bins,&nbsp;double&nbsp;min,&nbsp;double&nbsp;max);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doMean();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;minimal&nbsp;number&nbsp;of&nbsp;passes&nbsp;through&nbsp;the&nbsp;image&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;get&nbsp;accumulated&nbsp;results&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double[]&nbsp;getMinMax();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long[]&nbsp;getHistogram();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;getMean;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;if&nbsp;you&nbsp;don't&nbsp;specify&nbsp;a&nbsp;min/max&nbsp;for&nbsp;doHistogram&nbsp;the&nbsp;code&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;take&nbsp;an&nbsp;initial&nbsp;pass&nbsp;to&nbsp;get&nbsp;min/max&nbsp;then&nbsp;another&nbsp;to&nbsp;build&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram&nbsp;using&nbsp;that&nbsp;min/max.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3)&nbsp;Discussion&nbsp;of&nbsp;&nbsp;net.imglib2.script.analysis.Histogram:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Both&nbsp;of&nbsp;these&nbsp;ImgLib2&nbsp;histogram&nbsp;methods&nbsp;combine&nbsp;a&nbsp;single&nbsp;pass<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;through&nbsp;the&nbsp;image&nbsp;with&nbsp;generating&nbsp;histogram&nbsp;statistics.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;code&nbsp;exhibits&nbsp;bug&nbsp;(i).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;that&nbsp;this&nbsp;handles&nbsp;integral&nbsp;values&nbsp;as&nbsp;well&nbsp;as&nbsp;floating<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;mapping&nbsp;of&nbsp;values&nbsp;to&nbsp;histogram&nbsp;bins&nbsp;counts&nbsp;values&nbsp;that&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;less&nbsp;than&nbsp;the&nbsp;min&nbsp;in&nbsp;the&nbsp;first&nbsp;bin&nbsp;and&nbsp;values&nbsp;that&nbsp;are&nbsp;greater<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;max&nbsp;in&nbsp;the&nbsp;last&nbsp;bin.&nbsp;&nbsp;&lt;b&gt;&lt;i&gt;Is&nbsp;this&nbsp;really&nbsp;desirable<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;behavior?&lt;/i&gt;&nbsp;&lt;/b&gt;&nbsp;In&nbsp;my&nbsp;usage&nbsp;of&nbsp;histograms&nbsp;I&nbsp;specifically<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;don't&nbsp;want&nbsp;to&nbsp;count&nbsp;under-&nbsp;and&nbsp;over-range&nbsp;values.&nbsp;&nbsp;Similarly&nbsp;when<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;a&nbsp;LUT&nbsp;I&nbsp;like&nbsp;under-&nbsp;and&nbsp;over-range&nbsp;values&nbsp;to&nbsp;appear&nbsp;black.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Of&nbsp;course&nbsp;if&nbsp;we&nbsp;need&nbsp;it&nbsp;work&nbsp;both&nbsp;ways&nbsp;we&nbsp;can&nbsp;provide&nbsp;a&nbsp;switch.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;output&nbsp;of&nbsp;this&nbsp;code&nbsp;is&nbsp;actually&nbsp;a&nbsp;JFreeChart&nbsp;image,&nbsp;there's&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;way&nbsp;to&nbsp;get&nbsp;the&nbsp;raw&nbsp;histogram&nbsp;count&nbsp;array.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FYI,&nbsp;uses&nbsp;TreeMap&lt;Double,&nbsp;Long&gt;&nbsp;as&nbsp;an&nbsp;internal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;representation&nbsp;of&nbsp;the&nbsp;histogram&nbsp;count&nbsp;array.&nbsp;&nbsp;Note&nbsp;that&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combines&nbsp;what&nbsp;I&nbsp;am&nbsp;calling&nbsp;the&nbsp;edge&nbsp;values&nbsp;with&nbsp;the&nbsp;histogram<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counts.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4)&nbsp;Discussion&nbsp;of&nbsp;net.imglib2.algorithm.stats.Histogram:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;has&nbsp;a&nbsp;HistogramBinMapper&nbsp;base&nbsp;class&nbsp;with&nbsp;RealBinMapper&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntBinMapper&nbsp;so&nbsp;it's&nbsp;meant&nbsp;to&nbsp;handle&nbsp;real&nbsp;and&nbsp;integral&nbsp;values.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;mapper&nbsp;is&nbsp;passed&nbsp;in&nbsp;as&nbsp;a&nbsp;parameter;&nbsp;I&nbsp;think&nbsp;it&nbsp;could&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inferred&nbsp;from&nbsp;the&nbsp;cursor&nbsp;type&nbsp;T.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;the&nbsp;RealBinMapper&nbsp;class&nbsp;exhibits&nbsp;bug&nbsp;(ii)&nbsp;when&nbsp;calculating<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binWidth&nbsp;in&nbsp;the&nbsp;constructor.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntBinMapper&nbsp;doesn't&nbsp;let&nbsp;you&nbsp;specify&nbsp;a&nbsp;bin&nbsp;count,&nbsp;but&nbsp;assumes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numBins&nbsp;=&nbsp;max&nbsp;-&nbsp;min&nbsp;+&nbsp;1.&nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;each&nbsp;bin&nbsp;will&nbsp;track&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;integer&nbsp;value.&nbsp;&nbsp;I&nbsp;haven't&nbsp;actually&nbsp;worked&nbsp;with&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histograms&nbsp;of&nbsp;integral&nbsp;valued&nbsp;images&nbsp;but&nbsp;I&nbsp;thought&nbsp;they&nbsp;should<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;floating&nbsp;point,&nbsp;that&nbsp;is&nbsp;you&nbsp;could&nbsp;count&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;range&nbsp;of&nbsp;values&nbsp;in&nbsp;a&nbsp;single&nbsp;histogram&nbsp;bin.&nbsp;&nbsp;&lt;i&gt;&lt;b&gt;Is&nbsp;there&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;bins&nbsp;and&nbsp;values&nbsp;should&nbsp;always&nbsp;be&nbsp;1:1&nbsp;for&nbsp;integral<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valued&nbsp;images?&lt;/b&gt;&lt;/i&gt;&nbsp;&nbsp;This&nbsp;is&nbsp;so&nbsp;in&nbsp;IJ1&nbsp;for&nbsp;8-bit&nbsp;and&nbsp;RGB<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;images.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;pass&nbsp;in&nbsp;the&nbsp;minimum&nbsp;and&nbsp;maximum&nbsp;values&nbsp;when&nbsp;you&nbsp;create&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HistogramBinMapper,&nbsp;but&nbsp;these&nbsp;are&nbsp;described&nbsp;as&nbsp;bin&nbsp;center&nbsp;values.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;My&nbsp;concept&nbsp;of&nbsp;the&nbsp;minimum&nbsp;and&nbsp;maximum&nbsp;values&nbsp;has&nbsp;been&nbsp;the&nbsp;minimum<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;the&nbsp;lowest&nbsp;value&nbsp;that&nbsp;maps&nbsp;to&nbsp;the&nbsp;first&nbsp;histogram&nbsp;bin&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maximum&nbsp;is&nbsp;the&nbsp;highest&nbsp;value&nbsp;that&nbsp;maps&nbsp;to&nbsp;the&nbsp;last&nbsp;histogram&nbsp;bin.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;we&nbsp;specify&nbsp;min/max&nbsp;as&nbsp;centers&nbsp;some&nbsp;values&nbsp;slightly&nbsp;below<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minimum&nbsp;and&nbsp;slightly&nbsp;above&nbsp;maximum&nbsp;will&nbsp;map&nbsp;to&nbsp;the&nbsp;first&nbsp;and&nbsp;last<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram&nbsp;bins&nbsp;respectively.&nbsp;&nbsp;&lt;i&gt;&lt;b&gt;Do&nbsp;we&nbsp;need&nbsp;to&nbsp;specify&nbsp;min/max<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;bin&nbsp;center&nbsp;values?&lt;/b&gt;&lt;/i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thanks!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aivar&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;8/10/12&nbsp;2:44&nbsp;PM,&nbsp;Curtis&nbsp;Rueden&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:CADN69ymmcB1DOPRrxywm9UknHbfx9JNe63Xv3bh8xV9jtTbKyQ@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;Hi&nbsp;all,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Aivar&nbsp;&amp;&nbsp;I&nbsp;also&nbsp;discussed&nbsp;histograms,&nbsp;and&nbsp;our&nbsp;plan&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;those&nbsp;is&nbsp;a&nbsp;bit&nbsp;more&nbsp;nebulous.&nbsp;Aivar&nbsp;is&nbsp;going&nbsp;to&nbsp;investigate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;improving&nbsp;Larry's&nbsp;histogram&nbsp;API&nbsp;in&nbsp;net.imglib2.algorithms.stats.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;The&nbsp;general&nbsp;idea&nbsp;is&nbsp;that&nbsp;computing&nbsp;min/max,&nbsp;computing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histograms,&nbsp;and&nbsp;computing&nbsp;other&nbsp;statistics&nbsp;are&nbsp;intrinsically<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;related,&nbsp;and&nbsp;for&nbsp;performance&nbsp;reasons&nbsp;it&nbsp;is&nbsp;nice&nbsp;to&nbsp;minimize&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;of&nbsp;passes&nbsp;through&nbsp;the&nbsp;image&nbsp;when&nbsp;computing&nbsp;these.&nbsp;So&nbsp;we<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;like&nbsp;to&nbsp;create&nbsp;a&nbsp;unified&nbsp;ImageStatistics&nbsp;class&nbsp;(sound<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;familiar?&nbsp;;-)&nbsp;that&nbsp;can&nbsp;compute&nbsp;one&nbsp;or&nbsp;more&nbsp;of&nbsp;these&nbsp;in&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intelligent&nbsp;way,&nbsp;then&nbsp;return&nbsp;the&nbsp;results&nbsp;on&nbsp;demand.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;None&nbsp;of&nbsp;this&nbsp;is&nbsp;reconciled&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;net.imglib2.script.analysis&nbsp;package&nbsp;(Histogram,&nbsp;ImgMax,&nbsp;ImgMean,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;etc.),&nbsp;but&nbsp;perhaps&nbsp;in&nbsp;the&nbsp;future&nbsp;the&nbsp;net.imglib2.script&nbsp;stuff<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;take&nbsp;more&nbsp;direct&nbsp;advantage&nbsp;of&nbsp;it.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Regards,&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Curtis&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;7,&nbsp;2012&nbsp;at&nbsp;4:45&nbsp;PM,&nbsp;Aivar<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Grislis&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;mailto:grislis@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;grislis@wisc.edu&lt;/a&gt;&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;I'd&nbsp;also<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;interested&nbsp;in&nbsp;working&nbsp;on&nbsp;the&nbsp;histogram&nbsp;code.&nbsp;&nbsp;Mostly&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;that&nbsp;generates&nbsp;histogram&nbsp;data,&nbsp;also&nbsp;their&nbsp;display,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perhaps&nbsp;the&nbsp;histogram&nbsp;tool&nbsp;itself.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SLIM&nbsp;Plugin&nbsp;uses&nbsp;histograms&nbsp;in&nbsp;a&nbsp;very&nbsp;dynamic&nbsp;way,&nbsp;as&nbsp;they<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;updated&nbsp;periodically&nbsp;during&nbsp;the&nbsp;fit&nbsp;process.&nbsp;&nbsp;You&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change&nbsp;the&nbsp;minimum&nbsp;and&nbsp;maximum&nbsp;values&nbsp;interactively.&nbsp;&nbsp;So&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;be&nbsp;an&nbsp;interested&nbsp;consumer&nbsp;of&nbsp;any&nbsp;common&nbsp;histogram<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(I&nbsp;looked&nbsp;at&nbsp;the&nbsp;histogram&nbsp;code&nbsp;in&nbsp;the&nbsp;AutoContrast&nbsp;plugin,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;net.imglib2.algorithm.stats.Histogram,&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;net.imglib2.script.analysis.Histogram&nbsp;and&nbsp;found&nbsp;bugs&nbsp;in&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;them&nbsp;when&nbsp;binning&nbsp;up&nbsp;the&nbsp;histogram&nbsp;values.)&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aivar&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
