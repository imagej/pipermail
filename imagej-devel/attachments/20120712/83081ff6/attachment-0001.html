<tt>
&lt;div&gt;Hi&nbsp;Steffi&nbsp;&amp;&nbsp;J-Y,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;if&nbsp;(&nbsp;img&nbsp;instanceOf&nbsp;ImagePlusImg&nbsp;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;think&nbsp;using&nbsp;instanceof&nbsp;in&nbsp;this&nbsp;way&nbsp;is&nbsp;quite&nbsp;evil,&nbsp;and&nbsp;should&nbsp;be&nbsp;avoided&nbsp;whenever&nbsp;possible.&nbsp;It&nbsp;is&nbsp;something&nbsp;I&nbsp;very&nbsp;much&nbsp;want&nbsp;to&nbsp;avoid&nbsp;in&nbsp;the&nbsp;core&nbsp;ImgLib2&nbsp;and&nbsp;ImageJ2&nbsp;code,&nbsp;because&nbsp;it&nbsp;prohibits&nbsp;extensibility.&nbsp;Better&nbsp;is&nbsp;to&nbsp;put&nbsp;the&nbsp;common&nbsp;functionality&nbsp;into&nbsp;an&nbsp;interface&nbsp;method&nbsp;declaration&nbsp;and&nbsp;then&nbsp;implement&nbsp;it&nbsp;differently&nbsp;in&nbsp;the&nbsp;different&nbsp;subclasses.&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;said,&nbsp;how&nbsp;to&nbsp;avoid&nbsp;writing&nbsp;code&nbsp;like&nbsp;this&nbsp;depends&nbsp;on&nbsp;the&nbsp;situation.&nbsp;We&#39;d&nbsp;have&nbsp;to&nbsp;look&nbsp;over&nbsp;the&nbsp;various&nbsp;places&nbsp;in&nbsp;code&nbsp;that&nbsp;it&nbsp;is&nbsp;currently&nbsp;happening...&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;1)&nbsp;break&nbsp;it&nbsp;and&nbsp;maybe&nbsp;it&nbsp;is&nbsp;just&nbsp;fine&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;2)&nbsp;make&nbsp;a&nbsp;wrapImgPlus&nbsp;method&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Maybe&nbsp;1)&nbsp;is&nbsp;the&nbsp;better&nbsp;way&nbsp;to&nbsp;go,&nbsp;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;bring&nbsp;up&nbsp;potential&nbsp;implications&nbsp;....&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;this&nbsp;case,&nbsp;given&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;easy&nbsp;to&nbsp;simply&nbsp;add&nbsp;the&nbsp;wrapImgPlus&nbsp;methods,&nbsp;that&nbsp;may&nbsp;be&nbsp;a&nbsp;safer&nbsp;way&nbsp;to&nbsp;go.&nbsp;Anyone&nbsp;else&nbsp;have&nbsp;an&nbsp;opinion?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;12,&nbsp;2012&nbsp;at&nbsp;4:19&nbsp;PM,&nbsp;Stephan&nbsp;Preibisch&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:preibisch@mpi-cbg.de&quot;&nbsp;target=&quot;_blank&quot;&gt;preibisch@mpi-cbg.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;We&nbsp;have&nbsp;two&nbsp;options:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;break&nbsp;it&nbsp;and&nbsp;maybe&nbsp;it&nbsp;is&nbsp;just&nbsp;fine&lt;/div&gt;<br>
<br>
&lt;div&gt;2)&nbsp;make&nbsp;a&nbsp;second&nbsp;method&nbsp;like&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;public&nbsp;ImgPlus&lt;&nbsp;T&nbsp;&gt;&nbsp;wrapImgPlus(&nbsp;final&nbsp;ImagePlus&nbsp;imp&nbsp;)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;Img&lt;&nbsp;T&nbsp;&gt;&nbsp;img&nbsp;=&nbsp;wrap(&nbsp;imp&nbsp;);&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;ImgPlus&lt;&nbsp;T&nbsp;&gt;&nbsp;imgplus&nbsp;=&nbsp;new&nbsp;ImgPlus(&nbsp;img&nbsp;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;imgplus.setCalibration(&nbsp;imp.getCal&nbsp;...&nbsp;);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;imgplus.setName(&nbsp;imp.getTitle()&nbsp;);&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;return&nbsp;imgplus;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Maybe&nbsp;1)&nbsp;is&nbsp;the&nbsp;better&nbsp;way&nbsp;to&nbsp;go,&nbsp;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;bring&nbsp;up&nbsp;potential&nbsp;implications&nbsp;....&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;On&nbsp;Jul&nbsp;12,&nbsp;2012,&nbsp;at&nbsp;17:14&nbsp;,&nbsp;Jean-Yves&nbsp;Tinevez&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;On&nbsp;12-Jul-12&nbsp;23:05,&nbsp;Stephan&nbsp;Preibisch<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;In&nbsp;principle,&nbsp;I&nbsp;agree.&nbsp;However&nbsp;it&nbsp;might&nbsp;break&nbsp;some<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;in&nbsp;a&nbsp;bad&nbsp;way.&nbsp;We&nbsp;used&nbsp;several&nbsp;times&nbsp;constructs&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Img&lt;&nbsp;T&nbsp;&gt;&nbsp;img;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;if&nbsp;(&nbsp;img&nbsp;instanceOf&nbsp;ImagePlusImg&nbsp;)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;{&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;the&nbsp;underlying&nbsp;instance&nbsp;(which&nbsp;is&nbsp;especially&nbsp;true&nbsp;after<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrapping)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;ImagePlus<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;imp&nbsp;=&nbsp;((ImagePlusImg)img).getImagePlus();&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;....&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;do&nbsp;something&nbsp;else&nbsp;where&nbsp;you&nbsp;test&nbsp;instanceof&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;}&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;which&nbsp;would&nbsp;suddenly&nbsp;fail&nbsp;because&nbsp;ImgPlus&nbsp;is&nbsp;an&nbsp;Img,&nbsp;but<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;HAS&nbsp;for&nbsp;example&nbsp;an&nbsp;ImagePlusImg...&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;What&nbsp;do&nbsp;you&nbsp;think?&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Bummer.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;How&nbsp;do&nbsp;we&nbsp;get&nbsp;the&nbsp;ImagePlusAdapter&nbsp;to&nbsp;return&nbsp;an&nbsp;Img&nbsp;that&nbsp;captures<br>
&nbsp;&nbsp;&nbsp;&nbsp;calibration&nbsp;as&nbsp;well&nbsp;then?&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
--&nbsp;&lt;br&gt;<br>
Please&nbsp;avoid&nbsp;top-posting,&nbsp;and&nbsp;please&nbsp;make&nbsp;sure&nbsp;to&nbsp;reply-to-all!&lt;br&gt;<br>
 &lt;br&gt;<br>
Mailing&nbsp;list&nbsp;web&nbsp;interface:&nbsp;&lt;a&nbsp;href=&quot;http://groups.google.com/group/fiji-devel&quot;&nbsp;target=&quot;_blank&quot;&gt;http://groups.google.com/group/fiji-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
&lt;p&gt;&lt;/p&gt;<br>
<br>
--&nbsp;&lt;br&gt;<br>
Please&nbsp;avoid&nbsp;top-posting,&nbsp;and&nbsp;please&nbsp;make&nbsp;sure&nbsp;to&nbsp;reply-to-all!&lt;br&gt;<br>
 &lt;br&gt;<br>
Mailing&nbsp;list&nbsp;web&nbsp;interface:&nbsp;&lt;a&nbsp;href=&quot;http://groups.google.com/group/fiji-devel&quot;&nbsp;target=&quot;_blank&quot;&gt;http://groups.google.com/group/fiji-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
