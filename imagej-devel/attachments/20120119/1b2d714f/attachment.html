<tt>
Hi&nbsp;Lee,&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&amp;#39;m&nbsp;running&nbsp;into&nbsp;a&nbsp;number&nbsp;of&nbsp;problems&nbsp;with&nbsp;overlays&nbsp;that&nbsp;are&nbsp;caused<br>
&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;EuclideanSpace&nbsp;is&nbsp;now&nbsp;defined&nbsp;on&nbsp;the&nbsp;Dataset<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;not&nbsp;on&nbsp;the&nbsp;Display&nbsp;used&nbsp;to&nbsp;composite&nbsp;datasets&nbsp;and&nbsp;overlays.<br>
&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;more&nbsp;than&nbsp;a&nbsp;few&nbsp;issues:&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Over&nbsp;the&nbsp;past&nbsp;few&nbsp;weeks,&nbsp;and&nbsp;during&nbsp;the&nbsp;Dresden&nbsp;hackathon,&nbsp;I&nbsp;finally&nbsp;found&nbsp;time&nbsp;to&nbsp;pursue&nbsp;a&nbsp;lot&nbsp;of&nbsp;these&nbsp;issues,&nbsp;and&nbsp;have&nbsp;made<br>
&nbsp;changes&nbsp;to&nbsp;the&nbsp;codebase&nbsp;to&nbsp;improve&nbsp;the&nbsp;data/display&nbsp;hierarchy.&lt;br&gt;&lt;ul&gt;&lt;li&gt;The&nbsp;ImageDisplay&nbsp;interface&nbsp;now&nbsp;implements&nbsp;CalibratedInterval,&nbsp;which&nbsp;extends&nbsp;not&nbsp;only&nbsp;EuclideanSpace&nbsp;but&nbsp;also&nbsp;Interval.&nbsp;Further,&nbsp;unlike&nbsp;Data&nbsp;objects,&nbsp;ImageDisplay&nbsp;now&nbsp;also&nbsp;implements&nbsp;PositionableByAxis&nbsp;(which&nbsp;extends&nbsp;Localizable&nbsp;and&nbsp;Positionable).&nbsp;So&nbsp;an&nbsp;ImageDisplay&nbsp;always&nbsp;has&nbsp;a&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;N-dimensional&nbsp;structure,&nbsp;and&nbsp;can&nbsp;report&nbsp;what&nbsp;that&nbsp;is.&lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;Data&nbsp;objects&nbsp;(Datasets&nbsp;and&nbsp;Overlays)&nbsp;now&nbsp;implement&nbsp;CalibratedInterval,&nbsp;but&nbsp;not&nbsp;PositionableByAxis,&nbsp;since&nbsp;it&nbsp;makes&nbsp;no&nbsp;sense&nbsp;to&nbsp;ask&nbsp;a&nbsp;Data&nbsp;object&nbsp;what&nbsp;its&nbsp;current&nbsp;position&nbsp;is.&lt;/li&gt;&lt;li&gt;However,&nbsp;the&nbsp;DataView&nbsp;object,&nbsp;which&nbsp;wraps&nbsp;a&nbsp;Data&nbsp;and&nbsp;provides&nbsp;visualization-specific&nbsp;metadata&nbsp;about&nbsp;how&nbsp;that&nbsp;Data&nbsp;is&nbsp;currently&nbsp;being&nbsp;visualized,&nbsp;*does*&nbsp;implement&nbsp;PositionableByAxis.&lt;/li&gt;<br>
<br>
<br>
&lt;li&gt;An&nbsp;ImageDisplay&nbsp;is&nbsp;still&nbsp;a&nbsp;collection&nbsp;of&nbsp;DataViews&nbsp;as&nbsp;before,&nbsp;but&nbsp;uses&nbsp;the&nbsp;CombinedInterval&nbsp;class&nbsp;to&nbsp;combine&nbsp;the&nbsp;N-dimensional&nbsp;spaces&nbsp;of&nbsp;its&nbsp;constituent&nbsp;views&nbsp;into&nbsp;a&nbsp;single&nbsp;aggregate&nbsp;space.&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;Hopefully&nbsp;these&nbsp;changes&nbsp;are&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;what&nbsp;we&nbsp;discussed&nbsp;when&nbsp;I&nbsp;visited&nbsp;Broad&nbsp;all&nbsp;those&nbsp;months&nbsp;ago.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&lt;ul&gt;&lt;li&gt;Trac&nbsp;issue&nbsp;ImageJ&nbsp;558&nbsp;-&nbsp;the&nbsp;user&nbsp;takes&nbsp;a&nbsp;Z-stack,&nbsp;multichannel<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;and&nbsp;thresholds&nbsp;it&nbsp;to&nbsp;get&nbsp;a&nbsp;BinaryMaskOverlay&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;associated&nbsp;ROI.&nbsp;The&nbsp;ROI&nbsp;is&nbsp;properly&nbsp;defined&nbsp;in&nbsp;a&nbsp;4-dimensional<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;space.&nbsp;However,&nbsp;when&nbsp;displayed,&nbsp;a&nbsp;single&nbsp;X/Y&nbsp;plane&nbsp;should&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampled&nbsp;and&nbsp;displayed,&nbsp;but&nbsp;there&nbsp;is&nbsp;no&nbsp;mechanism&nbsp;to&nbsp;retrieve&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plane&nbsp;being&nbsp;displayed&nbsp;or&nbsp;the&nbsp;color&nbsp;display&nbsp;mode.&nbsp;The&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterates&nbsp;through&nbsp;the&nbsp;entire&nbsp;stack&nbsp;and&nbsp;that&amp;#39;s&nbsp;what&nbsp;causes&nbsp;it&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update&nbsp;slowly.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;I&nbsp;haven&amp;#39;t&nbsp;had&nbsp;time&nbsp;to&nbsp;examine&nbsp;this&nbsp;issue&nbsp;in&nbsp;much&nbsp;detail,&nbsp;but&nbsp;the&nbsp;fix&nbsp;you&nbsp;implemented&nbsp;long&nbsp;ago&nbsp;seems&nbsp;fine&nbsp;for&nbsp;the&nbsp;time&nbsp;being.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;&lt;li&gt;Datasets&nbsp;have&nbsp;axes&nbsp;which&nbsp;capture&nbsp;the&nbsp;metadata&nbsp;of&nbsp;what&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;particular&nbsp;dimension&nbsp;means.&nbsp;Overlays&nbsp;don&amp;#39;t&nbsp;have&nbsp;that.&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;As&nbsp;mentioned&nbsp;above,&nbsp;things&nbsp;have&nbsp;now&nbsp;been&nbsp;unified&nbsp;so&nbsp;that&nbsp;all&nbsp;Data&nbsp;objects&nbsp;(including&nbsp;both&nbsp;Datasets&nbsp;and&nbsp;Overlays)&nbsp;are&nbsp;N-dimensional&nbsp;with&nbsp;axes,&nbsp;by&nbsp;extending&nbsp;the&nbsp;CalibratedInterval&nbsp;interface,&nbsp;which&nbsp;in&nbsp;turn&nbsp;extends&nbsp;Interval&nbsp;and&nbsp;CalibratedSpace&nbsp;(which&nbsp;extends&nbsp;EuclideanSpace).&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;ul&gt;&lt;li&gt;Channels&nbsp;are&nbsp;really&nbsp;categorical,&nbsp;not&nbsp;ordinal&nbsp;-&nbsp;there&amp;#39;s&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;the&nbsp;red&nbsp;channel&nbsp;is&nbsp;zero,&nbsp;the&nbsp;green&nbsp;is&nbsp;one&nbsp;and&nbsp;the&nbsp;blue&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;two&nbsp;and,&nbsp;with&nbsp;a&nbsp;channel-stack,&nbsp;the&nbsp;DAPI&nbsp;channel&nbsp;in&nbsp;one&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;be&nbsp;the&nbsp;PI&nbsp;channel&nbsp;in&nbsp;a&nbsp;second.&nbsp;You&nbsp;can&nbsp;properly&nbsp;relate&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel&nbsp;to&nbsp;the&nbsp;other&nbsp;through&nbsp;metadata,&nbsp;but&nbsp;overlays&nbsp;don&amp;#39;t&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;I&nbsp;think&nbsp;channels&nbsp;are&nbsp;sometimes&nbsp;categorical,&nbsp;and&nbsp;sometimes&nbsp;ordinal.&nbsp;For&nbsp;example,&nbsp;a&nbsp;hyperspectral&nbsp;dataset&nbsp;that&nbsp;provides&nbsp;32&nbsp;channels&nbsp;ranging&nbsp;from&nbsp;400&nbsp;nm&nbsp;through&nbsp;550&nbsp;nm&nbsp;sampled&nbsp;every&nbsp;5&nbsp;nm&nbsp;would&nbsp;be&nbsp;a&nbsp;continuous&nbsp;domain,&nbsp;similar&nbsp;to&nbsp;other&nbsp;dimensions.&nbsp;But&nbsp;if&nbsp;you&nbsp;have&nbsp;two&nbsp;channels—one&nbsp;transmitted&nbsp;channel&nbsp;captured&nbsp;using&nbsp;a&nbsp;grayscale&nbsp;camera,&nbsp;and&nbsp;another&nbsp;channel&nbsp;detected&nbsp;from&nbsp;fluorescence&nbsp;caused&nbsp;by&nbsp;laser&nbsp;scanning—those&nbsp;are&nbsp;definitely&nbsp;categorical.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;Still,&nbsp;ultimately,&nbsp;they&nbsp;become&nbsp;ordinal&nbsp;in&nbsp;that&nbsp;you&nbsp;must&nbsp;provide&nbsp;an&nbsp;index&nbsp;for&nbsp;each&nbsp;channel.&nbsp;That&nbsp;doesn&amp;#39;t&nbsp;mean&nbsp;you&nbsp;should&nbsp;assume&nbsp;continuity&nbsp;though,&nbsp;of&nbsp;course.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;ul&gt;&lt;li&gt;You&nbsp;might&nbsp;want&nbsp;to&nbsp;composite&nbsp;datasets&nbsp;-&nbsp;take&nbsp;two&nbsp;images&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;place&nbsp;them&nbsp;adjacently.&nbsp;What&nbsp;happens&nbsp;if&nbsp;they&nbsp;have&nbsp;different&nbsp;axes?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;happens&nbsp;if&nbsp;they&nbsp;have&nbsp;different&nbsp;channel&nbsp;layouts?&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;In&nbsp;general,&nbsp;some&nbsp;math&nbsp;needs&nbsp;to&nbsp;happen.&nbsp;The&nbsp;new&nbsp;&lt;a&nbsp;href=&quot;http://fiji.sc/cgi-bin/gitweb.cgi?p=imagej2/.git;a=blob;f=core/data/src/main/java/imagej/data/CombinedInterval.java;h=24aec4a1305a28aaead11709733ef96e677a1672;hb=refs/heads/svn/trunk&quot;&nbsp;target=&quot;_blank&quot;&gt;CombinedInterval&lt;/a&gt;&nbsp;class&nbsp;handles&nbsp;the&nbsp;union&nbsp;of&nbsp;multiple&nbsp;CalibratedInterval&nbsp;objects,&nbsp;fairly&nbsp;naively&nbsp;at&nbsp;the&nbsp;moment,&nbsp;but&nbsp;with&nbsp;the&nbsp;potential&nbsp;to&nbsp;improve&nbsp;the&nbsp;logic&nbsp;as&nbsp;you&nbsp;suggest&nbsp;in&nbsp;the&nbsp;future.&nbsp;We&nbsp;are&nbsp;also&nbsp;planning&nbsp;to&nbsp;tap&nbsp;into&nbsp;Unidata&amp;#39;s&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ctrueden/ucar-units&quot;&nbsp;target=&quot;_blank&quot;&gt;Ucar&nbsp;Units&lt;/a&gt;&nbsp;project&nbsp;to&nbsp;assist&nbsp;with&nbsp;this.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So,&nbsp;what&nbsp;I&amp;#39;m&nbsp;thinking&nbsp;is&nbsp;the&nbsp;following:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;&lt;li&gt;A&nbsp;display&nbsp;represents&nbsp;the&nbsp;EuclideanSpace&nbsp;that&amp;#39;s&nbsp;used&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;composite&nbsp;overlays&nbsp;and&nbsp;datasets. &nbsp;Think&nbsp;of&nbsp;the&nbsp;display&nbsp;as&nbsp;a&nbsp;big<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N-dimensional&nbsp;container&nbsp;and&nbsp;the&nbsp;overlays&nbsp;and&nbsp;datasets&nbsp;float<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inside&nbsp;that&nbsp;container.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;The&nbsp;display&nbsp;has&nbsp;a&nbsp;set&nbsp;of&nbsp;axes&nbsp;that&nbsp;are&nbsp;the&nbsp;union&nbsp;of&nbsp;all&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;axes&nbsp;that&nbsp;appear&nbsp;in&nbsp;the&nbsp;view&nbsp;data&nbsp;objects.&lt;/li&gt;&lt;li&gt;There&nbsp;are&nbsp;two&nbsp;behaviors&nbsp;for&nbsp;a&nbsp;view&nbsp;object&nbsp;that&nbsp;does&nbsp;not&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;axis&nbsp;in&nbsp;the&nbsp;space.&nbsp;Perhaps&nbsp;the&nbsp;user&nbsp;selects&nbsp;the&nbsp;behavior?:&lt;/li&gt;&lt;ul&gt;&lt;li&gt;The&nbsp;value&nbsp;in&nbsp;space&nbsp;outside&nbsp;of&nbsp;a&nbsp;single&nbsp;plane&nbsp;defined&nbsp;by&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinate&nbsp;location&nbsp;along&nbsp;the&nbsp;axis&nbsp;is&nbsp;nan&nbsp;or&nbsp;null.&lt;/li&gt;&lt;li&gt;The&nbsp;value&nbsp;in&nbsp;space&nbsp;along&nbsp;the&nbsp;missing&nbsp;axis&nbsp;is&nbsp;the&nbsp;same&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;locations&nbsp;along&nbsp;that&nbsp;axis.&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Yes,&nbsp;this&nbsp;is&nbsp;as&nbsp;we&nbsp;discussed&nbsp;at&nbsp;Broad&nbsp;a&nbsp;few&nbsp;months&nbsp;back.&nbsp;It&nbsp;is&nbsp;really&nbsp;working&nbsp;now!&nbsp;:-)&lt;br&gt;&lt;br&gt;Currently,&nbsp;if&nbsp;a&nbsp;constituent&nbsp;DataView&nbsp;lacks&nbsp;an&nbsp;axis&nbsp;from&nbsp;the&nbsp;aggregate&nbsp;space,&nbsp;the&nbsp;value&nbsp;for&nbsp;that&nbsp;axis&nbsp;can&nbsp;be&nbsp;specified&nbsp;explicitly,&nbsp;and&nbsp;defaults&nbsp;to&nbsp;0&nbsp;otherwise.&nbsp;So,&nbsp;for&nbsp;example,&nbsp;all&nbsp;Overlays&nbsp;currently&nbsp;have&nbsp;the&nbsp;X&nbsp;and&nbsp;Y&nbsp;axes,&nbsp;and&nbsp;no&nbsp;other&nbsp;axes.&nbsp;Embedding&nbsp;a&nbsp;rectangle&nbsp;overlay&nbsp;in&nbsp;a&nbsp;4D&nbsp;dataset&nbsp;(with,&nbsp;say,&nbsp;XYZT)&nbsp;causes&nbsp;that&nbsp;rectangle&nbsp;to&nbsp;be&nbsp;visible&nbsp;at&nbsp;Z=0,&nbsp;T=0,&nbsp;and&nbsp;no&nbsp;other&nbsp;Z&nbsp;and&nbsp;T&nbsp;positions,&nbsp;unless&nbsp;the&nbsp;DataView.setPosition(long,&nbsp;AxisType)&nbsp;method&nbsp;is&nbsp;used&nbsp;to&nbsp;override&nbsp;a&nbsp;different&nbsp;position&nbsp;for&nbsp;that&nbsp;dimension.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;In&nbsp;the&nbsp;future,&nbsp;we&nbsp;could&nbsp;enable&nbsp;the&nbsp;user&nbsp;to&nbsp;specify&nbsp;an&nbsp;alternative&nbsp;behavior&nbsp;as&nbsp;you&nbsp;suggest,&nbsp;such&nbsp;that&nbsp;the&nbsp;overlay&nbsp;becomes&nbsp;visible&nbsp;at&nbsp;*all*&nbsp;positions&nbsp;of&nbsp;that&nbsp;axis.&nbsp;But&nbsp;for&nbsp;now&nbsp;it&nbsp;is&nbsp;always&nbsp;a&nbsp;constant&nbsp;value.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;ul&gt;&lt;li&gt;A&nbsp;display&nbsp;window&nbsp;holds&nbsp;the&nbsp;information&nbsp;about&nbsp;what&nbsp;plane&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;displayed&nbsp;and&nbsp;how&nbsp;the&nbsp;channels&nbsp;are&nbsp;composited.&lt;/li&gt;&lt;ul&gt;&lt;li&gt;The&nbsp;views&nbsp;are&nbsp;asked&nbsp;to&nbsp;display&nbsp;according&nbsp;to&nbsp;the&nbsp;plane<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information.&nbsp;A&nbsp;plane&nbsp;is&nbsp;an&nbsp;interval&nbsp;where&nbsp;the&nbsp;min=max&nbsp;for&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimensions&nbsp;but&nbsp;X&nbsp;and&nbsp;Y.&nbsp;The&nbsp;views&nbsp;could&nbsp;construct&nbsp;appropriate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectors&nbsp;based&nbsp;on&nbsp;the&nbsp;interval.&nbsp;The&nbsp;display&nbsp;window&nbsp;should<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;also&nbsp;control&nbsp;the&nbsp;channel&nbsp;compositing&nbsp;information&nbsp;and&nbsp;the&nbsp;views<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;reference&nbsp;the&nbsp;display&nbsp;window&amp;#39;s&nbsp;compositing&nbsp;information<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;of&nbsp;maintaining&nbsp;their&nbsp;own&nbsp;copies.&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Right,&nbsp;as&nbsp;things&nbsp;stand&nbsp;now,&nbsp;the&nbsp;ImageDisplay&nbsp;tracks&nbsp;its&nbsp;current&nbsp;position&nbsp;(i.e.,&nbsp;it&nbsp;implements&nbsp;PositionableByAxis)&nbsp;and&nbsp;the&nbsp;DisplayPanel&nbsp;provides&nbsp;the&nbsp;GUI&nbsp;that&nbsp;actually&nbsp;presents&nbsp;the&nbsp;information&nbsp;onscreen.&nbsp;However,&nbsp;one&nbsp;vital&nbsp;remaining&nbsp;task&nbsp;is&nbsp;to&nbsp;finish&nbsp;decoupling&nbsp;these&nbsp;two&nbsp;classes.&nbsp;Currently&nbsp;there&nbsp;is&nbsp;still&nbsp;some&nbsp;unfortunate&nbsp;coupling&nbsp;between&nbsp;ImageDisplay,&nbsp;ImageCanvas,&nbsp;DisplayPanel&nbsp;and&nbsp;DisplayWindow,&nbsp;which&nbsp;needs&nbsp;to&nbsp;change.&nbsp;The&nbsp;ImageDisplay&nbsp;and&nbsp;DataViews&nbsp;should&nbsp;be&nbsp;completely&nbsp;UI-agnostic,&nbsp;with&nbsp;the&nbsp;active&nbsp;user&nbsp;interface&nbsp;components&nbsp;subscribing&nbsp;to&nbsp;display&nbsp;events&nbsp;and&nbsp;updating&nbsp;themselves&nbsp;accordingly.&nbsp;This&nbsp;will&nbsp;help&nbsp;eliminate&nbsp;some&nbsp;problematic&nbsp;sections&nbsp;of&nbsp;code,&nbsp;particularly&nbsp;SwingDatasetView&nbsp;and&nbsp;SwingOverlayView,&nbsp;which&nbsp;are&nbsp;discouraged&nbsp;to&nbsp;use&nbsp;in&nbsp;ImageJ&nbsp;plugins&nbsp;due&nbsp;to&nbsp;their&nbsp;Swing-specific&nbsp;nature.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;&lt;ul&gt;&lt;li&gt;Perhaps&nbsp;there&nbsp;is&nbsp;a&nbsp;SpatialDataObject&nbsp;or&nbsp;perhaps&nbsp;the&nbsp;DataObject<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;always&nbsp;spatial.&nbsp;In&nbsp;any&nbsp;case,&nbsp;the&nbsp;axis&nbsp;information&nbsp;and&nbsp;channel<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata&nbsp;should&nbsp;be&nbsp;pushed&nbsp;up&nbsp;the&nbsp;inheritance&nbsp;hierarchy&nbsp;so&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Overlay&nbsp;has&nbsp;a&nbsp;first-class&nbsp;representation&nbsp;of&nbsp;that&nbsp;and&nbsp;operations<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;generate&nbsp;overlays&nbsp;from&nbsp;datasets&nbsp;copy&nbsp;the&nbsp;information&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlays&nbsp;they&nbsp;create.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;We&nbsp;went&nbsp;the&nbsp;route&nbsp;of&nbsp;&amp;quot;data&nbsp;objects&nbsp;are&nbsp;always&nbsp;spatial.&amp;quot;&nbsp;And&nbsp;yeah,&nbsp;a&nbsp;lot&nbsp;of&nbsp;functionality&nbsp;was&nbsp;pushed&nbsp;up&nbsp;into&nbsp;AbstractData,&nbsp;AbstractDataView&nbsp;and&nbsp;AbstractImageDisplay.&nbsp;Hopefully&nbsp;this&nbsp;will&nbsp;reduce&nbsp;the&nbsp;amount&nbsp;of&nbsp;dataset-&nbsp;and&nbsp;overlay-specific&nbsp;code&nbsp;throughout&nbsp;the&nbsp;system.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&lt;ul&gt;&lt;li&gt;There&nbsp;is&nbsp;a&nbsp;spectral&nbsp;dimension,&nbsp;but&nbsp;the&nbsp;channel&nbsp;axis&nbsp;doesn&amp;#39;t<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capture&nbsp;that.&nbsp;Channels&nbsp;are&nbsp;categorical&nbsp;and&nbsp;should&nbsp;have&nbsp;names&nbsp;so<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;they&nbsp;can&nbsp;be&nbsp;matched&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;axes&nbsp;are&nbsp;matched.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;It&nbsp;is&nbsp;a&nbsp;good&nbsp;point&nbsp;that&nbsp;we&nbsp;should&nbsp;add&nbsp;some&nbsp;support&nbsp;for&nbsp;categorical&nbsp;dimensions&nbsp;in&nbsp;general.&nbsp;It&nbsp;is&nbsp;not&nbsp;enough&nbsp;to&nbsp;have&nbsp;calibrations;&nbsp;it&nbsp;should&nbsp;be&nbsp;possible&nbsp;to&nbsp;label&nbsp;each&nbsp;axis&nbsp;position&nbsp;individually.&nbsp;This&nbsp;is&nbsp;useful&nbsp;for&nbsp;a&nbsp;variety&nbsp;of&nbsp;reasons.&nbsp;We&nbsp;will&nbsp;need&nbsp;to&nbsp;revisit&nbsp;this&nbsp;idea&nbsp;later,&nbsp;when&nbsp;time&nbsp;permits.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&amp;#39;s&nbsp;some&nbsp;work&nbsp;to&nbsp;refactor&nbsp;these&nbsp;things,&nbsp;but&nbsp;as&nbsp;the&nbsp;code&nbsp;base&nbsp;grows<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;becomes&nbsp;more&nbsp;entrenched&nbsp;it&nbsp;will&nbsp;become&nbsp;increasingly&nbsp;difficult&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;refactor,&nbsp;so&nbsp;we&nbsp;should&nbsp;do&nbsp;it&nbsp;sooner&nbsp;rather&nbsp;than&nbsp;later.&nbsp;I&nbsp;don&amp;#39;t&nbsp;think<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;is&nbsp;much&nbsp;coding&nbsp;at&nbsp;this&nbsp;point&nbsp;and&nbsp;if&nbsp;you&nbsp;look&nbsp;at&nbsp;the&nbsp;code,&nbsp;there<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;places&nbsp;where&nbsp;this&nbsp;organization&nbsp;clarifies&nbsp;some&nbsp;things.&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;The&nbsp;coding&nbsp;work&nbsp;has&nbsp;been&nbsp;nontrivial,&nbsp;but&nbsp;certainly&nbsp;doable.&nbsp;There&nbsp;is&nbsp;more&nbsp;left&nbsp;to&nbsp;do&nbsp;as&nbsp;well,&nbsp;but&nbsp;I&nbsp;think&nbsp;we&nbsp;are&nbsp;in&nbsp;reasonable&nbsp;shape.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;Thanks&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;comments!&nbsp;I&nbsp;really&nbsp;appreciate&nbsp;how&nbsp;much&nbsp;thought&nbsp;and&nbsp;effort&nbsp;you&nbsp;have&nbsp;put&nbsp;into&nbsp;the&nbsp;ImageJ&nbsp;design&nbsp;over&nbsp;the&nbsp;past&nbsp;year.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Curtis&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
On&nbsp;Fri,&nbsp;Jun&nbsp;3,&nbsp;2011&nbsp;at&nbsp;1:44&nbsp;PM,&nbsp;Lee&nbsp;Kamentsky&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:leek@broadinstitute.org&quot;&nbsp;target=&quot;_blank&quot;&gt;leek@broadinstitute.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;u&gt;&lt;/u&gt;<br>
<br>
&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&amp;#39;m&nbsp;running&nbsp;into&nbsp;a&nbsp;number&nbsp;of&nbsp;problems&nbsp;with&nbsp;overlays&nbsp;that&nbsp;are&nbsp;caused<br>
&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;EuclideanSpace&nbsp;is&nbsp;now&nbsp;defined&nbsp;on&nbsp;the&nbsp;Dataset<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;not&nbsp;on&nbsp;the&nbsp;Display&nbsp;used&nbsp;to&nbsp;composite&nbsp;datasets&nbsp;and&nbsp;overlays.<br>
&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;more&nbsp;than&nbsp;a&nbsp;few&nbsp;issues:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Trac&nbsp;issue&nbsp;ImageJ&nbsp;558&nbsp;-&nbsp;the&nbsp;user&nbsp;takes&nbsp;a&nbsp;Z-stack,&nbsp;multichannel<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;and&nbsp;thresholds&nbsp;it&nbsp;to&nbsp;get&nbsp;a&nbsp;BinaryMaskOverlay&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;associated&nbsp;ROI.&nbsp;The&nbsp;ROI&nbsp;is&nbsp;properly&nbsp;defined&nbsp;in&nbsp;a&nbsp;4-dimensional<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;space.&nbsp;However,&nbsp;when&nbsp;displayed,&nbsp;a&nbsp;single&nbsp;X/Y&nbsp;plane&nbsp;should&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampled&nbsp;and&nbsp;displayed,&nbsp;but&nbsp;there&nbsp;is&nbsp;no&nbsp;mechanism&nbsp;to&nbsp;retrieve&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plane&nbsp;being&nbsp;displayed&nbsp;or&nbsp;the&nbsp;color&nbsp;display&nbsp;mode.&nbsp;The&nbsp;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterates&nbsp;through&nbsp;the&nbsp;entire&nbsp;stack&nbsp;and&nbsp;that&amp;#39;s&nbsp;what&nbsp;causes&nbsp;it&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update&nbsp;slowly.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Datasets&nbsp;have&nbsp;axes&nbsp;which&nbsp;capture&nbsp;the&nbsp;metadata&nbsp;of&nbsp;what&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;particular&nbsp;dimension&nbsp;means.&nbsp;Overlays&nbsp;don&amp;#39;t&nbsp;have&nbsp;that.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Channels&nbsp;are&nbsp;really&nbsp;categorical,&nbsp;not&nbsp;ordinal&nbsp;-&nbsp;there&amp;#39;s&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;the&nbsp;red&nbsp;channel&nbsp;is&nbsp;zero,&nbsp;the&nbsp;green&nbsp;is&nbsp;one&nbsp;and&nbsp;the&nbsp;blue&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;two&nbsp;and,&nbsp;with&nbsp;a&nbsp;channel-stack,&nbsp;the&nbsp;DAPI&nbsp;channel&nbsp;in&nbsp;one&nbsp;image<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;be&nbsp;the&nbsp;PI&nbsp;channel&nbsp;in&nbsp;a&nbsp;second.&nbsp;You&nbsp;can&nbsp;properly&nbsp;relate&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel&nbsp;to&nbsp;the&nbsp;other&nbsp;through&nbsp;metadata,&nbsp;but&nbsp;overlays&nbsp;don&amp;#39;t&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;You&nbsp;might&nbsp;want&nbsp;to&nbsp;composite&nbsp;datasets&nbsp;-&nbsp;take&nbsp;two&nbsp;images&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;place&nbsp;them&nbsp;adjacently.&nbsp;What&nbsp;happens&nbsp;if&nbsp;they&nbsp;have&nbsp;different&nbsp;axes?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;happens&nbsp;if&nbsp;they&nbsp;have&nbsp;different&nbsp;channel&nbsp;layouts?&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So,&nbsp;what&nbsp;I&amp;#39;m&nbsp;thinking&nbsp;is&nbsp;the&nbsp;following:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;A&nbsp;display&nbsp;represents&nbsp;the&nbsp;EuclideanSpace&nbsp;that&amp;#39;s&nbsp;used&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;composite&nbsp;overlays&nbsp;and&nbsp;datasets. &nbsp;Think&nbsp;of&nbsp;the&nbsp;display&nbsp;as&nbsp;a&nbsp;big<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N-dimensional&nbsp;container&nbsp;and&nbsp;the&nbsp;overlays&nbsp;and&nbsp;datasets&nbsp;float<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inside&nbsp;that&nbsp;container.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;The&nbsp;display&nbsp;has&nbsp;a&nbsp;set&nbsp;of&nbsp;axes&nbsp;that&nbsp;are&nbsp;the&nbsp;union&nbsp;of&nbsp;all&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;axes&nbsp;that&nbsp;appear&nbsp;in&nbsp;the&nbsp;view&nbsp;data&nbsp;objects.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;There&nbsp;are&nbsp;two&nbsp;behaviors&nbsp;for&nbsp;a&nbsp;view&nbsp;object&nbsp;that&nbsp;does&nbsp;not&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;axis&nbsp;in&nbsp;the&nbsp;space.&nbsp;Perhaps&nbsp;the&nbsp;user&nbsp;selects&nbsp;the&nbsp;behavior?:&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;The&nbsp;value&nbsp;in&nbsp;space&nbsp;outside&nbsp;of&nbsp;a&nbsp;single&nbsp;plane&nbsp;defined&nbsp;by&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coordinate&nbsp;location&nbsp;along&nbsp;the&nbsp;axis&nbsp;is&nbsp;nan&nbsp;or&nbsp;null.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;The&nbsp;value&nbsp;in&nbsp;space&nbsp;along&nbsp;the&nbsp;missing&nbsp;axis&nbsp;is&nbsp;the&nbsp;same&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;locations&nbsp;along&nbsp;that&nbsp;axis.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;A&nbsp;display&nbsp;window&nbsp;holds&nbsp;the&nbsp;information&nbsp;about&nbsp;what&nbsp;plane&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;displayed&nbsp;and&nbsp;how&nbsp;the&nbsp;channels&nbsp;are&nbsp;composited.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;The&nbsp;views&nbsp;are&nbsp;asked&nbsp;to&nbsp;display&nbsp;according&nbsp;to&nbsp;the&nbsp;plane<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information.&nbsp;A&nbsp;plane&nbsp;is&nbsp;an&nbsp;interval&nbsp;where&nbsp;the&nbsp;min=max&nbsp;for&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimensions&nbsp;but&nbsp;X&nbsp;and&nbsp;Y.&nbsp;The&nbsp;views&nbsp;could&nbsp;construct&nbsp;appropriate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectors&nbsp;based&nbsp;on&nbsp;the&nbsp;interval.&nbsp;The&nbsp;display&nbsp;window&nbsp;should<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;also&nbsp;control&nbsp;the&nbsp;channel&nbsp;compositing&nbsp;information&nbsp;and&nbsp;the&nbsp;views<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;reference&nbsp;the&nbsp;display&nbsp;window&amp;#39;s&nbsp;compositing&nbsp;information<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;of&nbsp;maintaining&nbsp;their&nbsp;own&nbsp;copies.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Perhaps&nbsp;there&nbsp;is&nbsp;a&nbsp;SpatialDataObject&nbsp;or&nbsp;perhaps&nbsp;the&nbsp;DataObject<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;always&nbsp;spatial.&nbsp;In&nbsp;any&nbsp;case,&nbsp;the&nbsp;axis&nbsp;information&nbsp;and&nbsp;channel<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metadata&nbsp;should&nbsp;be&nbsp;pushed&nbsp;up&nbsp;the&nbsp;inheritance&nbsp;hierarchy&nbsp;so&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Overlay&nbsp;has&nbsp;a&nbsp;first-class&nbsp;representation&nbsp;of&nbsp;that&nbsp;and&nbsp;operations<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;generate&nbsp;overlays&nbsp;from&nbsp;datasets&nbsp;copy&nbsp;the&nbsp;information&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overlays&nbsp;they&nbsp;create.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;There&nbsp;is&nbsp;a&nbsp;spectral&nbsp;dimension,&nbsp;but&nbsp;the&nbsp;channel&nbsp;axis&nbsp;doesn&amp;#39;t<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capture&nbsp;that.&nbsp;Channels&nbsp;are&nbsp;categorical&nbsp;and&nbsp;should&nbsp;have&nbsp;names&nbsp;so<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;they&nbsp;can&nbsp;be&nbsp;matched&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;axes&nbsp;are&nbsp;matched.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&amp;#39;s&nbsp;some&nbsp;work&nbsp;to&nbsp;refactor&nbsp;these&nbsp;things,&nbsp;but&nbsp;as&nbsp;the&nbsp;code&nbsp;base&nbsp;grows<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;becomes&nbsp;more&nbsp;entrenched&nbsp;it&nbsp;will&nbsp;become&nbsp;increasingly&nbsp;difficult&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;refactor,&nbsp;so&nbsp;we&nbsp;should&nbsp;do&nbsp;it&nbsp;sooner&nbsp;rather&nbsp;than&nbsp;later.&nbsp;I&nbsp;don&amp;#39;t&nbsp;think<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;is&nbsp;much&nbsp;coding&nbsp;at&nbsp;this&nbsp;point&nbsp;and&nbsp;if&nbsp;you&nbsp;look&nbsp;at&nbsp;the&nbsp;code,&nbsp;there<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;places&nbsp;where&nbsp;this&nbsp;organization&nbsp;clarifies&nbsp;some&nbsp;things.&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--Lee&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
