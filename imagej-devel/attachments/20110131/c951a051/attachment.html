<tt>
Hi&nbsp;everyone,&lt;br&gt;&lt;br&gt;Recently&nbsp;I&nbsp;did&nbsp;some&nbsp;digging&nbsp;into&nbsp;a&nbsp;problem&nbsp;we&nbsp;have&nbsp;been&nbsp;having:&nbsp;when&nbsp;compiling&nbsp;ImageJDev&nbsp;code&nbsp;inside&nbsp;Eclipse,&nbsp;it&nbsp;does&nbsp;not&nbsp;execute&nbsp;annotation&nbsp;processors.&nbsp;The&nbsp;result&nbsp;is&nbsp;that&nbsp;when&nbsp;running&nbsp;ImageJ2&nbsp;from&nbsp;Eclipse,&nbsp;none&nbsp;of&nbsp;the&nbsp;dependency&nbsp;injection&nbsp;works—no&nbsp;IJ2&nbsp;plugins&nbsp;are&nbsp;discovered,&nbsp;etc.&lt;br&gt;<br>
<br>
&lt;br&gt;DETAILS:&lt;br&gt;<br>
<br>
<br>
<br>
&lt;br&gt;Both&nbsp;SezPoz&nbsp;and&nbsp;NetBeans&nbsp;Lookup&nbsp;make&nbsp;use&nbsp;of&nbsp;annotation&nbsp;processors—listed&nbsp;in&nbsp;the&nbsp;relevant&nbsp;JARs&amp;#39;&nbsp;META-INF/services/javax.annotation.processing.Processor&nbsp;file—to&nbsp;write&nbsp;additional&nbsp;information&nbsp;to&nbsp;the&nbsp;target&nbsp;project&amp;#39;s&nbsp;META-INF&nbsp;directory.&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;NetBeans&nbsp;Lookup,&nbsp;it&nbsp;adds&nbsp;the&nbsp;class&nbsp;to&nbsp;the&nbsp;META-INF/services/whatever-service&nbsp;file.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;It&nbsp;turns&nbsp;out&nbsp;that&nbsp;unlike&nbsp;Javac&nbsp;and&nbsp;NetBeans,&nbsp;Eclipse&nbsp;does&nbsp;not&nbsp;enable&nbsp;annotation&nbsp;processing&nbsp;by&nbsp;default.&nbsp;And&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;turn&nbsp;it&nbsp;on&nbsp;by&nbsp;default—it&nbsp;must&nbsp;be&nbsp;enabled&nbsp;on&nbsp;a&nbsp;project-by-project&nbsp;basis.&nbsp;Further,&nbsp;JARs&nbsp;containing&nbsp;relevant&nbsp;annotation&nbsp;processors&nbsp;must&nbsp;then&nbsp;be&nbsp;explicitly&nbsp;listed&nbsp;in&nbsp;the&nbsp;project&nbsp;configuration&nbsp;under&nbsp;Java&nbsp;Compiler&nbsp;&amp;gt;&nbsp;Annotation&nbsp;Processing&nbsp;&amp;gt;&nbsp;Factory&nbsp;Path.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;The&nbsp;SezPoz&nbsp;homepage&nbsp;makes&nbsp;mention&nbsp;of&nbsp;these&nbsp;facts,&nbsp;as&nbsp;follows:&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;Eclipse-specific&nbsp;notes:&nbsp;make&nbsp;sure&nbsp;annotation&nbsp;processing&nbsp;is&nbsp;enabled&nbsp;at&nbsp;least&nbsp;for&nbsp;any<br>
projects&nbsp;registering&nbsp;objects&nbsp;using&nbsp;annotations.&nbsp;Make&nbsp;sure&nbsp;the&nbsp;SezPoz&nbsp;library&nbsp;is<br>
in&nbsp;the&nbsp;factory&nbsp;path&nbsp;for&nbsp;annotation&nbsp;processors.&nbsp;You&nbsp;also&nbsp;need&nbsp;to&nbsp;check&nbsp;the&nbsp;box<br>
&lt;b&gt;Run&nbsp;this&nbsp;container&amp;#39;s&nbsp;processor&nbsp;in&nbsp;batch&nbsp;mode&lt;/b&gt;&nbsp;from&nbsp;the&nbsp;&lt;b&gt;Advanced&lt;/b&gt;<br>
button&nbsp;in&nbsp;&lt;b&gt;Java&nbsp;Compiler&nbsp;&amp;gt;&nbsp;Annotation&nbsp;Processing&nbsp;&amp;gt;&nbsp;Factory&nbsp;Path&lt;/b&gt;.<br>
There&nbsp;does&nbsp;not&nbsp;appear&nbsp;to&nbsp;be&nbsp;any&nbsp;way&nbsp;for&nbsp;Eclipse&nbsp;to&nbsp;discover&nbsp;processors<br>
in&nbsp;the&nbsp;regular&nbsp;classpath&nbsp;as&nbsp;JSR&nbsp;269&nbsp;suggests,&nbsp;and&nbsp;there&nbsp;does&nbsp;not&nbsp;appear&nbsp;to&nbsp;be<br>
any&nbsp;way&nbsp;to&nbsp;make&nbsp;these&nbsp;settings&nbsp;apply&nbsp;automatically&nbsp;to&nbsp;all&nbsp;projects.<br>
Eclipse&nbsp;users&nbsp;are&nbsp;recommended&nbsp;to&nbsp;use&nbsp;javac&nbsp;(e.g.&nbsp;via&nbsp;Maven)&nbsp;to&nbsp;build.<br>
&lt;a&nbsp;href=&quot;http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_apt_getting_started.htm&quot;&nbsp;target=&quot;_blank&quot;&gt;Eclipse&nbsp;Help&nbsp;Page&lt;/a&gt;<br>
&lt;a&nbsp;href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=280542&quot;&nbsp;target=&quot;_blank&quot;&gt;Eclipse&nbsp;bug&nbsp;#280542&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;Further,&nbsp;if&nbsp;anything&nbsp;goes&nbsp;wrong&nbsp;during&nbsp;annotation&nbsp;processing,&nbsp;Eclipse&nbsp;logs&nbsp;the&nbsp;error&nbsp;to&nbsp;.metadata/.log&nbsp;in&nbsp;its&nbsp;workspace,&nbsp;but&nbsp;does&nbsp;not&nbsp;report&nbsp;the&nbsp;problem&nbsp;in&nbsp;the&nbsp;user&nbsp;interface,&nbsp;making&nbsp;debugging&nbsp;difficult.&lt;br&gt;<br>
<br>
&lt;br&gt;SOLUTION:&lt;br&gt;&lt;br&gt;We&nbsp;could&nbsp;make&nbsp;SezPoz&nbsp;work&nbsp;automatically&nbsp;from&nbsp;Eclipse&nbsp;by&nbsp;committing&nbsp;certain&nbsp;metadata&nbsp;files&nbsp;to&nbsp;the&nbsp;repository.&nbsp;However,&nbsp;there&nbsp;is&nbsp;a&nbsp;further&nbsp;problem&nbsp;with&nbsp;using&nbsp;NetBeans&nbsp;Lookup&nbsp;from&nbsp;Eclipse:&nbsp;it&nbsp;throws&nbsp;a&nbsp;cryptic&nbsp;exception&nbsp;(to&nbsp;the&nbsp;.metadata/.log)&nbsp;when&nbsp;its&nbsp;annotation&nbsp;processor&nbsp;is&nbsp;invoked.&nbsp;Hence,&nbsp;NetBeans&nbsp;Lookup&nbsp;still&nbsp;won&amp;#39;t&nbsp;work&nbsp;properly,&nbsp;even&nbsp;with&nbsp;Eclipse&nbsp;properly&nbsp;configured.&lt;br&gt;<br>
<br>
&lt;br&gt;So&nbsp;for&nbsp;now,&nbsp;the&nbsp;easiest&nbsp;way&nbsp;to&nbsp;run&nbsp;ImageJ2&nbsp;is&nbsp;to&nbsp;do&nbsp;a&nbsp;clean&nbsp;build&nbsp;by&nbsp;invoking&nbsp;Maven,&nbsp;and&nbsp;then&nbsp;running&nbsp;a&nbsp;simple&nbsp;shell&nbsp;script:&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;$&nbsp;mvn&nbsp;-DskipTests&nbsp;clean&nbsp;install&lt;br&gt;$&nbsp;cd&nbsp;imagej&lt;br&gt;$&nbsp;./run&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;br&gt;In&nbsp;conclusion,&nbsp;this&nbsp;bug,&nbsp;&lt;a&nbsp;href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=280542&quot;&nbsp;target=&quot;_blank&quot;&gt;#280542&lt;/a&gt;,&nbsp;is&nbsp;a&nbsp;serious&nbsp;limitation&nbsp;in&nbsp;Eclipse,&nbsp;and&nbsp;I&nbsp;encourage&nbsp;any&nbsp;interested&nbsp;developers&nbsp;to&nbsp;vote&nbsp;for&nbsp;a&nbsp;resolution.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;<br>
-Curtis&lt;br&gt;&lt;br&gt;<br>

</tt>
