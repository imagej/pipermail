<tt>
Hi,&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;The&nbsp;problem&nbsp;is&nbsp;how&nbsp;to&nbsp;tell&nbsp;apart&nbsp;a&nbsp;greyscale&nbsp;with&nbsp;a&nbsp;viewing&nbsp;LUT&nbsp;(underlying&lt;br&gt;<br>
numeric,&nbsp;indexing&nbsp;a&nbsp;palette)&nbsp;from&nbsp;one&nbsp;with&nbsp;an&nbsp;unordered&nbsp;palette&nbsp;(indexed).&lt;br&gt;<br>
One&nbsp;way&nbsp;could&nbsp;be&nbsp;to&nbsp;implicitly&nbsp;record&nbsp;this&nbsp;at&nbsp;creation&nbsp;time&nbsp;(let&amp;#39;s&nbsp;say&nbsp;if&lt;br&gt;<br>
saved&nbsp;as&nbsp;GIF,&nbsp;or&nbsp;after&nbsp;applying&nbsp;some&nbsp;colour&nbsp;reduction)&nbsp;by&nbsp;adding&nbsp;a&nbsp;flag&lt;br&gt;<br>
indicating&nbsp;so.&nbsp;But&nbsp;of&nbsp;course,&nbsp;all&nbsp;externally&nbsp;created&nbsp;images&nbsp;would&nbsp;not&nbsp;have&lt;br&gt;<br>
this&nbsp;tag.&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;I&nbsp;know&nbsp;this&nbsp;thread&nbsp;is&nbsp;a&nbsp;bit&nbsp;old&nbsp;now,&nbsp;but&nbsp;I&nbsp;wanted&nbsp;to&nbsp;make&nbsp;one&nbsp;comment&nbsp;about&nbsp;differentiating&nbsp;between&nbsp;what&nbsp;Gabriel&nbsp;calls&nbsp;&amp;quot;underlying&nbsp;numeric,&nbsp;indexing&nbsp;a&nbsp;palette&amp;quot;&nbsp;(i.e.,&nbsp;color&nbsp;table&nbsp;for&nbsp;visualization)&nbsp;and&nbsp;&amp;quot;unordered&nbsp;palette&amp;quot;&nbsp;(i.e.,&nbsp;color&nbsp;table&nbsp;identifying&nbsp;actual&nbsp;measured&nbsp;values).&lt;br&gt;<br>
<br>
&lt;br&gt;Bio-Formats&nbsp;can&nbsp;report,&nbsp;for&nbsp;a&nbsp;given&nbsp;indexed&nbsp;dataset,&nbsp;which&nbsp;of&nbsp;these&nbsp;it&nbsp;believes&nbsp;the&nbsp;data&nbsp;to&nbsp;be,&nbsp;via&nbsp;a&nbsp;method&nbsp;called&nbsp;&amp;quot;isFalseColor().&amp;quot;&nbsp;If&nbsp;the&nbsp;data&nbsp;isFalseColor(),&nbsp;then&nbsp;its&nbsp;color&nbsp;table&nbsp;is&nbsp;merely&nbsp;for&nbsp;visualization.&nbsp;If&nbsp;!isFalseColor(),&nbsp;then&nbsp;the&nbsp;true&nbsp;data&nbsp;is&nbsp;represented&nbsp;in&nbsp;the&nbsp;table&nbsp;values.&lt;br&gt;<br>
<br>
&lt;br&gt;Right&nbsp;now,&nbsp;the&nbsp;false&nbsp;color&nbsp;flag&nbsp;is&nbsp;format-dependent.&nbsp;That&nbsp;is,&nbsp;we&nbsp;know&nbsp;certain&nbsp;formats&nbsp;generally&nbsp;save&nbsp;the&nbsp;color&nbsp;table&nbsp;for&nbsp;visualization.&nbsp;As&nbsp;of&nbsp;this&nbsp;writing,&nbsp;the&nbsp;following&nbsp;formats&nbsp;are&nbsp;reported&nbsp;as&nbsp;using&nbsp;false&nbsp;color&nbsp;indexing:&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;:&nbsp;curtis@rook&nbsp;~/code/LOCI/software/components/bio-formats/src/loci/formats/in&lt;br&gt;grep&nbsp;falseColor&nbsp;*.java&nbsp;|&nbsp;grep&nbsp;true&lt;br&gt;BioRadReader.java:   &nbsp;core[0].falseColor&nbsp;=&nbsp;true;&lt;br&gt;LeicaHandler.java:       &nbsp;coreMeta.falseColor&nbsp;=&nbsp;true;&lt;br&gt;<br>
<br>
LeicaReader.java:     &nbsp;core[i].falseColor&nbsp;=&nbsp;true;&lt;br&gt;NativeND2Reader.java:       &nbsp;core[i].falseColor&nbsp;=&nbsp;true;&lt;br&gt;OMEXMLReader.java:     &nbsp;core[i].falseColor&nbsp;=&nbsp;true;&lt;br&gt;TCSReader.java:   &nbsp;core[0].falseColor&nbsp;=&nbsp;true;&lt;br&gt;ZeissZVIReader.java:   &nbsp;core[0].falseColor&nbsp;=&nbsp;true;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;br&gt;I&nbsp;agree&nbsp;with&nbsp;Gabriel&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;nice&nbsp;if&nbsp;open&nbsp;standards&nbsp;(e.g.,&nbsp;OME-TIFF)&nbsp;supported&nbsp;indexed&nbsp;color,&nbsp;as&nbsp;well&nbsp;as&nbsp;a&nbsp;flag&nbsp;to&nbsp;differentiate,&nbsp;rather&nbsp;than&nbsp;merely&nbsp;using&nbsp;a&nbsp;convention.&nbsp;But&nbsp;for&nbsp;proprietary&nbsp;formats,&nbsp;this&nbsp;heuristic&nbsp;has&nbsp;worked&nbsp;fairly&nbsp;well&nbsp;so&nbsp;far.&lt;br&gt;<br>
<br>
&lt;br&gt;-Curtis&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Dec&nbsp;13,&nbsp;2010&nbsp;at&nbsp;4:35&nbsp;AM,&nbsp;Gabriel&nbsp;Landini&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:G.Landini@bham.ac.uk&quot;&gt;G.Landini@bham.ac.uk&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Monday&nbsp;13&nbsp;December&nbsp;2010&nbsp;10:52:34&nbsp;Johannes&nbsp;Schindelin&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;IMHO&nbsp;an&nbsp;index-color&nbsp;image&nbsp;is&nbsp;_not_&nbsp;of&nbsp;a&nbsp;numeric&nbsp;type.&nbsp;So&nbsp;to&nbsp;properly&lt;br&gt;<br>
&amp;gt;&nbsp;support&nbsp;index-color&nbsp;images,&nbsp;one&nbsp;would&nbsp;need&nbsp;to&nbsp;make&nbsp;a&nbsp;&amp;quot;CategoricalType&amp;quot;&lt;br&gt;<br>
&amp;gt;&nbsp;that&nbsp;still&nbsp;uses&nbsp;bytes&nbsp;or&nbsp;shorts,&nbsp;but&nbsp;that&nbsp;cannot&nbsp;add/multiply/whatever.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Sure.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;OTOH&nbsp;if&nbsp;the&nbsp;LUT&nbsp;is&nbsp;just&nbsp;a&nbsp;view&nbsp;mode&nbsp;(as&nbsp;it&nbsp;should&nbsp;always&nbsp;be&nbsp;seen&nbsp;in&lt;br&gt;<br>
&amp;gt;&nbsp;scientific&nbsp;imaging),&nbsp;then&nbsp;the&nbsp;LUT&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;image&nbsp;and&nbsp;should&nbsp;not&lt;br&gt;<br>
&amp;gt;&nbsp;be&nbsp;saved&nbsp;in&nbsp;the&nbsp;first&nbsp;place.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;agree&nbsp;here&nbsp;too,&nbsp;but&nbsp;most&nbsp;people&nbsp;will&nbsp;want&nbsp;to&nbsp;save&nbsp;greyscale&nbsp;images&nbsp;with&nbsp;a&lt;br&gt;<br>
viewing&nbsp;palette&nbsp;while&nbsp;preserving&nbsp;the&nbsp;underlying&nbsp;data.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;problem&nbsp;is&nbsp;how&nbsp;to&nbsp;tell&nbsp;apart&nbsp;a&nbsp;greyscale&nbsp;with&nbsp;a&nbsp;viewing&nbsp;LUT&nbsp;(underlying&lt;br&gt;<br>
numeric,&nbsp;indexing&nbsp;a&nbsp;palette)&nbsp;from&nbsp;one&nbsp;with&nbsp;an&nbsp;unordered&nbsp;palette&nbsp;(indexed).&lt;br&gt;<br>
One&nbsp;way&nbsp;could&nbsp;be&nbsp;to&nbsp;implicitly&nbsp;record&nbsp;this&nbsp;at&nbsp;creation&nbsp;time&nbsp;(let&amp;#39;s&nbsp;say&nbsp;if&lt;br&gt;<br>
saved&nbsp;as&nbsp;GIF,&nbsp;or&nbsp;after&nbsp;applying&nbsp;some&nbsp;colour&nbsp;reduction)&nbsp;by&nbsp;adding&nbsp;a&nbsp;flag&lt;br&gt;<br>
indicating&nbsp;so.&nbsp;But&nbsp;of&nbsp;course,&nbsp;all&nbsp;externally&nbsp;created&nbsp;images&nbsp;would&nbsp;not&nbsp;have&lt;br&gt;<br>
this&nbsp;tag.&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;going&nbsp;back&nbsp;to&nbsp;the&nbsp;original&nbsp;problem,&nbsp;if&nbsp;the&nbsp;palette&nbsp;-at&nbsp;file&nbsp;creation&nbsp;time-&lt;br&gt;<br>
is&nbsp;the&nbsp;Grays.lut,&nbsp;then&nbsp;it&nbsp;should&nbsp;be&nbsp;saved&nbsp;without&nbsp;a&nbsp;palette.&nbsp;I&nbsp;wonder&nbsp;if&nbsp;this&lt;br&gt;<br>
would&nbsp;solve&nbsp;the&nbsp;reported&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Gabriel&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagejdev.org&quot;&gt;ImageJ-devel@imagejdev.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagejdev.org/mailman/listinfo/imagej-devel&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagejdev.org/mailman/listinfo/imagej-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
