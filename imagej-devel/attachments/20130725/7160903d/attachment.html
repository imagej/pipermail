<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;We&nbsp;ran&nbsp;into&nbsp;the&nbsp;same&nbsp;requirement&nbsp;here.&nbsp;We&nbsp;had&nbsp;brightfield&nbsp;images&nbsp;where&nbsp;the&nbsp;background&nbsp;was&nbsp;uniform&nbsp;and&nbsp;the&nbsp;foreground&nbsp;was&nbsp;lighter&nbsp;or&nbsp;darker.&nbsp;A&nbsp;simple&nbsp;median&nbsp;worked&nbsp;well&nbsp;to&nbsp;stabily&nbsp;identify&nbsp;the&nbsp;background,&nbsp;but&nbsp;I&nbsp;was&nbsp;not&nbsp;able&nbsp;to&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;identify&nbsp;the&nbsp;high&nbsp;and&nbsp;low&nbsp;cutoffs.&nbsp;My&nbsp;first&nbsp;guess&nbsp;was&nbsp;to&nbsp;separate&nbsp;the&nbsp;pixel&nbsp;values&nbsp;into&nbsp;those&nbsp;that&nbsp;were&nbsp;above&nbsp;the&nbsp;median&nbsp;and&nbsp;those&nbsp;that&nbsp;were&nbsp;below&nbsp;and&nbsp;then&nbsp;use&nbsp;the&nbsp;Otsu&nbsp;algorithm&nbsp;on&nbsp;each&nbsp;group&nbsp;of&nbsp;pixel&nbsp;values&nbsp;to&nbsp;find&nbsp;the&nbsp;low&nbsp;and&nbsp;high&nbsp;cutoffs;&nbsp;that&nbsp;overestimated&nbsp;the&nbsp;background&nbsp;for&nbsp;my&nbsp;images.&nbsp;In&nbsp;the&nbsp;end,&nbsp;we&nbsp;just&nbsp;used&nbsp;a&nbsp;fixed&nbsp;increment&nbsp;and&nbsp;decrement&nbsp;from&nbsp;the&nbsp;median&nbsp;which&nbsp;worked&nbsp;well&nbsp;enough&nbsp;for&nbsp;our&nbsp;images.&nbsp;My&nbsp;instinct&nbsp;is&nbsp;that&nbsp;a&nbsp;similar&nbsp;technique&nbsp;should&nbsp;work&nbsp;and&nbsp;should&nbsp;be&nbsp;more&nbsp;reliable&nbsp;than&nbsp;something&nbsp;based&nbsp;on&nbsp;percentiles&nbsp;-&nbsp;the&nbsp;assumption&nbsp;made&nbsp;by&nbsp;percentiles&nbsp;is&nbsp;that&nbsp;there&nbsp;are&nbsp;a&nbsp;certain&nbsp;number&nbsp;of&nbsp;background&nbsp;pixels&nbsp;and&nbsp;that&nbsp;will&nbsp;vary&nbsp;from&nbsp;one&nbsp;image&nbsp;to&nbsp;the&nbsp;next.&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;a&nbsp;successful&nbsp;method&nbsp;might&nbsp;make&nbsp;a&nbsp;good&nbsp;paper,&nbsp;haven&#39;t&nbsp;done&nbsp;a&nbsp;literature&nbsp;search&nbsp;of&nbsp;the&nbsp;problem&nbsp;though,&nbsp;maybe&nbsp;something&nbsp;is&nbsp;out&nbsp;there.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--Lee&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;25,&nbsp;2013&nbsp;at&nbsp;12:51&nbsp;PM,&nbsp;Aivar&nbsp;Grislis&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:grislis@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;grislis@wisc.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
In&nbsp;the&nbsp;Threshold&nbsp;command&nbsp;we&nbsp;should&nbsp;support&nbsp;threshold&nbsp;methods&nbsp;that&nbsp;automatically&nbsp;exclude&nbsp;both&nbsp;low&nbsp;and&nbsp;high&nbsp;values.&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;of&nbsp;the&nbsp;current&nbsp;threshold&nbsp;methods&nbsp;separate&nbsp;figure&nbsp;from&nbsp;background&nbsp;by&nbsp;coming&nbsp;up&nbsp;with&nbsp;a&nbsp;single&nbsp;threshold&nbsp;value.&nbsp;The&nbsp;figure&nbsp;is&nbsp;then&nbsp;determined&nbsp;to&nbsp;be&nbsp;pixels&nbsp;with&nbsp;values&nbsp;from&nbsp;the&nbsp;minimum&nbsp;value&nbsp;to&nbsp;the&nbsp;threshold&nbsp;value&nbsp;and&nbsp;background&nbsp;threshold&nbsp;value&nbsp;to&nbsp;maximum&nbsp;value.&nbsp; If&nbsp;the&nbsp;&#39;dark&nbsp;background&#39;&nbsp;box&nbsp;is&nbsp;checked&nbsp;these&nbsp;ranges&nbsp;are&nbsp;swapped.&nbsp; In&nbsp;the&nbsp;user&nbsp;interface&nbsp;and&nbsp;internal&nbsp;representation&nbsp;rather&nbsp;than&nbsp;having&nbsp;a&nbsp;single&nbsp;threshold&nbsp;value&nbsp;there&nbsp;is&nbsp;a&nbsp;minimum&nbsp;and&nbsp;maximum&nbsp;range&nbsp;that&nbsp;the&nbsp;user&nbsp;can&nbsp;tweak.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
As&nbsp;an&nbsp;example,&nbsp;for&nbsp;images&nbsp;that&nbsp;consist&nbsp;of&nbsp;data&nbsp;for&nbsp;each&nbsp;pixel&nbsp;that&nbsp;is&nbsp;expected&nbsp;to&nbsp;have&nbsp;a&nbsp;near-normal&nbsp;distribution,&nbsp;such&nbsp;as&nbsp;fitted&nbsp;lifetime&nbsp;images,&nbsp;it&#39;s&nbsp;useful&nbsp;to&nbsp;have&nbsp;statistics-based&nbsp;threshold&nbsp;methods&nbsp;that&nbsp;exclude&nbsp;outliers&nbsp;based&nbsp;on&nbsp;mean&nbsp;and&nbsp;standard&nbsp;deviation&nbsp;or&nbsp;else&nbsp;median&nbsp;and&nbsp;quartile&nbsp;ranges.&nbsp; (I&nbsp;like&nbsp;to&nbsp;use&nbsp;Tukey&#39;s&nbsp;rule:&nbsp;&lt;a&nbsp;href=&quot;http://www.edgarstat.com/tukeys_outliers_help.cfm&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.edgarstat.com/&lt;u&gt;&lt;/u&gt;tukeys_outliers_help.cfm&lt;/a&gt;&nbsp;)&nbsp; Are&nbsp;there&nbsp;any&nbsp;other&nbsp;useful&nbsp;algorithms&nbsp;we&nbsp;could&nbsp;implement&nbsp;to&nbsp;exclude&nbsp;low&nbsp;and&nbsp;high&nbsp;values&nbsp;in&nbsp;ordinary&nbsp;images?&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Aivar&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagej.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ImageJ-devel@imagej.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej.net/mailman/listinfo/imagej-devel&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/mailman/&lt;u&gt;&lt;/u&gt;listinfo/imagej-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
