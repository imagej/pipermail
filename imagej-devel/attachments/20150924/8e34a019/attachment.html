<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Adrian,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;It&#39;s&nbsp;as&nbsp;if&nbsp;the&nbsp;ImageDisplay&nbsp;parameter&nbsp;was&nbsp;getting&nbsp;populated&nbsp;by&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;image&nbsp;before&nbsp;cropping&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;seems&nbsp;that&nbsp;the&nbsp;ROI&nbsp;syncing&nbsp;between&nbsp;IJ1&nbsp;and&nbsp;IJ2&nbsp;is&nbsp;not&nbsp;happening&nbsp;as&nbsp;expected.&nbsp;When&nbsp;your&nbsp;command&nbsp;runs,&nbsp;a&nbsp;sync&nbsp;is&nbsp;supposed&nbsp;to&nbsp;happen&nbsp;during&nbsp;preprocessing&nbsp;because&nbsp;you&nbsp;have&nbsp;a&nbsp;Dataset&nbsp;parameter.&nbsp;But&nbsp;maybe&nbsp;the&nbsp;sync&nbsp;is&nbsp;incomplete&nbsp;for&nbsp;some&nbsp;reason.&nbsp;Sorry&nbsp;I&nbsp;don&#39;t&nbsp;have&nbsp;time&nbsp;to&nbsp;investigate&nbsp;it&nbsp;right&nbsp;now,&nbsp;though.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&gt; &lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;What&nbsp;are&nbsp;those&nbsp;WARNINGs&nbsp;printed&nbsp;upon&nbsp;plugin&nbsp;invokation&nbsp;?&lt;/span&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Those&nbsp;were&nbsp;debugging&nbsp;statements,&nbsp;which&nbsp;were&nbsp;erroneously&nbsp;set&nbsp;to&nbsp;log.warn.&nbsp;I&nbsp;fixed&nbsp;it&nbsp;[1].&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1] &lt;a&nbsp;href=&quot;https://github.com/imagej/imagej-legacy/commit/2015336482fe284954d2603fede892d616d20960&quot;&gt;https://github.com/imagej/imagej-legacy/commit/2015336482fe284954d2603fede892d616d20960&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;4,&nbsp;2015&nbsp;at&nbsp;2:29&nbsp;PM,&nbsp;Adrian&nbsp;Daerr&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;Curtis,&lt;br&gt;<br>
&lt;br&gt;<br>
OverlayService.getSelectionBounds&nbsp;seems&nbsp;to&nbsp;behave&nbsp;stranger&nbsp;yet.&nbsp;Take&nbsp;the&nbsp;Foo_Bar&nbsp;test&nbsp;plugin&nbsp;source&nbsp;from&nbsp;my&nbsp;previous&nbsp;post,&nbsp;compile&nbsp;it&nbsp;and&nbsp;place&nbsp;it&nbsp;in&nbsp;ImageJ&#39;s&nbsp;plugins&nbsp;directory.&nbsp;Start&nbsp;ImageJ,&nbsp;create&nbsp;a&nbsp;new&nbsp;image&nbsp;(say&nbsp;400x400&nbsp;8bpp),&nbsp;draw&nbsp;a&nbsp;rectangular&nbsp;selection&nbsp;inside&nbsp;and&nbsp;invoke&nbsp;Foo_Bar:&nbsp;as&nbsp;reported&nbsp;in&nbsp;my&nbsp;last&nbsp;mail&nbsp;it&nbsp;will&nbsp;report&nbsp;a&nbsp;getSelectionBounds&nbsp;of&nbsp;399x399&nbsp;instead&nbsp;of&nbsp;the&nbsp;expected&nbsp;dimension&nbsp;of&nbsp;the&nbsp;rectangular&nbsp;selection.&nbsp;Now&nbsp;crop&nbsp;the&nbsp;image&nbsp;to&nbsp;the&nbsp;rectangular&nbsp;selection&nbsp;via&nbsp;Image-&gt;Crop,&nbsp;and&nbsp;invoke&nbsp;Foo_Bar&nbsp;again.&nbsp;It&nbsp;will&nbsp;report&nbsp;the&nbsp;same&nbsp;getSelectionBounds&nbsp;(width&nbsp;399,&nbsp;height&nbsp;399)&nbsp;although&nbsp;the&nbsp;active&nbsp;image&nbsp;is&nbsp;now&nbsp;strictly&nbsp;smaller.&nbsp;It&#39;s&nbsp;as&nbsp;if&nbsp;the&nbsp;ImageDisplay&nbsp;parameter&nbsp;was&nbsp;getting&nbsp;populated&nbsp;by&nbsp;the&nbsp;image&nbsp;before&nbsp;cropping&nbsp;(and&nbsp;of&nbsp;course&nbsp;still&nbsp;without&nbsp;rectangular&nbsp;selection).&lt;br&gt;<br>
&lt;br&gt;<br>
How&nbsp;is&nbsp;one&nbsp;supposed&nbsp;to&nbsp;use&nbsp;OverlayService.getSelectionBounds&nbsp;?&lt;br&gt;<br>
What&nbsp;are&nbsp;those&nbsp;WARNINGs&nbsp;printed&nbsp;upon&nbsp;plugin&nbsp;invokation&nbsp;?&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[WARNING]&nbsp;====&gt;&nbsp;Roi&nbsp;class&nbsp;=&nbsp;ij.gui.Roi&lt;br&gt;&lt;/span&gt;<br>
[WARNING]&nbsp;====&gt;&nbsp;RECTANGLE:&nbsp;Roi[Rectangle,&nbsp;x=76,&nbsp;y=92,&nbsp;width=209,&nbsp;height=160]&lt;br&gt;<br>
&lt;br&gt;<br>
cheers,&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;01&nbsp;Sep&nbsp;2015&nbsp;20:41:30&nbsp;+0200&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
 &quot;Adrian&nbsp;Daerr&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;Curtis,&nbsp;hi&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
If&nbsp;all&nbsp;you&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;bounding&nbsp;box&nbsp;of&nbsp;the&nbsp;active&nbsp;selection,&nbsp;you&nbsp;can&nbsp;just&nbsp;do&nbsp;it&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;the&nbsp;ImageJ2&nbsp;CropImageJ&nbsp;command:&lt;br&gt;<br>
by&nbsp;calling&nbsp;OverlayService.getSelectionBounds.&nbsp;Then&nbsp;you&nbsp;would&lt;br&gt;<br>
avoid&nbsp;some&nbsp;of&nbsp;the&nbsp;current&nbsp;weirdness&nbsp;associated&nbsp;with&nbsp;Overlay&lt;br&gt;<br>
parameters.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
This&nbsp;was&nbsp;working&nbsp;fine&nbsp;with&nbsp;a&nbsp;programmatically&nbsp;added&nbsp;rectangular&nbsp;overlay/selection,&nbsp;but&nbsp;when&nbsp;I&nbsp;call&nbsp;getSelectionBounds&nbsp;on&nbsp;an&nbsp;image&nbsp;with&nbsp;an&nbsp;interactively&nbsp;created&nbsp;rectangular&nbsp;selection&nbsp;it&nbsp;returns&nbsp;the&nbsp;whole&nbsp;image&nbsp;dimension.&nbsp;It&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;be&nbsp;aware&nbsp;of&nbsp;the&nbsp;ROI.&nbsp;Below&nbsp;is&nbsp;a&nbsp;MVCE&nbsp;to&nbsp;reproduce.&nbsp;After&nbsp;compiling&nbsp;and&nbsp;placing&nbsp;it&nbsp;in&nbsp;the&nbsp;plugins&nbsp;folder,&nbsp;I&nbsp;start&nbsp;imagej,&nbsp;create&nbsp;a&nbsp;new&nbsp;image,&nbsp;draw&nbsp;a&nbsp;rectangular&nbsp;selection&nbsp;using&nbsp;ImageJ&#39;s&nbsp;leftmost&nbsp;tool&nbsp;and&nbsp;then&nbsp;invoque&nbsp;the&nbsp;plugin.&nbsp;It&nbsp;logs&nbsp;the&nbsp;following&nbsp;to&nbsp;the&nbsp;console:&lt;br&gt;<br>
&lt;br&gt;<br>
[WARNING]&nbsp;====&gt;&nbsp;Roi&nbsp;class&nbsp;=&nbsp;ij.gui.Roi&lt;br&gt;<br>
[WARNING]&nbsp;====&gt;&nbsp;RECTANGLE:&nbsp;Roi[Rectangle,&nbsp;x=100,&nbsp;y=163,&nbsp;width=196,&nbsp;height=112]&lt;br&gt;<br>
[INFO]&nbsp;image:&nbsp;plugin:class&nbsp;net.imagej.display.DefaultImageDisplay:&nbsp;type=interface&nbsp;net.imagej.display.DataView,&nbsp;name=Untitled,&nbsp;objects={net.imagej.display.DefaultDatasetView@757dbeaf,&nbsp;net.imagej.display.DefaultOverlayView@2198a037}&lt;br&gt;<br>
[INFO]&nbsp;region:&nbsp;+0.0&nbsp;+0.0,&nbsp;559.0&nbsp;x&nbsp;559.0&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;expected&nbsp;the&nbsp;region&nbsp;in&nbsp;the&nbsp;last&nbsp;line&nbsp;(that&nbsp;obtained&nbsp;through&nbsp;OverlayService.getSelectionBounds)&nbsp;to&nbsp;coincide&nbsp;with&nbsp;the&nbsp;Roi&nbsp;mentionned&nbsp;in&nbsp;the&nbsp;WARNING.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;CropImage&nbsp;command&nbsp;you&nbsp;mentionned&nbsp;does&nbsp;not&nbsp;do&nbsp;anything&nbsp;either&nbsp;before&nbsp;calling&nbsp;getSelectionBounds,&nbsp;and&nbsp;cropping&nbsp;works&nbsp;fine.&nbsp;Do&nbsp;you&nbsp;understand&nbsp;what&nbsp;is&nbsp;going&nbsp;on&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
import&nbsp;net.imagej.display.ImageDisplay;&lt;br&gt;<br>
import&nbsp;net.imagej.display.OverlayService;&lt;br&gt;<br>
&lt;br&gt;<br>
import&nbsp;org.scijava.command.Command;&lt;br&gt;<br>
import&nbsp;org.scijava.log.LogService;&lt;br&gt;<br>
import&nbsp;org.scijava.plugin.Parameter;&lt;br&gt;<br>
import&nbsp;org.scijava.plugin.Plugin;&lt;br&gt;<br>
import&nbsp;org.scijava.util.RealRect;&lt;br&gt;<br>
&lt;br&gt;<br>
@Plugin(type&nbsp;=&nbsp;Command.class,&nbsp;menuPath&nbsp;=&nbsp;&quot;Plugins&gt;Foo_Bar&quot;)&lt;br&gt;<br>
public&nbsp;class&nbsp;Foo_Bar&nbsp;implements&nbsp;Command&nbsp;{&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;ImageDisplay&nbsp;display;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;OverlayService&nbsp;overlayService;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;LogService&nbsp;log;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Override&lt;br&gt;<br>
 &nbsp; &nbsp;public&nbsp;void&nbsp;run()&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;RealRect&nbsp;r&nbsp;=&nbsp;overlayService.getSelectionBounds(display);&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://log.info&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;log.info&lt;/a&gt;(&quot;image:&nbsp;&quot;+display);&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://log.info&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;log.info&lt;/a&gt;(&quot;region:&nbsp;+&quot;&nbsp;+&nbsp;r.x&nbsp;+&nbsp;&quot;&nbsp;+&quot;&nbsp;+ &nbsp;r.y&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +&nbsp;&quot;,&nbsp;&quot;&nbsp;+ &nbsp;r.width&nbsp;+&nbsp;&quot;&nbsp;x&nbsp;&quot;&nbsp;+&nbsp;r.height);&lt;br&gt;<br>
 &nbsp; &nbsp;}&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;24&nbsp;Aug&nbsp;2015&nbsp;16:22:15&nbsp;-0500&lt;br&gt;<br>
 Curtis&nbsp;Rueden&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ctrueden@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;ctrueden@wisc.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;Adrian,&lt;br&gt;<br>
&lt;br&gt;<br>
Glad&nbsp;to&nbsp;hear&nbsp;you&nbsp;found&nbsp;a&nbsp;working&nbsp;solution!&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;short&nbsp;answer&nbsp;about&nbsp;ROIs&nbsp;is&nbsp;that&nbsp;they&nbsp;have&nbsp;not&nbsp;been&nbsp;a&nbsp;focus&nbsp;of&nbsp;ImageJ2&lt;br&gt;<br>
or&nbsp;ImgLib2&nbsp;development&nbsp;in&nbsp;recent&nbsp;years.&nbsp;Support&nbsp;for&nbsp;labelings&nbsp;(highly&lt;br&gt;<br>
related&nbsp;to&nbsp;ROIs)&nbsp;was&nbsp;rewritten&nbsp;this&nbsp;January&nbsp;[1],&nbsp;but&nbsp;a&nbsp;rewrite&nbsp;of&nbsp;the&nbsp;core&lt;br&gt;<br>
ImgLib2&nbsp;ROI&nbsp;library&nbsp;[2]&nbsp;is&nbsp;still&nbsp;pending.&nbsp;And&nbsp;there&nbsp;is&nbsp;a&nbsp;substantial&lt;br&gt;<br>
pending&nbsp;redesign&nbsp;of&nbsp;the&nbsp;ImageJ&nbsp;Common&nbsp;data&nbsp;model&nbsp;planned&nbsp;as&nbsp;well&nbsp;--&nbsp;though&lt;br&gt;<br>
it&nbsp;is&nbsp;unlikely&nbsp;anyone&nbsp;will&nbsp;work&nbsp;on&nbsp;it&nbsp;this&nbsp;year.&lt;br&gt;<br>
&lt;br&gt;<br>
At&nbsp;this&nbsp;juncture,&nbsp;the&nbsp;most&nbsp;effective&nbsp;balance&nbsp;for&nbsp;most&nbsp;plugin&nbsp;developers&nbsp;is&lt;br&gt;<br>
probably&nbsp;to&nbsp;use&nbsp;parameterized&nbsp;commands&nbsp;and/or&nbsp;scripts,&nbsp;but&nbsp;with&nbsp;the&nbsp;ImageJ1&lt;br&gt;<br>
data&nbsp;structures&nbsp;(ij.ImagePlus,&nbsp;etc.)&nbsp;--&nbsp;unless&nbsp;you&nbsp;need&nbsp;access&nbsp;to&nbsp;a&nbsp;new&lt;br&gt;<br>
capability&nbsp;that&nbsp;ImageJ2&nbsp;+&nbsp;ImgLib2&nbsp;make&nbsp;possible&nbsp;(&gt;5D&nbsp;images,&nbsp;very&nbsp;large&lt;br&gt;<br>
image&nbsp;planes,&nbsp;very&nbsp;large&nbsp;numbers&nbsp;of&nbsp;image&nbsp;planes,&nbsp;dynamically&nbsp;generated&lt;br&gt;<br>
images,&nbsp;images&nbsp;stored&nbsp;in&nbsp;places&nbsp;besides&nbsp;disk,&nbsp;cell-based&nbsp;image&nbsp;caching,&lt;br&gt;<br>
image&nbsp;types&nbsp;beyond&nbsp;uint8/uint16/float32,&nbsp;etc.).&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;said,&nbsp;your&nbsp;feedback&nbsp;is&nbsp;very&nbsp;much&nbsp;appreciated.&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;some&nbsp;issues&nbsp;will&nbsp;be&nbsp;ironed&nbsp;out&nbsp;in&nbsp;the&nbsp;next&nbsp;couple&nbsp;of&nbsp;weeks&nbsp;as&nbsp;we&nbsp;revamp&lt;br&gt;<br>
the&nbsp;tutorials&nbsp;for&nbsp;the&nbsp;upcoming&nbsp;ImageJ&nbsp;conference.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;give&nbsp;a&nbsp;plugin&nbsp;a&nbsp;(rectangular)&nbsp;roi&nbsp;is&nbsp;to&nbsp;...&nbsp;just&lt;br&gt;<br>
declare&nbsp;a&nbsp;net.imagej.overlay.RectangularOverlay&nbsp;as&nbsp;an&nbsp;input&nbsp;parameter.&lt;br&gt;<br>
It&nbsp;is&nbsp;properly&nbsp;populated&nbsp;by&nbsp;the&nbsp;origin&nbsp;and&nbsp;extent&nbsp;of&nbsp;a&nbsp;rectangular&lt;br&gt;<br>
selection&nbsp;drawn&nbsp;on&nbsp;the&nbsp;active&nbsp;image.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
If&nbsp;all&nbsp;you&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;bounding&nbsp;box&nbsp;of&nbsp;the&nbsp;active&nbsp;selection,&nbsp;you&nbsp;can&lt;br&gt;<br>
just&nbsp;do&nbsp;it&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;the&nbsp;ImageJ2&nbsp;CropImageJ&nbsp;command:&nbsp;by&nbsp;calling&lt;br&gt;<br>
OverlayService.getSelectionBounds&nbsp;[3].&nbsp;Then&nbsp;you&nbsp;would&nbsp;avoid&nbsp;some&nbsp;of&nbsp;the&lt;br&gt;<br>
current&nbsp;weirdness&nbsp;associated&nbsp;with&nbsp;Overlay&nbsp;parameters.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
If&nbsp;I&nbsp;launch&nbsp;the&nbsp;default&nbsp;UI,&nbsp;then&nbsp;the&nbsp;ROI&nbsp;will&nbsp;not&nbsp;show,&nbsp;but&nbsp;the&nbsp;plugin&lt;br&gt;<br>
can&nbsp;launch.&nbsp;If&nbsp;on&nbsp;the&nbsp;other&nbsp;hand&nbsp;I&nbsp;launch&nbsp;the&nbsp;&quot;swing&quot;&nbsp;UI&nbsp;as&nbsp;in&nbsp;the&lt;br&gt;<br>
tutorial,&nbsp;I&nbsp;do&nbsp;see&nbsp;the&nbsp;ROI&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Yes,&nbsp;that&nbsp;tutorial&nbsp;was&nbsp;written&nbsp;when&nbsp;the&nbsp;ImageJ2&nbsp;Swing&nbsp;UI&nbsp;was&nbsp;still&nbsp;the&lt;br&gt;<br>
default.&nbsp;It&nbsp;is&nbsp;not&nbsp;tested/working&nbsp;with&nbsp;the&nbsp;Legacy&nbsp;UI&nbsp;(which&nbsp;is&nbsp;now&nbsp;the&lt;br&gt;<br>
default).&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;remedy&nbsp;that&nbsp;very&nbsp;soon.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
(not&nbsp;until&nbsp;I&nbsp;call&nbsp;Image&gt;Adjust&gt;Brightness/Contrast...,&nbsp;but&nbsp;that&#39;s&nbsp;a&lt;br&gt;<br>
minor&nbsp;detail),&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Yes,&nbsp;that&nbsp;annoying&nbsp;bug&nbsp;has&nbsp;been&nbsp;around&nbsp;for&nbsp;quite&nbsp;a&nbsp;while.&nbsp;Many&nbsp;things&nbsp;that&lt;br&gt;<br>
refresh&nbsp;the&nbsp;display&nbsp;will&nbsp;do,&nbsp;such&nbsp;as&nbsp;pressing&nbsp;+&nbsp;then&nbsp;-&nbsp;to&nbsp;zoom&nbsp;in/out.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
but&nbsp;now&nbsp;the&nbsp;invocation&nbsp;of&nbsp;the&nbsp;plugin&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;main()&nbsp;will&nbsp;throw&nbsp;a&lt;br&gt;<br>
MethodCallException&nbsp;with&nbsp;the&nbsp;stackTrace&nbsp;pasted&nbsp;below.&nbsp;How&nbsp;can&nbsp;the&lt;br&gt;<br>
choice&nbsp;of&nbsp;a&nbsp;UI&nbsp;make&nbsp;the&nbsp;plugin&nbsp;execution&nbsp;fail&nbsp;?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
...&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Caused&nbsp;by:&nbsp;java.lang.NullPointerException&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;Goutte_pendante.initTitle(Goutte_pendante.java:94)&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
In&nbsp;2014,&nbsp;we&nbsp;made&nbsp;a&nbsp;conscious&nbsp;decision&nbsp;to&nbsp;support&nbsp;the&nbsp;ImageJ&nbsp;1.x&nbsp;classes&lt;br&gt;<br>
_only_&nbsp;from&nbsp;the&nbsp;legacy&nbsp;UI.&nbsp;You&nbsp;cannot&nbsp;use&nbsp;them&nbsp;from&nbsp;the&nbsp;Swing&nbsp;UI.&nbsp;In&nbsp;your&lt;br&gt;<br>
case:&nbsp;the&nbsp;ActiveImagePlusPreprocessor&nbsp;cannot&nbsp;set&nbsp;the&nbsp;active&nbsp;ImagePlus&lt;br&gt;<br>
because&nbsp;WindowManager.getCurrentImage()&nbsp;returns&nbsp;null&nbsp;[4],&nbsp;because&nbsp;no&nbsp;ImageJ&lt;br&gt;<br>
1.x&nbsp;user&nbsp;interface&nbsp;exists.&nbsp;So&nbsp;it&nbsp;stays&nbsp;null&nbsp;and&nbsp;then&nbsp;your&nbsp;initializer&lt;br&gt;<br>
throws&nbsp;the&nbsp;NPE.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
Curtis&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/imglib/imglib2-roi/tree/imglib2-roi-0.3.2/src/main/java/net/imglib2/labeling&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imglib/imglib2-roi/tree/imglib2-roi-0.3.2/src/main/java/net/imglib2/labeling&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/imglib/imglib2-roi&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imglib/imglib2-roi&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[3]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/imagej/imagej-plugins-commands/blob/imagej-plugins-commands-0.5.1/src/main/java/net/imagej/plugins/commands/imglib/CropImage.java#L104&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imagej/imagej-plugins-commands/blob/imagej-plugins-commands-0.5.1/src/main/java/net/imagej/plugins/commands/imglib/CropImage.java#L104&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[4]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.17.1/src/main/java/net/imagej/legacy/plugin/ActiveImagePlusPreprocessor.java#L49-L52&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.17.1/src/main/java/net/imagej/legacy/plugin/ActiveImagePlusPreprocessor.java#L49-L52&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Sun,&nbsp;Aug&nbsp;23,&nbsp;2015&nbsp;at&nbsp;6:30&nbsp;AM,&nbsp;Adrian&nbsp;Daerr&nbsp;&lt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
While&nbsp;I&nbsp;am&nbsp;still&nbsp;interested&nbsp;in&nbsp;answers&nbsp;concerning&nbsp;the&nbsp;status/API/roadmap&lt;br&gt;<br>
for&nbsp;ROIs&nbsp;and&nbsp;overlays&nbsp;beyond&nbsp;what&#39;s&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/ROIs&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/ROIs&lt;/a&gt;,&nbsp;I&nbsp;have&lt;br&gt;<br>
solved&nbsp;the&nbsp;problem&nbsp;at&nbsp;hand&nbsp;which&nbsp;was&nbsp;keeping&nbsp;me&nbsp;from&nbsp;making&nbsp;progress,&nbsp;so&nbsp;I&lt;br&gt;<br>
post&nbsp;the&nbsp;(rather&nbsp;obvious,&nbsp;once&nbsp;I&nbsp;found&nbsp;the&nbsp;net.imagej.overlay&nbsp;package)&lt;br&gt;<br>
solution&nbsp;here&nbsp;for&nbsp;the&nbsp;record&nbsp;and&nbsp;to&nbsp;close&nbsp;this&nbsp;thread.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;give&nbsp;a&nbsp;plugin&nbsp;a&nbsp;(rectangular)&nbsp;roi&nbsp;is&nbsp;to&nbsp;...&lt;br&gt;<br>
just&nbsp;declare&nbsp;a&nbsp;net.imagej.overlay.RectangularOverlay&nbsp;as&nbsp;an&nbsp;input&lt;br&gt;<br>
parameter.&nbsp;It&nbsp;is&nbsp;properly&nbsp;populated&nbsp;by&nbsp;the&nbsp;origin&nbsp;and&nbsp;extent&nbsp;of&nbsp;a&lt;br&gt;<br>
rectangular&nbsp;selection&nbsp;drawn&nbsp;on&nbsp;the&nbsp;active&nbsp;image.&lt;br&gt;<br>
&lt;br&gt;<br>
cheers,&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Wed,&nbsp;19&nbsp;Aug&nbsp;2015&nbsp;17:10:06&nbsp;+0200&lt;br&gt;<br>
&lt;br&gt;<br>
 &quot;Adrian&nbsp;Daerr&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Dear&nbsp;ImageJ&nbsp;developers,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;included&nbsp;code&nbsp;from&nbsp;the&nbsp;AddROIs&nbsp;tutorial&nbsp;into&nbsp;the&nbsp;main()&lt;br&gt;<br>
method&nbsp;of&nbsp;my&nbsp;plugin&nbsp;(for&nbsp;the&nbsp;moment&nbsp;essentially&nbsp;one&nbsp;of&nbsp;Curtis&#39;&lt;br&gt;<br>
commands-with-preview&nbsp;example),&nbsp;to&nbsp;select&nbsp;a&nbsp;Rectangle&nbsp;before&lt;br&gt;<br>
calling&nbsp;the&nbsp;plugin.&nbsp;The&nbsp;source&nbsp;is&nbsp;available&nbsp;here:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://gitlab.com/pendant-drop/pendant-drop&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gitlab.com/pendant-drop/pendant-drop&lt;/a&gt;&lt;br&gt;<br>
(in&nbsp;Goutte_pendante.java)&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;I&nbsp;launch&nbsp;the&nbsp;default&nbsp;UI,&nbsp;then&nbsp;the&nbsp;ROI&nbsp;will&nbsp;not&nbsp;show,&nbsp;but&nbsp;the&lt;br&gt;<br>
plugin&nbsp;can&nbsp;launch.&nbsp;If&nbsp;on&nbsp;the&nbsp;other&nbsp;hand&nbsp;I&nbsp;launch&nbsp;the&nbsp;&quot;swing&quot;&nbsp;UI&lt;br&gt;<br>
as&nbsp;in&nbsp;the&nbsp;tutorial,&nbsp;I&nbsp;do&nbsp;see&nbsp;the&nbsp;ROI&nbsp;(not&nbsp;until&nbsp;I&nbsp;call&lt;br&gt;<br>
Image&gt;Adjust&gt;Brightness/Contrast...,&nbsp;but&nbsp;that&#39;s&nbsp;a&nbsp;minor&nbsp;detail),&lt;br&gt;<br>
but&nbsp;now&nbsp;the&nbsp;invocation&nbsp;of&nbsp;the&nbsp;plugin&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;main()&nbsp;will&lt;br&gt;<br>
throw&nbsp;a&nbsp;MethodCallException&nbsp;with&nbsp;the&nbsp;stackTrace&nbsp;pasted&nbsp;below.&nbsp;How&lt;br&gt;<br>
can&nbsp;the&nbsp;choice&nbsp;of&nbsp;a&nbsp;UI&nbsp;make&nbsp;the&nbsp;plugin&nbsp;execution&nbsp;fail&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;any&nbsp;other&nbsp;way&nbsp;that&nbsp;main&nbsp;can&nbsp;set&nbsp;a&nbsp;ROI&nbsp;on&nbsp;a&nbsp;loaded&nbsp;image&lt;br&gt;<br>
that&nbsp;the&nbsp;plugin,&nbsp;which&nbsp;still&nbsp;uses&nbsp;an&nbsp;ImagePlus&nbsp;as&nbsp;input&lt;br&gt;<br>
parameter,&nbsp;will&nbsp;see&nbsp;when&nbsp;calling&nbsp;imp.getProcessor().getRoi()&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
TIA&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
$&gt;&nbsp;mvn&nbsp;package&lt;br&gt;<br>
$&gt;&nbsp;fiji&nbsp;--class-path&nbsp;target/pendant_drop-2.0.0-SNAPSHOT.jar&lt;br&gt;<br>
Goutte_pendante.class&lt;br&gt;<br>
[INFO]&nbsp;Overriding&nbsp;About&nbsp;Pendant&nbsp;Drop;&nbsp;identifier:&lt;br&gt;<br>
command:About_Pendant_Drop;&nbsp;jar:&lt;br&gt;<br>
file:/home/adrian/Programmes/plugins_ImageJ_src/Traitement_Gouttes/target/pendant_drop-2.0.0-SNAPSHOT.jar&lt;br&gt;<br>
[INFO]&nbsp;Overriding&nbsp;Pendant&nbsp;Drop;&nbsp;identifier:&nbsp;command:Goutte_pendante;&nbsp;jar:&lt;br&gt;<br>
file:/home/adrian/Programmes/plugins_ImageJ_src/Traitement_Gouttes/target/pendant_drop-2.0.0-SNAPSHOT.jar&lt;br&gt;<br>
[INFO]&nbsp;Populating&nbsp;metadata&lt;br&gt;<br>
[INFO]&nbsp;Populating&nbsp;metadata&lt;br&gt;<br>
[INFO]&nbsp;Found&nbsp;10&nbsp;JHotDraw&nbsp;adapters.&lt;br&gt;<br>
org.scijava.module.MethodCallException:&nbsp;Error&nbsp;executing&nbsp;method:&lt;br&gt;<br>
Goutte_pendante#initTitle&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.MethodRef.execute(MethodRef.java:73)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.module.AbstractModuleItem.initialize(AbstractModuleItem.java:199)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.module.AbstractModule.initialize(AbstractModule.java:86)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.command.CommandModule.initialize(CommandModule.java:147)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.module.process.InitPreprocessor.process(InitPreprocessor.java:60)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.module.ModuleRunner.preProcess(ModuleRunner.java:104)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.run(ModuleRunner.java:156)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.call(ModuleRunner.java:126)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.call(ModuleRunner.java:65)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.thread.DefaultThreadService$2.call(DefaultThreadService.java:191)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;java.lang.Thread.run(Thread.java:662)&lt;br&gt;<br>
Caused&nbsp;by:&nbsp;java.lang.reflect.InvocationTargetException&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;sun.reflect.NativeMethodAccessorImpl.invoke0(Native&nbsp;Method)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;java.lang.reflect.Method.invoke(Method.java:597)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.MethodRef.execute(MethodRef.java:69)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;...&nbsp;14&nbsp;more&lt;br&gt;<br>
Caused&nbsp;by:&nbsp;java.lang.NullPointerException&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;Goutte_pendante.initTitle(Goutte_pendante.java:94)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;...&nbsp;19&nbsp;more&lt;br&gt;<br>
[ERROR]&nbsp;Module&nbsp;threw&nbsp;exception&lt;br&gt;<br>
java.lang.NullPointerException&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;Goutte_pendante.cancel(Goutte_pendante.java:87)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.command.CommandModule.cancel(CommandModule.java:140)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.module.ModuleRunner.cleanupAndBroadcastCancelation(ModuleRunner.java:189)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.run(ModuleRunner.java:161)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.call(ModuleRunner.java:126)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.module.ModuleRunner.call(ModuleRunner.java:65)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
org.scijava.thread.DefaultThreadService$2.call(DefaultThreadService.java:191)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&lt;br&gt;<br>
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;java.lang.Thread.run(Thread.java:662)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Sat,&nbsp;15&nbsp;Aug&nbsp;2015&nbsp;13:14:13&nbsp;+0200&lt;br&gt;<br>
 Adrian&nbsp;Daerr&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;seizing&nbsp;a&nbsp;major&nbsp;rewrite&nbsp;of&nbsp;a&nbsp;plugin&nbsp;as&nbsp;an&nbsp;opportunity&nbsp;to&nbsp;switch&lt;br&gt;<br>
from&nbsp;ImageJ1&nbsp;to&nbsp;ImageJ2,&nbsp;also&nbsp;to&nbsp;avoid&nbsp;concurrency&nbsp;issues[*],&nbsp;and&nbsp;now&lt;br&gt;<br>
lots&nbsp;of&nbsp;questions&nbsp;come&nbsp;up.&nbsp;Some&nbsp;concern&nbsp;the&nbsp;way&nbsp;ROIs&nbsp;are&nbsp;handled.&nbsp;What&lt;br&gt;<br>
has&nbsp;happened&nbsp;in&nbsp;this&nbsp;regard&nbsp;since&lt;br&gt;<br>
 &nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/ROIs&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/ROIs&lt;/a&gt;&lt;br&gt;<br>
was&nbsp;last&nbsp;updated&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
[*]&nbsp;cf&nbsp;discussion&nbsp;on&nbsp;the&nbsp;ImageJ&nbsp;list&nbsp;archived&nbsp;at&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej.1557.x6.nabble.com/ExtendedPlugInFilter-GenericDialog-and-synchronization-td5013333.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.1557.x6.nabble.com/ExtendedPlugInFilter-GenericDialog-and-synchronization-td5013333.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Here&nbsp;are&nbsp;two&nbsp;concrete&nbsp;questions:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;My&nbsp;plugin&nbsp;relies&nbsp;on&nbsp;a&nbsp;rectangular&nbsp;ROI&nbsp;being&nbsp;drawn&nbsp;on&nbsp;the&nbsp;image&nbsp;to&lt;br&gt;<br>
know&nbsp;which&nbsp;area&nbsp;to&nbsp;include&nbsp;in&nbsp;the&nbsp;computation.&nbsp;How&nbsp;do&nbsp;I&nbsp;draw&nbsp;this&nbsp;ROI&lt;br&gt;<br>
once&nbsp;I&nbsp;have&nbsp;loaded&nbsp;the&nbsp;image&nbsp;as&nbsp;a&nbsp;dataset&nbsp;in&nbsp;the&nbsp;main()&nbsp;method&nbsp;that&nbsp;is&lt;br&gt;<br>
used&nbsp;for&nbsp;testing&nbsp;purposes&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
public&nbsp;static&nbsp;void&nbsp;main(final&nbsp;String...&nbsp;args)&nbsp;throws&nbsp;Exception&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp;final&nbsp;String&nbsp;testImagePath&nbsp;=&nbsp;&quot;testImage.jpg&quot;;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;//&nbsp;Launch&nbsp;ImageJ&nbsp;as&nbsp;usual.&lt;br&gt;<br>
 &nbsp; &nbsp;final&nbsp;ImageJ&nbsp;ij&nbsp;=&nbsp;net.imagej.Main.launch(args);&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;//&nbsp;Open&nbsp;test&nbsp;image.&lt;br&gt;<br>
 &nbsp; &nbsp;final&nbsp;Dataset&nbsp;dataset&nbsp;=&nbsp;ij.dataset().open(testImagePath);&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;//&nbsp;display&nbsp;the&nbsp;dataset&lt;br&gt;<br>
 &nbsp; &nbsp;ij.ui().show(dataset);&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;//&nbsp;create&nbsp;rectangular&nbsp;ROI&lt;br&gt;<br>
 &nbsp; &nbsp;//imp.setRoi(120,60,340,420);//&nbsp;How&nbsp;to&nbsp;do&nbsp;this&nbsp;on&nbsp;a&nbsp;dataset&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;//&nbsp;Launch&nbsp;the&nbsp;&quot;Foo_Bar&quot;&nbsp;command.&lt;br&gt;<br>
 &nbsp; &nbsp;ij.command().run(Foo_Bar.class,&nbsp;true);&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
(alternatively,&nbsp;how&nbsp;would&nbsp;I&nbsp;generate&nbsp;a&nbsp;new&nbsp;dataset,&nbsp;or&nbsp;I&nbsp;guess&nbsp;something&lt;br&gt;<br>
like&nbsp;a&nbsp;&quot;View&quot;&nbsp;in&nbsp;ImageJ2&nbsp;terminology,&nbsp;of&nbsp;the&nbsp;ROI&nbsp;sub-image&nbsp;of&nbsp;the&nbsp;original&lt;br&gt;<br>
dataset&nbsp;?&nbsp;I&nbsp;could&nbsp;then&nbsp;substitute&nbsp;the&nbsp;original&nbsp;dataset&nbsp;with&nbsp;this&nbsp;sub-image&lt;br&gt;<br>
and&nbsp;have&nbsp;the&nbsp;plugin&nbsp;operate&nbsp;on&nbsp;the&nbsp;whole&nbsp;image&nbsp;by&nbsp;default)&lt;br&gt;<br>
&lt;br&gt;<br>
2)&nbsp;The&nbsp;plugin&nbsp;preview&nbsp;generates&nbsp;overlays&nbsp;using&nbsp;java.awt.geom.Path2D,&lt;br&gt;<br>
java.awt.geom.Area&nbsp;and&nbsp;java.awt.Shape,&nbsp;which&nbsp;are&nbsp;then&nbsp;converted&nbsp;via&lt;br&gt;<br>
ij.gui.ShapeRoi()&nbsp;and&nbsp;ij.gui.Overlay(),&nbsp;assembled&nbsp;with&nbsp;overlay.add(),&lt;br&gt;<br>
and&nbsp;drawn&nbsp;using&nbsp;imp.setOverlay().&nbsp;Is&nbsp;there&nbsp;a&nbsp;new&nbsp;IJ2-way&nbsp;to&nbsp;do&nbsp;this&lt;br&gt;<br>
(especially&nbsp;since&nbsp;the&nbsp;cited&nbsp;web&nbsp;page&nbsp;(rightly)&nbsp;insists&nbsp;on&nbsp;separation&lt;br&gt;<br>
of&nbsp;selection&nbsp;and&nbsp;visualisation&nbsp;shapes)&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
TIA,&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagej.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ImageJ-devel@imagej.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej.net/mailman/listinfo/imagej-devel&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/mailman/listinfo/imagej-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.msc.univ-paris-diderot.fr/~daerr/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.msc.univ-paris-diderot.fr/~daerr/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagej.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ImageJ-devel@imagej.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej.net/mailman/listinfo/imagej-devel&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/mailman/listinfo/imagej-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.msc.univ-paris-diderot.fr/~daerr/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.msc.univ-paris-diderot.fr/~daerr/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
ImageJ-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:ImageJ-devel@imagej.net&quot;&nbsp;target=&quot;_blank&quot;&gt;ImageJ-devel@imagej.net&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej.net/mailman/listinfo/imagej-devel&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/mailman/listinfo/imagej-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.msc.univ-paris-diderot.fr/~daerr/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.msc.univ-paris-diderot.fr/~daerr/&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
--&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.msc.univ-paris-diderot.fr/~daerr/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.msc.univ-paris-diderot.fr/~daerr/&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
