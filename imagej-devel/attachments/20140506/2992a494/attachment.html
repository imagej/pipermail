<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Jay,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;The&nbsp;iteration&nbsp;method&nbsp;it&nbsp;uses&nbsp;requires&nbsp;directories,&nbsp;which&nbsp;is&nbsp;fine&nbsp;and&lt;/div&gt;&lt;div&gt;&gt;&nbsp;dandy&nbsp;when&nbsp;running&nbsp;from&nbsp;within&nbsp;Eclipse&nbsp;but&nbsp;my&nbsp;program&#39;s&nbsp;JarFile&lt;/div&gt;&lt;div&gt;&gt;&nbsp;doesn&#39;t&nbsp;look&nbsp;like&nbsp;a&nbsp;directory&nbsp;so&nbsp;the&nbsp;exact&nbsp;same&nbsp;mechanism&nbsp;doesn&#39;t&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&gt;&nbsp;work.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;EclipseHelper&nbsp;is&nbsp;intended&nbsp;to&nbsp;work&nbsp;when&nbsp;running&nbsp;from&nbsp;Eclipse,&nbsp;and&nbsp;never&nbsp;otherwise.&nbsp;That&nbsp;is&nbsp;why&nbsp;it&nbsp;does&nbsp;not&nbsp;support&nbsp;generating&nbsp;annotations&nbsp;from&nbsp;classes&nbsp;within&nbsp;JAR&nbsp;files.&lt;/div&gt;<br>
<br>
&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;However,&nbsp;it&nbsp;looks&nbsp;like&nbsp;a&nbsp;method&nbsp;analogous&nbsp;to&nbsp;this&nbsp;approach&nbsp;but&nbsp;for&lt;/div&gt;&lt;div&gt;&gt;&nbsp;JarFiles&nbsp;might&nbsp;work.,&nbsp;right?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;understand&nbsp;why&nbsp;you&nbsp;would&nbsp;ever&nbsp;need&nbsp;to&nbsp;do&nbsp;that...&nbsp;the&nbsp;point&nbsp;of&nbsp;EclipseHelper&nbsp;is&nbsp;to&nbsp;generate&nbsp;the&nbsp;annotations&nbsp;(META-INF/json/*)&nbsp;as&nbsp;close&nbsp;to&nbsp;compile&nbsp;time&nbsp;as&nbsp;possible&nbsp;--&nbsp;not&nbsp;later&nbsp;at&nbsp;runtime,&nbsp;which&nbsp;would&nbsp;be&nbsp;the&nbsp;only&nbsp;time&nbsp;your&nbsp;code&nbsp;would&nbsp;be&nbsp;stored&nbsp;within&nbsp;a&nbsp;JAR&nbsp;file.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;0)&nbsp;Does&nbsp;my&nbsp;take&nbsp;on&nbsp;the&nbsp;situation&nbsp;seem&nbsp;right?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;the&nbsp;technical&nbsp;aspects&nbsp;of&nbsp;what&nbsp;you&nbsp;are&nbsp;saying&nbsp;are&nbsp;correct&nbsp;to&nbsp;my&nbsp;knowledge&nbsp;(NB:&nbsp;I&nbsp;did&nbsp;not&nbsp;investigate&nbsp;the&nbsp;usage&nbsp;of&nbsp;getURLs()),&nbsp;I&nbsp;do&nbsp;not&nbsp;think&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;invoke&nbsp;an&nbsp;EclipseHelper-like&nbsp;program&nbsp;during&nbsp;the&nbsp;actual&nbsp;execution&nbsp;of&nbsp;your&nbsp;program.&nbsp;By&nbsp;doing&nbsp;that,&nbsp;you&nbsp;would&nbsp;lose&nbsp;all&nbsp;the&nbsp;performance&nbsp;advantages&nbsp;of&nbsp;generating&nbsp;the&nbsp;annotations&nbsp;in&nbsp;advance.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;ImageJ2&nbsp;we&nbsp;use&nbsp;Maven&nbsp;from&nbsp;the&nbsp;command&nbsp;line&nbsp;to&nbsp;bundle&nbsp;our&nbsp;JARs&nbsp;and&nbsp;that&nbsp;generates&nbsp;the&nbsp;annotations&nbsp;as&nbsp;expected.&nbsp;An&nbsp;alternate&nbsp;approach,&nbsp;if&nbsp;you&nbsp;really&nbsp;really&nbsp;want&nbsp;Eclipse&nbsp;to&nbsp;do&nbsp;it&nbsp;for&nbsp;you&nbsp;instead,&nbsp;you&nbsp;might&nbsp;be&nbsp;to&nbsp;do&nbsp;it&nbsp;as&nbsp;part&nbsp;of&nbsp;Maven&#39;s&nbsp;generate-sources&nbsp;step;&nbsp;see&nbsp;the&nbsp;ImageJ&nbsp;OPS&nbsp;project&nbsp;for&nbsp;an&nbsp;example&nbsp;of&nbsp;that&nbsp;[1].&nbsp;You&#39;d&nbsp;just&nbsp;have&nbsp;to&nbsp;change&nbsp;the&nbsp;groovy&nbsp;script&nbsp;to&nbsp;invoke&nbsp;the&nbsp;annotation&nbsp;processor&nbsp;manually.&nbsp;But&nbsp;I&nbsp;haven&#39;t&nbsp;seriously&nbsp;explored&nbsp;doing&nbsp;things&nbsp;that&nbsp;way.&nbsp;And&nbsp;JEX&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;structured&nbsp;as&nbsp;a&nbsp;Maven&nbsp;project&nbsp;for&nbsp;that...&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;1)&nbsp;If&nbsp;I&nbsp;edit&nbsp;the&nbsp;programs&nbsp;jar&nbsp;file&nbsp;during&nbsp;run&nbsp;time&nbsp;by&nbsp;adding&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;jar&nbsp;entry,&nbsp;will&nbsp;that&nbsp;majorly&nbsp;hose&lt;/div&gt;&lt;div&gt;&gt;&nbsp;things?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;Yep,&nbsp;I&nbsp;would&nbsp;be&nbsp;surprised&nbsp;if&nbsp;that&nbsp;did&nbsp;not&nbsp;cause&nbsp;problems.&nbsp;I&nbsp;strongly&nbsp;advise&nbsp;not&nbsp;doing&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;In&nbsp;other&nbsp;words,&nbsp;if&nbsp;I&nbsp;can&nbsp;get&nbsp;the&nbsp;META-INF/json/&lt;package&gt;.Plugin&lt;/div&gt;&lt;div&gt;&gt;&nbsp;written&nbsp;to&nbsp;my&nbsp;program&#39;s&nbsp;jar&nbsp;analogous&nbsp;to&nbsp;the&nbsp;other&nbsp;referenced&nbsp;jars,&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&gt;&nbsp;then&nbsp;everything&nbsp;will&nbsp;be&nbsp;OK?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;the&nbsp;goal&nbsp;is&nbsp;definitely&nbsp;to&nbsp;somehow&nbsp;generate&nbsp;your&nbsp;JAR&nbsp;file&nbsp;such&nbsp;that&nbsp;it&nbsp;contains&nbsp;the&nbsp;META-INF/json/*&nbsp;metadata&nbsp;from&nbsp;the&nbsp;get-go,&nbsp;without&nbsp;needing&nbsp;to&nbsp;pull&nbsp;any&nbsp;tricks&nbsp;the&nbsp;first&nbsp;time&nbsp;JEX&nbsp;is&nbsp;launched.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;possibility&nbsp;is&nbsp;to&nbsp;add&nbsp;a&nbsp;.factorypath&nbsp;and&nbsp;.settings/org.eclipse.jdt.apt.core.prefs&nbsp;file,&nbsp;similar&nbsp;to:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;.settings/org.eclipse.jdt.apt.core.prefs:&lt;/div&gt;&lt;div&gt;&lt;div&gt;eclipse.preferences.version=1&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;org.eclipse.jdt.apt.aptEnabled=true&lt;/div&gt;&lt;div&gt;org.eclipse.jdt.apt.genSrcDir=target/classes&lt;/div&gt;&lt;div&gt;org.eclipse.jdt.apt.reconcileEnabled=false&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;.factorypath:&lt;/div&gt;&lt;div&gt;&lt;factorypath&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp;&lt;factorypathentry&nbsp;kind=&quot;VARJAR&quot;&nbsp;id=&quot;M2_REPO/org/scijava/scijava-common/2.18.1/scijava-common-2.18.1.jar&quot;&nbsp;enabled=&quot;true&quot;&nbsp;runInBatchMode=&quot;true&quot;/&gt;&lt;/div&gt;&lt;div&gt;&lt;/factorypath&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;you&#39;d&nbsp;want&nbsp;to&nbsp;ensure&nbsp;it&nbsp;matches&nbsp;your&nbsp;version&nbsp;of&nbsp;scijava-common,&nbsp;and&nbsp;also&nbsp;point&nbsp;it&nbsp;at&nbsp;wherever&nbsp;you&nbsp;have&nbsp;that&nbsp;JAR&nbsp;stored&nbsp;rather&nbsp;than&nbsp;into&nbsp;the&nbsp;Maven&nbsp;repository&nbsp;(which&nbsp;you&nbsp;presumably&nbsp;don&#39;t&nbsp;have&nbsp;since&nbsp;you&nbsp;aren&#39;t&nbsp;using&nbsp;Maven).&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Eclipse&nbsp;unfortunately&nbsp;makes&nbsp;invoking&nbsp;annotation&nbsp;processors&nbsp;quite&nbsp;complicated...&nbsp;[2]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1] &lt;a&nbsp;href=&quot;https://github.com/imagej/imagej-ops/blob/imagej-ops-0.3.0/pom.xml#L169&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imagej/imagej-ops/blob/imagej-ops-0.3.0/pom.xml#L169&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;[2] &lt;a&nbsp;href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=280542&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=280542&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;30,&nbsp;2014&nbsp;at&nbsp;7:49&nbsp;PM,&nbsp;Jay&nbsp;Warrick&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:warrick@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;warrick@wisc.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;Hi&nbsp;All,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Thanks&nbsp;for&nbsp;all&nbsp;these&nbsp;replies&nbsp;folks.&nbsp;Digging&nbsp;around&nbsp;yesterday&nbsp;afternoon&nbsp;and&nbsp;evening&nbsp;essentially&nbsp;painted&nbsp;a&nbsp;picture&nbsp;much&nbsp;like&nbsp;what&nbsp;Johannes&nbsp;indicated&nbsp;in&nbsp;his&nbsp;email.&nbsp;The&nbsp;getResource()&nbsp;method&nbsp;works&nbsp;just&nbsp;fine&nbsp;and&nbsp;works&nbsp;roughly&nbsp;the&nbsp;same&nbsp;whether&nbsp;you&nbsp;do&nbsp;A)&nbsp;jars-in-a-jar&nbsp;or&nbsp;B)&nbsp;jars&nbsp;(reference&nbsp;libraries)&nbsp;in&nbsp;a&nbsp;folder&nbsp;next&nbsp;to&nbsp;a&nbsp;jar&nbsp;(my&nbsp;program),&nbsp;which&nbsp;are&nbsp;two&nbsp;of&nbsp;the&nbsp;3&nbsp;possible&nbsp;modes&nbsp;of&nbsp;exporting&nbsp;runnable&nbsp;jars.&nbsp;The&nbsp;third&nbsp;option,&nbsp;C),&nbsp;actually&nbsp;extracts&nbsp;all&nbsp;the&nbsp;class&nbsp;files&nbsp;and&nbsp;reorganizes&nbsp;them&nbsp;into&nbsp;a&nbsp;single&nbsp;flat&nbsp;jar&nbsp;(i.e.,&nbsp;not&nbsp;jar-in-jar&nbsp;but&nbsp;just&nbsp;a&nbsp;single&nbsp;uber-jar&nbsp;of&nbsp;classes&nbsp;in&nbsp;folders),&nbsp;which&nbsp;I&nbsp;haven&#39;t&nbsp;used&nbsp;in&nbsp;the&nbsp;past&nbsp;for&nbsp;other&nbsp;reasons&nbsp;as&nbsp;well. &lt;div&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Instead,&nbsp;it&nbsp;seems&nbsp;(I&nbsp;say&nbsp;seems&nbsp;because&nbsp;I&nbsp;only&nbsp;dabble&nbsp;in&nbsp;ClassLoaders)&nbsp;their&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;compile&nbsp;a&nbsp;list&nbsp;of&nbsp;my&nbsp;program&#39;s&nbsp;class&nbsp;files&nbsp;for&nbsp;indexing&nbsp;annotation&nbsp;using&nbsp;just&nbsp;the&nbsp;method&nbsp;getResource()&nbsp;or&nbsp;getResources()&nbsp;without&nbsp;knowing&nbsp;the&nbsp;name&nbsp;of&nbsp;at&nbsp;least&nbsp;a&nbsp;single&nbsp;resource&nbsp;in&nbsp;my&nbsp;program&#39;s&nbsp;jar.&nbsp;The&nbsp;getResources()&nbsp;method&nbsp;just&nbsp;gives&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;referenced&nbsp;jars&nbsp;and&nbsp;not&nbsp;the&nbsp;main&nbsp;program&#39;s&nbsp;jar&nbsp;itself.  However,&nbsp;if&nbsp;I&nbsp;want&nbsp;sci-java&nbsp;to&nbsp;work&nbsp;agnostic&nbsp;of&nbsp;who&#39;s&nbsp;using&nbsp;it,&nbsp;I&nbsp;can&#39;t&nbsp;assume&nbsp;within&nbsp;the&nbsp;sci-java&nbsp;code&nbsp;that&nbsp;I&nbsp;ever&nbsp;know&nbsp;of&nbsp;a&nbsp;specific&nbsp;resource&nbsp;to&nbsp;look&nbsp;for. Even&nbsp;if&nbsp;getResource()&nbsp;does&nbsp;give&nbsp;a&nbsp;path&nbsp;to&nbsp;my&nbsp;program&#39;s&nbsp;jar,&nbsp;the&nbsp;jar&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;file&nbsp;that&nbsp;contains&nbsp;the&nbsp;results&nbsp;of&nbsp;indexing.&nbsp;The&nbsp;key&nbsp;to&nbsp;the&nbsp;EclipseHelper&nbsp;is&nbsp;that&nbsp;it&nbsp;actually&nbsp;uses&nbsp;the&nbsp;getURLs()&nbsp;method&nbsp;of&nbsp;the&nbsp;URLClassLoader&nbsp;instead&nbsp;of&nbsp;the&nbsp;getResources().&nbsp;When&nbsp;running&nbsp;from&nbsp;eclipse,&nbsp;this&nbsp;method&nbsp;gives&nbsp;the&nbsp;path&nbsp;to&nbsp;my&nbsp;referenced&nbsp;jars&nbsp;and&nbsp;the&nbsp;programs&nbsp;bin&nbsp;folder.&nbsp;When&nbsp;running&nbsp;from&nbsp;jar,&nbsp;the&nbsp;getURLs()&nbsp;method&nbsp;returns&nbsp;both&nbsp;the&nbsp;referenced&nbsp;libraries&nbsp;and&nbsp;my&nbsp;programs&nbsp;jar&nbsp;file&nbsp;(yay).&nbsp;However,&nbsp;since&nbsp;the&nbsp;jar&nbsp;file&nbsp;is&nbsp;not&nbsp;a&nbsp;directory,&nbsp;the&nbsp;EclipseHelper&nbsp;method&nbsp;does&nbsp;not&nbsp;index&nbsp;it&nbsp;and&nbsp;write&nbsp;the&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;file.&nbsp;The&nbsp;iteration&nbsp;method&nbsp;it&nbsp;uses&nbsp;requires&nbsp;directories,&nbsp;which&nbsp;is&nbsp;fine&nbsp;and&nbsp;dandy&nbsp;when&nbsp;running&nbsp;from&nbsp;within&nbsp;Eclipse&nbsp;but&nbsp;my&nbsp;program&#39;s&nbsp;JarFile&nbsp;doesn&#39;t&nbsp;look&nbsp;like&nbsp;a&nbsp;directory&nbsp;so&nbsp;the&nbsp;exact&nbsp;same&nbsp;mechanism&nbsp;doesn&#39;t&nbsp;work.&nbsp;However,&nbsp;it&nbsp;looks&nbsp;like&nbsp;a&nbsp;method&nbsp;analogous&nbsp;to&nbsp;this&nbsp;approach&nbsp;but&nbsp;for&nbsp;JarFiles&nbsp;might&nbsp;work.,&nbsp;right?&nbsp;I&nbsp;think,&nbsp;to&nbsp;work,&nbsp;it&nbsp;would&nbsp;have&nbsp;to&nbsp;iteratively&nbsp;index&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;JarFile&nbsp;and&nbsp;add&nbsp;a&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;file&nbsp;as&nbsp;a&nbsp;new&nbsp;Jar&nbsp;entry&nbsp;(as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;see&nbsp;anyway,&nbsp;I&nbsp;could&nbsp;definitely&nbsp;be&nbsp;wrong).&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;hack&nbsp;something&nbsp;together&nbsp;to&nbsp;show&nbsp;whether&nbsp;this&nbsp;would&nbsp;work&nbsp;at&nbsp;all&nbsp;but&nbsp;if&nbsp;any&nbsp;of&nbsp;you&nbsp;think&nbsp;this&nbsp;approach&nbsp;would&nbsp;benefit&nbsp;others,&nbsp;I&#39;d&nbsp;welcome&nbsp;suggestions&nbsp;and&nbsp;would&nbsp;try&nbsp;to&nbsp;clean&nbsp;it&nbsp;up&nbsp;as&nbsp;much&nbsp;as&nbsp;I&nbsp;can&nbsp;for&nbsp;a&nbsp;pull&nbsp;request.&nbsp;It&nbsp;seems&nbsp;like&nbsp;the&nbsp;EclipseHelper&nbsp;is&nbsp;used&nbsp;when&nbsp;the&nbsp;class&nbsp;loader&nbsp;is&nbsp;an&nbsp;instance&nbsp;of&nbsp;URLClassLoader&nbsp;(plus&nbsp;some&nbsp;other&nbsp;tests...)&nbsp;which&nbsp;happens&nbsp;to&nbsp;occur&nbsp;both&nbsp;when&nbsp;running&nbsp;from&nbsp;eclipse&nbsp;and&nbsp;when&nbsp;exported&nbsp;as&nbsp;a&nbsp;runnable&nbsp;jar.&nbsp;So,&nbsp;on&nbsp;the&nbsp;surface&nbsp;at&nbsp;least,&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;EclipseHelper&nbsp;class&nbsp;could&nbsp;be&nbsp;used&nbsp;for&nbsp;both&nbsp;scenarios&nbsp;but&nbsp;am&nbsp;happy&nbsp;to&nbsp;change&nbsp;tacks&nbsp;if&nbsp;you&nbsp;think&nbsp;otherwise.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;I&nbsp;have&nbsp;a&nbsp;couple&nbsp;specific&nbsp;questions,&nbsp;that&nbsp;if&nbsp;answered&nbsp;would&nbsp;help&nbsp;me&nbsp;to&nbsp;know&nbsp;if&nbsp;this&nbsp;might&nbsp;work&nbsp;at&nbsp;all&nbsp;and&nbsp;move&nbsp;forward.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;0)&nbsp;Does&nbsp;my&nbsp;take&nbsp;on&nbsp;the&nbsp;situation&nbsp;seem&nbsp;right?&lt;/b&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;1)&nbsp;If&nbsp;I&nbsp;edit&nbsp;the&nbsp;programs&nbsp;jar&nbsp;file&nbsp;during&nbsp;run&nbsp;time&nbsp;by&nbsp;adding&nbsp;the&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;jar&nbsp;entry,&nbsp;will&nbsp;that&nbsp;majorly&nbsp;hose&nbsp;things?&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;2)&nbsp;The&nbsp;Index&nbsp;class&nbsp;still&nbsp;uses&nbsp;the&nbsp;getResources()&nbsp;method&nbsp;to&nbsp;find&nbsp;things&nbsp;and&nbsp;it&nbsp;will&nbsp;still&nbsp;only&nbsp;link&nbsp;to&nbsp;the&nbsp;referenced&nbsp;jar&nbsp;files.&nbsp;In&nbsp;this&nbsp;case&nbsp;we&nbsp;can&#39;t&nbsp;assume&nbsp;that&nbsp;the&nbsp;ClassLoader&nbsp;is&nbsp;a&nbsp;URLClassLoader&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;the&nbsp;getURLs&nbsp;method.&nbsp;I&nbsp;don&#39;t&nbsp;recall&nbsp;noticing&nbsp;when&nbsp;or&nbsp;how&nbsp;the&nbsp;indexing&nbsp;mechanism&nbsp;looks&nbsp;for&nbsp;these&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;files&nbsp;to&nbsp;compile&nbsp;all&nbsp;the&nbsp;annotation&nbsp;information.&nbsp;I&nbsp;assume&nbsp;it&nbsp;is&nbsp;via&nbsp;the&nbsp;getResource()&nbsp;method&nbsp;because&nbsp;I&nbsp;believe&nbsp;by&nbsp;knowing&nbsp;what&nbsp;to&nbsp;look&nbsp;for&nbsp;(i.e.,&nbsp;a&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;file),&nbsp;we&nbsp;can&nbsp;just&nbsp;ask&nbsp;for&nbsp;the&nbsp;resource&nbsp;directly?&nbsp;In&nbsp;other&nbsp;words,&nbsp;if&nbsp;I&nbsp;can&nbsp;get&nbsp;the&nbsp;META-INF/json/&lt;package&gt;.Plugin&nbsp;written&nbsp;to&nbsp;my&nbsp;program&#39;s&nbsp;jar&nbsp;analogous&nbsp;to&nbsp;the&nbsp;other&nbsp;referenced&nbsp;jars,&nbsp;then&nbsp;everything&nbsp;will&nbsp;be&nbsp;OK?&lt;/b&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;thanks&nbsp;thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jay&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Apr&nbsp;30,&nbsp;2014,&nbsp;at&nbsp;12:51&nbsp;PM,&nbsp;Johannes&nbsp;Schindelin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:Johannes.Schindelin@gmx.de&quot;&nbsp;target=&quot;_blank&quot;&gt;Johannes.Schindelin@gmx.de&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;<br>
<br>
<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;On&nbsp;Wed,&nbsp;30&nbsp;Apr&nbsp;2014,&nbsp;Curtis&nbsp;Rueden&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;when&nbsp;I&nbsp;export&nbsp;the&nbsp;application&nbsp;as&nbsp;a&nbsp;runnable&nbsp;jar,&nbsp;ij.plugin()service&lt;br&gt;returns&nbsp;all&nbsp;the&nbsp;Command.class&nbsp;plugins&nbsp;but&nbsp;0&nbsp;plugins&nbsp;of&nbsp;type&lt;br&gt;<br>
<br>
<br>
JEXPlugin.class&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;This&nbsp;is&nbsp;an&nbsp;issue&nbsp;we&nbsp;have&nbsp;discussed&nbsp;before:&nbsp;Eclipse&nbsp;creates&nbsp;uberjars&nbsp;using&nbsp;a&lt;br&gt;&quot;jar-in-jar&quot;&nbsp;approach,&nbsp;and&nbsp;SciJava&nbsp;Common&#39;s&nbsp;plugin&nbsp;mechanism&nbsp;does&nbsp;not&nbsp;read&lt;br&gt;the&nbsp;metadata&nbsp;out&nbsp;of&nbsp;a&nbsp;jar-in-jar.&lt;br&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;br&gt;Please&nbsp;note&nbsp;that&nbsp;the&nbsp;jar-in-jar&nbsp;poses&nbsp;no&nbsp;problem,&nbsp;unless&nbsp;the&nbsp;ClassLoader&lt;br&gt;used&nbsp;to&nbsp;access&nbsp;them&nbsp;is&nbsp;broken:&nbsp;it&nbsp;needs&nbsp;to&nbsp;support&nbsp;the&nbsp;getResources()&nbsp;call&lt;br&gt;properly&nbsp;and&nbsp;find&nbsp;the&nbsp;resource&nbsp;files&nbsp;contained&nbsp;in&nbsp;the&nbsp;nested&nbsp;.jar&nbsp;files.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;However,&nbsp;in&nbsp;the&nbsp;reported&nbsp;case&nbsp;I&nbsp;believe&nbsp;it&nbsp;is&nbsp;not&nbsp;triggered&nbsp;by&nbsp;the&nbsp;uber&lt;br&gt;jar&nbsp;or&nbsp;jar-in-jar&nbsp;scenario.&lt;br&gt;&lt;br&gt;Background:&nbsp;The&nbsp;internal&nbsp;technique&nbsp;behind&nbsp;the&nbsp;plugins&nbsp;uses&nbsp;annotation&lt;br&gt;processors&nbsp;run&nbsp;at&nbsp;compile&nbsp;time.&nbsp;They&nbsp;basically&nbsp;look&nbsp;at&nbsp;each&nbsp;file&nbsp;that&nbsp;has&lt;br&gt;<br>
<br>
<br>
a&nbsp;@Plugin&nbsp;annotation&nbsp;and&nbsp;write&nbsp;out&nbsp;index&nbsp;files&nbsp;that&nbsp;get&nbsp;included&nbsp;into&nbsp;the&lt;br&gt;.jar&nbsp;files.&lt;br&gt;&lt;br&gt;Except&nbsp;that&nbsp;Eclipse&nbsp;--&nbsp;violating&nbsp;the&nbsp;Java&nbsp;specification&nbsp;--&nbsp;does&nbsp;not&nbsp;run&lt;br&gt;annotation&nbsp;processors.&nbsp;At&nbsp;least&nbsp;not&nbsp;by&nbsp;default,&nbsp;and&nbsp;even&nbsp;if&nbsp;you&nbsp;switch&nbsp;it&lt;br&gt;<br>
<br>
<br>
on&nbsp;(manually,&nbsp;for&nbsp;each&nbsp;and&nbsp;every&nbsp;project&nbsp;you&nbsp;maintain,&nbsp;one&nbsp;by&nbsp;one),&nbsp;it&lt;br&gt;*still*&nbsp;only&nbsp;runs&nbsp;them&nbsp;on&nbsp;full&nbsp;builds&nbsp;(i.e.&nbsp;after&nbsp;Project&gt;Clean).&lt;br&gt;&lt;br&gt;So&nbsp;it&nbsp;looks&nbsp;to&nbsp;me&nbsp;that&nbsp;in&nbsp;the&nbsp;reported&nbsp;case,&nbsp;the&nbsp;annotation&nbsp;processor&nbsp;is&lt;br&gt;<br>
<br>
<br>
never&nbsp;run,&nbsp;and&nbsp;as&nbsp;a&nbsp;consequence,&nbsp;the&nbsp;index&nbsp;file&nbsp;is&nbsp;never&nbsp;written,&nbsp;and&lt;br&gt;therefore&nbsp;it&nbsp;cannot&nbsp;be&nbsp;found&nbsp;at&nbsp;runtime.&lt;br&gt;&lt;br&gt;Of&nbsp;course,&nbsp;Eclipse&nbsp;being&nbsp;such&nbsp;a&nbsp;prevalent&nbsp;platform&nbsp;to&nbsp;develop&nbsp;in,&nbsp;we&nbsp;tried&lt;br&gt;to&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;workaround:&nbsp;whenever&nbsp;the&nbsp;annotation&nbsp;indexes&nbsp;are&nbsp;read,&nbsp;a&lt;br&gt;<br>
<br>
<br>
class&nbsp;called&nbsp;&quot;EclipseHelper&quot;&nbsp;tries&nbsp;to&nbsp;detect&nbsp;whether&nbsp;it&nbsp;needs&nbsp;to&nbsp;create&lt;br&gt;the&nbsp;index&nbsp;files&nbsp;because&nbsp;Eclipse&nbsp;failed&nbsp;to&nbsp;run&nbsp;the&nbsp;annotation&nbsp;processors.&lt;br&gt;&lt;br&gt;This&nbsp;works&nbsp;amazingly&nbsp;well&nbsp;because&nbsp;many&nbsp;developers&nbsp;have&nbsp;written&nbsp;unit&nbsp;tests&lt;br&gt;<br>
<br>
<br>
and&nbsp;run&nbsp;them&nbsp;before&nbsp;bundling&nbsp;.jar&nbsp;files&nbsp;manually.&nbsp;These&nbsp;unit&nbsp;tests&nbsp;verify&lt;br&gt;that&nbsp;plugins&nbsp;work,&nbsp;of&nbsp;course,&nbsp;which&nbsp;is&nbsp;why&nbsp;the&nbsp;EclipseHelper&nbsp;works&nbsp;around&lt;br&gt;the&nbsp;problem&nbsp;successfully&nbsp;in&nbsp;most&nbsp;cases.&lt;br&gt;&lt;br&gt;Also,&nbsp;here&nbsp;is&nbsp;a&nbsp;lesson&nbsp;for&nbsp;everybody&nbsp;choosing&nbsp;to&nbsp;learn&nbsp;from&nbsp;our&nbsp;past&lt;br&gt;<br>
<br>
<br>
mistakes&nbsp;and&nbsp;experiences:&nbsp;any&nbsp;possible&nbsp;convenience&nbsp;of&nbsp;uber&nbsp;jars&nbsp;is&lt;br&gt;outweighed&nbsp;multiple&nbsp;times&nbsp;over&nbsp;by&nbsp;the&nbsp;disadvantages&nbsp;it&nbsp;incurs&nbsp;to&nbsp;users:&nbsp;it&lt;br&gt;makes&nbsp;updating&nbsp;really&nbsp;costly&nbsp;(every&nbsp;time&nbsp;it&#39;s&nbsp;time&nbsp;to&nbsp;update,&nbsp;a&nbsp;new&lt;br&gt;<br>
<br>
<br>
monster&nbsp;.jar&nbsp;needs&nbsp;to&nbsp;be&nbsp;downloaded),&nbsp;it&nbsp;makes&nbsp;collaboration&nbsp;between&lt;br&gt;projects&nbsp;difficult&nbsp;at&nbsp;best,&nbsp;and&nbsp;it&nbsp;certainly&nbsp;asks&nbsp;for&nbsp;version&nbsp;skew.&lt;br&gt;&lt;br&gt;Ciao,&lt;br&gt;Johannes&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
