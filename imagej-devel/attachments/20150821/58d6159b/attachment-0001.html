<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Stefan&nbsp;and&nbsp;Birgit,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More&nbsp;than&nbsp;one&nbsp;year&nbsp;later!&nbsp;Better&nbsp;late&nbsp;than&nbsp;never,&nbsp;hopefully.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;Maybe&nbsp;we&nbsp;need&nbsp;a&nbsp;way&nbsp;to&nbsp;formally&nbsp;flag&nbsp;these&nbsp;&quot;required&nbsp;before&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;initialize&quot;&nbsp;parameters&nbsp;in&nbsp;the&nbsp;annotation?&nbsp;What&nbsp;do&nbsp;you&nbsp;think?&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;Would&nbsp;that&nbsp;help&nbsp;you?&lt;/div&gt;&lt;div&gt;&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;This&nbsp;would&nbsp;be&nbsp;different&nbsp;from&nbsp;autoFill()&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes.&nbsp;The&nbsp;autoFill&nbsp;attribute&nbsp;is&nbsp;a&nbsp;way&nbsp;of&nbsp;saying&nbsp;to&nbsp;preprocessors:&nbsp;&quot;If&nbsp;you&nbsp;do&nbsp;some&nbsp;sort&nbsp;of&nbsp;automatic&nbsp;value&nbsp;setting,&nbsp;do&nbsp;not&nbsp;do&nbsp;it&nbsp;to&nbsp;me.&quot;&nbsp;E.g.,&nbsp;it&nbsp;lets&nbsp;you&nbsp;have&nbsp;a&nbsp;single&nbsp;image&nbsp;or&nbsp;display&nbsp;input&nbsp;without&nbsp;the&nbsp;ActiveImagePreprocessor&nbsp;or&nbsp;Active*DisplayPreprocessor&nbsp;populating&nbsp;it.&nbsp;In&nbsp;the&nbsp;case&nbsp;of&nbsp;the&nbsp;ImageJ&nbsp;UI,&nbsp;the&nbsp;InputHarvester&nbsp;preprocessor&nbsp;will&nbsp;then&nbsp;include&nbsp;it&nbsp;in&nbsp;the&nbsp;dialog&nbsp;box&nbsp;(since&nbsp;the&nbsp;parameter&nbsp;is&nbsp;still&nbsp;not&nbsp;marked&nbsp;resolved),&nbsp;so&nbsp;the&nbsp;user&nbsp;can&nbsp;explicitly&nbsp;select&nbsp;the&nbsp;desired&nbsp;object.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Yes&nbsp;and&nbsp;no.&lt;/div&gt;&lt;div&gt;&gt; &lt;/div&gt;&lt;div&gt;&gt;&nbsp;In&nbsp;a&nbsp;way&nbsp;it&nbsp;makes&nbsp;responsibilities&nbsp;clear,&nbsp;in&nbsp;so&nbsp;far&nbsp;I&nbsp;feel&nbsp;comfortable&lt;/div&gt;&lt;div&gt;&gt;&nbsp;with&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Agreed,&nbsp;I&nbsp;like&nbsp;the&nbsp;declaration&nbsp;of&nbsp;intent&nbsp;there.&nbsp;But&nbsp;I&#39;m&nbsp;not&nbsp;sure&nbsp;it&nbsp;would&nbsp;help&nbsp;anything&nbsp;programmatically.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;However,&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;there&nbsp;are&nbsp;(potentially&nbsp;very&nbsp;heavy)&lt;/div&gt;&lt;div&gt;&gt;&nbsp;restrictions&nbsp;on&nbsp;the&nbsp;parameters&nbsp;which&nbsp;may&nbsp;be&nbsp;filled&nbsp;in&nbsp;advance&lt;/div&gt;&lt;div&gt;&gt;&nbsp;(automaticcal&nbsp;and&nbsp;not&nbsp;by&nbsp;the&nbsp;user)&nbsp;in&nbsp;a&nbsp;sensible&nbsp;way.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&lt;/div&gt;&lt;div&gt;&gt;&nbsp;understand&nbsp;ij2&nbsp;fills&nbsp;in&nbsp;parameters&nbsp;with&nbsp;what&nbsp;I&nbsp;think&nbsp;you&nbsp;called&lt;/div&gt;&lt;div&gt;&gt;&nbsp;AutoFooPreprocessors,&nbsp;so&nbsp;active&nbsp;image&nbsp;and&nbsp;active&nbsp;display?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Indeed.&nbsp;Preprocessor&nbsp;plugins&nbsp;are&nbsp;contextual,&nbsp;meaning&nbsp;they&nbsp;have&nbsp;access&nbsp;to&nbsp;the&nbsp;entire&nbsp;state&nbsp;of&nbsp;the&nbsp;context.&nbsp;And&nbsp;since&nbsp;the&nbsp;context&nbsp;is&nbsp;extensible,&nbsp;I&nbsp;really&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;sorts&nbsp;of&nbsp;parameters&nbsp;are&nbsp;&quot;sensible&quot;&nbsp;to&nbsp;fill&nbsp;or&nbsp;not.&nbsp;It&nbsp;really&nbsp;depends&nbsp;on&nbsp;the&nbsp;use&nbsp;cases&nbsp;of&nbsp;the&nbsp;application(s)&nbsp;involved.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;I&nbsp;cannot&nbsp;come&nbsp;up&nbsp;with&nbsp;further&nbsp;ones.&nbsp;How&nbsp;would&nbsp;we&nbsp;fill&nbsp;in&nbsp;an&nbsp;int&lt;/div&gt;&lt;div&gt;&gt;&nbsp;parameter&nbsp;without&nbsp;knowledge&nbsp;of&nbsp;its&nbsp;meaning/sematics?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Right.&nbsp;Of&nbsp;course,&nbsp;the&nbsp;meaning/semantics&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;known&nbsp;somehow.&nbsp;But&nbsp;that&nbsp;is&nbsp;outside&nbsp;the&nbsp;scope&nbsp;of&nbsp;the&nbsp;SciJava&nbsp;library&nbsp;design.&nbsp;As&nbsp;I&nbsp;said&nbsp;above,&nbsp;I&nbsp;can&nbsp;imagine&nbsp;(abstractly)&nbsp;that&nbsp;someone&nbsp;designs&nbsp;an&nbsp;application&nbsp;with&nbsp;various&nbsp;preprocessors&nbsp;that&nbsp;populate&nbsp;various&nbsp;parameters,&nbsp;including&nbsp;int[],&nbsp;in&nbsp;some&nbsp;predefined&nbsp;way&nbsp;for&nbsp;its&nbsp;use&nbsp;cases.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;And&nbsp;even&nbsp;for&nbsp;images&nbsp;is&nbsp;only&nbsp;possible&nbsp;for&nbsp;commands&nbsp;with&nbsp;exactly&nbsp;one&lt;/div&gt;&lt;div&gt;&gt;&nbsp;image&nbsp;or&nbsp;display.&nbsp;Obviously&nbsp;we&nbsp;could&nbsp;introduce&nbsp;a&nbsp;further&nbsp;flag&nbsp;for&nbsp;an&lt;/div&gt;&lt;div&gt;&gt;&nbsp;image&nbsp;parameter&nbsp;to&nbsp;notify,&nbsp;that&nbsp;I&nbsp;what&nbsp;to&nbsp;be&nbsp;assigned&nbsp;the&nbsp;active&nbsp;image&lt;/div&gt;&lt;div&gt;&gt;&nbsp;with.&nbsp;But&nbsp;this&nbsp;seems&nbsp;pretty&nbsp;specific.&nbsp;And&nbsp;probably&nbsp;not&nbsp;generic&nbsp;to&nbsp;be&lt;/div&gt;&lt;div&gt;&gt;&nbsp;introduce&nbsp;to&nbsp;scijava&nbsp;but&nbsp;rather&nbsp;deferred&nbsp;to&nbsp;the&nbsp;&quot;application&quot;,&nbsp;e.g.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;imagej.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree;&nbsp;that&nbsp;flag&nbsp;would&nbsp;be&nbsp;too&nbsp;specific.&nbsp;That&#39;s&nbsp;what&nbsp;the&nbsp;preprocessor&nbsp;design&nbsp;is&nbsp;for:&nbsp;to&nbsp;avoid&nbsp;overspecifying&nbsp;how&nbsp;parameters&nbsp;might&nbsp;get&nbsp;populated,&nbsp;and&nbsp;instead&nbsp;leave&nbsp;it&nbsp;to&nbsp;the&nbsp;extensions&nbsp;(preprocessors)&nbsp;available&nbsp;to&nbsp;the&nbsp;context.&nbsp;The&nbsp;ImageJ&nbsp;paradigm&nbsp;is&nbsp;to&nbsp;have&nbsp;an&nbsp;&quot;active&nbsp;image&quot;&nbsp;which&nbsp;we&nbsp;can&nbsp;then&nbsp;use&nbsp;for&nbsp;populating&nbsp;image&nbsp;parameters,&nbsp;but&nbsp;this&nbsp;is&nbsp;far&nbsp;from&nbsp;the&nbsp;only&nbsp;valid&nbsp;paradigm.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;And&nbsp;there&nbsp;might&nbsp;be&nbsp;aplications&nbsp;which&nbsp;call&nbsp;for&nbsp;more&nbsp;the&nbsp;two&nbsp;layers?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;a&nbsp;way,&nbsp;the&nbsp;preprocessor&nbsp;design&nbsp;accommodates&nbsp;N&nbsp;layers,&nbsp;because&nbsp;the&nbsp;preprocessors&nbsp;are&nbsp;run&nbsp;in&nbsp;priority&nbsp;order.&nbsp;But&nbsp;in&nbsp;practice&nbsp;there&nbsp;are&nbsp;two&nbsp;layers&nbsp;when&nbsp;it&nbsp;comes&nbsp;to&nbsp;the&nbsp;initializers:&nbsp;preprocessors&nbsp;that&nbsp;come&nbsp;before&nbsp;InitPreprocessor,&nbsp;and&nbsp;preprocessors&nbsp;that&nbsp;come&nbsp;after&nbsp;it.&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;OK&nbsp;and&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;to&nbsp;subdivide&nbsp;initialization&nbsp;farther&nbsp;than&nbsp;that,&nbsp;but&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;use&nbsp;case&nbsp;that&nbsp;illustrates&nbsp;otherwise,&nbsp;we&nbsp;can&nbsp;figure&nbsp;it&nbsp;out.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Summing&nbsp;up,&nbsp;I&nbsp;am&nbsp;afraid&nbsp;that&nbsp;I&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;cute&nbsp;idea.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well,&nbsp;your&nbsp;cute&nbsp;idea&nbsp;was&nbsp;in&nbsp;the&nbsp;follow-up&nbsp;mail.&nbsp;We&#39;ll&nbsp;get&nbsp;to&nbsp;that&nbsp;below...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Of&nbsp;course&nbsp;I&nbsp;appreciate&nbsp;the&nbsp;functionality&nbsp;the&nbsp;set&nbsp;initial&nbsp;values&nbsp;or&lt;/div&gt;&lt;div&gt;&gt;&nbsp;make&nbsp;the&nbsp;type&nbsp;of&nbsp;parameters&nbsp;depending&nbsp;on&nbsp;image&nbsp;features&nbsp;(like&lt;/div&gt;&lt;div&gt;&gt;&nbsp;dimensionality,&nbsp;range&nbsp;of&nbsp;values).&nbsp;Still&nbsp;adding&nbsp;parameters&nbsp;seems&lt;/div&gt;&lt;div&gt;&gt;&nbsp;awkward&nbsp;to&nbsp;be.&nbsp;Could&nbsp;we&nbsp;come&nbsp;by&nbsp;with&nbsp;&quot;only&quot;&nbsp;changing&nbsp;types&nbsp;of&lt;/div&gt;&lt;div&gt;&gt;&nbsp;parameters.&nbsp;E.g.&nbsp;for&nbsp;DuplicateImage&nbsp;not&nbsp;add&nbsp;one&nbsp;parameter&nbsp;for&nbsp;each&lt;/div&gt;&lt;div&gt;&gt;&nbsp;axes&nbsp;rather&nbsp;have&nbsp;one&nbsp;array&nbsp;parameter&nbsp;with&nbsp;its&nbsp;length&nbsp;determined&nbsp;by&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;dimensionality?&nbsp;And&nbsp;may&nbsp;be&nbsp;indicate&nbsp;via&nbsp;annotations,&nbsp;depending&nbsp;on&lt;/div&gt;&lt;div&gt;&gt;&nbsp;which&nbsp;other&nbsp;parameter(s)&nbsp;the&nbsp;type&nbsp;of&nbsp;this&nbsp;parameter&nbsp;will&nbsp;change?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;this&nbsp;is&nbsp;very&nbsp;related&nbsp;to&nbsp;a&nbsp;recent&nbsp;reply&nbsp;I&nbsp;sent&nbsp;to&nbsp;imagej-devel&nbsp;in&nbsp;another&nbsp;thread&nbsp;[1].&nbsp;I&nbsp;will&nbsp;recapitulate&nbsp;it&nbsp;here:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;five&nbsp;different&nbsp;classes&nbsp;of&nbsp;modules:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Totally&nbsp;fixed,&nbsp;with&nbsp;inputs&nbsp;and&nbsp;outputs&nbsp;known&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;div&gt;2)&nbsp;Updates&nbsp;parameter&nbsp;attributes&nbsp;(such&nbsp;as&nbsp;choices—but&nbsp;not&nbsp;#&nbsp;or&nbsp;type&nbsp;of&nbsp;inputs/outputs)&nbsp;once&nbsp;during&nbsp;initialization.&lt;/div&gt;&lt;div&gt;3)&nbsp;Updates&nbsp;parameter&nbsp;number&nbsp;and&nbsp;type&nbsp;(i.e.,&nbsp;adding/removing&nbsp;inputs/outputs)&nbsp;once&nbsp;during&nbsp;initialization.&lt;/div&gt;&lt;div&gt;4)&nbsp;Updates&nbsp;parameter&nbsp;attributes&nbsp;repeatedly&nbsp;e.g.&nbsp;during&nbsp;callbacks.&lt;/div&gt;&lt;div&gt;5)&nbsp;Updates&nbsp;parameter&nbsp;number&nbsp;and&nbsp;type&nbsp;repeatedly&nbsp;e.g.&nbsp;during&nbsp;callbacks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;These&nbsp;five&nbsp;types&nbsp;of&nbsp;modules&nbsp;challenge&nbsp;us&nbsp;in&nbsp;different&nbsp;ways:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#1&nbsp;is&nbsp;easy&nbsp;--&nbsp;I&nbsp;think&nbsp;everything&nbsp;can&nbsp;support&nbsp;it&nbsp;easily.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#2&nbsp;and&nbsp;#4&nbsp;do&nbsp;not&nbsp;update&nbsp;the&nbsp;fundamental&nbsp;aspects&nbsp;of&nbsp;the&nbsp;module:&nbsp;the&nbsp;name&nbsp;and&nbsp;types&nbsp;of&nbsp;the&nbsp;parameters&nbsp;are&nbsp;known.&nbsp;So&nbsp;such&nbsp;modules&nbsp;can&nbsp;be&nbsp;classified&nbsp;as&nbsp;fundamentally&nbsp;&quot;well&nbsp;behaved&quot;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#3&nbsp;and&nbsp;#5&nbsp;are&nbsp;more&nbsp;difficult&nbsp;because&nbsp;they&nbsp;are&nbsp;fully&nbsp;dynamic:&nbsp;the&nbsp;names&nbsp;and&nbsp;types&nbsp;of&nbsp;parameters&nbsp;are&nbsp;not&nbsp;known&nbsp;a&nbsp;priori.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;with&nbsp;you&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;nice&nbsp;if&nbsp;#2&nbsp;and&nbsp;#4&nbsp;type&nbsp;commands&nbsp;did&nbsp;not&nbsp;need&nbsp;to&nbsp;extend&nbsp;DynamicCommand,&nbsp;but&nbsp;instead&nbsp;some&nbsp;other&nbsp;abstract&nbsp;class&nbsp;that&nbsp;indicates&nbsp;they&nbsp;are&nbsp;well&nbsp;behaved&nbsp;from&nbsp;a&nbsp;typing&nbsp;perspective.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;filed&nbsp;an&nbsp;issue&nbsp;for&nbsp;it:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/issues/179&quot;&gt;https://github.com/scijava/scijava-common/issues/179&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;at&nbsp;it,&nbsp;I&nbsp;also&nbsp;filed&nbsp;an&nbsp;issue&nbsp;for&nbsp;commands&nbsp;which&nbsp;are&nbsp;iteratively&nbsp;dynamic&nbsp;(i.e.,&nbsp;alter&nbsp;their&nbsp;parameters&nbsp;during&nbsp;callbacks):&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/issues/180&quot;&gt;https://github.com/scijava/scijava-common/issues/180&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Though&nbsp;the&nbsp;distinction&nbsp;of&nbsp;&quot;iteratively&nbsp;dynamic&quot;&nbsp;may&nbsp;go&nbsp;away&nbsp;after&nbsp;implementing&nbsp;your&nbsp;idea&nbsp;to&nbsp;totally&nbsp;eliminate&nbsp;initializers&nbsp;in&nbsp;favor&nbsp;of&nbsp;callbacks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;for&nbsp;what&nbsp;it&#39;s&nbsp;worth,&nbsp;I&nbsp;agree&nbsp;that&nbsp;better&nbsp;support&nbsp;for&nbsp;List&nbsp;and&nbsp;array&nbsp;parameters&nbsp;will&nbsp;often&nbsp;times&nbsp;avoid&nbsp;the&nbsp;need&nbsp;to&nbsp;use&nbsp;dynamic&nbsp;modules&nbsp;at&nbsp;all.&nbsp;This&nbsp;is&nbsp;something&nbsp;we&nbsp;have&nbsp;wanted&nbsp;for&nbsp;a&nbsp;long&nbsp;time:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/issues/118&quot;&gt;https://github.com/scijava/scijava-common/issues/118&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Thinking&nbsp;of&nbsp;module&nbsp;and&nbsp;parameter&nbsp;intitalizers&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;that&nbsp;I&lt;/div&gt;&lt;div&gt;&gt;&nbsp;get&nbsp;more&nbsp;unsure.&nbsp;Is&nbsp;it&nbsp;exactly&nbsp;to&nbsp;do&nbsp;processing&nbsp;between&nbsp;the&nbsp;two&nbsp;layers&lt;/div&gt;&lt;div&gt;&gt;&nbsp;of&nbsp;parameters.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;that&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;purposes,&nbsp;as&nbsp;discussed&nbsp;above.&nbsp;But&nbsp;not&nbsp;the&nbsp;sole&nbsp;purpose.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;And&nbsp;it&nbsp;is&nbsp;to&nbsp;add&nbsp;further&nbsp;parameters&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;case&nbsp;of&nbsp;dynamic&nbsp;modules,&nbsp;yes.&nbsp;And&nbsp;I&nbsp;would&nbsp;classify&nbsp;that&nbsp;as&nbsp;a&nbsp;&quot;processing&nbsp;between&nbsp;two&nbsp;layers&quot;&nbsp;use&nbsp;case.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;and&nbsp;set&nbsp;initial&nbsp;values&nbsp;to&nbsp;parameters?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;that&nbsp;was&nbsp;the&nbsp;primary&nbsp;intended&nbsp;use&nbsp;case:&nbsp;when&nbsp;you&nbsp;want&nbsp;to&nbsp;set&nbsp;the&nbsp;initial&nbsp;value&nbsp;of&nbsp;a&nbsp;parameter&nbsp;and&nbsp;it&nbsp;cannot&nbsp;be&nbsp;expressed&nbsp;as&nbsp;a&nbsp;simple&nbsp;assignment.&nbsp;That&nbsp;is:&nbsp;if&nbsp;you&nbsp;want&nbsp;the&nbsp;default&nbsp;sigma&nbsp;to&nbsp;be&nbsp;2.5,&nbsp;you&nbsp;simply&nbsp;write:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;@Parameter&lt;/div&gt;&lt;div&gt; &nbsp;private&nbsp;double&nbsp;sigma&nbsp;=&nbsp;2.5;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;define&nbsp;it&nbsp;by&nbsp;writing&nbsp;code&nbsp;--&nbsp;presumably&nbsp;to&nbsp;somehow&nbsp;derive&nbsp;its&nbsp;initial&nbsp;value&nbsp;from&nbsp;the&nbsp;application&nbsp;state&nbsp;--&nbsp;you&nbsp;need&nbsp;an&nbsp;initializer.&nbsp;It&nbsp;is&nbsp;not&nbsp;enough&nbsp;to&nbsp;write:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;@Parameter&lt;/div&gt;&lt;div&gt; &nbsp;private&nbsp;double&nbsp;sigma&nbsp;=&nbsp;initialSigma();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;private&nbsp;double&nbsp;initialSigma()&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;...&lt;/div&gt;&lt;div&gt; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Because&nbsp;in&nbsp;that&nbsp;case,&nbsp;the&nbsp;initialSigma&nbsp;method&nbsp;is&nbsp;called&nbsp;when&nbsp;the&nbsp;object&nbsp;is&nbsp;first&nbsp;instantiated,&nbsp;but&nbsp;before&nbsp;any&nbsp;context&nbsp;is&nbsp;injected.&nbsp;The&nbsp;initializer,&nbsp;conversely,&nbsp;is&nbsp;typically&nbsp;called&nbsp;at&nbsp;a&nbsp;very&nbsp;specific&nbsp;point&nbsp;in&nbsp;the&nbsp;preprocessing&nbsp;chain.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Are&nbsp;initial&nbsp;parameter&nbsp;values&nbsp;execulsively&nbsp;meant&nbsp;to&nbsp;serve&nbsp;as&nbsp;defaults&lt;/div&gt;&lt;div&gt;&gt;&nbsp;for&nbsp;the&nbsp;user&nbsp;or&nbsp;is&nbsp;it&nbsp;required&nbsp;that&nbsp;some&nbsp;initial&nbsp;values&nbsp;are&nbsp;set&nbsp;(in&lt;/div&gt;&lt;div&gt;&gt;&nbsp;order&nbsp;to&nbsp;properly&nbsp;run&nbsp;the&nbsp;command)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;no&nbsp;hard&nbsp;assumption&nbsp;that&nbsp;initializers&nbsp;leave&nbsp;parameters&nbsp;&quot;open&quot;&nbsp;for&nbsp;further&nbsp;user&nbsp;alteration.&nbsp;Actually,&nbsp;a&nbsp;dynamic&nbsp;command&nbsp;could&nbsp;set&nbsp;any&nbsp;number&nbsp;of&nbsp;parameters&nbsp;to&nbsp;resolved&nbsp;during&nbsp;initializer&nbsp;routines,&nbsp;and&nbsp;then&nbsp;those&nbsp;parameters&nbsp;would&nbsp;not&nbsp;be&nbsp;shown&nbsp;to&nbsp;the&nbsp;user&nbsp;in&nbsp;the&nbsp;input&nbsp;harvester.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;discussed&nbsp;earlier&nbsp;in&nbsp;this&nbsp;thread,&nbsp;the&nbsp;precondition&nbsp;of&nbsp;run&nbsp;is&nbsp;that&nbsp;all&nbsp;required&nbsp;parameters&nbsp;be&nbsp;non-null&nbsp;when&nbsp;run()&nbsp;is&nbsp;called.&nbsp;This&nbsp;can&nbsp;be&nbsp;achieved&nbsp;by&nbsp;the&nbsp;preprocessing&nbsp;chain,&nbsp;or&nbsp;because&nbsp;some/all&nbsp;parameter&nbsp;values&nbsp;were&nbsp;passed&nbsp;to&nbsp;the&nbsp;moduleService.run&nbsp;method&nbsp;and&nbsp;prepopulated&nbsp;that&nbsp;way.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;If&nbsp;so:&nbsp;would&nbsp;this&nbsp;mean&nbsp;that&nbsp;for&nbsp;running&nbsp;a&nbsp;command&nbsp;head&nbsp;less&nbsp;in&nbsp;a&nbsp;non&nbsp;interactive&nbsp;way&nbsp;makes&nbsp;the&nbsp;distiction&nbsp;of&nbsp;two&nbsp;layers&nbsp;is&nbsp;obsolete?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;typically&nbsp;non-interactive&nbsp;use&nbsp;case&nbsp;is&nbsp;to&nbsp;pass&nbsp;all&nbsp;parameter&nbsp;values&nbsp;explicitly,&nbsp;which&nbsp;would&nbsp;make&nbsp;all&nbsp;the&nbsp;initializer&nbsp;stuff&nbsp;moot,&nbsp;yes.&nbsp;But&nbsp;it&nbsp;is&nbsp;not&nbsp;a&nbsp;hard&nbsp;requirement&nbsp;--&nbsp;it&nbsp;really&nbsp;depends&nbsp;on&nbsp;your&nbsp;definition&nbsp;of&nbsp;&quot;non-interactive&quot;;&nbsp;if&nbsp;the&nbsp;preprocessing&nbsp;chain&nbsp;fulfills&nbsp;missing&nbsp;parameters&nbsp;in&nbsp;some&nbsp;other&nbsp;way,&nbsp;that&nbsp;is&nbsp;also&nbsp;acceptable&nbsp;from&nbsp;the&nbsp;standpoint&nbsp;of&nbsp;fulfilling&nbsp;the&nbsp;preconditions&nbsp;of&nbsp;run().&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;running&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;gives&lt;/div&gt;&lt;div&gt;&gt;&nbsp;-----&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Exception&nbsp;in&nbsp;thread&nbsp;&quot;main&quot;&nbsp;java.lang.IllegalStateException:&nbsp;Context&lt;/div&gt;&lt;div&gt;&gt;&nbsp;already&nbsp;injected:&nbsp;org.scijava.AbstractContextual#context&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Given&nbsp;the&nbsp;long&nbsp;time&nbsp;frame&nbsp;since&nbsp;you&nbsp;sent&nbsp;this:&nbsp;did&nbsp;you&nbsp;resolve&nbsp;this&nbsp;issue&nbsp;in&nbsp;an&nbsp;acceptable&nbsp;way?&nbsp;Or&nbsp;is&nbsp;it&nbsp;still&nbsp;a&nbsp;problem&nbsp;for&nbsp;you?&nbsp;If&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;problem,&nbsp;I&nbsp;will&nbsp;be&nbsp;happy&nbsp;to&nbsp;look&nbsp;in&nbsp;more&nbsp;detail&nbsp;and&nbsp;give&nbsp;some&nbsp;advice&nbsp;--&nbsp;in&nbsp;a&nbsp;much&nbsp;more&nbsp;timely&nbsp;fashion&nbsp;this&nbsp;time.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Is&nbsp;this&nbsp;intended,&nbsp;i.e.&nbsp;that&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;for&nbsp;a&nbsp;module&nbsp;may&nbsp;be&lt;/div&gt;&lt;div&gt;&gt;&nbsp;run&nbsp;only&nbsp;once?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;module.initialize()&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;called&nbsp;only&nbsp;once.&nbsp;To&nbsp;execute&nbsp;a&nbsp;module&nbsp;again,&nbsp;create&nbsp;a&nbsp;new&nbsp;instance&nbsp;each&nbsp;time.&nbsp;The&nbsp;current&nbsp;code&nbsp;does&nbsp;still&nbsp;have&nbsp;this&nbsp;requirement,&nbsp;because&nbsp;CommandModule#initialize()&nbsp;injects&nbsp;the&nbsp;context,&nbsp;which&nbsp;is&nbsp;only&nbsp;allowed&nbsp;once.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;What&nbsp;we&nbsp;want&nbsp;to&nbsp;do&nbsp;is&nbsp;essentially&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;The&nbsp;user&nbsp;selects&nbsp;a&nbsp;Command&nbsp;via&nbsp;the&nbsp;GUI&nbsp;and&nbsp;we&nbsp;create&nbsp;a&nbsp;Window&lt;/div&gt;&lt;div&gt;&gt;&nbsp;displaying&nbsp;the&nbsp;input&nbsp;parameters.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;The&nbsp;user&nbsp;may&nbsp;change/supply&nbsp;these&nbsp;parameters&nbsp;and&nbsp;run&nbsp;the&nbsp;Command.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;Upon&nbsp;return&nbsp;a&nbsp;window&nbsp;displaying&nbsp;the&nbsp;results&nbsp;pops&nbsp;up.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;However,&nbsp;the&nbsp;first&nbsp;window&nbsp;displaying&nbsp;the&nbsp;input&nbsp;parameters&nbsp;is&nbsp;still&lt;/div&gt;&lt;div&gt;&gt;&nbsp;available,&nbsp;the&nbsp;user&nbsp;may&nbsp;change&nbsp;one/some&nbsp;parameters&nbsp;an&nbsp;rerun&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;command.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;This&nbsp;eases&nbsp;testing&nbsp;various&nbsp;parameter&nbsp;values&nbsp;or&nbsp;the&nbsp;same&nbsp;set&nbsp;of&lt;/div&gt;&lt;div&gt;&gt;&nbsp;parameters&nbsp;on&nbsp;different&nbsp;images&nbsp;without&nbsp;the&nbsp;need&nbsp;to&nbsp;repeatatly&nbsp;select&lt;/div&gt;&lt;div&gt;&gt;&nbsp;an&nbsp;operator/command.&lt;/div&gt;&lt;div&gt;&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Have&nbsp;you&nbsp;further&nbsp;advise&nbsp;how&nbsp;we&nbsp;can&nbsp;accomplish&nbsp;this,&nbsp;i.e.&nbsp;reusing&nbsp;a&lt;/div&gt;&lt;div&gt;&gt;&nbsp;command&nbsp;module?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;you&nbsp;can&nbsp;accomplish&nbsp;all&nbsp;of&nbsp;the&nbsp;above&nbsp;without&nbsp;reusing&nbsp;the&nbsp;same&nbsp;module&nbsp;instance,&nbsp;but&nbsp;instead&nbsp;creating&nbsp;a&nbsp;new&nbsp;one&nbsp;every&nbsp;time.&nbsp;Is&nbsp;that&nbsp;how&nbsp;you&nbsp;are&nbsp;currently&nbsp;doing&nbsp;it&nbsp;these&nbsp;days?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alternately,&nbsp;if&nbsp;you&nbsp;don&#39;t&nbsp;call&nbsp;initialize()&nbsp;beyond&nbsp;the&nbsp;first&nbsp;time,&nbsp;that&nbsp;would&nbsp;probably&nbsp;do&nbsp;the&nbsp;trick&nbsp;as&nbsp;well,&nbsp;although&nbsp;reusing&nbsp;module&nbsp;instances&nbsp;is&nbsp;not&nbsp;a&nbsp;use&nbsp;case&nbsp;we&nbsp;have&nbsp;considered&nbsp;much.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;BTW:&nbsp;I&nbsp;prefer&nbsp;to&nbsp;not&nbsp;set&nbsp;the&nbsp;parameters&nbsp;via&nbsp;the&nbsp;moduleService.run&lt;/div&gt;&lt;div&gt;&gt;&nbsp;method,&nbsp;as&nbsp;the&nbsp;parameters&nbsp;are&nbsp;set&nbsp;elsewhere&nbsp;(either&nbsp;by&nbsp;the&nbsp;user&nbsp;via&nbsp;a&lt;/div&gt;&lt;div&gt;&gt;&nbsp;GUI&nbsp;configuring&nbsp;the&nbsp;operator/command&nbsp;e.g.&nbsp;from&nbsp;grappa,&nbsp;or&nbsp;by&nbsp;parsing&lt;/div&gt;&lt;div&gt;&gt;&nbsp;command&nbsp;line&nbsp;argument&nbsp;in&nbsp;case&nbsp;of&nbsp;the&nbsp;command&nbsp;line&nbsp;oprunner.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Additionaly&nbsp;I&nbsp;rather&nbsp;invoke&nbsp;the&nbsp;moduls&nbsp;run-method&nbsp;directly,&nbsp;as&nbsp;it&lt;/div&gt;&lt;div&gt;&gt;&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;via&nbsp;moduleservie&nbsp;a&nbsp;new&nbsp;thread&nbsp;is&nbsp;started,&nbsp;and&nbsp;at&nbsp;this&lt;/div&gt;&lt;div&gt;&gt;&nbsp;point&nbsp;we&nbsp;like&nbsp;to&nbsp;have&nbsp;this&nbsp;under&nbsp;control.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;All&nbsp;makes&nbsp;sense.&nbsp;You&nbsp;can&nbsp;populate&nbsp;the&nbsp;parameters&nbsp;prior&nbsp;to&nbsp;run()&nbsp;in&nbsp;whatever&nbsp;way&nbsp;you&nbsp;see&nbsp;fit.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;it&nbsp;after&nbsp;initialization,&nbsp;you&nbsp;could&nbsp;create&nbsp;your&nbsp;own&nbsp;preprocessor&nbsp;that&nbsp;does&nbsp;it.&nbsp;Or&nbsp;just&nbsp;set&nbsp;them&nbsp;directly&nbsp;right&nbsp;away.&nbsp;Whatever&nbsp;works.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;it&nbsp;seems,&nbsp;that&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;assigns&nbsp;the&nbsp;service&nbsp;parameters&nbsp;of&lt;/div&gt;&lt;div&gt;&gt;&nbsp;a&nbsp;Command,&nbsp;not&nbsp;the&nbsp;Service&nbsp;preprocessor&nbsp;as&nbsp;I&nbsp;expected.&nbsp;Is&nbsp;the&nbsp;correct?&lt;/div&gt;&lt;div&gt;&gt;&nbsp;(Probably&nbsp;related&nbsp;to&nbsp;&quot;shadowing&quot;&nbsp;the&nbsp;Service&nbsp;and&nbsp;Context&nbsp;parameters&nbsp;of&lt;/div&gt;&lt;div&gt;&gt;&nbsp;a&nbsp;Command)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;because&nbsp;the&nbsp;InitPreprocessor&nbsp;calls&nbsp;initialize()&nbsp;and&nbsp;for&nbsp;CommandModules&nbsp;that&nbsp;injects&nbsp;the&nbsp;context.&nbsp;And&nbsp;InitPreprocessor&nbsp;happens&nbsp;before&nbsp;ServicePreprocessor.&nbsp;I&nbsp;discussed&nbsp;this&nbsp;wrinkle&nbsp;in&nbsp;my&nbsp;previous&nbsp;reply. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;BTW:&nbsp;what&nbsp;is&nbsp;the&nbsp;sematics&nbsp;of&nbsp;injecting&nbsp;a&nbsp;context&nbsp;(into&nbsp;a&nbsp;module?)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;this&nbsp;answer&nbsp;your&nbsp;question:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/blob/scijava-common-2.44.2/src/main/java/org/scijava/Context.java#L340-L360&quot;&gt;https://github.com/scijava/scijava-common/blob/scijava-common-2.44.2/src/main/java/org/scijava/Context.java#L340-L360&lt;/a&gt;&lt;/div&gt;&lt;div&gt;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Note&nbsp;that&nbsp;&quot;injecting&nbsp;a&nbsp;Context&quot;&nbsp;is&nbsp;something&nbsp;done&nbsp;to&nbsp;Java&nbsp;objects,&nbsp;not&nbsp;modules&nbsp;per&nbsp;se.&nbsp;Initializing&nbsp;a&nbsp;CommandModule&nbsp;instance&nbsp;injects&nbsp;its&nbsp;context&nbsp;into&nbsp;its&nbsp;associated&nbsp;Command&nbsp;instance&nbsp;[2].&nbsp;But&nbsp;for&nbsp;other&nbsp;sorts&nbsp;of&nbsp;modules&nbsp;such&nbsp;as&nbsp;ScriptModule,&nbsp;there&nbsp;is&nbsp;no&nbsp;associated&nbsp;Java&nbsp;object.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;Do&nbsp;you&nbsp;think&nbsp;that&nbsp;Commands&nbsp;should&nbsp;also&nbsp;include&nbsp;service&nbsp;and&nbsp;context&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;inputs&nbsp;when&nbsp;iterating&nbsp;them?&nbsp;If&nbsp;so,&nbsp;we&nbsp;can&nbsp;try&nbsp;removing&nbsp;that&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&gt;&nbsp;exclusion&nbsp;and&nbsp;see&nbsp;what&nbsp;explodes...&nbsp;;-)&lt;/div&gt;&lt;div&gt;&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;We&nbsp;would&nbsp;not&nbsp;need&nbsp;them&nbsp;rather&nbsp;hide&nbsp;the&nbsp;from&nbsp;the&nbsp;user.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OK,&nbsp;then&nbsp;I&nbsp;will&nbsp;not&nbsp;worry&nbsp;about&nbsp;changing&nbsp;this&nbsp;behavior&nbsp;any&nbsp;time&nbsp;soon&nbsp;--&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;tolerable&nbsp;for&nbsp;the&nbsp;time&nbsp;being.&nbsp;But&nbsp;unfortunately,&nbsp;to&nbsp;fully&nbsp;support&nbsp;all&nbsp;modules&nbsp;(not&nbsp;just&nbsp;commands),&nbsp;you&nbsp;still&nbsp;need&nbsp;the&nbsp;logic&nbsp;to&nbsp;hide&nbsp;service&nbsp;and&nbsp;context&nbsp;inputs,&nbsp;since&nbsp;other&nbsp;modules&nbsp;types&nbsp;like&nbsp;scripts&nbsp;will&nbsp;often&nbsp;have&nbsp;them.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;no,&nbsp;we&nbsp;are&nbsp;hapy&nbsp;with&nbsp;one,&nbsp;just&nbsp;have&nbsp;to&nbsp;get&nbsp;hold&nbsp;of&nbsp;it&nbsp;(and&nbsp;use&nbsp;it&nbsp;in&nbsp;a&lt;/div&gt;&lt;div&gt;&gt;&nbsp;static&nbsp;way)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since&nbsp;you&nbsp;only&nbsp;need&nbsp;a&nbsp;single&nbsp;Context,&nbsp;you&nbsp;presumably&nbsp;either:&nbsp;A)&nbsp;have&nbsp;a&nbsp;standalone&nbsp;application,&nbsp;in&nbsp;which&nbsp;case&nbsp;you&nbsp;should&nbsp;just&nbsp;spin&nbsp;up&nbsp;a&nbsp;Context&nbsp;and&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it;&nbsp;or:&nbsp;B)&nbsp;have&nbsp;an&nbsp;ImageJ&nbsp;plugin,&nbsp;in&nbsp;which&nbsp;case&nbsp;you&nbsp;should&nbsp;implement&nbsp;Command&nbsp;and&nbsp;write&nbsp;&quot;@Parameter&nbsp;private&nbsp;Context&nbsp;context&quot;&nbsp;in&nbsp;your&nbsp;command&nbsp;and&nbsp;you&#39;ll&nbsp;magically&nbsp;get&nbsp;the&nbsp;context&nbsp;injected.&nbsp;Actually,&nbsp;it&nbsp;is&nbsp;most&nbsp;direct&nbsp;in&nbsp;that&nbsp;case&nbsp;to&nbsp;declare&nbsp;@Parameters&nbsp;for&nbsp;all&nbsp;your&nbsp;needed&nbsp;services,&nbsp;rather&nbsp;than&nbsp;the&nbsp;context&nbsp;itself,&nbsp;since&nbsp;typically&nbsp;what&nbsp;you&nbsp;will&nbsp;want&nbsp;to&nbsp;do&nbsp;is&nbsp;make&nbsp;various&nbsp;service&nbsp;calls.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;We&nbsp;think&nbsp;we&nbsp;could&nbsp;do&nbsp;without&nbsp;command&nbsp;and&nbsp;parameter&nbsp;initializers&nbsp;but&lt;/div&gt;&lt;div&gt;&gt;&nbsp;work&nbsp;only&nbsp;with&nbsp;the&nbsp;parameter&#39;s&nbsp;callback&nbsp;function&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Great&nbsp;idea.&nbsp;This&nbsp;would&nbsp;elegant,&nbsp;and&nbsp;often&nbsp;superior&nbsp;in&nbsp;case&nbsp;of&nbsp;later&nbsp;changes&nbsp;to&nbsp;the&nbsp;relevant&nbsp;parameter(s).&nbsp;We&nbsp;can&nbsp;try&nbsp;to&nbsp;simplify&nbsp;this&nbsp;for&nbsp;SJC3,&nbsp;which&nbsp;is&nbsp;slated&nbsp;for&nbsp;release&nbsp;within&nbsp;the&nbsp;next&nbsp;few&nbsp;months&nbsp;[3].&nbsp;I&nbsp;filed&nbsp;an&nbsp;issue&nbsp;for&nbsp;it&nbsp;[4].&nbsp;There&nbsp;are&nbsp;some&nbsp;minor&nbsp;obstacles&nbsp;in&nbsp;certain&nbsp;cases,&nbsp;which&nbsp;I&nbsp;describe&nbsp;on&nbsp;the&nbsp;issue&nbsp;if&nbsp;you&nbsp;are&nbsp;interested,&nbsp;but&nbsp;they&nbsp;all&nbsp;seem&nbsp;surmountable.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;What&nbsp;if&nbsp;this&nbsp;callback&nbsp;reqires/assumes&nbsp;one&nbsp;or&nbsp;several&nbsp;other&nbsp;parameters&lt;/div&gt;&lt;div&gt;&gt;&nbsp;to&nbsp;aready&nbsp;have&nbsp;be&nbsp;set?&nbsp;It&nbsp;seems&nbsp;to&nbsp;be,&nbsp;that&nbsp;this&nbsp;necessarily&nbsp;is&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;responsibility&nbsp;of&nbsp;the&nbsp;callback&nbsp;function&nbsp;(resp.&nbsp;its&nbsp;programmer)&nbsp;to&lt;/div&gt;&lt;div&gt;&gt;&nbsp;handle&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Agreed.&nbsp;This&nbsp;is&nbsp;a&nbsp;secondary&nbsp;parameter&nbsp;which&nbsp;depends&nbsp;on&nbsp;multiple&nbsp;primary&nbsp;parameters.&nbsp;So&nbsp;they&nbsp;all&nbsp;need&nbsp;callbacks&nbsp;which&nbsp;recompute&nbsp;the&nbsp;secondary&nbsp;parameter&nbsp;--&nbsp;presumably&nbsp;by&nbsp;calling&nbsp;the&nbsp;same&nbsp;helper&nbsp;method,&nbsp;which&nbsp;does&nbsp;nothing&nbsp;if&nbsp;any&nbsp;of&nbsp;the&nbsp;needed&nbsp;primary&nbsp;parameters&nbsp;are&nbsp;still&nbsp;null.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Otherwise&nbsp;the&nbsp;Command&nbsp;or&nbsp;its&nbsp;Parameters&nbsp;have&nbsp;to&nbsp;declare&nbsp;a&nbsp;predefine&lt;/div&gt;&lt;div&gt;&gt;&nbsp;order&nbsp;in&nbsp;which&nbsp;parameters&nbsp;have&nbsp;to&nbsp;be&nbsp;set.&nbsp;(Which&nbsp;we&nbsp;have&nbsp;considered&nbsp;to&lt;/div&gt;&lt;div&gt;&gt;&nbsp;introduce&nbsp;to&nbsp;alida/mitobo&nbsp;few&nbsp;years&nbsp;ago&nbsp;but&nbsp;abandoned&nbsp;this&nbsp;idea&nbsp;as&nbsp;it&lt;/div&gt;&lt;div&gt;&gt;&nbsp;seems&nbsp;to&nbsp;messy/error&nbsp;prone.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Again&nbsp;agreed:&nbsp;best&nbsp;not&nbsp;to&nbsp;mandate&nbsp;anything&nbsp;with&nbsp;respect&nbsp;to&nbsp;order.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;in&nbsp;case&nbsp;of&nbsp;command&nbsp;execution&nbsp;via&nbsp;GUI&nbsp;(in&nbsp;contrast&nbsp;to&lt;/div&gt;&lt;div&gt;&gt;&nbsp;programmatically):&nbsp;what&nbsp;if&nbsp;not&nbsp;all&nbsp;parameters&nbsp;which&nbsp;add&nbsp;further&lt;/div&gt;&lt;div&gt;&gt;&nbsp;parameters&nbsp;are&nbsp;filled&nbsp;before&nbsp;the&nbsp;GUI&nbsp;is&nbsp;created&nbsp;and&nbsp;presented&nbsp;to&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;user&nbsp;and&nbsp;are&nbsp;set&nbsp;by&nbsp;the&nbsp;user?&nbsp;What&nbsp;we&nbsp;are&nbsp;considering&nbsp;is&nbsp;that&nbsp;the&nbsp;GUI&lt;/div&gt;&lt;div&gt;&gt;&nbsp;to&nbsp;figure&nbsp;out&nbsp;such&nbsp;events&nbsp;have&nbsp;happened&nbsp;and&nbsp;then&nbsp;to&nbsp;adapt&nbsp;the&nbsp;GUI&lt;/div&gt;&lt;div&gt;&gt;&nbsp;accordingly.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;ideally&nbsp;we&nbsp;should&nbsp;support&nbsp;that&nbsp;in&nbsp;the&nbsp;ImageJ&nbsp;UI.&nbsp;I&nbsp;believe&nbsp;that&nbsp;CellProfiler&nbsp;handles&nbsp;it&nbsp;by&nbsp;rebuilding&nbsp;the&nbsp;UI&nbsp;every&nbsp;time&nbsp;anything&nbsp;changes&nbsp;structurally.&nbsp;We&nbsp;could&nbsp;do&nbsp;the&nbsp;same&nbsp;thing,&nbsp;and&nbsp;it&nbsp;would&nbsp;be&nbsp;efficient&nbsp;enough&nbsp;--&nbsp;the&nbsp;ImageJ&nbsp;API&nbsp;requires&nbsp;specific&nbsp;method&nbsp;calls&nbsp;to&nbsp;mutate&nbsp;parameter&nbsp;attributes,&nbsp;which&nbsp;would&nbsp;tell&nbsp;us&nbsp;when&nbsp;a&nbsp;UI&nbsp;rebuild&nbsp;of&nbsp;the&nbsp;input&nbsp;harvester&nbsp;is&nbsp;necessary.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;How&nbsp;to&nbsp;figure&nbsp;out&nbsp;that&nbsp;set&nbsp;set&nbsp;of&nbsp;parameter&nbsp;(or&nbsp;the&nbsp;type&nbsp;of&nbsp;an&nbsp;already&lt;/div&gt;&lt;div&gt;&gt;&nbsp;existing&nbsp;parameter)&nbsp;was&nbsp;change&nbsp;by&nbsp;a&nbsp;callback&nbsp;function?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;a&nbsp;parameter&nbsp;_value_&nbsp;is&nbsp;changed&nbsp;in&nbsp;a&nbsp;callback,&nbsp;it&nbsp;is&nbsp;typically&nbsp;a&nbsp;direct&nbsp;assignment&nbsp;to&nbsp;a&nbsp;field.&nbsp;So&nbsp;that&nbsp;would&nbsp;not&nbsp;trigger&nbsp;any&nbsp;additional&nbsp;callbacks.&nbsp;This&nbsp;makes&nbsp;infinite&nbsp;loops&nbsp;impossible,&nbsp;but&nbsp;also&nbsp;means&nbsp;it&nbsp;becomes&nbsp;the&nbsp;programmers&nbsp;responsibility&nbsp;to&nbsp;keep&nbsp;track&nbsp;of&nbsp;&quot;transitive&nbsp;parameter&nbsp;dependencies&quot;&nbsp;and&nbsp;update&nbsp;all&nbsp;downstream&nbsp;parameters&nbsp;accordingly.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;a&nbsp;parameter&nbsp;attribute&nbsp;is&nbsp;changed&nbsp;in&nbsp;a&nbsp;callback&nbsp;(which&nbsp;only&nbsp;DynamicCommands&nbsp;can&nbsp;do),&nbsp;we&nbsp;can&nbsp;easily&nbsp;make&nbsp;the&nbsp;framework&nbsp;publish&nbsp;some&nbsp;event&nbsp;--&nbsp;individual&nbsp;programmers&nbsp;would&nbsp;not&nbsp;need&nbsp;to&nbsp;deal&nbsp;with&nbsp;this,&nbsp;and&nbsp;everything&nbsp;would&nbsp;&quot;just&nbsp;work.&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;I&nbsp;favour&nbsp;the&nbsp;following&nbsp;guideline:&nbsp;A&nbsp;parameter,&nbsp;e.g.&nbsp;inputDisplay,&nbsp;may&lt;/div&gt;&lt;div&gt;&gt;&nbsp;add&nbsp;(or&nbsp;remove)&nbsp;parameters&nbsp;to&nbsp;the&nbsp;command&nbsp;exclusively&nbsp;depending&nbsp;of&nbsp;its&lt;/div&gt;&lt;div&gt;&gt;&nbsp;own&nbsp;value.&nbsp;Furthermore&nbsp;the&nbsp;parameter&nbsp;(names)&nbsp;potentially&nbsp;added&nbsp;by&nbsp;this&lt;/div&gt;&lt;div&gt;&gt;&nbsp;parameter&nbsp;are&nbsp;disjoint&nbsp;from&nbsp;those&nbsp;parameters&nbsp;added&nbsp;by&nbsp;other&nbsp;parameters&lt;/div&gt;&lt;div&gt;&gt;&nbsp;of&nbsp;the&nbsp;command.&nbsp;However,&nbsp;it&nbsp;is&nbsp;probably&nbsp;not&nbsp;possible&nbsp;to&nbsp;check&nbsp;or&lt;/div&gt;&lt;div&gt;&gt;&nbsp;enforce&nbsp;this&nbsp;restriction.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;that&nbsp;would&nbsp;certainly&nbsp;provide&nbsp;some&nbsp;guarantees,&nbsp;I&nbsp;agree&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;enforce&nbsp;it.&nbsp;So&nbsp;I&nbsp;would&nbsp;favor&nbsp;not&nbsp;stating&nbsp;any&nbsp;restrictions&nbsp;of&nbsp;that&nbsp;sort.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;A&nbsp;different&nbsp;issue&nbsp;I&nbsp;came&nbsp;across&nbsp;have&nbsp;a&nbsp;second&nbsp;look&nbsp;at&nbsp;the&nbsp;Parameter&lt;/div&gt;&lt;div&gt;&gt;&nbsp;annotation,&nbsp;sepcifically&nbsp;its&nbsp;choices:&nbsp;The&nbsp;few&nbsp;examples&nbsp;of&nbsp;usage&nbsp;I&nbsp;had&lt;/div&gt;&lt;div&gt;&gt;&nbsp;a&nbsp;look&nbsp;at&nbsp;are&nbsp;parameters&nbsp;of&nbsp;type&nbsp;String&nbsp;which&nbsp;announce&nbsp;valid&nbsp;values.&lt;/div&gt;&lt;div&gt;&gt;&nbsp;It&nbsp;might&nbsp;me&nbsp;worth&nbsp;considering&nbsp;to&nbsp;drop&nbsp;this&nbsp;feature&nbsp;and&nbsp;use&nbsp;Enums&lt;/div&gt;&lt;div&gt;&gt;&nbsp;instead&nbsp;of&nbsp;Strings&nbsp;which&nbsp;easily&nbsp;allows&nbsp;to&nbsp;generate&nbsp;an&nbsp;approprate&lt;/div&gt;&lt;div&gt;&gt;&nbsp;selection&nbsp;by&nbsp;the&nbsp;GUI.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;with&nbsp;enums&nbsp;is&nbsp;they&nbsp;are&nbsp;not&nbsp;extensible.&nbsp;So&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;dynamically&nbsp;generate&nbsp;the&nbsp;choices&nbsp;via&nbsp;callbacks,&nbsp;an&nbsp;enum&nbsp;will&nbsp;not&nbsp;work.&nbsp;IIRC,&nbsp;the&nbsp;module&nbsp;framework&nbsp;does&nbsp;already&nbsp;support&nbsp;enums&nbsp;as&nbsp;dropdown&nbsp;list&nbsp;boxes.&nbsp;But&nbsp;I&nbsp;think&nbsp;there&nbsp;is&nbsp;still&nbsp;a&nbsp;place&nbsp;for&nbsp;the&nbsp;choices&nbsp;attribute,&nbsp;too.&nbsp;Let&nbsp;me&nbsp;know&nbsp;if&nbsp;you&nbsp;see&nbsp;a&nbsp;way&nbsp;around&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/pipermail/imagej-devel/2015-August/002661.html&quot;&gt;http://imagej.net/pipermail/imagej-devel/2015-August/002661.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/blob/scijava-common-2.42.2/src/main/java/org/scijava/command/CommandModule.java#L146&quot;&gt;https://github.com/scijava/scijava-common/blob/scijava-common-2.42.2/src/main/java/org/scijava/command/CommandModule.java#L146&lt;/a&gt;&lt;/div&gt;&lt;div&gt;[3]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/milestones/3.0.0&quot;&gt;https://github.com/scijava/scijava-common/milestones/3.0.0&lt;/a&gt;&lt;/div&gt;&lt;div&gt;[4]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/issues/181&quot;&gt;https://github.com/scijava/scijava-common/issues/181&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;16,&nbsp;2014&nbsp;at&nbsp;9:47&nbsp;AM,&nbsp;Stefan&nbsp;Posch&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:posch@informatik.uni-halle.de&quot;&nbsp;target=&quot;_blank&quot;&gt;posch@informatik.uni-halle.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;Hi&nbsp;Curtis,&lt;br&gt;<br>
&lt;br&gt;<br>
regarding&nbsp;the&nbsp;concept&nbsp;of&nbsp;initializers&nbsp;I&nbsp;had&nbsp;a&nbsp;discussion&nbsp;with&nbsp;Birgit&nbsp;yesterday&lt;br&gt;<br>
and&nbsp;we&nbsp;came&nbsp;up&nbsp;with&nbsp;the&nbsp;following&nbsp;ideas.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;think&nbsp;we&nbsp;could&nbsp;do&nbsp;without&nbsp;command&nbsp;and&nbsp;parameter&nbsp;initializers&nbsp;but&nbsp;work&nbsp;only&nbsp;with&lt;br&gt;<br>
the&nbsp;parameter&#39;s&nbsp;callback&nbsp;function&nbsp;which&nbsp;-&nbsp;as&nbsp;currently&nbsp;-&nbsp;are&nbsp;to&nbsp;be&nbsp;invoked&lt;br&gt;<br>
upon&nbsp;setting/changing&nbsp;the&nbsp;corresponding&nbsp;parameters&nbsp;value.&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;currently,&nbsp;depending&nbsp;on&nbsp;parameter&nbsp;values,&nbsp;e.g.&nbsp;the&nbsp;image&nbsp;assigned&nbsp;to&nbsp;a&nbsp;Dataset,&lt;br&gt;<br>
the&nbsp;command&nbsp;may&nbsp;add&nbsp;(or&nbsp;remove)&nbsp;parameters.&nbsp;This&nbsp;would&nbsp;be&nbsp;accomplished&lt;br&gt;<br>
by&nbsp;the&nbsp;callback&nbsp;functions&nbsp;of&nbsp;the&nbsp;parameter&nbsp;whose&nbsp;value&nbsp;is&nbsp;the&nbsp;cause&nbsp;for&nbsp;these&nbsp;new&nbsp;parameters.&lt;br&gt;<br>
E.g.&nbsp;the&nbsp;callback&nbsp;function&nbsp;of&nbsp;the&nbsp;inputDisplay&nbsp;of&nbsp;DuplicateImage&nbsp;would&nbsp;add&nbsp;the&nbsp;parameters&lt;br&gt;<br>
(which&nbsp;is&nbsp;currently&nbsp;done&nbsp;by&nbsp;the&nbsp;command&nbsp;initializer).&lt;br&gt;<br>
If&nbsp;some&nbsp;parameters&nbsp;should&nbsp;get&nbsp;(initial)&nbsp;values&nbsp;depending&nbsp;on&nbsp;the&nbsp;value&nbsp;of&nbsp;other&lt;br&gt;<br>
parameters&nbsp;(e.g.&nbsp;your&nbsp;example&nbsp;of&nbsp;setting&nbsp;default&nbsp;brightness/contrast&nbsp;min,max&nbsp;values&lt;br&gt;<br>
to&nbsp;current&nbsp;min,max&nbsp;of&nbsp;the&nbsp;input&nbsp;image)&nbsp;would&nbsp;we&nbsp;again&nbsp;the&nbsp;responsibility&nbsp;of&lt;br&gt;<br>
the&nbsp;callback&nbsp;function&nbsp;of&nbsp;the&nbsp;cause,&nbsp;i.e.&nbsp;the&nbsp;input&nbsp;image.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;would&nbsp;eleviate&nbsp;us&nbsp;of&nbsp;the&nbsp;need&nbsp;to&nbsp;fill&nbsp;in&nbsp;parameters&nbsp;required&nbsp;for&nbsp;the&nbsp;command&nbsp;initializer.&lt;br&gt;<br>
If&nbsp;a&nbsp;parameter&#39;s&nbsp;value&nbsp;is&nbsp;set&nbsp;(either&nbsp;by&nbsp;a&nbsp;pre&nbsp;processor&nbsp;or&nbsp;programmatically)&lt;br&gt;<br>
its&nbsp;callback&nbsp;function&nbsp;takes&nbsp;care&nbsp;of&nbsp;taking&nbsp;the&nbsp;apropriate&nbsp;actions.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;pre&nbsp;processor&nbsp;is&nbsp;run,&nbsp;it&nbsp;just&nbsp;needs&nbsp;to&nbsp;set&nbsp;the&nbsp;parameter&nbsp;values&nbsp;it&nbsp;decides&nbsp;to,&lt;br&gt;<br>
and&nbsp;the&nbsp;callback&nbsp;functions&nbsp;would&nbsp;be&nbsp;could&nbsp;automatically.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;remains&nbsp;is&nbsp;of&nbsp;course:&lt;br&gt;<br>
(i)&nbsp;assume&nbsp;a&nbsp;parameter&#39;s&nbsp;value&nbsp;is&nbsp;changed,&nbsp;and&nbsp;its&nbsp;callback&nbsp;method&lt;br&gt;<br>
 &nbsp;called&nbsp;accordingly.&nbsp;What&nbsp;if&nbsp;this&nbsp;callback&nbsp;reqires/assumes&nbsp;one&nbsp;or&nbsp;several&nbsp;other&nbsp;parameters&lt;br&gt;<br>
 &nbsp;to&nbsp;aready&nbsp;have&nbsp;be&nbsp;set?&nbsp;It&nbsp;seems&nbsp;to&nbsp;be,&nbsp;that&nbsp;this&nbsp;necessarily&nbsp;is&nbsp;the&nbsp;responsibility&lt;br&gt;<br>
 &nbsp;of&nbsp;the&nbsp;callback&nbsp;function&nbsp;(resp.&nbsp;its&nbsp;programmer)&nbsp;to&nbsp;handle&nbsp;this.&nbsp;I.e.&nbsp;to&nbsp;check&lt;br&gt;<br>
 &nbsp;the&nbsp;validity&nbsp;of&nbsp;other&nbsp;parameters&nbsp;it&nbsp;requires.&nbsp;Otherwise&nbsp;the&nbsp;Command&nbsp;or&nbsp;its&nbsp;Parameters&lt;br&gt;<br>
 &nbsp;have&nbsp;to&nbsp;declare&nbsp;a&nbsp;predefine&nbsp;order&nbsp;in&nbsp;which&nbsp;parameters&nbsp;have&nbsp;to&nbsp;be&nbsp;set.&lt;br&gt;<br>
 &nbsp;(Which&nbsp;we&nbsp;have&nbsp;considered&nbsp;to&nbsp;introduce&nbsp;to&nbsp;alida/mitobo&nbsp;few&nbsp;years&nbsp;ago&nbsp;but&nbsp;abandoned&nbsp;this&lt;br&gt;<br>
 &nbsp;idea&nbsp;as&nbsp;it&nbsp;seems&nbsp;to&nbsp;messy/error&nbsp;prone.)&lt;br&gt;<br>
(ii)&nbsp;in&nbsp;case&nbsp;of&nbsp;command&nbsp;execution&nbsp;via&nbsp;GUI&nbsp;(in&nbsp;contrast&nbsp;to&nbsp;programmatically):&lt;br&gt;<br>
 &nbsp; &nbsp;what&nbsp;if&nbsp;not&nbsp;all&nbsp;parameters&nbsp;which&nbsp;add&nbsp;further&nbsp;parameters&nbsp;are&lt;br&gt;<br>
 &nbsp; &nbsp;filled&nbsp;before&nbsp;the&nbsp;GUI&nbsp;is&nbsp;created&nbsp;and&nbsp;presented&nbsp;to&nbsp;the&nbsp;user&nbsp;and&nbsp;are&nbsp;set&nbsp;by&nbsp;the&nbsp;user?&lt;br&gt;<br>
 &nbsp; &nbsp;What&nbsp;we&nbsp;are&nbsp;considering&nbsp;is&nbsp;that&nbsp;the&nbsp;GUI&nbsp;to&nbsp;figure&nbsp;out&nbsp;such&nbsp;events&nbsp;have&nbsp;happened&lt;br&gt;<br>
 &nbsp; &nbsp;and&nbsp;then&nbsp;to&nbsp;adapt&nbsp;the&nbsp;GUI&nbsp;accordingly.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;How&nbsp;to&nbsp;figure&nbsp;out&nbsp;that&nbsp;set&nbsp;set&nbsp;of&nbsp;parameter&nbsp;(or&nbsp;the&nbsp;type&nbsp;of&nbsp;an&nbsp;already&nbsp;existing&nbsp;parameter)&lt;br&gt;<br>
 &nbsp; &nbsp;was&nbsp;change&nbsp;by&nbsp;a&nbsp;callback&nbsp;function?&lt;br&gt;<br>
 &nbsp; &nbsp;We&nbsp;see&nbsp;two&nbsp;possibilities:&lt;br&gt;<br>
 &nbsp; &nbsp;(a)&nbsp;a&nbsp;parameter&nbsp;may&nbsp;announce&nbsp;via&nbsp;its&nbsp;annotation&nbsp;that&nbsp;it&nbsp;(occasionally)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;_may_&nbsp;change&nbsp;paramter&nbsp;definitions&nbsp;and&nbsp;the&nbsp;GUI&nbsp;always&nbsp;assumes&nbsp;that&nbsp;this&nbsp;had&nbsp;happend,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;is&nbsp;such&nbsp;a&nbsp;parameter&#39;s&nbsp;value&nbsp;has&nbsp;changed&nbsp;(which&nbsp;the&nbsp;GUI&nbsp;knows&nbsp;at&nbsp;it&nbsp;controls&nbsp;this&nbsp;processes).&lt;br&gt;<br>
 &nbsp; &nbsp;(b)&nbsp;the&nbsp;callback&nbsp;function&nbsp;is&nbsp;to&nbsp;fire&nbsp;events&nbsp;in&nbsp;case&nbsp;it&nbsp;changes&nbsp;parameter&nbsp;definitions.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;(a)&nbsp;might&nbsp;be&nbsp;similar&nbsp;or&nbsp;be&nbsp;used&nbsp;in&nbsp;analogy&nbsp;to&nbsp;your&nbsp;idea&nbsp;of&nbsp;a&nbsp;parameter&nbsp;to&nbsp;announce&nbsp;&quot;required&nbsp;before&nbsp;initialize&quot;,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; as&nbsp;the&nbsp;pre&nbsp;processor&nbsp;framework&nbsp;would&nbsp;know&nbsp;that&nbsp;setting&nbsp;of&nbsp;such&nbsp;a&nbsp;parameter&nbsp;probably/potentially&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; may&nbsp;add&nbsp;parameters&nbsp;and&nbsp;should&nbsp;better&nbsp;be&nbsp;set&nbsp;before&nbsp;creating&nbsp;the&nbsp;GUI&nbsp;to&nbsp;ask&nbsp;the&nbsp;user&nbsp;for&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; further&nbsp;parameters&nbsp;(and&nbsp;if&nbsp;it&nbsp;accomplishes&nbsp;to&nbsp;set&nbsp;all&nbsp;of&nbsp;those&nbsp;parameters&nbsp;and&nbsp;either&nbsp;excludes&nbsp;them&nbsp;from&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; the&nbsp;GUI&nbsp;-&nbsp;as&nbsp;currently&nbsp;done&nbsp;by&nbsp;IJ2&nbsp;for&nbsp;input&nbsp;images&nbsp;-&nbsp;or&nbsp;prohibits&nbsp;changing&nbsp;these&nbsp;parameters,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; we&nbsp;get&nbsp;rid&nbsp;of&nbsp;problem&nbsp;(i)&nbsp;stated&nbsp;above).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;make&nbsp;things&nbsp;conceptionally&nbsp;easier&nbsp;(for&nbsp;me)&nbsp;I&nbsp;favour&nbsp;the&nbsp;following&nbsp;guideline:&lt;br&gt;<br>
A&nbsp;parameter,&nbsp;e.g.&nbsp;inputDisplay,&nbsp;may&nbsp;add&nbsp;(or&nbsp;remove)&nbsp;parameters&nbsp;to&nbsp;the&nbsp;command&lt;br&gt;<br>
exclusively&nbsp;depending&nbsp;of&nbsp;its&nbsp;own&nbsp;value.&nbsp;Furthermore&nbsp;the&nbsp;parameter&nbsp;(names)&nbsp;potentially&lt;br&gt;<br>
added&nbsp;by&nbsp;this&nbsp;parameter&nbsp;are&nbsp;disjoint&nbsp;from&nbsp;those&nbsp;parameters&nbsp;added&nbsp;by&nbsp;other&nbsp;parameters&nbsp;of&lt;br&gt;<br>
the&nbsp;command.&nbsp;However,&nbsp;it&nbsp;is&nbsp;probably&nbsp;not&nbsp;possible&nbsp;to&nbsp;check&nbsp;or&nbsp;enforce&nbsp;this&nbsp;restriction.&lt;br&gt;<br>
As&nbsp;stated&nbsp;above&nbsp;in&nbsp;(ii)&nbsp;in&nbsp;my&nbsp;view&nbsp;it&nbsp;would&nbsp;be&nbsp;the&nbsp;task&nbsp;of&nbsp;the&nbsp;programmer&nbsp;of&nbsp;the&nbsp;Comand&nbsp;anyway&lt;br&gt;<br>
to&nbsp;cope&nbsp;with&nbsp;more&nbsp;complicated&nbsp;situations&nbsp;and&nbsp;does&nbsp;not&nbsp;affect&nbsp;to&nbsp;supporting&nbsp;&quot;runtime&nbsp;system&quot;,&lt;br&gt;<br>
e.g.&nbsp;the&nbsp;functionality&nbsp;to&nbsp;run&nbsp;pre&nbsp;processors&nbsp;and&nbsp;creating&nbsp;GUIs&nbsp;to&nbsp;harvest&nbsp;input&nbsp;vlaues&nbsp;from&nbsp;the&nbsp;user.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards&lt;br&gt;<br>
&lt;br&gt;<br>
Stefan&lt;br&gt;<br>
&lt;br&gt;<br>
PS.:&lt;br&gt;<br>
A&nbsp;different&nbsp;issue&nbsp;I&nbsp;came&nbsp;across&nbsp;have&nbsp;a&nbsp;second&nbsp;look&nbsp;at&nbsp;the&nbsp;Parameter&nbsp;annotation,&nbsp;sepcifically&lt;br&gt;<br>
its&nbsp;choices:&nbsp;The&nbsp;few&nbsp;examples&nbsp;of&nbsp;usage&nbsp;I&nbsp;had&nbsp;a&nbsp;look&nbsp;at&nbsp;are&nbsp;parameters&nbsp;of&nbsp;type&nbsp;String&nbsp;which&lt;br&gt;<br>
announce&nbsp;valid&nbsp;values.&nbsp;It&nbsp;might&nbsp;me&nbsp;worth&nbsp;considering&nbsp;to&nbsp;drop&nbsp;this&nbsp;feature&nbsp;and&nbsp;use&nbsp;Enums&nbsp;instead&lt;br&gt;<br>
of&nbsp;Strings&nbsp;which&nbsp;easily&nbsp;allows&nbsp;to&nbsp;generate&nbsp;an&nbsp;approprate&nbsp;selection&nbsp;by&nbsp;the&nbsp;GUI.&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;--&lt;br&gt;<br>
Prof.&nbsp;Dr.-Ing.&nbsp;Stefan&nbsp;Posch,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Institut&nbsp;fuer&nbsp;Informatik,&nbsp;Martin-Luther-Universitaet&nbsp;Halle-Wittenberg&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Von-Seckendorff-Platz&nbsp;1,&nbsp;06099&nbsp;Halle&nbsp;(Saale)&lt;br&gt;<br>
phone:&nbsp; &lt;a&nbsp;href=&quot;tel:%2B%2B49%20345%2055-24728&quot;&nbsp;value=&quot;+493455524728&quot;&nbsp;target=&quot;_blank&quot;&gt;++49&nbsp;345&nbsp;55-24728&lt;/a&gt;&lt;br&gt;<br>
fax:&nbsp; &nbsp; &lt;a&nbsp;href=&quot;tel:%2B%2B49%20345%2055-27039&quot;&nbsp;value=&quot;+493455527039&quot;&nbsp;target=&quot;_blank&quot;&gt;++49&nbsp;345&nbsp;55-27039&lt;/a&gt;&lt;br&gt;<br>
e-mail:&nbsp;&lt;a&nbsp;href=&quot;mailto:Stefan.Posch@informatik.uni-halle.de&quot;&nbsp;target=&quot;_blank&quot;&gt;Stefan.Posch@informatik.uni-halle.de&lt;/a&gt;&lt;br&gt;<br>
www:&nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://www.informatik.uni-halle.de/~posch/&quot;&nbsp;target=&quot;_blank&quot;&gt;www.informatik.uni-halle.de/~posch/&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Apr&nbsp;14,&nbsp;2014&nbsp;at&nbsp;10:16&nbsp;AM,&nbsp;Stefan&nbsp;Posch &lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:posch@informatik.uni-halle.de&quot;&nbsp;target=&quot;_blank&quot;&gt;posch@informatik.uni-halle.de&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;Hi&nbsp;Curtis,&lt;br&gt;&lt;br&gt;thanks&nbsp;for&nbsp;your&nbsp;reply,&nbsp;we&nbsp;are&nbsp;getting&nbsp;ahead,&nbsp;but&nbsp;still&nbsp;questions&nbsp;for&nbsp;running&nbsp;commands&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;*&nbsp;The&nbsp;run()&nbsp;method&nbsp;of&nbsp;a&nbsp;module&nbsp;can&nbsp;assume&nbsp;that&nbsp;all&nbsp;required&nbsp;input&lt;br&gt;&gt; &nbsp; &nbsp;parameters&nbsp;have&nbsp;been&nbsp;filled&nbsp;(i.e.,&nbsp;are&nbsp;non-null).&nbsp;And&nbsp;the&nbsp;corresponding&lt;br&gt;&gt; &nbsp; &nbsp;post-condition&nbsp;of&nbsp;run()&nbsp;is&nbsp;that&nbsp;all&nbsp;required&nbsp;output&nbsp;parameters&nbsp;are&nbsp;now&lt;br&gt;&gt; &nbsp; &nbsp;filled.&lt;br&gt;&lt;/span&gt;perfect,&nbsp;the&nbsp;same&nbsp;with&nbsp;us&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;*&nbsp;The&nbsp;initialize()&nbsp;method&nbsp;of&nbsp;a&nbsp;module&nbsp;cannot&nbsp;necessarily&nbsp;assume&lt;br&gt;&gt; &nbsp; &nbsp;anything&nbsp;about&nbsp;the&nbsp;state&nbsp;of&nbsp;its&nbsp;parameters.&nbsp;As&nbsp;you&nbsp;pointed&nbsp;out,&nbsp;ImageJ2&lt;br&gt;&gt; &nbsp; &nbsp;has&nbsp;various&nbsp;commands&nbsp;right&nbsp;now&nbsp;that&nbsp;*do*&nbsp;assume&nbsp;certain&nbsp;parameters&nbsp;have&lt;br&gt;&gt; &nbsp; &nbsp;been&nbsp;filled&nbsp;via&nbsp;preprocessing.&nbsp;This&nbsp;works&nbsp;in&nbsp;practice&nbsp;(at&nbsp;least&nbsp;from&lt;br&gt;&gt; &nbsp; &nbsp;the&nbsp;ImageJ&nbsp;application),&nbsp;but&nbsp;is&nbsp;not&nbsp;particularly&nbsp;rigorous.&lt;br&gt;&gt; &nbsp; &nbsp;*&nbsp;Similarly,&nbsp;ImageJ2&nbsp;has&nbsp;several&nbsp;commands&nbsp;which&nbsp;assume&nbsp;their&lt;br&gt;&gt; &nbsp; &nbsp;initializer&nbsp;has&nbsp;been&nbsp;called,&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;stated&nbsp;as&nbsp;a&nbsp;formal&lt;br&gt;&gt; &nbsp; &nbsp;precondition.&nbsp;Most&nbsp;probably&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;state&nbsp;that&nbsp;in&nbsp;the&lt;br&gt;&gt; &nbsp; &nbsp;javadoc,&nbsp;would&nbsp;you&nbsp;agree?&nbsp;In&nbsp;other&nbsp;words:&nbsp;if&nbsp;you&nbsp;aren&#39;t&nbsp;going&nbsp;to&lt;br&gt;&gt; &nbsp; &nbsp;include&nbsp;the&nbsp;InitPreprocessor&nbsp;in&nbsp;the&nbsp;preprocessing&nbsp;chain,&nbsp;you&nbsp;are&nbsp;still&lt;br&gt;&gt; &nbsp; &nbsp;somehow&nbsp;responsible&nbsp;for&nbsp;calling&nbsp;module.initialize()&nbsp;before&nbsp;calling&lt;br&gt;&gt; &nbsp; &nbsp;module.run().&nbsp;Is&nbsp;that&nbsp;fair?&lt;br&gt;&lt;/span&gt;again:&nbsp;perfect&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;So&nbsp;the&nbsp;main&nbsp;sticky&nbsp;point&nbsp;is&nbsp;what&nbsp;to&nbsp;do&nbsp;about&nbsp;initialize()&nbsp;requiring&lt;br&gt;&gt; &nbsp; &nbsp;certain&nbsp;parameters&nbsp;to&nbsp;be&nbsp;already&nbsp;filled.&nbsp;This&nbsp;is&nbsp;useful&nbsp;for&nbsp;dynamic&lt;br&gt;&gt; &nbsp; &nbsp;modules,&nbsp;but&nbsp;also&nbsp;just&nbsp;for&nbsp;computing&nbsp;defaults&nbsp;--&nbsp;e.g.,&nbsp;setting&nbsp;default&lt;br&gt;&gt; &nbsp; &nbsp;brightness/contrast&nbsp;min&nbsp;&amp;&nbsp;max&nbsp;values&nbsp;to&nbsp;the&nbsp;current&nbsp;display&nbsp;min&nbsp;max&nbsp;of&lt;br&gt;&gt; &nbsp; &nbsp;the&nbsp;input&nbsp;image.&nbsp;So&nbsp;it&nbsp;seems&nbsp;there&nbsp;are&nbsp;two&nbsp;&quot;layers&quot;&nbsp;of&nbsp;input&lt;br&gt;&gt; &nbsp; &nbsp;parameters:&nbsp;those&nbsp;needed&nbsp;before&nbsp;initialize()&nbsp;and&nbsp;those&nbsp;not&nbsp;needed&nbsp;for&lt;br&gt;&gt; &nbsp; &nbsp;it.&lt;br&gt;&gt; &nbsp; &nbsp;Maybe&nbsp;we&nbsp;need&nbsp;a&nbsp;way&nbsp;to&nbsp;formally&nbsp;flag&nbsp;these&nbsp;&quot;required&nbsp;before&nbsp;initialize&quot;&lt;br&gt;&gt; &nbsp; &nbsp;parameters&nbsp;in&nbsp;the&nbsp;annotation?&nbsp;What&nbsp;do&nbsp;you&nbsp;think?&nbsp;Would&nbsp;that&nbsp;help&nbsp;you?&lt;br&gt;&lt;/span&gt;This&nbsp;would&nbsp;be&nbsp;different&nbsp;from&nbsp;autoFill()&nbsp;?&lt;br&gt;&lt;br&gt;Yes&nbsp;and&nbsp;no.&lt;br&gt;&lt;br&gt;In&nbsp;a&nbsp;way&nbsp;it&nbsp;makes&nbsp;responsibilities&nbsp;clear,&nbsp;in&nbsp;so&nbsp;far&nbsp;I&nbsp;feel&nbsp;comfortable&nbsp;with&nbsp;it.&lt;br&gt;&lt;br&gt;However,&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;there&nbsp;are&nbsp;(potentially&nbsp;very&nbsp;heavy)&nbsp;restrictions&lt;br&gt;on&nbsp;the&nbsp;parameters&nbsp;which&nbsp;may&nbsp;be&nbsp;filled&nbsp;in&nbsp;advance&nbsp;(automaticcal&nbsp;and&nbsp;not&nbsp;by&nbsp;the&nbsp;user)&lt;br&gt;in&nbsp;a&nbsp;sensible&nbsp;way.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;understand&nbsp;ij2&nbsp;fills&nbsp;in&nbsp;parameters&nbsp;with&nbsp;what&nbsp;I&nbsp;think&lt;br&gt;you&nbsp;called&nbsp;AutoFooPreprocessors,&nbsp;so&nbsp;active&nbsp;image&nbsp;and&nbsp;active&nbsp;display?&lt;br&gt;I&nbsp;cannot&nbsp;come&nbsp;up&nbsp;with&nbsp;further&nbsp;ones.&nbsp;How&nbsp;would&nbsp;we&nbsp;fill&nbsp;in&nbsp;an&nbsp;int&nbsp;parameter&lt;br&gt;without&nbsp;knowledge&nbsp;of&nbsp;its&nbsp;meaning/sematics?&lt;br&gt;And&nbsp;even&nbsp;for&nbsp;images&nbsp;is&nbsp;only&nbsp;possible&nbsp;for&nbsp;commands&nbsp;with&nbsp;exactly&nbsp;one&nbsp;image&nbsp;or&nbsp;display.&lt;br&gt;Obviously&nbsp;we&nbsp;could&nbsp;introduce&nbsp;a&nbsp;further&nbsp;flag&nbsp;for&nbsp;an&nbsp;image&nbsp;parameter&nbsp;to&nbsp;notify,&lt;br&gt;that&nbsp;I&nbsp;what&nbsp;to&nbsp;be&nbsp;assigned&nbsp;the&nbsp;active&nbsp;image&nbsp;with.&nbsp;But&nbsp;this&nbsp;seems&nbsp;pretty&nbsp;specific.&lt;br&gt;And&nbsp;probably&nbsp;not&nbsp;generic&nbsp;to&nbsp;be&nbsp;introduce&nbsp;to&nbsp;scijava&nbsp;but&nbsp;rather&nbsp;deferred&nbsp;to&nbsp;the&lt;br&gt;&quot;application&quot;,&nbsp;e.g.&nbsp;imagej.&lt;br&gt;And&nbsp;there&nbsp;might&nbsp;be&nbsp;aplications&nbsp;which&nbsp;call&nbsp;for&nbsp;more&nbsp;the&nbsp;two&nbsp;layers?&lt;br&gt;&lt;br&gt;Summing&nbsp;up,&nbsp;I&nbsp;am&nbsp;afraid&nbsp;that&nbsp;I&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;cute&nbsp;idea.&lt;br&gt;Of&nbsp;course&nbsp;I&nbsp;appreciate&nbsp;the&nbsp;functionality&nbsp;the&nbsp;set&nbsp;initial&nbsp;values&nbsp;or&nbsp;make&nbsp;the&nbsp;type&lt;br&gt;of&nbsp;parameters&nbsp;depending&nbsp;on&nbsp;image&nbsp;features&nbsp;(like&nbsp;dimensionality,&nbsp;range&nbsp;of&nbsp;values).&lt;br&gt;Still&nbsp;adding&nbsp;parameters&nbsp;seems&nbsp;awkward&nbsp;to&nbsp;be.&nbsp;Could&nbsp;we&nbsp;come&nbsp;by&nbsp;with&nbsp;&quot;only&quot;&nbsp;changing&lt;br&gt;types&nbsp;of&nbsp;parameters.&nbsp;E.g.&nbsp;for&nbsp;DuplicateImage&nbsp;not&nbsp;add&nbsp;one&nbsp;parameter&nbsp;for&nbsp;each&nbsp;axes&nbsp;rather&lt;br&gt;have&nbsp;one&nbsp;array&nbsp;parameter&nbsp;with&nbsp;its&nbsp;length&nbsp;determined&nbsp;by&nbsp;the&nbsp;dimensionality?&lt;br&gt;And&nbsp;may&nbsp;be&nbsp;indicate&nbsp;via&nbsp;annotations,&nbsp;depending&nbsp;on&nbsp;which&nbsp;other&nbsp;parameter(s)&nbsp;the&lt;br&gt;type&nbsp;of&nbsp;this&nbsp;parameter&nbsp;will&nbsp;change?&lt;br&gt;&lt;br&gt;Rather&nbsp;more&nbsp;question:&lt;br&gt;Thinking&nbsp;of&nbsp;module&nbsp;and&nbsp;parameter&nbsp;intitalizers&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;that&nbsp;I&nbsp;get&nbsp;more&nbsp;unsure.&lt;br&gt;Is&nbsp;it&nbsp;exactly&nbsp;to&nbsp;do&nbsp;processing&nbsp;between&nbsp;the&nbsp;two&nbsp;layers&nbsp;of&nbsp;parameters.&lt;br&gt;And&nbsp;it&nbsp;is&nbsp;to&nbsp;add&nbsp;further&nbsp;parameters&nbsp;and&nbsp;set&nbsp;initial&nbsp;values&nbsp;to&nbsp;parameters?&lt;br&gt;Are&nbsp;initial&nbsp;parameter&nbsp;values&nbsp;execulsively&nbsp;meant&nbsp;to&nbsp;serve&nbsp;as&nbsp;defaults&nbsp;for&nbsp;the&lt;br&gt;user&nbsp;or&nbsp;is&nbsp;it&nbsp;required&nbsp;that&nbsp;some&nbsp;initial&nbsp;values&nbsp;are&nbsp;set&nbsp;(in&nbsp;order&nbsp;to&nbsp;properly&lt;br&gt;run&nbsp;the&nbsp;command)?&lt;br&gt;&lt;br&gt;If&nbsp;so:&nbsp;would&nbsp;this&nbsp;mean&nbsp;that&nbsp;for&nbsp;running&nbsp;a&nbsp;command&nbsp;head&nbsp;less&nbsp;in&nbsp;a&nbsp;non&nbsp;interactive&nbsp;way&lt;br&gt;makes&nbsp;the&nbsp;distiction&nbsp;of&nbsp;two&nbsp;layers&nbsp;is&nbsp;obsolete?&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;One&nbsp;thing&nbsp;that&nbsp;may&nbsp;interest&nbsp;you&nbsp;is&nbsp;the&nbsp;recent&nbsp;ImageJ&nbsp;OPS&nbsp;announcement:&lt;br&gt;&lt;/span&gt;&gt; &nbsp; &nbsp; &nbsp; [1]&lt;a&nbsp;href=&quot;http://developer.imagej.net/2014/04/04/announcing-imagej-ops&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://developer.imagej.net/2014/04/04/announcing-imagej-ops&lt;/a&gt;&lt;br&gt;&lt;span&gt;&gt; &nbsp; &nbsp;An&nbsp;Op&nbsp;is&nbsp;just&nbsp;an&nbsp;ImageJ&nbsp;command&nbsp;intended&nbsp;to&nbsp;be&nbsp;fully&nbsp;functional&nbsp;--&lt;br&gt;&lt;/span&gt;That&nbsp;sounds&nbsp;great&nbsp;...&lt;br&gt;&lt;br&gt;&gt; &nbsp; Hi&nbsp;Stefan,&lt;br&gt;&gt; &nbsp; Thanks.&nbsp;Rather&nbsp;than&nbsp;doing&nbsp;this:&lt;br&gt;&gt; &nbsp; &nbsp; CommandInfo&nbsp;testopInfo&nbsp;=&nbsp;new&nbsp;CommandInfo(IJTestOp.class.getName());&lt;br&gt;&gt; &nbsp; &nbsp; testopModule&nbsp;=&nbsp;(CommandModule)&nbsp;testopInfo.createModule();&lt;br&gt;&gt; &nbsp; I&nbsp;suggest&nbsp;instead:&lt;br&gt;&gt; &nbsp; &nbsp; CommandInfo&nbsp;testopInfo&nbsp;=&nbsp;commandService.getCommand(IJTestOp.class);&lt;br&gt;&gt; &nbsp; &nbsp; testopModule&nbsp;=&nbsp;(CommandModule)&lt;br&gt;&gt; &nbsp; moduleService.createModule(testopInfo);&lt;br&gt;&lt;br&gt;the&nbsp;advise&nbsp;you&nbsp;gave&nbsp;works&nbsp;fine,&nbsp;however&nbsp;only&nbsp;for&nbsp;running&nbsp;a&nbsp;module&nbsp;for&nbsp;a&nbsp;given&nbsp;Command&nbsp;once.&lt;br&gt; &nbsp;(see&nbsp;attached&nbsp;source&nbsp;of&nbsp;RunTestOp.java,&nbsp;the&nbsp;zip&nbsp;is&nbsp;a&nbsp;tiny&nbsp;maven&nbsp;project&nbsp;ready&nbsp;to&nbsp;import&nbsp;to&nbsp;eclipse.&lt;br&gt; &nbsp; hopefully&nbsp;I&nbsp;do&nbsp;not&nbsp;forget&nbsp;the&nbsp;attachment&nbsp;again&nbsp;:-)&lt;br&gt;&lt;br&gt; &nbsp;in&nbsp;short&nbsp;we&nbsp;have&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;CommandInfo&nbsp;testopInfo&nbsp;=&nbsp;commandService.getCommand(IJTestOp.class.getName());&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;CommandModule&nbsp;testopModule&nbsp;= &nbsp;(CommandModule)moduleService.createModule(&nbsp;testopInfo);&lt;br&gt;&lt;br&gt; &nbsp; set&nbsp;some&nbsp;parameters&lt;br&gt;&lt;br&gt; &nbsp; run&nbsp;the&nbsp;service&nbsp;and&nbsp;init&nbsp;preprocessor&nbsp;on&nbsp;the&nbsp;module,&nbsp;then&lt;br&gt;&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;testopModule.run();&lt;br&gt; &nbsp; &nbsp;or&nbsp;as&nbsp;an&nbsp;alternative&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;moduleService.run(testopModule,&nbsp;false);&lt;br&gt;&lt;br&gt; &nbsp; running&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;gives&lt;br&gt;-----&lt;br&gt;Exception&nbsp;in&nbsp;thread&nbsp;&quot;main&quot;&nbsp;java.lang.IllegalStateException:&nbsp;Context&nbsp;already&nbsp;injected:&nbsp;org.scijava.AbstractContextual#context&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;org.scijava.Context.inject(Context.java:293)&lt;br&gt;&lt;span&gt; &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;imagej.command.CommandModule.initialize(CommandModule.java:144)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;imagej.module.process.InitPreprocessor.process(InitPreprocessor.java:61)&lt;br&gt;&lt;/span&gt; &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;mainroutine.RunTestOp.main(RunTestOp.java:62)&lt;br&gt;------&lt;br&gt;&lt;br&gt; &nbsp;Creating&nbsp;a&nbsp;new&nbsp;module&nbsp;for&nbsp;the&nbsp;same&nbsp;CommandInfo&nbsp;fixes&nbsp;the&nbsp;problem&nbsp;(line&nbsp;60)&lt;br&gt;&lt;br&gt; &nbsp;Is&nbsp;this&nbsp;intended,&nbsp;i.e.&nbsp;that&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;for&nbsp;a&nbsp;module&nbsp;may&nbsp;be&nbsp;run&nbsp;only&nbsp;once?&lt;br&gt; &nbsp;This&nbsp;would&nbsp;pose&nbsp;a&nbsp;serious&nbsp;problem&nbsp;to&nbsp;us:&lt;br&gt;&lt;br&gt; &nbsp;What&nbsp;we&nbsp;want&nbsp;to&nbsp;do&nbsp;is&nbsp;essentially&nbsp;the&nbsp;following:&lt;br&gt; &nbsp;The&nbsp;user&nbsp;selects&nbsp;a&nbsp;Command&nbsp;via&nbsp;the&nbsp;GUI&nbsp;and&nbsp;we&nbsp;create&nbsp;a&nbsp;Window&nbsp;displaying&nbsp;the&nbsp;input&nbsp;parameters.&lt;br&gt; &nbsp;The&nbsp;user&nbsp;may&nbsp;change/supply&nbsp;these&nbsp;parameters&nbsp;and&nbsp;run&nbsp;the&nbsp;Command.&lt;br&gt; &nbsp;Upon&nbsp;return&nbsp;a&nbsp;window&nbsp;displaying&nbsp;the&nbsp;results&nbsp;pops&nbsp;up.&lt;br&gt; &nbsp;However,&nbsp;the&nbsp;first&nbsp;window&nbsp;displaying&nbsp;the&nbsp;input&nbsp;parameters&nbsp;is&nbsp;still&nbsp;available,&nbsp;the&nbsp;user&nbsp;may&lt;br&gt; &nbsp;change&nbsp;one/some&nbsp;parameters&nbsp;an&nbsp;rerun&nbsp;the&nbsp;command.&lt;br&gt; &nbsp;This&nbsp;eases&nbsp;testing&nbsp;various&nbsp;parameter&nbsp;values&nbsp;or&nbsp;the&nbsp;same&nbsp;set&nbsp;of&nbsp;parameters&nbsp;on&nbsp;different&lt;br&gt; &nbsp;images&nbsp;without&nbsp;the&nbsp;need&nbsp;to&nbsp;repeatatly&nbsp;select&nbsp;an&nbsp;operator/command.&lt;br&gt;&lt;br&gt; &nbsp;Have&nbsp;you&nbsp;further&nbsp;advise&nbsp;how&nbsp;we&nbsp;can&nbsp;accomplish&nbsp;this,&nbsp;i.e.&nbsp;reusing&nbsp;a&nbsp;command&nbsp;module?&lt;br&gt;&lt;br&gt; &nbsp;BTW:&nbsp;I&nbsp;prefer&nbsp;to&nbsp;not&nbsp;set&nbsp;the&nbsp;parameters&nbsp;via&nbsp;the&nbsp;moduleService.run&nbsp;method,&nbsp;as&nbsp;the&nbsp;parameters&lt;br&gt; &nbsp; &nbsp; &nbsp; are&nbsp;set&nbsp;elsewhere&nbsp;(either&nbsp;by&nbsp;the&nbsp;user&nbsp;via&nbsp;a&nbsp;GUI&nbsp;configuring&nbsp;the&nbsp;operator/command&nbsp;e.g.&nbsp;from&nbsp;grappa,&lt;br&gt; &nbsp; &nbsp; &nbsp; or&nbsp;by&nbsp;parsing&nbsp;command&nbsp;line&nbsp;argument&nbsp;in&nbsp;case&nbsp;of&nbsp;the&nbsp;command&nbsp;line&nbsp;oprunner.&lt;br&gt; &nbsp; &nbsp; &nbsp; Additionaly&nbsp;I&nbsp;rather&nbsp;invoke&nbsp;the&nbsp;moduls&nbsp;run-method&nbsp;directly,&nbsp;as&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&lt;br&gt; &nbsp; &nbsp; &nbsp; via&nbsp;moduleservie&nbsp;a&nbsp;new&nbsp;thread&nbsp;is&nbsp;started,&nbsp;and&nbsp;at&nbsp;this&nbsp;point&nbsp;we&nbsp;like&nbsp;to&nbsp;have&nbsp;this&nbsp;under&nbsp;control.&lt;br&gt;&lt;br&gt; &nbsp;it&nbsp;seems,&nbsp;that&nbsp;the&nbsp;init&nbsp;preprocessor&nbsp;assigns&nbsp;the&nbsp;service&nbsp;parameters&nbsp;of&nbsp;a&nbsp;Command,&lt;br&gt; &nbsp;not&nbsp;the&nbsp;Service&nbsp;preprocessor&nbsp;as&nbsp;I&nbsp;expected.&nbsp;Is&nbsp;the&nbsp;correct?&lt;br&gt; &nbsp;(Probably&nbsp;related&nbsp;to&nbsp;&quot;shadowing&quot;&nbsp;the&nbsp;Service&nbsp;and&nbsp;Context&nbsp;parameters&nbsp;of&nbsp;a&nbsp;Command)&lt;br&gt;&lt;br&gt; &nbsp;BTW:&nbsp;what&nbsp;is&nbsp;the&nbsp;sematics&nbsp;of&nbsp;injecting&nbsp;a&nbsp;context&nbsp;(into&nbsp;a&nbsp;module?)&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;So&nbsp;this&nbsp;is&nbsp;certainly&nbsp;inconsistent&nbsp;and&nbsp;confusing.&nbsp;Do&nbsp;you&nbsp;think&nbsp;that&lt;br&gt;&gt; &nbsp; &nbsp;Commands&nbsp;should&nbsp;also&nbsp;include&nbsp;service&nbsp;and&nbsp;context&nbsp;inputs&nbsp;when&nbsp;iterating&lt;br&gt;&gt; &nbsp; &nbsp;them?&nbsp;If&nbsp;so,&nbsp;we&nbsp;can&nbsp;try&nbsp;removing&nbsp;that&nbsp;exclusion&nbsp;and&nbsp;see&nbsp;what&lt;br&gt;&gt; &nbsp; &nbsp;explodes...&nbsp;;-)&lt;br&gt;&lt;/span&gt;We&nbsp;would&nbsp;not&nbsp;need&nbsp;them&nbsp;rather&nbsp;hide&nbsp;the&nbsp;from&nbsp;the&nbsp;user.&lt;br&gt;&lt;span&gt;&lt;br&gt;&gt; &nbsp; &nbsp;If&nbsp;you&nbsp;urgently&nbsp;need&nbsp;support&nbsp;for&nbsp;multiple&nbsp;simultaneous&nbsp;ImageJ&nbsp;contexts&lt;br&gt;&gt; &nbsp; &nbsp;created&nbsp;with&nbsp;the&nbsp;default&nbsp;constructor&nbsp;while&nbsp;ij-legacy&nbsp;is&nbsp;on&nbsp;the&lt;br&gt;&gt; &nbsp; &nbsp;classpath,&nbsp;and&nbsp;you&nbsp;want&nbsp;to&nbsp;try&nbsp;fixing&nbsp;the&nbsp;bug&nbsp;yourself,&nbsp;we&nbsp;would&nbsp;be&lt;br&gt;&gt; &nbsp; &nbsp;happy&nbsp;to&nbsp;elaborate&nbsp;further&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;give&nbsp;it&nbsp;a&nbsp;shot.&lt;br&gt;&lt;/span&gt;no,&nbsp;we&nbsp;are&nbsp;hapy&nbsp;with&nbsp;one,&nbsp;just&nbsp;have&nbsp;to&nbsp;get&nbsp;hold&nbsp;of&nbsp;it&nbsp;(and&nbsp;use&nbsp;it&nbsp;in&nbsp;a&nbsp;static&nbsp;way)&lt;br&gt;&lt;br&gt;Again,&nbsp;thanks&nbsp;again&lt;br&gt;&lt;br&gt;best&nbsp;regards &nbsp; Stefan&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
