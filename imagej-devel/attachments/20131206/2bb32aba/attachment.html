<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=windows-1252&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Dec&nbsp;5,&nbsp;2013,&nbsp;at&nbsp;11:56&nbsp;PM,&nbsp;Curtis&nbsp;Rueden&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ctrueden@wisc.edu&quot;&gt;ctrueden@wisc.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;again,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;*&nbsp;Encapsulates&nbsp;internal&nbsp;dependencies&nbsp;such&nbsp;as&nbsp;java.util.concurrent&lt;/div&gt;&lt;div&gt;&gt;&nbsp;(e.g.,&nbsp;Avian&nbsp;doesn't&nbsp;have&nbsp;that&nbsp;package!).&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;Android&nbsp;/&nbsp;J2ME&nbsp;doesn't&nbsp;have&nbsp;java.util.concurrent&nbsp;either.&nbsp;I&nbsp;am&nbsp;interested&nbsp;in&nbsp;porting&nbsp;ImageJ2&nbsp;to&nbsp;Android&nbsp;(which&nbsp;would&nbsp;necessitate&nbsp;a&nbsp;port&nbsp;of&nbsp;ImgLib2&nbsp;to&nbsp;Android).&nbsp;The&nbsp;more&nbsp;&quot;weird&quot;&nbsp;Java&nbsp;packages&nbsp;we&nbsp;use,&nbsp;the&nbsp;more&nbsp;involved&nbsp;it&nbsp;will&nbsp;be&nbsp;to&nbsp;refactor&nbsp;those&nbsp;usages&nbsp;out&nbsp;later&nbsp;to&nbsp;make&nbsp;such&nbsp;a&nbsp;thing&nbsp;possible.&nbsp;The&nbsp;&quot;swappability&quot;&nbsp;of&nbsp;SJC&nbsp;services&nbsp;will&nbsp;obviate&nbsp;the&nbsp;need&nbsp;to&nbsp;do&nbsp;it&nbsp;in&nbsp;some&nbsp;cases.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;a&nbsp;closer&nbsp;look,&nbsp;ThreadService&nbsp;uses&nbsp;java.util.concurrent.Callable&nbsp;and&nbsp;import&nbsp;java.util.concurrent.Future.&lt;/div&gt;&lt;div&gt;It&nbsp;also&nbsp;extends&nbsp;java.util.concurrent.ThreadFactory.&nbsp;So&nbsp;the&nbsp;Android/AVIAN&nbsp;argument&nbsp;is&nbsp;not&nbsp;really&nbsp;valid.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;reiterate&nbsp;my&nbsp;previous&nbsp;question&nbsp;why&nbsp;not&nbsp;extend&nbsp;the&nbsp;ExecutorService&nbsp;interface&nbsp;instead?&lt;/div&gt;&lt;div&gt;One&nbsp;answer&nbsp;I&nbsp;could&nbsp;give&nbsp;to&nbsp;that&nbsp;myself&nbsp;is&nbsp;that&nbsp;we&nbsp;do&nbsp;not&nbsp;need/want&nbsp;the&nbsp;full&nbsp;ExecutorService,&nbsp;e.g.,&nbsp;an&nbsp;imglib&nbsp;algorithm&nbsp;should&nbsp;not&nbsp;be&nbsp;allowed&nbsp;to&nbsp;shutdown()&nbsp;the&nbsp;ExecutorService.&lt;/div&gt;&lt;div&gt;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;we&nbsp;do&nbsp;not&nbsp;need/want&nbsp;the&nbsp;full&nbsp;ThreadService,&nbsp;e.g.&nbsp;using&nbsp;newThread()&nbsp;from&nbsp;the&nbsp;ThreadFactory&nbsp;is&nbsp;not&nbsp;wanted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;could&nbsp;we&nbsp;maybe&nbsp;extract&nbsp;the&nbsp;part&nbsp;of&nbsp;ExecutorService&nbsp;that&nbsp;we&nbsp;are&nbsp;interested&nbsp;in&nbsp;(invokeAll,&nbsp;invokeAny,&nbsp;and&nbsp;submit&nbsp;variants)&nbsp;into&nbsp;a&nbsp;new&nbsp;interface&nbsp;and&nbsp;make&nbsp;ThreadService&nbsp;extend&nbsp;that?&lt;/div&gt;&lt;div&gt;This&nbsp;would&nbsp;still&nbsp;not&nbsp;allow&nbsp;us&nbsp;to&nbsp;pass&nbsp;a&nbsp;standard&nbsp;ExecutorService&nbsp;into&nbsp;imglib&nbsp;algorithms&nbsp;but&nbsp;a&nbsp;ThreadService.&nbsp;I&nbsp;could&nbsp;live&nbsp;with&nbsp;it.&lt;/div&gt;&lt;div&gt;The&nbsp;question&nbsp;then&nbsp;is&nbsp;whether&nbsp;this&nbsp;should&nbsp;live&nbsp;in&nbsp;imglib,&nbsp;in&nbsp;scijava-common,&nbsp;or&nbsp;somewhere&nbsp;else.&nbsp;I&nbsp;hesitate&nbsp;making&nbsp;scijava-common&nbsp;a&nbsp;dependency&nbsp;of&nbsp;imglib.&nbsp;I&nbsp;know&nbsp;just&nbsp;having&nbsp;scijava-common&nbsp;as&nbsp;a&nbsp;dependency&nbsp;does&nbsp;not&nbsp;force&nbsp;me&nbsp;to&nbsp;use&nbsp;the&nbsp;application&nbsp;container&nbsp;but&nbsp;still…&nbsp;Making&nbsp;imglib&nbsp;a&nbsp;dependency&nbsp;of&nbsp;scijava-common&nbsp;is&nbsp;not&nbsp;a&nbsp;good&nbsp;idea&nbsp;either.&lt;/div&gt;&lt;div&gt;Hmm...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;best&nbsp;regards,&lt;/div&gt;&lt;div&gt;Tobias&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Dec&nbsp;5,&nbsp;2013&nbsp;at&nbsp;4:48&nbsp;PM,&nbsp;Curtis&nbsp;Rueden&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ctrueden@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;ctrueden@wisc.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Tobias,&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt;&gt;&nbsp;Curtis,&nbsp;could&nbsp;you&nbsp;elaborate&nbsp;on&nbsp;why&nbsp;you&nbsp;prefer&nbsp;scijava-common&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&gt;&nbsp;ThreadService?&nbsp;I&nbsp;just&nbsp;had&nbsp;a&nbsp;look&nbsp;and,&nbsp;as&nbsp;an&nbsp;interface,&nbsp;I&nbsp;cannot&nbsp;see&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt;&gt;&nbsp;what&nbsp;would&nbsp;make&nbsp;it&nbsp;preferable&nbsp;to&nbsp;ExecutorService.&nbsp;For&nbsp;me&nbsp;a&nbsp;point&nbsp;in&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;favour&nbsp;of&nbsp;ExecutorService&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;in&nbsp;the&nbsp;JDK.&nbsp;What&nbsp;additional&lt;/div&gt;&lt;div&gt;&gt;&nbsp;value&nbsp;would&nbsp;ThreadService&nbsp;provide?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;me,&nbsp;the&nbsp;fact&nbsp;that&nbsp;we&nbsp;control&nbsp;the&nbsp;ThreadService&nbsp;API&nbsp;contract&nbsp;is&nbsp;a&nbsp;point&nbsp;in&nbsp;its&nbsp;favor.&nbsp;If&nbsp;we&nbsp;need&nbsp;to&nbsp;add&nbsp;some&nbsp;functionality,&nbsp;we&nbsp;cannot&nbsp;add&nbsp;it&nbsp;to&nbsp;ExecutorService,&nbsp;because&nbsp;it&nbsp;is&nbsp;part&nbsp;of&nbsp;core&nbsp;Java.&nbsp;But&nbsp;the&nbsp;SciJava&nbsp;Common&nbsp;API&nbsp;can&nbsp;adapt&nbsp;to&nbsp;our&nbsp;needs.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Would&nbsp;it&nbsp;be&nbsp;an&nbsp;option&nbsp;to&nbsp;let&nbsp;ThreadService&nbsp;extends&nbsp;ExecutorService?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;a&nbsp;rule&nbsp;of&nbsp;thumb,&nbsp;I&nbsp;prefer&nbsp;composition&nbsp;to&nbsp;inheritance&nbsp;[1].&nbsp;The&nbsp;SciJava&nbsp;Common&nbsp;ThreadService&nbsp;*has*&nbsp;an&nbsp;ExecutorService&nbsp;internally.&nbsp;Right&nbsp;now,&nbsp;that&nbsp;is&nbsp;not&nbsp;exposed&nbsp;in&nbsp;the&nbsp;API&nbsp;contract,&nbsp;but&nbsp;we&nbsp;could&nbsp;do&nbsp;so&nbsp;(i.e.,&nbsp;a&nbsp;&quot;setExecutor&quot;&nbsp;method).&nbsp;That&nbsp;would&nbsp;also&nbsp;solve&nbsp;Lee's&nbsp;single-threaded&nbsp;use&nbsp;case&nbsp;without&nbsp;requiring&nbsp;him&nbsp;to&nbsp;override&nbsp;the&nbsp;DefaultThreadService&nbsp;implementation&nbsp;itself.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;Correct&nbsp;me&nbsp;if&nbsp;I'm&nbsp;wrong,&nbsp;but&nbsp;I&nbsp;thought&nbsp;the&nbsp;same&nbsp;was&nbsp;the&nbsp;idea&nbsp;about&lt;/div&gt;&lt;div&gt;&gt;&nbsp;ExecutorService…&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes.&nbsp;ExecutorService&nbsp;is&nbsp;an&nbsp;interface,&nbsp;so&nbsp;if&nbsp;the&nbsp;ImgLib2&nbsp;API&nbsp;contract&nbsp;uses&nbsp;that&nbsp;interface,&nbsp;it&nbsp;is&nbsp;true&nbsp;that&nbsp;callers&nbsp;can&nbsp;pass&nbsp;whatever&nbsp;kind&nbsp;of&nbsp;ExecutorService&nbsp;they&nbsp;want.&nbsp;And&nbsp;that&nbsp;is&nbsp;a&nbsp;form&nbsp;of&nbsp;dependency&nbsp;injection.&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;SciJava&nbsp;Common&nbsp;approach&nbsp;uses&nbsp;SezPoz&nbsp;to&nbsp;discover&nbsp;plugins&nbsp;(including&nbsp;services)&nbsp;and&nbsp;organize&nbsp;them&nbsp;by&nbsp;priority.&nbsp;If&nbsp;a&nbsp;ThreadService&nbsp;is&nbsp;found&nbsp;on&nbsp;the&nbsp;classpath&nbsp;with&nbsp;higher&nbsp;priority&nbsp;than&nbsp;the&nbsp;DefaultThreadService,&nbsp;it&nbsp;will&nbsp;take&nbsp;precedence&nbsp;for&nbsp;any&nbsp;SciJava&nbsp;application&nbsp;context&nbsp;that&nbsp;needs&nbsp;a&nbsp;ThreadService.&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Advantages&nbsp;of&nbsp;ExecutorService:&lt;/div&gt;&lt;div&gt;*&nbsp;Avoids&nbsp;dependency&nbsp;on&nbsp;SciJava&nbsp;Common,&nbsp;and&nbsp;potential&nbsp;overhead&nbsp;of&nbsp;SJC&nbsp;application&nbsp;context.&lt;/div&gt;&lt;div&gt;*&nbsp;Easy&nbsp;to&nbsp;override&nbsp;threading&nbsp;behavior&nbsp;on&nbsp;a&nbsp;case-by-case&nbsp;basis&nbsp;(i.e.,&nbsp;pass&nbsp;different&nbsp;ExecutorServices&nbsp;to&nbsp;different&nbsp;algorithms).&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Advantages&nbsp;of&nbsp;ThreadService:&lt;/div&gt;&lt;div&gt;*&nbsp;Can&nbsp;improve&nbsp;the&nbsp;API&nbsp;as&nbsp;needed.&lt;/div&gt;&lt;div&gt;*&nbsp;Encapsulates&nbsp;internal&nbsp;dependencies&nbsp;such&nbsp;as&nbsp;java.util.concurrent&nbsp;(e.g.,&nbsp;Avian&nbsp;doesn't&nbsp;have&nbsp;that&nbsp;package!).&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
*&nbsp;Easy&nbsp;to&nbsp;globally&nbsp;override&nbsp;threading&nbsp;behavior&nbsp;for&nbsp;an&nbsp;entire&nbsp;application&nbsp;context.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;surely&nbsp;other&nbsp;reasons&nbsp;to&nbsp;go&nbsp;one&nbsp;way&nbsp;or&nbsp;the&nbsp;other,&nbsp;but&nbsp;that's&nbsp;all&nbsp;that's&nbsp;coming&nbsp;out&nbsp;of&nbsp;my&nbsp;brain&nbsp;at&nbsp;the&nbsp;moment.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://en.wikipedia.org/wiki/Composition_over_inheritance&quot;&nbsp;target=&quot;_blank&quot;&gt;https://en.wikipedia.org/wiki/Composition_over_inheritance&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Dec&nbsp;5,&nbsp;2013&nbsp;at&nbsp;4:27&nbsp;PM,&nbsp;Tobias&nbsp;Pietzsch&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:pietzsch@mpi-cbg.de&quot;&nbsp;target=&quot;_blank&quot;&gt;pietzsch@mpi-cbg.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;br&gt;<br>
On&nbsp;Dec&nbsp;5,&nbsp;2013,&nbsp;at&nbsp;10:32&nbsp;PM,&nbsp;Johannes&nbsp;Schindelin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:Johannes.Schindelin@gmx.de&quot;&nbsp;target=&quot;_blank&quot;&gt;Johannes.Schindelin@gmx.de&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Tobi,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Thu,&nbsp;5&nbsp;Dec&nbsp;2013,&nbsp;Tobias&nbsp;Pietzsch&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Curtis,&nbsp;could&nbsp;you&nbsp;elaborate&nbsp;on&nbsp;why&nbsp;you&nbsp;prefer&nbsp;scijava-common&nbsp;ThreadService?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Very&nbsp;easy:&nbsp;scijava-common's&nbsp;ThreadService&nbsp;can&nbsp;be&nbsp;overridden&nbsp;by&nbsp;your&nbsp;own&lt;br&gt;<br>
&lt;/div&gt;&gt;&nbsp;implementation.&nbsp;Such&nbsp;as&nbsp;a&nbsp;ThreadService&nbsp;backed&nbsp;by&nbsp;KNIME's&nbsp;own…&lt;br&gt;<br>
&lt;br&gt;<br>
Correct&nbsp;me&nbsp;if&nbsp;I'm&nbsp;wrong,&nbsp;but&nbsp;I&nbsp;thought&nbsp;the&nbsp;same&nbsp;was&nbsp;the&nbsp;idea&nbsp;about&nbsp;ExecutorService…&lt;br&gt;<br>
best&nbsp;regards,&lt;br&gt;<br>
Tobias&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Remember,&nbsp;not&nbsp;everybody&nbsp;starts&nbsp;everything&nbsp;on&nbsp;a&nbsp;single-user&nbsp;desktop&lt;br&gt;<br>
&gt;&nbsp;machine,&nbsp;in&nbsp;an&nbsp;Oracle&nbsp;JVM&nbsp;launched&nbsp;from&nbsp;within&nbsp;Eclipse&nbsp;with&nbsp;a&nbsp;Swing/AWT&lt;br&gt;<br>
&gt;&nbsp;user&nbsp;interface&nbsp;;-)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Ciao,&lt;br&gt;<br>
&gt;&nbsp;Dscho&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
