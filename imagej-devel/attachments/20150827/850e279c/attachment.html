<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Adrian,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;https://gitlab.com/pendant-drop/pendant-drop.git&quot;&gt;https://gitlab.com/pendant-drop/pendant-drop.git&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;(checkout&nbsp;branch&nbsp;overlay_issue&nbsp;(commit&nbsp;2887f8ec))&lt;/div&gt;&lt;div&gt;&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;This&nbsp;is&nbsp;a&nbsp;MVCE&nbsp;that&nbsp;has&nbsp;parameters&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;replicate&nbsp;the&nbsp;problems&nbsp;using&nbsp;your&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;to&nbsp;reproduce&nbsp;using&nbsp;a&nbsp;script&nbsp;with&nbsp;various&nbsp;parameter&nbsp;combinations&nbsp;mirroring&nbsp;yours,&nbsp;but&nbsp;was&nbsp;initially&nbsp;unsuccessful.&nbsp;It&nbsp;seems&nbsp;the&nbsp;problem&nbsp;is&nbsp;a&nbsp;little&nbsp;subtle.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;likely&nbsp;related&nbsp;to&nbsp;the&nbsp;syncing&nbsp;of&nbsp;IJ1&nbsp;and&nbsp;IJ2&nbsp;data&nbsp;structures.&nbsp;So&nbsp;I&#39;m&nbsp;not&nbsp;going&nbsp;to&nbsp;worry&nbsp;about&nbsp;further&nbsp;for&nbsp;the&nbsp;time&nbsp;being—that&nbsp;logic&nbsp;will&nbsp;be&nbsp;revised&nbsp;in&nbsp;the&nbsp;future&nbsp;anyway.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;More&nbsp;than&nbsp;a&nbsp;tutorial&nbsp;I&nbsp;missed&nbsp;some&nbsp;explanations&nbsp;on&nbsp;the&nbsp;technical&lt;/div&gt;&lt;div&gt;&gt;&nbsp;design&nbsp;of,&nbsp;and&nbsp;the&nbsp;interplay&nbsp;between,&nbsp;the&nbsp;different&nbsp;parts&nbsp;that&nbsp;now&lt;/div&gt;&lt;div&gt;&gt;&nbsp;make&nbsp;up&nbsp;ImageJ2.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;best&nbsp;I&nbsp;have&nbsp;to&nbsp;offer&nbsp;right&nbsp;now&nbsp;is:&lt;/div&gt;&lt;div&gt;*&nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/Architecture&quot;&gt;http://imagej.net/Architecture&lt;/a&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/Development&quot;&gt;http://imagej.net/Development&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;I&nbsp;just&nbsp;opened&nbsp;a&nbsp;sheet&nbsp;in&nbsp;an&nbsp;editor&nbsp;on&nbsp;which&nbsp;I&nbsp;will&nbsp;jot&nbsp;down&nbsp;notes&nbsp;as&nbsp;I&lt;/div&gt;&lt;div&gt;&gt;&nbsp;go&nbsp;ahead&nbsp;with&nbsp;my&nbsp;plugin,&nbsp;about&nbsp;problems,&nbsp;discoveries&nbsp;and&nbsp;things&nbsp;I&lt;/div&gt;&lt;div&gt;&gt;&nbsp;suddenly&nbsp;understand.&nbsp;Maybe&nbsp;this&nbsp;can&nbsp;be&nbsp;a&nbsp;starting&nbsp;point&nbsp;or&lt;/div&gt;&lt;div&gt;&gt;&nbsp;contribution&nbsp;for&nbsp;a&nbsp;transition&nbsp;guide.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;would&nbsp;be&nbsp;fantastic!&nbsp;It&nbsp;is&nbsp;physically&nbsp;impossible&nbsp;for&nbsp;Mark&nbsp;and&nbsp;me&nbsp;to&nbsp;write&nbsp;the&nbsp;entire&nbsp;wiki...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Aug&nbsp;27,&nbsp;2015&nbsp;at&nbsp;2:18&nbsp;PM,&nbsp;Adrian&nbsp;Daerr&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hello&nbsp;Curtis,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
@Parameter(persist&nbsp;=&nbsp;false)&nbsp;private&nbsp;RectangleOverlay&nbsp;roi;&lt;br&gt;<br>
&lt;br&gt;<br>
which&nbsp;appears&nbsp;to&nbsp;be&nbsp;populated&nbsp;only&nbsp;after&nbsp;the&nbsp;initializer&nbsp;is&nbsp;called&lt;br&gt;<br>
(its&nbsp;value&nbsp;is&nbsp;null&nbsp;in&nbsp;the&nbsp;initializer&nbsp;and&nbsp;valid&nbsp;in&nbsp;the&nbsp;run()&nbsp;method).&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
Hmm,&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;the&nbsp;case.&nbsp;[..]&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
The&nbsp;issue&nbsp;might&nbsp;be&nbsp;typing-related:&nbsp;try&nbsp;using&nbsp;Overlay&nbsp;instead&nbsp;of&lt;br&gt;<br>
RectangleOverlay&nbsp;and&nbsp;see&nbsp;if&nbsp;that&nbsp;makes&nbsp;a&nbsp;difference.&lt;br&gt;<br>
&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
Alternately:&nbsp;can&nbsp;you&nbsp;post&nbsp;an&nbsp;MVCE&nbsp;[3,&nbsp;4]&nbsp;illustrating&nbsp;the&nbsp;issue?&lt;br&gt;<br>
&lt;/span&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://gitlab.com/pendant-drop/pendant-drop.git&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gitlab.com/pendant-drop/pendant-drop.git&lt;/a&gt;&lt;br&gt;<br>
(checkout&nbsp;branch&nbsp;overlay_issue&nbsp;(commit&nbsp;2887f8ec))&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;a&nbsp;MVCE&nbsp;that&nbsp;has&nbsp;parameters&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;ImagePlus&nbsp;imp;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter(persist&nbsp;=&nbsp;false)&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;RectangleOverlay&nbsp;region;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;@Parameter(persist&nbsp;=&nbsp;false)&lt;br&gt;<br>
 &nbsp; &nbsp;private&nbsp;Overlay&nbsp;overlay;&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;compiles&nbsp;and&nbsp;executes&nbsp;with&lt;br&gt;<br>
&lt;br&gt;<br>
mvn&nbsp;-o&nbsp;package&nbsp;&amp;&amp;&nbsp;fiji&nbsp;--class-path&nbsp;\&lt;br&gt;<br>
target/pendant_drop-2.0.0-SNAPSHOT.jar&nbsp;Goutte_pendante.class&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;logs&nbsp;the&nbsp;following&nbsp;to&nbsp;the&nbsp;console:&lt;br&gt;<br>
&lt;br&gt;<br>
[INFO]&nbsp;imp&nbsp;parameter&nbsp;in&nbsp;initializer():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;region&nbsp;parameter&nbsp;in&nbsp;initializer():&nbsp;null&lt;br&gt;<br>
[INFO]&nbsp;overlay&nbsp;parameter&nbsp;in&nbsp;initializer():&nbsp;null&lt;br&gt;<br>
[INFO]&nbsp;imp&nbsp;parameter&nbsp;in&nbsp;preview():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;region&nbsp;parameter&nbsp;in&nbsp;preview():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;overlay&nbsp;parameter&nbsp;in&nbsp;preview():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;imp&nbsp;parameter&nbsp;in&nbsp;run():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;region&nbsp;parameter&nbsp;in&nbsp;run():&nbsp;non-null&lt;br&gt;<br>
[INFO]&nbsp;overlay&nbsp;parameter&nbsp;in&nbsp;run():&nbsp;non-null&lt;br&gt;<br>
[ERROR]&nbsp;Module&nbsp;threw&nbsp;exception&lt;br&gt;<br>
java.lang.NullPointerException&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;at&nbsp;ij.plugin.frame.Recorder.addQuotes(Recorder.java:612)&lt;br&gt;<br>
...&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;1)&nbsp;Since&nbsp;I&nbsp;switched&nbsp;to&nbsp;the&nbsp;OverlayService.getSelectionBounds()&lt;br&gt;<br>
solution&nbsp;you&nbsp;suggested&nbsp;in&nbsp;another&nbsp;thread,&nbsp;do&nbsp;not&nbsp;bother&nbsp;looking&nbsp;into&lt;br&gt;<br>
this&nbsp;for&nbsp;me.&nbsp;I&nbsp;just&nbsp;submit&nbsp;this&nbsp;MVCE&nbsp;in&nbsp;case&nbsp;the&nbsp;issue&nbsp;is&nbsp;more&lt;br&gt;<br>
important&nbsp;than&nbsp;I&nbsp;suspect.&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;2)&nbsp;It&nbsp;appears&nbsp;(RectangleOverlay).toString()&nbsp;returns&nbsp;null&nbsp;in&nbsp;any&lt;br&gt;<br>
case.&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;3)&nbsp;Overlay&nbsp;and&nbsp;RectangleOverlay&nbsp;have&nbsp;the&nbsp;same&nbsp;issue&nbsp;with&nbsp;respect&lt;br&gt;<br>
to&nbsp;initialization,&nbsp;but&nbsp;the&nbsp;reason&nbsp;I&nbsp;used&nbsp;RectangleOverlay&nbsp;is&nbsp;that&nbsp;I&lt;br&gt;<br>
did&nbsp;not&nbsp;see&nbsp;how&nbsp;to&nbsp;get&nbsp;the&nbsp;bounds&nbsp;of&nbsp;an&nbsp;Overlay.&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;am&nbsp;sorry—the&nbsp;tutorials&nbsp;need&nbsp;to&nbsp;be&nbsp;improved.&nbsp;What&nbsp;sort&nbsp;of&nbsp;tutorial&nbsp;do&nbsp;you&nbsp;think&nbsp;would&nbsp;aid&nbsp;your&nbsp;understanding&nbsp;here?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
More&nbsp;than&nbsp;a&nbsp;tutorial&nbsp;I&nbsp;missed&nbsp;some&nbsp;explanations&nbsp;on&nbsp;the&nbsp;technical&lt;br&gt;<br>
design&nbsp;of,&nbsp;and&nbsp;the&nbsp;interplay&nbsp;between,&nbsp;the&nbsp;different&nbsp;parts&nbsp;that&nbsp;now&lt;br&gt;<br>
make&nbsp;up&nbsp;ImageJ2.&nbsp;Instead&nbsp;of&nbsp;one&nbsp;single&nbsp;place&nbsp;to&nbsp;find&nbsp;the&nbsp;API&nbsp;and&lt;br&gt;<br>
Source&nbsp;of&nbsp;ij.*,&nbsp;things&nbsp;are&nbsp;split&nbsp;up&nbsp;into&nbsp;packages&nbsp;(org.scijava.*,&lt;br&gt;<br>
net.imagej.*,&nbsp;imglib)&nbsp;and&nbsp;it&nbsp;takes&nbsp;a&nbsp;bit&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;things&nbsp;are&lt;br&gt;<br>
organized&nbsp;and&nbsp;why&nbsp;this&nbsp;division&nbsp;of&nbsp;labour&nbsp;makes&nbsp;sense.&nbsp;So&nbsp;deciding&lt;br&gt;<br>
e.g.&nbsp;where&nbsp;to&nbsp;look&nbsp;for&nbsp;ROI/Overlay&nbsp;related&nbsp;stuff&nbsp;was&nbsp;not&nbsp;easy&lt;br&gt;<br>
(net.imagej?&nbsp;imglib?&nbsp;both&nbsp;seem&nbsp;to&nbsp;have&nbsp;bits).&nbsp;For&nbsp;someone&nbsp;used&nbsp;to&nbsp;the&lt;br&gt;<br>
often&nbsp;static,&nbsp;in&nbsp;any&nbsp;case&nbsp;ultra&nbsp;specific&nbsp;ImageJ1&nbsp;API,&nbsp;understanding&lt;br&gt;<br>
what&nbsp;a&nbsp;context&nbsp;is,&nbsp;what&nbsp;Services&nbsp;are&nbsp;good&nbsp;for,&nbsp;how&nbsp;menus,&nbsp;views,&nbsp;even&lt;br&gt;<br>
whole&nbsp;GUIs&nbsp;are&nbsp;flexibly&nbsp;handled,&nbsp;how&nbsp;roughly&nbsp;plugins&nbsp;are&nbsp;recognized,&lt;br&gt;<br>
how&nbsp;and&nbsp;when&nbsp;annotations&nbsp;are&nbsp;parsed&nbsp;(what&#39;s&nbsp;an&nbsp;annotation&nbsp;anyway&nbsp;from&lt;br&gt;<br>
a&nbsp;Java&nbsp;perspective&nbsp;?)&nbsp;and&nbsp;how&nbsp;they&nbsp;are&nbsp;instantiated&nbsp;and&nbsp;executed,&nbsp;well&lt;br&gt;<br>
all&nbsp;this&nbsp;is&nbsp;quite&nbsp;a&nbsp;lot&nbsp;of&nbsp;new&nbsp;stuff.&nbsp;Not&nbsp;to&nbsp;speak&nbsp;about&nbsp;understanding&lt;br&gt;<br>
how&nbsp;the&nbsp;new&nbsp;Dataset/ImageDisplay/Views&nbsp;classes&nbsp;replacing&nbsp;ImageJ1&#39;s&lt;br&gt;<br>
ImagePlus/ImageWindow/..&nbsp;work&nbsp;together,&nbsp;and&nbsp;why&nbsp;some&nbsp;of&nbsp;them&nbsp;are&lt;br&gt;<br>
already&nbsp;deprecated&nbsp;;-)&lt;br&gt;<br>
&lt;br&gt;<br>
Now&nbsp;this&nbsp;very&nbsp;design&nbsp;still&nbsp;seems&nbsp;to&nbsp;be&nbsp;changing,&nbsp;so&nbsp;I&nbsp;understand&lt;br&gt;<br>
writing&nbsp;up&nbsp;something&nbsp;might&nbsp;be&nbsp;a&nbsp;bit&nbsp;early.&nbsp;Besides,&nbsp;it&#39;s&nbsp;a&nbsp;good&nbsp;thing&lt;br&gt;<br>
not&nbsp;to&nbsp;pin&nbsp;it&nbsp;down&nbsp;to&nbsp;early,&nbsp;and&nbsp;producing&nbsp;documentation&nbsp;wikis&nbsp;that&lt;br&gt;<br>
may&nbsp;soon&nbsp;prove&nbsp;outdated&nbsp;can&nbsp;be&nbsp;not&nbsp;only&nbsp;a&nbsp;waste&nbsp;of&nbsp;time,&nbsp;but&nbsp;even&lt;br&gt;<br>
prove&nbsp;quite&nbsp;perturbing&nbsp;later&nbsp;when&nbsp;they&nbsp;contradict&nbsp;reality.&nbsp;Even&nbsp;if&nbsp;I&#39;d&lt;br&gt;<br>
like&nbsp;to&nbsp;see&nbsp;some&nbsp;gently&nbsp;(but&nbsp;technically&nbsp;oriented)&nbsp;introduction&nbsp;to&nbsp;the&lt;br&gt;<br>
class&nbsp;zoo&nbsp;and&nbsp;ecosystem&nbsp;of&nbsp;ImageJ2,&nbsp;and&nbsp;also&nbsp;a&nbsp;guide&nbsp;to&nbsp;plugin&lt;br&gt;<br>
programming&nbsp;specifically&nbsp;for&nbsp;the&nbsp;ImageJ1&nbsp;veteran&nbsp;(with,&nbsp;for&nbsp;now,&nbsp;your&lt;br&gt;<br>
recommendation&nbsp;to&nbsp;just&nbsp;take&nbsp;advantage&nbsp;of&nbsp;the&nbsp;parameter&nbsp;harvesting&lt;br&gt;<br>
features&nbsp;but&nbsp;to&nbsp;stick&nbsp;to&nbsp;IJ1&nbsp;data&nbsp;structures),&nbsp;I&nbsp;think&nbsp;this&nbsp;is&lt;br&gt;<br>
probably&nbsp;too&nbsp;early&nbsp;to&nbsp;do.&nbsp;But&nbsp;I&nbsp;just&nbsp;opened&nbsp;a&nbsp;sheet&nbsp;in&nbsp;an&nbsp;editor&nbsp;on&lt;br&gt;<br>
which&nbsp;I&nbsp;will&nbsp;jot&nbsp;down&nbsp;notes&nbsp;as&nbsp;I&nbsp;go&nbsp;ahead&nbsp;with&nbsp;my&nbsp;plugin,&nbsp;about&lt;br&gt;<br>
problems,&nbsp;discoveries&nbsp;and&nbsp;things&nbsp;I&nbsp;suddenly&nbsp;understand.&nbsp;Maybe&nbsp;this&nbsp;can&lt;br&gt;<br>
be&nbsp;a&nbsp;starting&nbsp;point&nbsp;or&nbsp;contribution&nbsp;for&nbsp;a&nbsp;transition&nbsp;guide.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;I&nbsp;do&nbsp;have&nbsp;ideas&nbsp;about&nbsp;specific&nbsp;programming&nbsp;examples&nbsp;for&nbsp;the&lt;br&gt;<br>
imagej-tutorials,&nbsp;I&#39;ll&nbsp;voice&nbsp;them&nbsp;of&nbsp;course.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;any&nbsp;case&nbsp;your&nbsp;reactivity&nbsp;on&nbsp;this&nbsp;list&nbsp;is&nbsp;simply&nbsp;invaluable,&nbsp;thanks&lt;br&gt;<br>
a&nbsp;lot&nbsp;for&nbsp;adding&nbsp;communication&nbsp;efforts&nbsp;to&nbsp;your&nbsp;programming&nbsp;mission.&lt;br&gt;<br>
&lt;br&gt;<br>
best&nbsp;regards,&lt;br&gt;<br>
Adrian&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;24&nbsp;Aug&nbsp;2015&nbsp;10:25:59&nbsp;-0500&lt;br&gt;<br>
 Curtis&nbsp;Rueden&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ctrueden@wisc.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;ctrueden@wisc.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;Adrian,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;suggestion,&nbsp;which&nbsp;almost&nbsp;does&nbsp;the&nbsp;job,&nbsp;except&nbsp;that&nbsp;the&lt;br&gt;<br>
initialization&nbsp;also&nbsp;depends&nbsp;on&nbsp;a&nbsp;parameter&lt;br&gt;<br>
&lt;br&gt;<br>
@Parameter(persist&nbsp;=&nbsp;false)&nbsp;private&nbsp;RectangleOverlay&nbsp;roi;&lt;br&gt;<br>
&lt;br&gt;<br>
which&nbsp;appears&nbsp;to&nbsp;be&nbsp;populated&nbsp;only&nbsp;after&nbsp;the&nbsp;initializer&nbsp;is&nbsp;called&lt;br&gt;<br>
(its&nbsp;value&nbsp;is&nbsp;null&nbsp;in&nbsp;the&nbsp;initializer&nbsp;and&nbsp;valid&nbsp;in&nbsp;the&nbsp;run()&nbsp;method).&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Hmm,&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;the&nbsp;case.&nbsp;Commands&nbsp;that&nbsp;include&nbsp;a&nbsp;single&nbsp;overlay&lt;br&gt;<br>
parameter&nbsp;should&nbsp;automatically&nbsp;draw&nbsp;from&nbsp;the&nbsp;active&nbsp;image&#39;s&nbsp;active&nbsp;overlay,&lt;br&gt;<br>
when&nbsp;possible&nbsp;[1].&nbsp;This&nbsp;happens&nbsp;_before_&nbsp;the&nbsp;initializers&nbsp;are&nbsp;called&nbsp;[2]&lt;br&gt;<br>
(because&nbsp;Priority.VERY_HIGH_PRIORITY&nbsp;&gt;&nbsp;Priority.HIGH_PRIORITY).&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;issue&nbsp;might&nbsp;be&nbsp;typing-related:&nbsp;try&nbsp;using&nbsp;Overlay&nbsp;instead&nbsp;of&lt;br&gt;<br>
RectangleOverlay&nbsp;and&nbsp;see&nbsp;if&nbsp;that&nbsp;makes&nbsp;a&nbsp;difference.&nbsp;If&nbsp;so,&nbsp;it&nbsp;is&nbsp;probably&lt;br&gt;<br>
a&nbsp;limitation&nbsp;of&nbsp;the&nbsp;ActiveOverlayPreprocessor&nbsp;[1];&nbsp;patches&nbsp;welcome.&lt;br&gt;<br>
&lt;br&gt;<br>
Alternately:&nbsp;can&nbsp;you&nbsp;post&nbsp;an&nbsp;MVCE&nbsp;[3,&nbsp;4]&nbsp;illustrating&nbsp;the&nbsp;issue?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
do&nbsp;I&nbsp;have&nbsp;to&nbsp;write&nbsp;a&nbsp;Preprocessor&nbsp;of&nbsp;some&nbsp;sorts&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;certainly&nbsp;possible&nbsp;to&nbsp;do,&nbsp;but&nbsp;I&nbsp;would&nbsp;hope&nbsp;not&nbsp;necessary.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
can&nbsp;the&nbsp;initializer&nbsp;&#39;manually&#39;&nbsp;call&nbsp;the&nbsp;code&nbsp;which&nbsp;normally&nbsp;harvest&lt;br&gt;<br>
the&nbsp;RectangleOverlay&nbsp;parameter&nbsp;later&nbsp;on&nbsp;?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Sure,&nbsp;you&nbsp;can&nbsp;always&nbsp;code&nbsp;in&nbsp;whatever&nbsp;logic&nbsp;you&nbsp;want&nbsp;to&nbsp;the&nbsp;plugin&lt;br&gt;<br>
initializer&nbsp;method.&nbsp;But&nbsp;again,&nbsp;hopefully&nbsp;not&nbsp;necessary&nbsp;in&nbsp;this&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
even&nbsp;after&nbsp;some&nbsp;reading&nbsp;of&nbsp;the&nbsp;tutorials&nbsp;and&nbsp;the&nbsp;scijava&nbsp;source&nbsp;code&lt;br&gt;<br>
around&nbsp;org.scijava.command.CommandInfo&nbsp;my&nbsp;understanding&nbsp;of&nbsp;how&nbsp;the&lt;br&gt;<br>
plugin&nbsp;initialisation&nbsp;works&nbsp;is&nbsp;still&nbsp;poor.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;sorry—the&nbsp;tutorials&nbsp;need&nbsp;to&nbsp;be&nbsp;improved.&nbsp;What&nbsp;sort&nbsp;of&nbsp;tutorial&nbsp;do&nbsp;you&lt;br&gt;<br>
think&nbsp;would&nbsp;aid&nbsp;your&nbsp;understanding&nbsp;here?&nbsp;The&nbsp;&quot;execute-commands&quot;&nbsp;and&lt;br&gt;<br>
&quot;custom-preprocessor-plugin&quot;&nbsp;tutorials&nbsp;are&nbsp;probably&nbsp;touch&nbsp;on&nbsp;these&nbsp;topics&lt;br&gt;<br>
most&nbsp;closely,&nbsp;although&nbsp;neither&nbsp;provides&nbsp;a&nbsp;real&nbsp;overview&nbsp;of&nbsp;the&lt;br&gt;<br>
pre-/post-processing&nbsp;chain&nbsp;in&nbsp;conjunction&nbsp;with&nbsp;module&nbsp;execution.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Would&nbsp;it&nbsp;make&nbsp;sense&nbsp;to&nbsp;distinguish&nbsp;(by&nbsp;an&nbsp;annotation&nbsp;?)&nbsp;parameters&lt;br&gt;<br>
that&nbsp;are&nbsp;to&nbsp;be&nbsp;initialized&nbsp;from&nbsp;the&nbsp;context&nbsp;(i.e.&nbsp;services,&nbsp;active&lt;br&gt;<br>
image,&nbsp;roi&nbsp;etc),&nbsp;and&nbsp;whose&nbsp;lack&nbsp;should&nbsp;be&nbsp;immediately&nbsp;fatal&nbsp;to&nbsp;the&lt;br&gt;<br>
plugin&nbsp;(no&nbsp;UI&nbsp;harvesting,&nbsp;and&nbsp;in&nbsp;exchange&nbsp;can&nbsp;be&nbsp;assumed&nbsp;final&nbsp;for&nbsp;the&lt;br&gt;<br>
rest&nbsp;of&nbsp;the&nbsp;command&nbsp;execution),&nbsp;from&nbsp;parameters&nbsp;that,&nbsp;if&nbsp;they&nbsp;cannot&lt;br&gt;<br>
be&nbsp;populated&nbsp;from&nbsp;already&nbsp;available&nbsp;data,&nbsp;should&nbsp;be&nbsp;harvested&nbsp;through&lt;br&gt;<br>
a&nbsp;dialog&nbsp;(and&nbsp;may&nbsp;change&nbsp;several&nbsp;times)&nbsp;?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Potentially,&nbsp;yes.&nbsp;Feel&nbsp;free&nbsp;to&nbsp;comment&nbsp;on&nbsp;the&nbsp;issue&nbsp;on&nbsp;GitHub!&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
Curtis&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/imagej/imagej-common/blob/imagej-common-0.15.1/src/main/java/net/imagej/display/process/ActiveOverlayPreprocessor.java#L57&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/imagej/imagej-common/blob/imagej-common-0.15.1/src/main/java/net/imagej/display/process/ActiveOverlayPreprocessor.java#L57&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[2]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/scijava/scijava-common/blob/scijava-common-2.44.2/src/main/java/org/scijava/module/process/InitPreprocessor.java#L49&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/scijava/scijava-common/blob/scijava-common-2.44.2/src/main/java/org/scijava/module/process/InitPreprocessor.java#L49&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[3]&nbsp;&lt;a&nbsp;href=&quot;http://imagej.net/Bug_reporting_best_practices&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej.net/Bug_reporting_best_practices&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[4]&nbsp;&lt;a&nbsp;href=&quot;http://stackoverflow.com/help/mcve&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/help/mcve&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;Aug&nbsp;24,&nbsp;2015&nbsp;at&nbsp;9:07&nbsp;AM,&nbsp;Adrian&nbsp;Daerr&nbsp;&lt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:adrian.daerr@univ-paris-diderot.fr&quot;&nbsp;target=&quot;_blank&quot;&gt;adrian.daerr@univ-paris-diderot.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;Curtis,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;parameters&nbsp;a,&nbsp;b,&nbsp;c&nbsp;whose&nbsp;initialisation&nbsp;depend&nbsp;on&nbsp;a&nbsp;common&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
calculation&nbsp;(depending&nbsp;on&nbsp;the&nbsp;image&nbsp;gotten&nbsp;through&nbsp;a&nbsp;previous&lt;br&gt;<br>
@Parameter&nbsp;ImagePlus&nbsp;imp):&nbsp;can&nbsp;I&nbsp;do&nbsp;this&nbsp;calculation&nbsp;in&nbsp;the&lt;br&gt;<br>
initialiser&nbsp;for&nbsp;the&nbsp;first&nbsp;parameter&nbsp;a,&nbsp;and&nbsp;then&nbsp;in&nbsp;the&nbsp;initialisers&nbsp;of&nbsp;b&lt;br&gt;<br>
and&nbsp;c&nbsp;rely&nbsp;on&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;calculation&nbsp;was&nbsp;already&nbsp;done&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Perhaps&nbsp;simplest&nbsp;at&nbsp;the&nbsp;moment&nbsp;would&nbsp;be&nbsp;to&nbsp;give&nbsp;your&nbsp;command&nbsp;a&nbsp;global&lt;br&gt;<br>
initializer&nbsp;--&nbsp;i.e.,&nbsp;set&nbsp;the&nbsp;initializer&nbsp;method&nbsp;in&nbsp;the&lt;br&gt;<br>
@Plugin&nbsp;annotation&nbsp;itself,&nbsp;rather&nbsp;than&nbsp;on&nbsp;specific&nbsp;parameters.&lt;br&gt;<br>
The&nbsp;ImagePlus&nbsp;will&nbsp;be&nbsp;populated&nbsp;by&nbsp;a&nbsp;preprocessor&nbsp;_before_&nbsp;the&lt;br&gt;<br>
initialize&nbsp;method&nbsp;is&nbsp;called,&nbsp;so&nbsp;when&nbsp;your&nbsp;global&nbsp;initializer&nbsp;gets&lt;br&gt;<br>
called&nbsp;you&nbsp;will&nbsp;already&nbsp;have&nbsp;access&nbsp;to&nbsp;the&nbsp;ImagePlus.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;suggestion,&nbsp;which&nbsp;almost&nbsp;does&nbsp;the&nbsp;job,&nbsp;except&nbsp;that&nbsp;the&lt;br&gt;<br>
initialization&nbsp;also&nbsp;depends&nbsp;on&nbsp;a&nbsp;parameter&lt;br&gt;<br>
&lt;br&gt;<br>
@Parameter(persist&nbsp;=&nbsp;false)&nbsp;private&nbsp;RectangleOverlay&nbsp;roi;&lt;br&gt;<br>
&lt;br&gt;<br>
which&nbsp;appears&nbsp;to&nbsp;be&nbsp;populated&nbsp;only&nbsp;after&nbsp;the&nbsp;initializer&nbsp;is&nbsp;called&nbsp;(its&lt;br&gt;<br>
value&nbsp;is&nbsp;null&nbsp;in&nbsp;the&nbsp;initializer&nbsp;and&nbsp;valid&nbsp;in&nbsp;the&nbsp;run()&nbsp;method).&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;to&nbsp;solve&nbsp;this:&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;write&nbsp;a&nbsp;Preprocessor&nbsp;of&nbsp;some&lt;br&gt;<br>
sorts,&nbsp;or&nbsp;can&nbsp;the&nbsp;initializer&nbsp;&#39;manually&#39;&nbsp;call&nbsp;the&nbsp;code&nbsp;which&nbsp;normally&lt;br&gt;<br>
harvest&nbsp;the&nbsp;RectangleOverlay&nbsp;parameter&nbsp;later&nbsp;on&nbsp;?&nbsp;Somehow&nbsp;the&nbsp;fact&nbsp;that&lt;br&gt;<br>
ImagePlus&nbsp;is&nbsp;populated&nbsp;by&nbsp;a&nbsp;Preprocessor&nbsp;but&nbsp;RectangleOverlay&nbsp;isn&#39;t,&nbsp;seems&lt;br&gt;<br>
linked&nbsp;to&nbsp;issues&nbsp;that&nbsp;I&nbsp;mentionned&nbsp;in&nbsp;another&nbsp;post[1],&nbsp;but&nbsp;even&nbsp;after&nbsp;some&lt;br&gt;<br>
reading&nbsp;of&nbsp;the&nbsp;tutorials&nbsp;and&nbsp;the&nbsp;scijava&nbsp;source&nbsp;code&nbsp;around&lt;br&gt;<br>
org.scijava.command.CommandInfo&nbsp;my&nbsp;understanding&nbsp;of&nbsp;how&nbsp;the&nbsp;plugin&lt;br&gt;<br>
initialisation&nbsp;works&nbsp;is&nbsp;still&nbsp;poor.&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&lt;br&gt;<br>
(e.g.&nbsp;that&nbsp;the&nbsp;Overlay&nbsp;appears&nbsp;in&nbsp;the&nbsp;harvesting&nbsp;dialog,&nbsp;or&nbsp;that&nbsp;an&lt;br&gt;<br>
Exception&nbsp;is&nbsp;thrown&nbsp;because&nbsp;of&nbsp;the&nbsp;overlay&nbsp;after&nbsp;command&nbsp;execution)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://imagej-devel.54429.x6.nabble.com/Masking-Parameter-from-GUI-harvesting-td1098.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://imagej-devel.54429.x6.nabble.com/Masking-Parameter-from-GUI-harvesting-td1098.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;again,&nbsp;scijava/scijava-common#181&nbsp;is&nbsp;very&nbsp;relevant&nbsp;here.&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Would&nbsp;it&nbsp;make&nbsp;sense&nbsp;to&nbsp;distinguish&nbsp;(by&nbsp;an&nbsp;annotation&nbsp;?)&nbsp;parameters&nbsp;that&lt;br&gt;<br>
are&nbsp;to&nbsp;be&nbsp;initialized&nbsp;from&nbsp;the&nbsp;context&nbsp;(i.e.&nbsp;services,&nbsp;active&nbsp;image,&nbsp;roi&lt;br&gt;<br>
etc),&nbsp;and&nbsp;whose&nbsp;lack&nbsp;should&nbsp;be&nbsp;immediately&nbsp;fatal&nbsp;to&nbsp;the&nbsp;plugin&nbsp;(no&nbsp;UI&lt;br&gt;<br>
harvesting,&nbsp;and&nbsp;in&nbsp;exchange&nbsp;can&nbsp;be&nbsp;assumed&nbsp;final&nbsp;for&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&lt;br&gt;<br>
command&nbsp;execution),&nbsp;from&nbsp;parameters&nbsp;that,&nbsp;if&nbsp;they&nbsp;cannot&nbsp;be&nbsp;populated&nbsp;from&lt;br&gt;<br>
already&nbsp;available&nbsp;data,&nbsp;should&nbsp;be&nbsp;harvested&nbsp;through&nbsp;a&nbsp;dialog&nbsp;(and&nbsp;may&lt;br&gt;<br>
change&nbsp;several&nbsp;times)&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
cheers,&lt;br&gt;<br>
Adrian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
--&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.msc.univ-paris-diderot.fr/~daerr/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.msc.univ-paris-diderot.fr/~daerr/&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
