<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;base&nbsp;href=&quot;http://fiji.sc/bugzilla/&quot;&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_REOPENED&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;REOPENED&nbsp;-&nbsp;&quot;Profile&nbsp;Plot&nbsp;Options...&quot;&nbsp;exception&nbsp;via&nbsp;macro/batch&nbsp;mode&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=752#c8&quot;&gt;Comment&nbsp;#&nbsp;8&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;&lt;a&nbsp;class=&quot;bz_bug_link&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bz_status_REOPENED&nbsp;&quot;<br>
&nbsp;&nbsp;&nbsp;title=&quot;REOPENED&nbsp;-&nbsp;&quot;Profile&nbsp;Plot&nbsp;Options...&quot;&nbsp;exception&nbsp;via&nbsp;macro/batch&nbsp;mode&quot;<br>
&nbsp;&nbsp;&nbsp;href=&quot;http://fiji.sc/bugzilla/show_bug.cgi?id=752&quot;&gt;bug&nbsp;752&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;&lt;span&nbsp;class=&quot;vcard&quot;&gt;&lt;a&nbsp;class=&quot;email&quot;&nbsp;href=&quot;mailto:ctrueden&#64;wisc.edu&quot;&nbsp;title=&quot;Curtis&nbsp;Rueden&nbsp;&lt;ctrueden&#64;wisc.edu&gt;&quot;&gt;&nbsp;&lt;span&nbsp;class=&quot;fn&quot;&gt;Curtis&nbsp;Rueden&lt;/span&gt;&lt;/a&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;This&nbsp;bug&nbsp;is&nbsp;caused&nbsp;by&nbsp;the&nbsp;Profiler&nbsp;plugin&nbsp;attempting&nbsp;to&nbsp;crop&nbsp;the&nbsp;maximum<br>
Profile&nbsp;Plot&nbsp;size&nbsp;to&nbsp;stay&nbsp;within&nbsp;the&nbsp;bounds&nbsp;of&nbsp;the&nbsp;screen;&nbsp;see:<br>
<br>
&lt;a&nbsp;href=&quot;https://github.com/imagej/ImageJA/blob/master/src/main/java/ij/plugin/Profiler.java#L66-L72&quot;&gt;https://github.com/imagej/ImageJA/blob/master/src/main/java/ij/plugin/Profiler.java#L66-L72&lt;/a&gt;<br>
<br>
The&nbsp;problem&nbsp;is&nbsp;that&nbsp;in&nbsp;headless&nbsp;mode,&nbsp;IJ.getScreenSize()&nbsp;returns&nbsp;(0,&nbsp;0).<br>
<br>
Personally,&nbsp;I&nbsp;think&nbsp;limiting&nbsp;the&nbsp;Profile&nbsp;Plot&nbsp;size&nbsp;in&nbsp;this&nbsp;way&nbsp;is&nbsp;a&nbsp;bug,&nbsp;since<br>
there&nbsp;are&nbsp;legitimate&nbsp;reasons&nbsp;to&nbsp;plot&nbsp;extremely&nbsp;large&nbsp;graphs&nbsp;larger&nbsp;than&nbsp;the<br>
bounds&nbsp;of&nbsp;the&nbsp;screen,&nbsp;regardless&nbsp;of&nbsp;being&nbsp;in&nbsp;headless&nbsp;mode.<br>
<br>
In&nbsp;any&nbsp;case,&nbsp;this&nbsp;is&nbsp;a&nbsp;bug&nbsp;that&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;fixed&nbsp;in&nbsp;the&nbsp;ImageJ1&nbsp;source&nbsp;by<br>
Wayne&nbsp;Rasband.<br>
<br>
In&nbsp;the&nbsp;meantime,&nbsp;if&nbsp;you&nbsp;leave&nbsp;off&nbsp;the&nbsp;&quot;Profile&nbsp;Plot&nbsp;Options&quot;&nbsp;call&nbsp;at&nbsp;the<br>
beginning,&nbsp;the&nbsp;macro&nbsp;works.&nbsp;So,&nbsp;I&nbsp;was&nbsp;thinking&nbsp;that&nbsp;you&nbsp;could&nbsp;work&nbsp;around&nbsp;this<br>
bug&nbsp;by&nbsp;first&nbsp;setting&nbsp;the&nbsp;desired&nbsp;Profile&nbsp;Plot&nbsp;Options&nbsp;in&nbsp;the&nbsp;UI,&nbsp;then&nbsp;quitting<br>
ImageJ&nbsp;and&nbsp;invoking&nbsp;your&nbsp;headless&nbsp;macro(s)&nbsp;to&nbsp;generate&nbsp;and&nbsp;save&nbsp;plot&nbsp;profiles.<br>
Unfortunately,&nbsp;it&nbsp;seems&nbsp;that&nbsp;the&nbsp;previous&nbsp;Profile&nbsp;Plot&nbsp;settings&nbsp;are&nbsp;not&nbsp;used<br>
for&nbsp;some&nbsp;reason&nbsp;when&nbsp;the&nbsp;macro&nbsp;executes&nbsp;in&nbsp;this&nbsp;manner.&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;You&nbsp;are&nbsp;receiving&nbsp;this&nbsp;mail&nbsp;because:&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;You&nbsp;are&nbsp;the&nbsp;assignee&nbsp;for&nbsp;the&nbsp;bug.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
