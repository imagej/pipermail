From bnorthan at gmail.com  Thu May  7 06:51:13 2015
From: bnorthan at gmail.com (Brian Northan)
Date: Thu, 7 May 2015 07:51:13 -0400
Subject: [ImageJ-devel] default value for @parameter in Jython scripts
Message-ID: <CAMWa8i1GSSSkV9BBhsy10yT=_evsnXRZ46VG8TQdTpuT8goSeQ@mail.gmail.com>

Hi

I saw that Mark recently answered some questions about and updated the
documentation for script parameters (
http://imagej.net/Script_parameters#Parameter_properties)

This is really helpful.  However I still can't figure out how to set a
default value for a parameter in Jython

# @Integer test=10

Just makes the label of the parameter "test=10", I looked at the Parameter
notation but couldn't find a property for default value.

Any suggestions??  I'm probably just missing something simple.

Thanks

Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150507/89c4302e/attachment.html>

From ctrueden at wisc.edu  Thu May  7 07:04:03 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 7 May 2015 07:04:03 -0500
Subject: [ImageJ-devel] default value for @parameter in Jython scripts
In-Reply-To: <CAMWa8i1GSSSkV9BBhsy10yT=_evsnXRZ46VG8TQdTpuT8goSeQ@mail.gmail.com>
References: <CAMWa8i1GSSSkV9BBhsy10yT=_evsnXRZ46VG8TQdTpuT8goSeQ@mail.gmail.com>
Message-ID: <CADN69ym_QVg5yj0k2VehTQNYz6CA0jPbn6SojLmfJm665gx4EA@mail.gmail.com>

Hi Brian,

> # @Integer test=10
>
> Just makes the label of the parameter "test=10", I looked at the
> Parameter notation but couldn't find a property for default value.

Very sorry for how opaque this is. I explained it in a commit message [1].

To summarize, at the moment you have to write:

# @Integer(value = 10) test

The parameter parsing will be rewritten fairly soon, at which point more
@Parameter-style features will start working as expected. For details, see
scijava/scijava-common#156 [1].

Regards,
Curtis

[1]
https://github.com/scijava/scijava-common/commit/3fdc5df4e93577be70d20d994bfc830e5dcb1676
[2] https://github.com/scijava/scijava-common/issues/156


On Thu, May 7, 2015 at 6:51 AM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi
>
> I saw that Mark recently answered some questions about and updated the
> documentation for script parameters (
> http://imagej.net/Script_parameters#Parameter_properties)
>
> This is really helpful.  However I still can't figure out how to set a
> default value for a parameter in Jython
>
> # @Integer test=10
>
> Just makes the label of the parameter "test=10", I looked at the Parameter
> notation but couldn't find a property for default value.
>
> Any suggestions??  I'm probably just missing something simple.
>
> Thanks
>
> Brian
>
>
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150507/baf07fb4/attachment.html>

From hiner at wisc.edu  Thu May  7 07:51:59 2015
From: hiner at wisc.edu (Mark Hiner)
Date: Thu, 7 May 2015 07:51:59 -0500
Subject: [ImageJ-devel] default value for @parameter in Jython scripts
In-Reply-To: <CADN69ym_QVg5yj0k2VehTQNYz6CA0jPbn6SojLmfJm665gx4EA@mail.gmail.com>
References: <CAMWa8i1GSSSkV9BBhsy10yT=_evsnXRZ46VG8TQdTpuT8goSeQ@mail.gmail.com>
	<CADN69ym_QVg5yj0k2VehTQNYz6CA0jPbn6SojLmfJm665gx4EA@mail.gmail.com>
Message-ID: <CA+B=mGo_yJx-+KohNftOhscKwAgVzorHj-kHGtme0N8+XmKUhg@mail.gmail.com>

>Very sorry for how opaque this is. I explained it in a commit message.

Now also on the wiki[1].


[1] http://imagej.net/Script_parameters#Default_values
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150507/71dba45f/attachment.html>

From bnorthan at gmail.com  Thu May  7 09:54:48 2015
From: bnorthan at gmail.com (Brian Northan)
Date: Thu, 7 May 2015 10:54:48 -0400
Subject: [ImageJ-devel] default value for @parameter in Jython scripts
In-Reply-To: <CA+B=mGo_yJx-+KohNftOhscKwAgVzorHj-kHGtme0N8+XmKUhg@mail.gmail.com>
References: <CAMWa8i1GSSSkV9BBhsy10yT=_evsnXRZ46VG8TQdTpuT8goSeQ@mail.gmail.com>
	<CADN69ym_QVg5yj0k2VehTQNYz6CA0jPbn6SojLmfJm665gx4EA@mail.gmail.com>
	<CA+B=mGo_yJx-+KohNftOhscKwAgVzorHj-kHGtme0N8+XmKUhg@mail.gmail.com>
Message-ID: <CAMWa8i0aFu7AvAD-2wOBwfHU70+psdWtQNxqabTuW0dhcT+F_A@mail.gmail.com>

Thank you guys.  It works perfectly now.

On Thu, May 7, 2015 at 8:51 AM, Mark Hiner <hiner at wisc.edu> wrote:

> >Very sorry for how opaque this is. I explained it in a commit message.
>
> Now also on the wiki[1].
>
>
> [1] http://imagej.net/Script_parameters#Default_values
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150507/e70ccbbc/attachment.html>

From jay.w.warrick at gmail.com  Tue May 12 23:27:36 2015
From: jay.w.warrick at gmail.com (Jay Warrick)
Date: Tue, 12 May 2015 23:27:36 -0500
Subject: [ImageJ-devel] Feature Extraction
Message-ID: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>

Hi All,

I was hoping to find some info on the 'feature service' or 'haralick' branch of imagej-ops (at least those look like to two most developed branches for feature extraction). The creation of feature set ops is a really great idea and thanks to everyone who is working on it. Likewise, I would certainly be willing to try and help fill out some features if it seems appropriate, especially when I get more familiar with the ops framework. Also, please let me know if there are any concerns with me using any of these tools prior to the authors publishing on/with these implementations themselves. My work is still preliminary, but just wanted to ask to be safe.

I realize the 'feature service' and 'haralick' branches are somewhat WIPs but it seems there are many rich feature sets that appear to be nearly or completely implemented and was hoping to try and use them if possible... Towards this goal, I was able to use the FirstOrderStatFeatureSet and ZernikeFeatureSet classes to get information from an Img / ImgPlus / SCIFIOImgPlus using the example provided in the branch. However, it is unclear to me how the classes should be used to do this for each cell in an image. Is it assumed that we are feeding in small cropped and masked regions to the feature set ops? If so, suggestions on an efficient way to do so (or links to examples in other projects... Knime?) would be amazing. I'm generally able to identify cells and create ROIs and mask images etc programmatically in Java with ImageJ classes, but haven't done so with Img-related image objects yet. With a hint or two, I can try and take it from there. Maybe do the cropping etc with old ImageJ classes and wrap the resultant cropped regions in Img objects? Maybe I'm way off base and I'm supposed to be using ROIs somewhere in the mix with the ops. Hopefully someone can set me straight :-)

Thanks a bunch in advance.

Best,

Jay

From christian.dietz at uni-konstanz.de  Wed May 13 08:22:40 2015
From: christian.dietz at uni-konstanz.de (Christian Dietz)
Date: Wed, 13 May 2015 15:22:40 +0200
Subject: [ImageJ-devel] Feature Extraction
In-Reply-To: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>
References: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>
Message-ID: <55535020.30106@uni-konstanz.de>

Hi Jay,

you are right, we are working on this project since a while. The goal of 
the work we are doing is to have efficient implementations for most of 
the well known features which can be derived from images or ROIs. The 
main work is done on the following branch:

https://github.com/imagej/imagej-ops/tree/outputop-service

and there is an open issue documenting the process:

https://github.com/imagej/imagej-ops/issues/67

A very small example how to use the features is given at:

https://github.com/imagej/imagej-ops/blob/outputop-service/src/main/java/net/imagej/ops/features/Example.java

Concerning your question with ROIs: The features implementation do not 
really care if they get an Img or a ROI. The only thing they expect is 
to get some IterableInterval or Iterable or RandomAccessibleInterval etc 
(depends on the type of feature). In KNIME we use Labelings 
(https://github.com/imglib/imglib2-roi/tree/master/src) to describe our 
segmentations and derive or ROIs.

Does this help you? It would be great if you want to contribute to the 
outputop-service and maybe implement some of the missing features.

Best,

Christian




On 13.05.2015 06:27, Jay Warrick wrote:
> Hi All,
>
> I was hoping to find some info on the 'feature service' or 'haralick' branch of imagej-ops (at least those look like to two most developed branches for feature extraction). The creation of feature set ops is a really great idea and thanks to everyone who is working on it. Likewise, I would certainly be willing to try and help fill out some features if it seems appropriate, especially when I get more familiar with the ops framework. Also, please let me know if there are any concerns with me using any of these tools prior to the authors publishing on/with these implementations themselves. My work is still preliminary, but just wanted to ask to be safe.
>
> I realize the 'feature service' and 'haralick' branches are somewhat WIPs but it seems there are many rich feature sets that appear to be nearly or completely implemented and was hoping to try and use them if possible... Towards this goal, I was able to use the FirstOrderStatFeatureSet and ZernikeFeatureSet classes to get information from an Img / ImgPlus / SCIFIOImgPlus using the example provided in the branch. However, it is unclear to me how the classes should be used to do this for each cell in an image. Is it assumed that we are feeding in small cropped and masked regions to the feature set ops? If so, suggestions on an efficient way to do so (or links to examples in other projects... Knime?) would be amazing. I'm generally able to identify cells and create ROIs and mask images etc programmatically in Java with ImageJ classes, but haven't done so with Img-related image objects yet. With a hint or two, I can try and take it from there. Maybe do the cropping etc with old I
>   mageJ classes and wrap the resultant cropped regions in Img objects? Maybe I'm way off base and I'm supposed to be using ROIs somewhere in the mix with the ops. Hopefully someone can set me straight :-)
>
> Thanks a bunch in advance.
>
> Best,
>
> Jay
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel




From warrick at wisc.edu  Thu May 14 13:44:59 2015
From: warrick at wisc.edu (Jay Warrick)
Date: Thu, 14 May 2015 13:44:59 -0500
Subject: [ImageJ-devel] Feature Extraction
In-Reply-To: <55535020.30106@uni-konstanz.de>
References: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>
	<55535020.30106@uni-konstanz.de>
Message-ID: <99B3F413-5434-4FB2-9812-F875FD3A9C1A@wisc.edu>

Hi Christian,

Thanks so much! This helps a lot. I probably wouldn't have discovered the tools for labeling immediately without your suggestion. Although I've gone through the tutorials, I'm still new to ImgLib2 so I wonder if I could try to summarize what I think the general workflow to be with an example and maybe you can correct me / direct me as I go? As a place to start, I'm imagining a scenario where I have a 1-plane, 1-channel nuclear stained image of cells and its associated thresholded image to identify nuclear regions for quantifying feature sets. At a high-level, what I imagine trying to do is...

1) Generate a labeling object. For example, using the following...

final Labeling< T > labeling = new NativeImgLabeling< T, IntType >( Img < T > );

I assume this simplified constructor takes what could be a "black and white" image and associates Long numbers with each separate region of white pixels. Right? How might I reassign labels or construct them if, for example, I have specific IDs that I would like to associate with each white region of the mask image I would like to label?

2) Once I have a labeling, it seems like the next step is to obtain an IterableInterval over an ROI that can return "x-y locations" of pixels with a particular label. I assume to get this I would use something like...

labeling.getIterableRegionOfInterest(i).getIterableIntervalOverROI(src)

I can see where sometimes I only care about the shape of the ROI (e.g., with Zernike shape features) and other times I want pixel intensities at those locations (e.g., texture features). For the latter case, I assume "src" could be an image whose pixel values I'm interested at these locations, essentially applying an ROI to a particular image. Right? For other scenarios where only shape matters, would I use "labeling.getRegionOfInterest()" and that would be sufficient? Does the Zernike feature set prefer ROIs that define the boundaries of the shape or the whole region of the shape and it figures out the boundaries itself?

3) Then I suppose I loop through the labels in the "labeling" object to get these ROIs and pass them to the FeatureSet ops accessing the data as you do in the provided example and storing the data however I like.

Is that about right?

Lastly, related to Step 1,it looks like a labeling can hold multiple labels for each pixel location. Is the idea there to allow regions to overlap? If I'm generally interested in keeping pixels associated with a maximum of one cell, would I use this feature for anything else and if so, what sort of workflow is envisioned for creating these different labelings and essentially ending up with the merged information in a single labeling object?

Thanks!!!

Jay




> On May 13, 2015, at 8:22 AM, Christian Dietz <Christian.Dietz at uni-konstanz.de> wrote:
> 
> Hi Jay,
> 
> you are right, we are working on this project since a while. The goal of the work we are doing is to have efficient implementations for most of the well known features which can be derived from images or ROIs. The main work is done on the following branch:
> 
> https://github.com/imagej/imagej-ops/tree/outputop-service
> 
> and there is an open issue documenting the process:
> 
> https://github.com/imagej/imagej-ops/issues/67
> 
> A very small example how to use the features is given at:
> 
> https://github.com/imagej/imagej-ops/blob/outputop-service/src/main/java/net/imagej/ops/features/Example.java
> 
> Concerning your question with ROIs: The features implementation do not really care if they get an Img or a ROI. The only thing they expect is to get some IterableInterval or Iterable or RandomAccessibleInterval etc (depends on the type of feature). In KNIME we use Labelings (https://github.com/imglib/imglib2-roi/tree/master/src) to describe our segmentations and derive or ROIs.
> 
> Does this help you? It would be great if you want to contribute to the outputop-service and maybe implement some of the missing features.
> 
> Best,
> 
> Christian
> 
> 
> 
> 
> On 13.05.2015 06:27, Jay Warrick wrote:
>> Hi All,
>> 
>> I was hoping to find some info on the 'feature service' or 'haralick' branch of imagej-ops (at least those look like to two most developed branches for feature extraction). The creation of feature set ops is a really great idea and thanks to everyone who is working on it. Likewise, I would certainly be willing to try and help fill out some features if it seems appropriate, especially when I get more familiar with the ops framework. Also, please let me know if there are any concerns with me using any of these tools prior to the authors publishing on/with these implementations themselves. My work is still preliminary, but just wanted to ask to be safe.
>> 
>> I realize the 'feature service' and 'haralick' branches are somewhat WIPs but it seems there are many rich feature sets that appear to be nearly or completely implemented and was hoping to try and use them if possible... Towards this goal, I was able to use the FirstOrderStatFeatureSet and ZernikeFeatureSet classes to get information from an Img / ImgPlus / SCIFIOImgPlus using the example provided in the branch. However, it is unclear to me how the classes should be used to do this for each cell in an image. Is it assumed that we are feeding in small cropped and masked regions to the feature set ops? If so, suggestions on an efficient way to do so (or links to examples in other projects... Knime?) would be amazing. I'm generally able to identify cells and create ROIs and mask images etc programmatically in Java with ImageJ classes, but haven't done so with Img-related image objects yet. With a hint or two, I can try and take it from there. Maybe do the cropping etc with old I
>>  mageJ classes and wrap the resultant cropped regions in Img objects? Maybe I'm way off base and I'm supposed to be using ROIs somewhere in the mix with the ops. Hopefully someone can set me straight :-)
>> 
>> Thanks a bunch in advance.
>> 
>> Best,
>> 
>> Jay
>> _______________________________________________
>> ImageJ-devel mailing list
>> ImageJ-devel at imagej.net
>> http://imagej.net/mailman/listinfo/imagej-devel
> 
> 
> 
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150514/fc257657/attachment.html>

From christian.dietz at uni-konstanz.de  Fri May 15 07:04:15 2015
From: christian.dietz at uni-konstanz.de (Christian Dietz)
Date: Fri, 15 May 2015 14:04:15 +0200
Subject: [ImageJ-devel] Feature Extraction
In-Reply-To: <99B3F413-5434-4FB2-9812-F875FD3A9C1A@wisc.edu>
References: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>
	<55535020.30106@uni-konstanz.de>
	<99B3F413-5434-4FB2-9812-F875FD3A9C1A@wisc.edu>
Message-ID: <5555E0BF.6030301@uni-konstanz.de>

Hi Jay,

See my answers below. I hope this helps.

Christian



On 14.05.2015 20:44, Jay Warrick wrote:
> Hi Christian,
>
> Thanks so much! This helps a lot. I probably wouldn't have discovered 
> the tools for labeling immediately without your suggestion. Although 
> I've gone through the tutorials, I'm still new to ImgLib2 so I wonder 
> if I could try to summarize what I think the general workflow to be 
> with an example and maybe you can correct me / direct me as I go? As a 
> place to start, I'm imagining a scenario where I have a 1-plane, 
> 1-channel nuclear stained image of cells and its associated 
> thresholded image to 
> identhttps://github.com/imglib/imglib2-roi/tree/master/src/main/java/net/imglib2/roiify 
> nuclear regions for quantifying feature sets. At a high-level, what I 
> imagine trying to do is...

In KNIME we are still using the deprecated versions of the Labeling. 
Tobias Pietzsch rewrote parts of this framework (thats why 
NativeImgLabeling for example is deprecated). The new implementations, 
you can find here:
https://github.com/imglib/imglib2-roi/tree/master/src/main/java/net/imglib2/roi. 
We are going to switch to these implementations in KNIME soon.

>
> 1) Generate a labeling object. For example, using the following...
>
> final Labeling< T > labeling = new NativeImgLabeling< T, IntType >( 
> Img < T > );

In the new ROI implementations you would use ImgLabeling 
(https://github.com/imglib/imglib2-roi/blob/master/src/main/java/net/imglib2/roi/labeling/ImgLabeling.java) 
instead of NativeImgLabeling.

>
> *I assume this simplified constructor takes what could be a "black and 
> white" image and associates Long numbers with each separate region of 
> white pixels. Right? How might I reassign labels or construct them if, 
> for example, I have specific IDs that I would like to associate with 
> each white region of the mask image I would like to label?*

Actually, the constructor takes an Img of arbitrary integer-type which 
serves as an index image. From each Integer there exists a mapping to a 
Set of labels. If you want to derive a Labeling from a "Black and White" 
image, you have to apply an algorithm. For example a Connected Component 
Analysis (this is one way to do it in KNIME, for example after a simple 
thresholding), to identify the individual objects in your "Black and 
White" image.

>
> 2) Once I have a labeling, it seems like the next step is to obtain an 
> IterableInterval over an ROI that can return "x-y locations" of pixels 
> with a particular label. I assume to get this I would use something 
> like...
>
> labeling.getIterableRegionOfInterest(i).getIterableIntervalOverROI(src)

Right! In the new implementations you would do something like:

ImgLabeling<String, IntType> labeling = new ImgLabeling<String, 
IntType>(...);
LabelRegions<String> regions = new LabelRegions<String>(labeling);
Iterator<LabelRegion<String>> labelIter = regions.iterator();

and then use Regions.sample(...) to overlay the region on some arbitrary 
image.
>
> I can see where sometimes I only care about the shape of the ROI 
> (e.g., with Zernike shape features) and other times I want pixel 
> intensities at those locations (e.g., texture features). *For the 
> latter case, I assume "src" could be an image whose pixel values I'm 
> interested at these locations, essentially applying an ROI to a 
> particular image. Right? For other scenarios where only shape matters, 
> would I use "labeling.getRegionOfInterest()" and that would be 
> sufficient? Does the Zernike feature set prefer ROIs that define the 
> boundaries of the shape or the whole region of the shape and it 
> figures out the boundaries itself?*

Correct. In some cases (e.g. Shape) the input is just the LabelRegion 
(new wording from new implementation of Tobias), in other cases you want 
to sample over the pixels of another image in this region 
(Regions.sample()).

>
> 3) Then I suppose I loop through the labels in the "labeling" object 
> to get these ROIs and pass them to the FeatureSet ops accessing the 
> data as you do in the provided example and storing the data however I 
> like.
>
> *Is that about right?*

Sounds good.

>
> Lastly, related to Step 1,it looks like a labeling can hold multiple 
> labels for each pixel location. *Is the idea there to allow regions to 
> overlap?*

Absolutely. Overlap or more meta-information about objects (TrackID, 
Classification Result, ...).

> *If I'm generally interested in keeping pixels associated with a 
> maximum of one cell, would I use this feature for anything else and if 
> so, what sort of workflow is envisioned for creating these different 
> labelings and essentially ending up with the merged information in a 
> single labeling object?*

Speaking about workflows: On 
https://tech.knime.org/community/image-processing there is an example 
workflow called High-Content-Screening where we make use of a labeling. 
Maybe this helps you, too.

>
> Thanks!!!
>
> Jay
>
>
>
>
>> On May 13, 2015, at 8:22 AM, Christian Dietz 
>> <Christian.Dietz at uni-konstanz.de 
>> <mailto:Christian.Dietz at uni-konstanz.de>> wrote:
>>
>> Hi Jay,
>>
>> you are right, we are working on this project since a while. The goal 
>> of the work we are doing is to have efficient implementations for 
>> most of the well known features which can be derived from images or 
>> ROIs. The main work is done on the following branch:
>>
>> https://github.com/imagej/imagej-ops/tree/outputop-service
>>
>> and there is an open issue documenting the process:
>>
>> https://github.com/imagej/imagej-ops/issues/67
>>
>> A very small example how to use the features is given at:
>>
>> https://github.com/imagej/imagej-ops/blob/outputop-service/src/main/java/net/imagej/ops/features/Example.java
>>
>> Concerning your question with ROIs: The features implementation do 
>> not really care if they get an Img or a ROI. The only thing they 
>> expect is to get some IterableInterval or Iterable or 
>> RandomAccessibleInterval etc (depends on the type of feature). In 
>> KNIME we use Labelings 
>> (https://github.com/imglib/imglib2-roi/tree/master/src) to describe 
>> our segmentations and derive or ROIs.
>>
>> Does this help you? It would be great if you want to contribute to 
>> the outputop-service and maybe implement some of the missing features.
>>
>> Best,
>>
>> Christian
>>
>>
>>
>>
>> On 13.05.2015 06:27, Jay Warrick wrote:
>>> Hi All,
>>>
>>> I was hoping to find some info on the 'feature service' or 
>>> 'haralick' branch of imagej-ops (at least those look like to two 
>>> most developed branches for feature extraction). The creation of 
>>> feature set ops is a really great idea and thanks to everyone who is 
>>> working on it. Likewise, I would certainly be willing to try and 
>>> help fill out some features if it seems appropriate, especially when 
>>> I get more familiar with the ops framework. Also, please let me know 
>>> if there are any concerns with me using any of these tools prior to 
>>> the authors publishing on/with these implementations themselves. My 
>>> work is still preliminary, but just wanted to ask to be safe.
>>>
>>> I realize the 'feature service' and 'haralick' branches are somewhat 
>>> WIPs but it seems there are many rich feature sets that appear to be 
>>> nearly or completely implemented and was hoping to try and use them 
>>> if possible... Towards this goal, I was able to use the 
>>> FirstOrderStatFeatureSet and ZernikeFeatureSet classes to get 
>>> information from an Img / ImgPlus / SCIFIOImgPlus using the example 
>>> provided in the branch. However, it is unclear to me how the classes 
>>> should be used to do this for each cell in an image. Is it assumed 
>>> that we are feeding in small cropped and masked regions to the 
>>> feature set ops? If so, suggestions on an efficient way to do so (or 
>>> links to examples in other projects... Knime?) would be amazing. I'm 
>>> generally able to identify cells and create ROIs and mask images etc 
>>> programmatically in Java with ImageJ classes, but haven't done so 
>>> with Img-related image objects yet. With a hint or two, I can try 
>>> and take it from there. Maybe do the cropping etc with old I
>>>  mageJ classes and wrap the resultant cropped regions in Img 
>>> objects? Maybe I'm way off base and I'm supposed to be using ROIs 
>>> somewhere in the mix with the ops. Hopefully someone can set me 
>>> straight :-)
>>>
>>> Thanks a bunch in advance.
>>>
>>> Best,
>>>
>>> Jay
>>> _______________________________________________
>>> ImageJ-devel mailing list
>>> ImageJ-devel at imagej.net
>>> http://imagej.net/mailman/listinfo/imagej-devel
>>
>>
>>
>> _______________________________________________
>> ImageJ-devel mailing list
>> ImageJ-devel at imagej.net
>> http://imagej.net/mailman/listinfo/imagej-devel
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150515/6e8be87a/attachment-0001.html>

From warrick at wisc.edu  Fri May 15 12:36:56 2015
From: warrick at wisc.edu (Jay Warrick)
Date: Fri, 15 May 2015 12:36:56 -0500
Subject: [ImageJ-devel] Feature Extraction
In-Reply-To: <5555E0BF.6030301@uni-konstanz.de>
References: <4D8BDAC1-7511-4310-AFC3-1027D2AC200A@gmail.com>
	<55535020.30106@uni-konstanz.de>
	<99B3F413-5434-4FB2-9812-F875FD3A9C1A@wisc.edu>
	<5555E0BF.6030301@uni-konstanz.de>
Message-ID: <9D08C1CD-AB04-4728-98CE-0CDC54ADB7EE@wisc.edu>

All super helpful. Thanks for the details. I'll try to tackle soon.

Best!

Jay

> On May 15, 2015, at 7:04 AM, Christian Dietz <Christian.Dietz at uni-konstanz.de> wrote:
> 
> Hi Jay,
> 
> See my answers below. I hope this helps.
> 
> Christian
> 
> 
> 
> On 14.05.2015 20:44, Jay Warrick wrote:
>> Hi Christian,
>> 
>> Thanks so much! This helps a lot. I probably wouldn't have discovered the tools for labeling immediately without your suggestion. Although I've gone through the tutorials, I'm still new to ImgLib2 so I wonder if I could try to summarize what I think the general workflow to be with an example and maybe you can correct me / direct me as I go? As a place to start, I'm imagining a scenario where I have a 1-plane, 1-channel nuclear stained image of cells and its associated thresholded image to identhttps://github.com/imglib/imglib2-roi/tree/master/src/main/java/net/imglib2/roiify nuclear regions for quantifying feature sets. At a high-level, what I imagine trying to do is...
> 
> In KNIME we are still using the deprecated versions of the Labeling. Tobias Pietzsch rewrote parts of this framework (thats why NativeImgLabeling for example is deprecated). The new implementations, you can find here: 
> https://github.com/imglib/imglib2-roi/tree/master/src/main/java/net/imglib2/roi <https://github.com/imglib/imglib2-roi/tree/master/src/main/java/net/imglib2/roi>. We are going to switch to these implementations in KNIME soon.
> 
>> 
>> 1) Generate a labeling object. For example, using the following...
>> 
>> final Labeling< T > labeling = new NativeImgLabeling< T, IntType >( Img < T > );
> 
> In the new ROI implementations you would use ImgLabeling (https://github.com/imglib/imglib2-roi/blob/master/src/main/java/net/imglib2/roi/labeling/ImgLabeling.java <https://github.com/imglib/imglib2-roi/blob/master/src/main/java/net/imglib2/roi/labeling/ImgLabeling.java>) instead of NativeImgLabeling.
> 
>> 
>> I assume this simplified constructor takes what could be a "black and white" image and associates Long numbers with each separate region of white pixels. Right? How might I reassign labels or construct them if, for example, I have specific IDs that I would like to associate with each white region of the mask image I would like to label?
> 
> Actually, the constructor takes an Img of arbitrary integer-type which serves as an index image. From each Integer there exists a mapping to a Set of labels. If you want to derive a Labeling from a "Black and White" image, you have to apply an algorithm. For example a Connected Component Analysis (this is one way to do it in KNIME, for example after a simple thresholding), to identify the individual objects in your "Black and White" image.
> 
>> 
>> 2) Once I have a labeling, it seems like the next step is to obtain an IterableInterval over an ROI that can return "x-y locations" of pixels with a particular label. I assume to get this I would use something like...
>> 
>> labeling.getIterableRegionOfInterest(i).getIterableIntervalOverROI(src)
> 
> Right! In the new implementations you would do something like:  
> 
> ImgLabeling<String, IntType> labeling = new ImgLabeling<String, IntType>(...);
> LabelRegions<String> regions = new LabelRegions<String>(labeling); 
> Iterator<LabelRegion<String>> labelIter = regions.iterator(); 
> 
> and then use Regions.sample(...) to overlay the region on some arbitrary image.
>> 
>> I can see where sometimes I only care about the shape of the ROI (e.g., with Zernike shape features) and other times I want pixel intensities at those locations (e.g., texture features). For the latter case, I assume "src" could be an image whose pixel values I'm interested at these locations, essentially applying an ROI to a particular image. Right? For other scenarios where only shape matters, would I use "labeling.getRegionOfInterest()" and that would be sufficient? Does the Zernike feature set prefer ROIs that define the boundaries of the shape or the whole region of the shape and it figures out the boundaries itself?
> 
> Correct. In some cases (e.g. Shape) the input is just the LabelRegion (new wording from new implementation of Tobias), in other cases you want to sample over the pixels of another image in this region (Regions.sample()).
> 
>> 
>> 3) Then I suppose I loop through the labels in the "labeling" object to get these ROIs and pass them to the FeatureSet ops accessing the data as you do in the provided example and storing the data however I like.
>> 
>> Is that about right?
> 
> Sounds good.
> 
>> 
>> Lastly, related to Step 1,it looks like a labeling can hold multiple labels for each pixel location. Is the idea there to allow regions to overlap?
> 
> Absolutely. Overlap or more meta-information about objects (TrackID, Classification Result, ...).
> 
>> If I'm generally interested in keeping pixels associated with a maximum of one cell, would I use this feature for anything else and if so, what sort of workflow is envisioned for creating these different labelings and essentially ending up with the merged information in a single labeling object?
> 
> Speaking about workflows: On https://tech.knime.org/community/image-processing <https://tech.knime.org/community/image-processing> there is an example workflow called High-Content-Screening where we make use of a labeling. Maybe this helps you, too.
> 
>> 
>> Thanks!!!
>> 
>> Jay
>> 
>> 
>> 
>> 
>>> On May 13, 2015, at 8:22 AM, Christian Dietz <Christian.Dietz at uni-konstanz.de <mailto:Christian.Dietz at uni-konstanz.de>> wrote:
>>> 
>>> Hi Jay,
>>> 
>>> you are right, we are working on this project since a while. The goal of the work we are doing is to have efficient implementations for most of the well known features which can be derived from images or ROIs. The main work is done on the following branch:
>>> 
>>> https://github.com/imagej/imagej-ops/tree/outputop-service <https://github.com/imagej/imagej-ops/tree/outputop-service>
>>> 
>>> and there is an open issue documenting the process:
>>> 
>>> https://github.com/imagej/imagej-ops/issues/67 <https://github.com/imagej/imagej-ops/issues/67>
>>> 
>>> A very small example how to use the features is given at:
>>> 
>>> https://github.com/imagej/imagej-ops/blob/outputop-service/src/main/java/net/imagej/ops/features/Example.java <https://github.com/imagej/imagej-ops/blob/outputop-service/src/main/java/net/imagej/ops/features/Example.java>
>>> 
>>> Concerning your question with ROIs: The features implementation do not really care if they get an Img or a ROI. The only thing they expect is to get some IterableInterval or Iterable or RandomAccessibleInterval etc (depends on the type of feature). In KNIME we use Labelings (https://github.com/imglib/imglib2-roi/tree/master/src <https://github.com/imglib/imglib2-roi/tree/master/src>) to describe our segmentations and derive or ROIs.
>>> 
>>> Does this help you? It would be great if you want to contribute to the outputop-service and maybe implement some of the missing features.
>>> 
>>> Best,
>>> 
>>> Christian
>>> 
>>> 
>>> 
>>> 
>>> On 13.05.2015 06:27, Jay Warrick wrote:
>>>> Hi All,
>>>> 
>>>> I was hoping to find some info on the 'feature service' or 'haralick' branch of imagej-ops (at least those look like to two most developed branches for feature extraction). The creation of feature set ops is a really great idea and thanks to everyone who is working on it. Likewise, I would certainly be willing to try and help fill out some features if it seems appropriate, especially when I get more familiar with the ops framework. Also, please let me know if there are any concerns with me using any of these tools prior to the authors publishing on/with these implementations themselves. My work is still preliminary, but just wanted to ask to be safe.
>>>> 
>>>> I realize the 'feature service' and 'haralick' branches are somewhat WIPs but it seems there are many rich feature sets that appear to be nearly or completely implemented and was hoping to try and use them if possible... Towards this goal, I was able to use the FirstOrderStatFeatureSet and ZernikeFeatureSet classes to get information from an Img / ImgPlus / SCIFIOImgPlus using the example provided in the branch. However, it is unclear to me how the classes should be used to do this for each cell in an image. Is it assumed that we are feeding in small cropped and masked regions to the feature set ops? If so, suggestions on an efficient way to do so (or links to examples in other projects... Knime?) would be amazing. I'm generally able to identify cells and create ROIs and mask images etc programmatically in Java with ImageJ classes, but haven't done so with Img-related image objects yet. With a hint or two, I can try and take it from there. Maybe do the cropping etc with old I
>>>>  mageJ classes and wrap the resultant cropped regions in Img objects? Maybe I'm way off base and I'm supposed to be using ROIs somewhere in the mix with the ops. Hopefully someone can set me straight :-)
>>>> 
>>>> Thanks a bunch in advance.
>>>> 
>>>> Best,
>>>> 
>>>> Jay
>>>> _______________________________________________
>>>> ImageJ-devel mailing list
>>>> ImageJ-devel at imagej.net <mailto:ImageJ-devel at imagej.net>
>>>> http://imagej.net/mailman/listinfo/imagej-devel <http://imagej.net/mailman/listinfo/imagej-devel>
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> ImageJ-devel mailing list
>>> ImageJ-devel at imagej.net <mailto:ImageJ-devel at imagej.net>
>>> http://imagej.net/mailman/listinfo/imagej-devel <http://imagej.net/mailman/listinfo/imagej-devel>
>> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150515/3f4ff7a0/attachment.html>

From cyril.mongis at googlemail.com  Wed May 27 13:08:53 2015
From: cyril.mongis at googlemail.com (Mongis Cyril)
Date: Wed, 27 May 2015 20:08:53 +0200
Subject: [ImageJ-devel] ROI, Overlay and UI Implementation
Message-ID: <CAJf7PRfMK58KBWLxM76C4m9+2GrL_+Wwx05PEQHaENVKS9WgAA@mail.gmail.com>

Dear all !

I have been working on this new interface for ImageJ which is part of my
PhD Thesis.
Here is a little video showing the status of the project.
http://cyrilmongis.net/imagejfx/imagejfx.webm

I'm on the part where I start dealing with ROI, Overlay and all. However, I
don't know to which extent the Overlay/ROI data model goes. Could you point
me to the main classes to check when implementing a UI for Overlay/ROI? I
also have trouble understanding the concept of Overlay. If I understand
clearly, Overlay are just set of pixel data put on top of the image. But
also overlays can be defined by mathematic formula or just be a set of
pixels. At the end, they just cover the image. The Overlay tool just
generate set of pixels that represent an Overlay over the image. But in
ImageJ, the selection tools that we use don't really produce Overlay, they
produce selection I guess. Are those selection ROI ? I also don't see the
ROI in the imagej-common repository ? Are they simply in the scijava
repository ?

So in the end, could someone help by explaning or pointing ressources
explaning how the classes involved in ROIs and Overlays interact between
each other ?

I have already check the OverlayService, but I couldn't find any RoiService
:-(

Cheers,

Cyril
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150527/d523206d/attachment.html>

From ctrueden at wisc.edu  Thu May 28 13:42:45 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 13:42:45 -0500
Subject: [ImageJ-devel] Problems running Versatile Wand in batch mode
In-Reply-To: <C414254E-C9C7-4210-A61B-6ED679C5FD0E@iap.tuwien.ac.at>
References: <CANOyR64M_g=1CpJng5PEtOF1zkzPv9MfvLaw59-j4OZPpk1OgA@mail.gmail.com>
	<E1A93E58-4DCE-48C4-9E79-C8DB9FD2894B@iap.tuwien.ac.at>
	<CANOyR67dDQG-ii3ckytSWCmgWqv0DKe8RCVo_Qjs+YbL9pLuPA@mail.gmail.com>
	<C02777A4-953F-44B0-9E9A-03578E882441@nih.gov>
	<CANOyR67LKHr4Bcgs+jJfb8ekSLt8nxpya93kHTbWq8-H_0YkUA@mail.gmail.com>
	<FAD7E785-6261-4F3C-B3AA-08EF5F1B96CE@nih.gov>
	<5A01E5F0-D745-48DD-9DC8-90ECF4EB648F@iap.tuwien.ac.at>
	<CADN69ynn21553Zr1CrOA1XCRcfepC+od6wKqL4hQNUsXgxKZvg@mail.gmail.com>
	<C414254E-C9C7-4210-A61B-6ED679C5FD0E@iap.tuwien.ac.at>
Message-ID: <CADN69ymbm86DSYgS0Z=85SeGGCfDvVO7GtnVHLfYkp832DfJBw@mail.gmail.com>

Hi Michael,

[Added the imagej-devel mailing list to CC, since this discussion may
interest other ImageJ plugin developers.]

> A quick search for PlugInFilterRunner in the ij1-patcher seems to
> indicate that the PlugInFilterRunner is not patched.

There is another project on top of ij1-patcher that does the bulk of the
actual patching for ImageJ2:

    https://github.com/imagej/imagej-legacy

And it does have logic that affects PlugInFilters:


https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/IJ1Helper.java#L591-L621

But at first glance, this is only used for the Script Editor's Run command
in case the Java code being run is a PlugInFilter:


https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/LegacyJavaRunner.java#L54

I apologize that I will not have time to dig into this issue more over the
summer -- but I'm insanely busy with work on the ImageJ Common data model
and ImageJ OPS and SCIFIO APIs, ImageJ-OMERO integration, IT infrastructure
resources and Fiji plugin maintenance, upcoming Madison ImageJ conference
planning, paper writing, etc.

Backwards compatibility with ImageJ1 is extremely challenging, especially
as things continue to evolve -- e.g., the major changes to how Java works
on OS X, and the breaking changes of Java 8. The best we can do right now
is to prioritize work that critically affects a large number of ImageJ
users, where no easy workaround is possible. In the case of compiling Java
plugins, there are several ways of doing it that do not require "Compile
and Run" and similar, so for now that's what I'll recommend. I hope that
plugin developers will make installation easy for their users by creating
ImageJ update sites, rather than shipping bare .java files.

Regards,
Curtis

P.S. When searching for code, you might try http://search.imagej.net/ and
click the GitHub button.


On Thu, May 21, 2015 at 3:01 PM, Michael Schmid <schmid at iap.tuwien.ac.at>
wrote:

> Hi Curtis,
>
> thank you!
> My fault was looking at the fiji, not the imagej repository.
>
> A quick search for PlugInFilterRunner in the ij1-patcher seems to indicate
> that the PlugInFilterRunner is not patched.
> I agree that the ij1-patcher is not easy too understand, and I did not
> find anything that looks like it could cause the problem of Avital.
>
> Michael
> ________________________________________________________________
> Michael Schmid                    email: schmid at iap.tuwien.ac.at
> Institut f?r Angewandte Physik, Technische Universit?t Wien
> Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
> Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
> ________________________________________________________________
>
> On May 21, 2015, at 21:23, Curtis Rueden wrote:
>
> > Hi Michael,
> >
> > > [I must admit, I know nothing about how Fiji modifies ImageJ; in a
> > > quick search I did not find anything on fiji.sc or the github]
> >
> > The relevant project is:
> > https://github.com/imagej/ij1-patcher/
> >
> > But digging into it is a substantial endeavor.
> >
> > Regards,
> > Curtis
> >
> > On Thu, May 21, 2015 at 1:35 PM, Michael Schmid <schmid at iap.tuwien.ac.at>
> wrote:
> > Hi Wayne,
> >
> > thank you for finding this out!
> >
> > It must be a strange Fiji bug! When called like this, the Versatile Wand
> behaves like an ordinary ExtendedPlugInFilter. It uses the ImagePlus passed
> to the showDialog method, which comes directly from
> WindowManager.getCurrentImage() executed by the PlugInFilterRunner.
> >
> > [I must admit, I know nothing about how Fiji modifies ImageJ; in a quick
> search I did not find anything on fiji.sc or the github]
> >
> > Best regards,
> >
> > Michael
> > ________________________________________________________________
> > Michael Schmid                    email: schmid at iap.tuwien.ac.at
> > Institut f?r Angewandte Physik, Technische Universit?t Wien
> > Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
> > Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
> > ________________________________________________________________
> >
> > On May 21, 2015, at 18:54, Rasband, Wayne (NIH/NIMH) [E] wrote:
> >
> > > Dear Avital,
> > >
> > > This is a Fiji issue. You should be able to work around it by deleting
> the file ?Versatile_Wand.java" (location is shown in Console error
> messages), copying Versatile_Wand.class into the Fiji.app/plugins folder,
> and restarting Fiji. I have attached a copy of Versatile_Wand.class or you
> can download it from the Versatile Wand webpage.
> > >
> > > Best regards,
> > >
> > > -wayne
> > >
> > >
> > >> On May 21, 2015, at 3:03 AM, Avital Steinberg <
> steinbergavital at GMAIL.COM> wrote:
> > >>
> > >> Hi Wayne,
> > >> When I run your code (in which you create 2 images), I get an error
> message - ROI manager, "the active image does not have a selection". Also,
> it didn't form an ROI - the ROI manager is empty.
> > >>
> > >> There is also a console window that shows red warnings - I've had it
> for a long time, ever since I upgraded imageJ. This console shows up both
> on my mac and also on my Linux machine. I don't remember when it first
> showed up. It didn't bother me, since everything was working then.
> > >>
> > >> Are the attached warning messages related to the problem?
> > >>
> > >> Thanks,
> > >> Avital
> > >>
> > >> On Wed, May 20, 2015 at 6:42 PM, Rasband, Wayne (NIH/NIMH) [E] <
> rasbandw at mail.nih.gov> wrote:
> > >> Dear Avital,
> > >>
> > >> The following version of your test macro creates a selection in the
> saved image.
> > >>
> > >> Best regards,
> > >>
> > >> -wayne
> > >>
> > >>   setBatchMode(true);
> > >>   newImage("Untitled", "8-bit ramp", 500, 500, 1);
> > >>   image1ID = getImageID();
> > >>   newImage("Untitled", "8-bit ramp", 500, 500, 1);
> > >>   image2ID = getImageID();
> > >>   selectImage(image1ID);
> > >>   if(isActive(image1ID))
> > >>      print("The first image is active");
> > >>   else
> > >>      print("The first image isn't active");
> > >>   if (isActive(image2ID))
> > >>      print("The second image is active");
> > >>   else
> > >>      print("The second image isn't active");
> > >>   run("Gaussian Blur...", "sigma=2");
> > >>   run("Set Scale...", "distance=0");
> > >>   run("Versatile Wand", "value=60 color=-100 gradient=10
> connectedness=8-connected x=2 y=2 do");
> > >>   run("ROI Manager...");
> > >>   roiManager("Add");
> > >>   saveAs("tiff", getDirectory("home")+"test.tif?)
> > >>
> > >>
> > >>> On May 20, 2015, at 5:35 AM, Avital Steinberg <
> steinbergavital at GMAIL.COM> wrote:
> > >>>
> > >>> Thanks, but the problem isn't solved. Can anyone else check if
> they're
> > >>> having similar problems running this code? Does this code create a
> > >>> selection in the saved image also for you?
> > >>>
> > >>> setBatchMode(true);
> > >>> open();
> > >>> image1ID = getImageID();
> > >>> open();
> > >>> image2ID = getImageID();
> > >>> selectImage(image1ID);
> > >>> if(isActive(image1ID)){
> > >>>   print("The first image is active");
> > >>> }
> > >>> else {
> > >>>   print("The first image isn't active");
> > >>> }
> > >>>
> > >>> if(isActive(image2ID)){
> > >>>   print("The second image is active");
> > >>> }
> > >>> else {
> > >>>   print("The second image isn't active");
> > >>> }
> > >>> makePoint(1854, 726);
> > >>> run("Gaussian Blur...", "sigma=2");
> > >>> run("Set Scale...", "distance=0");
> > >>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>> connectedness=8-connected x=2 y=2 do");
> > >>> run("ROI Manager...");
> > >>> roiManager("Add");
> > >>> saveAs("Tiff");
> > >>>
> > >>>
> > >>> I am using ImageJ 1.49t7, which came with Java 1.6.0_065 (64 bit). I
> am
> > >>> running it on a mac, but I had the same problems also on a Linux
> machine
> > >>> with ImageJ 1.49s and java 1.6.0_24.
> > >>>
> > >>> MakePoint isn't needed, but it's besides the point, since the bug has
> > >>> nothing to do with it and exists also without it.
> > >>>
> > >>> Thanks,
> > >>> Avital
> > >>>
> > >>> On Tue, May 19, 2015 at 6:25 PM, Michael Schmid <
> schmid at iap.tuwien.ac.at>
> > >>> wrote:
> > >>>
> > >>>> Hi Avital,
> > >>>>
> > >>>> sorry, I can't reproduce the problem. Your macro works; it blurs
> the first
> > >>>> image and does the wand selection on it. I also get the selection
> in the
> > >>>> ROI Manager.
> > >>>> I tried with both 8-bit grayscale as well as RGB images.
> > >>>>
> > >>>> What I don't understand is the "makePoint(1854, 726)" command;
> Gaussian
> > >>>> Blur does not care about point selections. So it blurs the whole
> image.
> > >>>>
> > >>>> I am using ImageJ 1.49u4, Java 1.6.0_45.
> > >>>>
> > >>>> Michael
> > >>>> ________________________________________________________________
> > >>>> On May 19, 2015, at 17:01, Avital Steinberg wrote:
> > >>>>
> > >>>>> Hi,
> > >>>>> I'm trying to use Versatile Wand in batch mode. The following
> macro works
> > >>>>> well in batch mode:
> > >>>>>
> > >>>>> setBatchMode(true);
> > >>>>> open();
> > >>>>> makePoint(1854, 726);
> > >>>>> run("Gaussian Blur...", "sigma=2");
> > >>>>> run("Set Scale...", "distance=0");
> > >>>>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>>>> connectedness=8-connected x=2 y=2 do");
> > >>>>> run("ROI Manager...");
> > >>>>> roiManager("Add");
> > >>>>> saveAs("Tiff");
> > >>>>>
> > >>>>> However - when I try to work with multiple images, select the
> active
> > >>>> image
> > >>>>> and then use the Versatile Wand, no selection is created:
> > >>>>>
> > >>>>> setBatchMode(true);
> > >>>>> open();
> > >>>>> image1ID = getImageID();
> > >>>>> open();
> > >>>>> image2ID = getImageID();
> > >>>>> selectImage(image1ID);
> > >>>>> if(isActive(image1ID)){
> > >>>>>  print("The first image is active");
> > >>>>> }
> > >>>>> else {
> > >>>>>  print("The first image isn't active");
> > >>>>> }
> > >>>>>
> > >>>>> if(isActive(image2ID)){
> > >>>>>  print("The second image is active");
> > >>>>> }
> > >>>>> else {
> > >>>>>  print("The second image isn't active");
> > >>>>> }
> > >>>>> makePoint(1854, 726);
> > >>>>> run("Gaussian Blur...", "sigma=2");
> > >>>>> run("Set Scale...", "distance=0");
> > >>>>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>>> connectedness=8-connected x=2 y=2 do");
> > >>>>> run("ROI Manager...");
> > >>>>> roiManager("Add");
> > >>>>> saveAs("Tiff");
> > >>>>>
> > >>>>> Why wouldn't this script work? Only one image is active.
> > >>>>>
> > >>>>> Thank you,
> > >>>>> Avital
> > >>>>
> > >>>> --
> > >>>> ImageJ mailing list: http://imagej.nih.gov/ij/list.html
> > >>>>
> > >>>
> > >>> --
> > >>> ImageJ mailing list: http://imagej.nih.gov/ij/list.html
> > >>
> > >>
> > >> <OutputWindowsWaynesCode.jpg><ConsoleWindowRedWarnings.jpg>
> > >
> > > <Versatile_Wand.class>
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/e73a71c5/attachment-0001.html>

From ctrueden at wisc.edu  Thu May 28 16:25:07 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 16:25:07 -0500
Subject: [ImageJ-devel] TANGO
In-Reply-To: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
Message-ID: <CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>

Hi Alex,

> One of the developers of TANGO told me to use ImageJ1 because he
> wasn't sure how the switch between libraries is managed. Do I need to
> reinstall in this case?

When he says "use ImageJ1" he means:
  http://imagej.net/download.html

But please, encourage the TANGO developer to contact the imagej-devel
mailing list to discuss any roadblocks to TANGO working properly in
ImageJ2. It would be best for TANGO to be distributed via an ImageJ update
site, which are only supported in ImageJ2.

Regards,
Curtis

On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick <
alexandra.bortnick at gmail.com> wrote:

> Hi Curtis,
>
> One of the developers of TANGO told me to use ImageJ1 because he wasn't
> sure how the switch between libraries is managed. Do I need to reinstall in
> this case?
>
> -Alex
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/284db117/attachment.html>

From ctrueden at wisc.edu  Thu May 28 16:48:56 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 16:48:56 -0500
Subject: [ImageJ-devel] ROI, Overlay and UI Implementation
In-Reply-To: <CAJf7PRfMK58KBWLxM76C4m9+2GrL_+Wwx05PEQHaENVKS9WgAA@mail.gmail.com>
References: <CAJf7PRfMK58KBWLxM76C4m9+2GrL_+Wwx05PEQHaENVKS9WgAA@mail.gmail.com>
Message-ID: <CADN69ynfsF_GVguVe6Ji4+=td_qoXvx4G4Lq_V4wkB9pCr7r0g@mail.gmail.com>

Hi Cyril,

That is fantastic progress. Is your code available on GitHub yet?

> I'm on the part where I start dealing with ROI, Overlay and all.
> However, I don't know to which extent the Overlay/ROI data model goes.

I probably told you this before, but just to reiterate: you are into some
highly bleeding edge stuff, with unfinished and
still-subject-to-major-change APIs. With that caveat, here goes:

A net.imagej.overlay.Overlay is essentially a wrapper around a
net.imglib2.roi.RegionOfInterest. That latter interface is now deprecated
as the way ImgLib2 supports ROIs has been reworked as of January 2015. I
personally have not yet had time to dig into the new API that Tobias
designed, so ImageJ2 has not yet been updated.

It is furthermore confusing because ImageJ2 chose the term "overlay" to
mean something similar to what ImageJ1 means by "ROI", whereas ImageJ1 has
its own "overlay" that means something else. We are planning at least one
more iteration of the ImageJ Common data model, during which time we can
potentially select better names for these things to avoid future confusion.

ImageJ2 lets you have any number of Overlays in the same Display as one or
more Dataset (i.e., images). Conversely, in ImageJ1 there is only a single
selection (i.e., ROI) that gets replaced every time you draw -- although
you can A) add the selection to ImageJ1's ROI Manager, and/or B) add an IJ1
overlay that lets you group multiple ROIs together on the image.

Back on the IJ2 side, to make matters even more complex, IJ2's Swing user
interface "cheats" a lot by rendering its overlays using the JHotDraw
library -- via plugins of type JHotDrawAdapter, responsible for translating
between JHotDraw and ImageJ2 Overlay-based data structures. It is likely
though that your JavaFX interface will need to work differently.

In the meantime, we are happy to answer further specific questions you have
about how these classes interact.

Regards,
Curtis

On Wed, May 27, 2015 at 1:08 PM, Mongis Cyril <cyril.mongis at googlemail.com>
wrote:

> Dear all !
>
> I have been working on this new interface for ImageJ which is part of my
> PhD Thesis.
> Here is a little video showing the status of the project.
> http://cyrilmongis.net/imagejfx/imagejfx.webm
>
> I'm on the part where I start dealing with ROI, Overlay and all. However,
> I don't know to which extent the Overlay/ROI data model goes. Could you
> point me to the main classes to check when implementing a UI for
> Overlay/ROI? I also have trouble understanding the concept of Overlay. If I
> understand clearly, Overlay are just set of pixel data put on top of the
> image. But also overlays can be defined by mathematic formula or just be a
> set of pixels. At the end, they just cover the image. The Overlay tool just
> generate set of pixels that represent an Overlay over the image. But in
> ImageJ, the selection tools that we use don't really produce Overlay, they
> produce selection I guess. Are those selection ROI ? I also don't see the
> ROI in the imagej-common repository ? Are they simply in the scijava
> repository ?
>
> So in the end, could someone help by explaning or pointing ressources
> explaning how the classes involved in ROIs and Overlays interact between
> each other ?
>
> I have already check the OverlayService, but I couldn't find any
> RoiService :-(
>
> Cheers,
>
> Cyril
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/ab37ff21/attachment.html>

From ctrueden at wisc.edu  Thu May 28 16:51:43 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 16:51:43 -0500
Subject: [ImageJ-devel] TANGO
In-Reply-To: <8371DE40-6056-4810-A9E4-A19E5C822931@gmail.com>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
	<CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
	<8371DE40-6056-4810-A9E4-A19E5C822931@gmail.com>
Message-ID: <CADN69ynLR+F-VAOmZ32FZ-xxv-eQOOLdhwz4cdbxWActq=QZmw@mail.gmail.com>

> I take it there is no easy way to 'downgrade' from rc-30 back to rc-29?

No. But 2.0.0-rc-29 is still ImageJ2, not ImageJ1.

However, you can try downloading the Life-Line versions of Fiji from:
  http://fiji.sc/Downloads

Maybe one of those will work better with the Tango update site.

Regards,
Curtis

On Thu, May 28, 2015 at 4:45 PM, Alexandra <alexandra.bortnick at gmail.com>
wrote:

> I take it there is no easy way to 'downgrade' from rc-30 back to rc-29?
>
> -Alex
>
> On May 28, 2015, at 2:25 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>
> Hi Alex,
>
> > One of the developers of TANGO told me to use ImageJ1 because he
> > wasn't sure how the switch between libraries is managed. Do I need to
> > reinstall in this case?
>
> When he says "use ImageJ1" he means:
>   http://imagej.net/download.html
>
> But please, encourage the TANGO developer to contact the imagej-devel
> mailing list to discuss any roadblocks to TANGO working properly in
> ImageJ2. It would be best for TANGO to be distributed via an ImageJ update
> site, which are only supported in ImageJ2.
>
> Regards,
> Curtis
>
> On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick <
> alexandra.bortnick at gmail.com> wrote:
>
>> Hi Curtis,
>>
>> One of the developers of TANGO told me to use ImageJ1 because he wasn't
>> sure how the switch between libraries is managed. Do I need to reinstall in
>> this case?
>>
>> -Alex
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/4ee3f9f7/attachment.html>

From ctrueden at wisc.edu  Thu May 28 17:11:05 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 17:11:05 -0500
Subject: [ImageJ-devel] Stack overflow error with screen size computation
In-Reply-To: <93F69DFC-3452-42AE-A583-C917387F400F@nih.gov>
References: <CADN69y=jQ6u_3RtiVmzpLrKTe3eSh9BpLOYs1PHucbmJxGq90A@mail.gmail.com>
	<93F69DFC-3452-42AE-A583-C917387F400F@nih.gov>
Message-ID: <CADN69ymyXuWSU8btr+N6WLKxkgMFZvsNAJ-=x5qTYR7rGo2msQ@mail.gmail.com>

Hi Wayne,

[CCing imagej-devel, since this discussion may be of interest to other
developers, particularly my colleague Mark Hiner who is working on these
issues now.]

> The ImageJ launcher does not work with ImageJ1 on OS X because it
> assumes the plugins directory is in the ImageJ.app directory when it
> is actually in the same directory as ImageJ.app.

Thanks, I filed an issue so we won't forget:
  https://github.com/imagej/imagej-launcher/issues/31

Mark Hiner's main project for the summer is issues with launching and
distribution, so hopefully we'll see some progress on the robustness,
especially on OS X.

> Another problem with the launcher on OS X is that I have not found a
> way to get it to use an embedded JRE. I tried putting a Java 8 JRE in
> Image.app/jre but the launcher did not use it.

I filed an issue for that too:
  https://github.com/imagej/imagej-launcher/issues/32

Although I did not test it with the latest version of the launcher since
Johannes improved the Java version selection.

Regards,
Curtis


On Fri, Mar 27, 2015 at 11:37 AM, Rasband, Wayne (NIH/NIMH) [E] <
rasbandw at mail.nih.gov> wrote:

> > On Mar 25, 2015, at 12:31 PM, Curtis Rueden <ctrueden at WISC.EDU> wrote:
> >
> > Hi Wayne,
> >
> > A bug report came up in the imagejdev IRC chat room today [1], about a
> > StackOverflowError that sometimes happens when ImageJ starts up [2]. In
> > this user's case, he said it was due to the use of three monitors.
> > Personally, I have also seen the issue when I "ssh -X" to a remote server
> > and run ImageJ from there. Looking at the code, I am guessing it would
> be a
> > straightforward bug to address, by avoiding recursive cycles between
> those
> > three methods.
>
> Hi Curtis,
>
> This bug should be fixed in the latest ImageJ daily build (1.49q22).
> Please ask the user with three monitors to verify that the fix works.
>
> Here is a bug report for you. The ImageJ launcher does not work with
> ImageJ1 on OS X because it assumes the plugins directory is in the
> ImageJ.app directory when it is actually in the same directory as
> ImageJ.app. Is there a way to fix this problem, or to work around it?
>
> Another problem with the launcher on OS X is that I have not found a way
> to get it to use an embedded JRE. I tried putting a Java 8 JRE in
> Image.app/jre but the launcher did not use it. I would like to include the
> JRE with ImageJ on OS X and avoid all the problems associated with
> requiring the user to install an Apple or Oracle Java. I would also like to
> be able to test ImageJ on the latest and greatest machines at Apple stores
> but I can not longer do this because you are no longer able to install Java
> without an administrator password.
>
> Best regards,
>
> -wayne
>
>
> >
> > Regards,
> > Curtis
> >
> > [1]
> >
> http://code.imagej.net/chatlogs/imagejdev?times=prefix&start-date=2015-03-25&start-time=0400&end-date=2015-03-25&end-time=1000
> >
> > [2] http://pastebin.com/Fa2K8xdH
> >
> > --
> > ImageJ mailing list: http://imagej.nih.gov/ij/list.html
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/c70ca152/attachment-0001.html>

From ctrueden at wisc.edu  Thu May 28 20:52:50 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 28 May 2015 20:52:50 -0500
Subject: [ImageJ-devel] 3D Viewer vs. ClearVolume
In-Reply-To: <BEFF1C4B-1CAE-4A81-9E6E-E90BD5CE4043@mpi-cbg.de>
References: <FFBD8B57-B551-4EE7-887B-3FDE402AA1F7@mpi-cbg.de>
	<CADN69ym=ZJcjYKjnroY1tF8MJvhnsPMpRM_BpsDKT3t8BNQxdg@mail.gmail.com>
	<837CBDCC-28C4-43AE-A18F-1B07C06D1CCA@mpi-cbg.de>
	<CADN69y=RJ49OaC1HCrDE2JZxxGZ5RFw8ncW5ay7pC1ifCJAcdw@mail.gmail.com>
	<BEFF1C4B-1CAE-4A81-9E6E-E90BD5CE4043@mpi-cbg.de>
Message-ID: <CADN69ykDbgurh0wFtjRXGXCNTQGLsrKs9=4+ynimBdeg8CtQsg@mail.gmail.com>

Hi Florian,

Thanks for the update!

> if you know better place to discuss this then email? sure, let me
> know? I could cut and paste this mail easily into a forum type thing
> of your choice...

I have CCed the imagej-devel list, since this discussion may interest other
developers. I chose imagej-devel instead of fiji-devel because although the
3D_Viewer plugin does not ship on the core ImageJ update site, a version of
it does ship with ImageJ1. So it is not really a "Fiji-specific" plugin.

> we switched gears and looked out for methods that could bundle our
> favorite jogl and gluegen libraries in our own ueber-jar.

I hope you guys saw this page at some point:
http://imagej.net/Uber-JAR

Indeed, shading the dependencies is the most robust way of shipping two
versions of the same libraries in ImageJ right now without causing
conflicts. There are still disadvantages though, as discussed at the above
link. But if it is working for you, that is OK.

> we had to find out that on 0 of the 5 machines we could ever start the
> 3D Viewer if we used Java7 or Java8.

All Macs? If any were Windows, did you try the updated experimental bundle
I linked before?
http://curtis.imagej.net/2015-04-09-jogl-java3d/

For one thing, that bundle uses an updated version of the 3D Viewer that
never takes the liberty of trying to install Java 3D [1].

If it would be helpful, I could also prepare OS X and/or Linux versions of
such a bundle.

> Let me know what you think and if we can help in any way.

If you guys are feeling motivated, you could do more testing on various
platforms of the code changes I have done. It would be great to get the
JOGL version of Java 3D 1.6 shipping with Fiji.

I am insanely busy through at least mid June, but will try to make time to
work on this before July 1st (since after that point, I have a moratorium
on coding in order to work on papers for a while).

Regards,
Curtis

[1] https://github.com/fiji/3D_Viewer/compare/jogl-java3d



On Thu, May 28, 2015 at 3:48 AM, Florian Jug <jug at mpi-cbg.de> wrote:

> Curtis, Mark,
>
> I have some exciting and potentially also some less exciting news!
> Loic and I sat together yesterday and only went to bed far after it was
> still yesterday? ;)
> First we started playing with some classpath isolation ideas, hoping that
> the 3D Viewer und ClearVolume could happily coexist within Fiji.
> Long story short: it was hell? and our ?lessons learned? is that such an
> attempt is only feasible if the entire interaction between the default and
> the new classpath goes via interfaces alone.
>
> Then we switched gears and looked out for methods that could bundle our
> favorite jogl and gluegen libraries in our own ueber-jar. That sounds bad,
> doesn?t it? Yes it does? BUT: we figured that if we can at the same time
> rename the package names of jogl and gluegen + modify all our internal code
> such that only these modified packages are used we would also have our
> separate version of these libraries and could even coexist in the same
> classloader.
>
> The solutions turns out to be quite easy and uses a very nice and potent
> Maven plugin you might know: *maven-shade-plugin*
>        <plugin>
>         <groupId>org.apache.maven.plugins</groupId>
>         <artifactId>maven-shade-plugin</artifactId>
>         <version>2.3</version>
>
>
> <executions>
>           <execution>
>
>
>             <phase>package</phase>
>             <goals>
>               <goal>shade</goal>
>             </goals>
>
>
>             <configuration>
>
>
>             <artifactSet>
>             <includes>
>             <include>net.clearvolume:cleargl</include>
>             <include>net.clearvolume:clearcuda</include>
>             <include>net.clearvolume:clearvolume</include>
>             <include>org.jogamp.gluegen:gluegen-rt</include>
>             <include>org.jogamp.jogl:jogl-all</include>
>             </includes>
>             </artifactSet>
>
>
> <relocations>
>                 <relocation>
>                   <pattern>javax.media.opengl</pattern>
>                   <shadedPattern>cv.javax.media.opengl</shadedPattern>
>                 </relocation>
>                </relocations>
>             </configuration>
>
>
>           </execution>
>           </execution>
>         </executions>
>       </plugin>
>
> The setup above is the ?minimal? setup we came up with late last night. We
> include our own dependencies + jogl + gluegen. From within both those
> libraries we then relocate all packages conflicting with the 3D Viewer,
> which happens to be all packages below ?javax.media.opengl?.
>
> Status quo: on 5 out of 5 machines we tried this setup ClearVolume can
> still start (when Fiji was run with Java7 or Java8) even after the 3D
> Viewer did his pollution downloads into 'ext?.
>
> *Some potentially bad news:* we had to find out that on 0 of the 5
> machines we could ever start the 3D Viewer if we used Java7 or Java8.
> Either there is some inherent issue with Java>6, or it is because we ran
> the 3D Viewer using Java6 before, he downloaded some dependencies into some
> Java6 related path, and when later we tried to run it using Java>6 the 3D
> Viewer did not check if he has all dependencies at hand. I don?t know and
> did not yet attempt to figure that out.
>
> On a fresh fiji install I did for example this:
> 1) open fiji with regular java (1.6 on mac)
> 2) run the 3D Viewer on the mitosis 5d example dataset ? he downloaded
> stuff
> 3) restart and redo ? he opens the 3d viewer
> 4) restart using Java7
> 5) fail! (see below)
>
> jug at myers-mac-7:~/Repositories/GIT/imglib2/imglib2-clearvolume (master)$
> /Applications/Fiji4tests.app/Contents/MacOS/ImageJ-macosx --java-home
> /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/
> May 28 10:38:49 myers-mac-7 ImageJ-macosx[86410] <Error>: The function
> ?CGContextErase? is obsolete and will be removed in an upcoming update.
> Unfortunately, this application, or a library it uses, is using this
> obsolete function, and is thereby contributing to an overall degradation of
> system performance.
> log4j:WARN No appenders could be found for logger
> (org.bushe.swing.event.EventService).
> log4j:WARN Please initialize the log4j system properly.
> log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for
> more info.
> [ERROR] Skipping unsupported option -port7
> version = 1.5
> Exception in thread "J3D-Renderer-1" java.lang.UnsatisfiedLinkError: no
> jogl in java.library.path
> at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1886)
> at java.lang.Runtime.loadLibrary0(Runtime.java:849)
> at java.lang.System.loadLibrary(System.java:1088)
> at
> com.sun.opengl.impl.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:189)
> at com.sun.opengl.impl.NativeLibLoader.access$000(NativeLibLoader.java:49)
> at
> com.sun.opengl.impl.NativeLibLoader$DefaultAction.loadLibrary(NativeLibLoader.java:80)
> at
> com.sun.opengl.impl.NativeLibLoader.loadLibrary(NativeLibLoader.java:103)
> at com.sun.opengl.impl.NativeLibLoader.access$200(NativeLibLoader.java:49)
> at com.sun.opengl.impl.NativeLibLoader$1.run(NativeLibLoader.java:111)
> at java.security.AccessController.doPrivileged(Native Method)
> at com.sun.opengl.impl.NativeLibLoader.loadCore(NativeLibLoader.java:109)
> at
> com.sun.opengl.impl.macosx.MacOSXGLDrawableFactory.<clinit>(MacOSXGLDrawableFactory.java:53)
> at java.lang.Class.forName0(Native Method)
> at java.lang.Class.forName(Class.java:191)
> at
> javax.media.opengl.GLDrawableFactory.getFactory(GLDrawableFactory.java:108)
> at javax.media.j3d.JoglPipeline$QueryCanvas.<init>(JoglPipeline.java:9029)
> at
> javax.media.j3d.JoglPipeline.getBestConfiguration(JoglPipeline.java:8793)
> at javax.media.j3d.Renderer.doWork(Renderer.java:514)
> at javax.media.j3d.J3dThread.run(J3dThread.java:275)
>
> *ClearVolume is NOT installed in this Fiji yet.*
>
> Anyways? this was my coredump of today. Let me know what you think and if
> we can help in any way.
> For us it was important that you guys are informed about how ClearVolume
> deals with the version conflict of jogl at the moment.
>
> Let us know if you have questions or concerns.
>
> Cheers,
> Florian
> :)
>
> PS: if you know better place to discuss this then email? sure, let me
> know? I could cut and paste this mail easily into a forum type thing of
> your choice...
>
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>
> MPI of Molecular Cell Biology and Genetics
> Group: Gene Myers
> Pfotenhauer Strasse 108
> 01307 Dresden
> Germany
>
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>
>
>
> On 13 May 2015, at 21:01, Curtis Rueden <ctrueden at wisc.edu> wrote:
>
> Hi Florian,
>
> > a little bit of waiting time will solve all our problems. :)
>
> :-)
>
> I wish I could promise it will only be a little bit. Good news is: Mark's
> current main project is to solve the various launcher / Java 8 / OS X /
> Java 3D issues, since they are pretty much all related. Bad news is: it's
> amazing how little time we actually spend these days working on our "main
> projects"...
>
> > we should check out https://github.com/imagej/imagej/issues/120 ?
> > if the mavenized jogl is all we need? that would be perfect!
>
> Just to clarify: JOGL is already Mavenized. It was the hharrison Java 3D
> fork that wasn't yet Maven based. So I did that work, and it lives in my
> fork right now:
>
> * http://github.com/ctrueden/java3d-core/compare/maven
> * http://github.com/ctrueden/java3d-utils/compare/maven
> * http://github.com/ctrueden/vecmath/compare/maven
>
> Harvey expressed interest in merging it, although he's slow to respond
> (probably he's super busy).
>
> The worst case scenario is that we move the Maven-based Java 3D fork to
> scijava org and maintain it there. But hopefully it won't come to that?the
> JOGL community seems very helpful and active so far.
>
> Regards,
> Curtis
>
>
> On Wed, May 13, 2015 at 1:51 PM, Florian Jug <jug at mpi-cbg.de> wrote:
>
>> Hi Curtis,
>>
>> thanks, that was very helpful.
>> For it means that a little bit of waiting time will solve all our
>> problems. :)
>>
>> @Loic: we should check out https://github.com/imagej/imagej/issues/120 ?
>> if the mavenized jogl is all we need? that would be perfect!
>>
>> Thanks for you response Curtis,
>> Florian
>>
>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>>
>> MPI of Molecular Cell Biology and Genetics
>> Group: Gene Myers
>> Pfotenhauer Strasse 108
>> 01307 Dresden
>> Germany
>>
>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>>
>>
>>
>> On 13 May 2015, at 20:37, Curtis Rueden <ctrueden at wisc.edu> wrote:
>>
>> Hi Florian,
>>
>> > We would love to see the 3D Viewer and ClearVolume to coexist in Fiji.
>> > However, for this to become reality we do face the problem of
>> > mismatching dependencies. 3D Viewer depends on Java 3D >= 1.5 (Jogl
>> > 1), while ClearVolume depends on Jogl 2.2.4.
>>
>> I have recently been working on updating ImageJ to use the JOGL version
>> of Java 3D 1.6, currently in prerelease.
>>
>> This issue has the details so far:
>> https://github.com/imagej/imagej/issues/120
>>
>> In short, there is already an experimental version of Fiji that bundles
>> JOGL 2.2, the Java 3D 1.6 fork using it [1], and an updated version of the
>> 3D Viewer that removes some of the "old Java 3D" cruft.
>>
>> So far, it seems to work pretty well. The plan is to upgrade Fiji across
>> the board, so that Java 3D no longer has to be installed into the JRE, but
>> rather can ship with ImageJ just like any other dependency.
>>
>> > 1. 3D Viewer gets upgraded to the latest Java3D which is based on Jogl
>> > 2. (see https://github.com/hharrison/java3d-core) If this version
>> > turns out to be 100% compatible, which it should, then the work to
>> > upgrade should be minimal.
>>
>> Yep, right on. That's the option we're going for, and it seems to work
>> well so far. More testing needed, though.
>>
>> > 2. Since 3D Viewer downloads some dependencies on first start ? we
>> > could do the same in CV + manually copy the right versions into place
>> > if a user attempts to start one of the two tools. This is ugly, but
>> > would at least allow switching between the 2 3D viewers somehow.
>>
>> Actually, I would strongly prefer that ImageJ plugins not take the
>> liberty of downloading more things outside of the ImageJ Updater paradigm.
>> It makes things really messy. I'm glad we're moving toward a version of
>> Java 3D where the 3D Viewer no longer needs to do that.
>>
>> > 3. Classloader isolation ? I know what the idea is, but I have no clue
>> > how we could set this up. This would be a somewhat clean solution but?
>> > is it really what we want?
>>
>> OSGi. We've discussed it before. It's a big can of worms, which we have
>> decided to avoid indefinitely, since it makes things too complicated for
>> casual developers. Perhaps a compelling reason to use it will crop up, but
>> not so far.
>>
>> (BTW: KNIME already uses OSGi. So for people who need OSGi downstream, we
>> already have a solution for that. We just don't want to require it for the
>> core SciJava software stack.)
>>
>> Regards,
>> Curtis
>>
>> On Wed, May 13, 2015 at 12:31 PM, Florian Jug <jug at mpi-cbg.de> wrote:
>>
>>> Hi Curtis,
>>>
>>> we write directly to you and are not posting this on some mailing list
>>> or more public place because we really want to have your opinion.
>>> As soon as we come to some conclusion on this 'private channel' we are
>>> more then happy to write corresponding texts that live in the cloud and can
>>> be found by anybody interested in this topic.
>>>
>>> We would love to see the 3D Viewer and ClearVolume to coexist in Fiji.
>>> However, for this to become reality we do face the problem of mismatching
>>> dependencies.
>>> 3D Viewer depends on Java 3D >= 1.5 (Jogl 1), while ClearVolume depends
>>> on Jogl 2.2.4.
>>>
>>> We see X ways out, but we are happy to learn about other options if you
>>> see any:
>>>
>>>    1. 3D Viewer gets upgraded to the latest Java3D which is based on
>>>    Jogl 2. (see https://github.com/hharrison/java3d-core) If this
>>>    version turns out to be 100% compatible, which it should, then the work to
>>>    upgrade should be minimal.
>>>    2. Since 3D Viewer downloads some dependencies on first start ? we
>>>    could do the same in CV + manually copy the right versions into place if a
>>>    user attempts to start one of the two tools. This is ugly, but would at
>>>    least allow switching between the 2 3D viewers somehow.
>>>    3. Classloader isolation ? I know what the idea is, but I have no
>>>    clue how we could set this up. This would be a somewhat clean solution but?
>>>    is it really what we want?
>>>
>>>
>>> We would be very interested to get a core-dump of your thoughts on this.
>>>
>>> Thanks,
>>> Lo?c and Florian
>>>
>>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>>>
>>> MPI of Molecular Cell Biology and Genetics
>>> Group: Gene Myers
>>> Pfotenhauer Strasse 108
>>> 01307 Dresden
>>> Germany
>>>
>>> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>>>
>>>
>>>
>>>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150528/778e9576/attachment-0001.html>

From rasbandw at mail.nih.gov  Thu May 28 23:03:59 2015
From: rasbandw at mail.nih.gov (Rasband, Wayne (NIH/NIMH) [E])
Date: Fri, 29 May 2015 04:03:59 +0000
Subject: [ImageJ-devel] Stack overflow error with screen size computation
In-Reply-To: <CADN69ymyXuWSU8btr+N6WLKxkgMFZvsNAJ-=x5qTYR7rGo2msQ@mail.gmail.com>
References: <CADN69y=jQ6u_3RtiVmzpLrKTe3eSh9BpLOYs1PHucbmJxGq90A@mail.gmail.com>
	<93F69DFC-3452-42AE-A583-C917387F400F@nih.gov>
	<CADN69ymyXuWSU8btr+N6WLKxkgMFZvsNAJ-=x5qTYR7rGo2msQ@mail.gmail.com>
Message-ID: <BF70438C-C6E1-4016-B83F-22BE30EAA37D@nih.gov>

Hi Curtis,

> On May 28, 2015, at 6:11 PM, Curtis Rueden <ctrueden at WISC.EDU> wrote:
> 
> Hi Wayne,
> 
> [CCing imagej-devel, since this discussion may be of interest to other developers, particularly my colleague Mark Hiner who is working on these issues now.]
> 
> > The ImageJ launcher does not work with ImageJ1 on OS X because it
> > assumes the plugins directory is in the ImageJ.app directory when it
> > is actually in the same directory as ImageJ.app.
> 
> Thanks, I filed an issue so we won't forget:
>   https://github.com/imagej/imagej-launcher/issues/31
> 
> Mark Hiner's main project for the summer is issues with launching and distribution, so hopefully we'll see some progress on the robustness, especially on OS X.
> 
> > Another problem with the launcher on OS X is that I have not found a
> > way to get it to use an embedded JRE. I tried putting a Java 8 JRE in
> > Image.app/jre but the launcher did not use it.
> 
> I filed an issue for that too:
>   https://github.com/imagej/imagej-launcher/issues/32
> 
> Although I did not test it with the latest version of the launcher since Johannes improved the Java version selection.

There is a OS X version of ImageJ bundled with Java 1.8.0_40 at

   http://wsr.imagej.net/download/ImageJ-osx-java8.zip

It works surprisingly well now that Oracle has fixed the bug that caused image drawing on OS X to be excruciatingly slow. It uses this simple ?run? script as a launcher:

   #!/bin/bash
   cd `dirname $0`
   ./jre/bin/java -Xmx4g -jar ij.jar

There are a couple of problems with this script. It opens a Terminal window and you cannot set the memory limit in the Edit>Options>Memory & Threads dialog box.

Best regards,

-wayne



> 
> Regards,
> Curtis
> 
> 
> On Fri, Mar 27, 2015 at 11:37 AM, Rasband, Wayne (NIH/NIMH) [E] <rasbandw at mail.nih.gov> wrote:
> > On Mar 25, 2015, at 12:31 PM, Curtis Rueden <ctrueden at WISC.EDU> wrote:
> >
> > Hi Wayne,
> >
> > A bug report came up in the imagejdev IRC chat room today [1], about a
> > StackOverflowError that sometimes happens when ImageJ starts up [2]. In
> > this user's case, he said it was due to the use of three monitors.
> > Personally, I have also seen the issue when I "ssh -X" to a remote server
> > and run ImageJ from there. Looking at the code, I am guessing it would be a
> > straightforward bug to address, by avoiding recursive cycles between those
> > three methods.
> 
> Hi Curtis,
> 
> This bug should be fixed in the latest ImageJ daily build (1.49q22). Please ask the user with three monitors to verify that the fix works.
> 
> Here is a bug report for you. The ImageJ launcher does not work with ImageJ1 on OS X because it assumes the plugins directory is in the ImageJ.app directory when it is actually in the same directory as ImageJ.app. Is there a way to fix this problem, or to work around it?
> 
> Another problem with the launcher on OS X is that I have not found a way to get it to use an embedded JRE. I tried putting a Java 8 JRE in Image.app/jre but the launcher did not use it. I would like to include the JRE with ImageJ on OS X and avoid all the problems associated with requiring the user to install an Apple or Oracle Java. I would also like to be able to test ImageJ on the latest and greatest machines at Apple stores but I can not longer do this because you are no longer able to install Java without an administrator password.
> 
> Best regards,
> 
> -wayne
> 
> 
> >
> > Regards,
> > Curtis
> >
> > [1]
> > http://code.imagej.net/chatlogs/imagejdev?times=prefix&start-date=2015-03-25&start-time=0400&end-date=2015-03-25&end-time=1000
> >
> > [2] http://pastebin.com/Fa2K8xdH
> >
> > --
> > ImageJ mailing list: http://imagej.nih.gov/ij/list.html
> 
> 


From thomas.boudier at snv.jussieu.fr  Fri May 29 00:07:52 2015
From: thomas.boudier at snv.jussieu.fr (Thomas Boudier)
Date: Fri, 29 May 2015 13:07:52 +0800
Subject: [ImageJ-devel] TANGO
In-Reply-To: <CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
	<CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
Message-ID: <5567F428.7030003@snv.jussieu.fr>

Dear Alex and IJ2 developers,

TANGO uses its own library for image processing and object analysis. We 
use ImageJ and IJ1 mainly for opening images and drawing Rois of our 3D 
objects as a overlay of the image. We would be happy to discuss more 
about integration of TANGO into IJ2 . For completeness if you want to 
add plugins into TANGO (filtering, segmentation, or measurements),you 
can use our own MCIB library. We however already provide basic functions 
to exchange image data between TANGO and IJ1, maybe we should write, 
using some help, basic data exchange between TANGO and IJ2.

Best,

Thomas

PS : in copy the main developer of TANGO, Jean

On 29/05/15 05:25, Curtis Rueden wrote:
> Hi Alex,
>
> > One of the developers of TANGO told me to use ImageJ1 because he
> > wasn't sure how the switch between libraries is managed. Do I need to
> > reinstall in this case?
>
> When he says "use ImageJ1" he means:
> http://imagej.net/download.html
>
> But please, encourage the TANGO developer to contact the imagej-devel 
> mailing list to discuss any roadblocks to TANGO working properly in 
> ImageJ2. It would be best for TANGO to be distributed via an ImageJ 
> update site, which are only supported in ImageJ2.
>
> Regards,
> Curtis
>
> On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick 
> <alexandra.bortnick at gmail.com <mailto:alexandra.bortnick at gmail.com>> 
> wrote:
>
>     Hi Curtis,
>
>     One of the developers of TANGO told me to use ImageJ1 because he
>     wasn't sure how the switch between libraries is managed. Do I need
>     to reinstall in this case?
>
>     -Alex
>
>
>
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150529/fc520d83/attachment.html>

From cyril.mongis at googlemail.com  Fri May 29 03:57:30 2015
From: cyril.mongis at googlemail.com (Mongis Cyril)
Date: Fri, 29 May 2015 10:57:30 +0200
Subject: [ImageJ-devel] Getting channel names from a Dataset object
Message-ID: <CAJf7PRdigkvGp6whFcOuAziamvNBqL5Z0sZdJ0RpWXSPS6Gf5Q@mail.gmail.com>

Dear all,

I would like to display the channel names when available. I can retrieve
the Axis and detect which one is the channel axis. However, I see nowhere
where I could get the channel name. Are those informations accessible from
the Dataset object or should I use an other library to re-read the metadata
?

Cheers,

Cyril
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150529/03448c12/attachment.html>

From schmid at iap.tuwien.ac.at  Fri May 29 04:02:06 2015
From: schmid at iap.tuwien.ac.at (Michael Schmid)
Date: Fri, 29 May 2015 11:02:06 +0200
Subject: [ImageJ-devel] Problems running Versatile Wand in batch mode
In-Reply-To: <CADN69ymbm86DSYgS0Z=85SeGGCfDvVO7GtnVHLfYkp832DfJBw@mail.gmail.com>
References: <CANOyR64M_g=1CpJng5PEtOF1zkzPv9MfvLaw59-j4OZPpk1OgA@mail.gmail.com>
	<E1A93E58-4DCE-48C4-9E79-C8DB9FD2894B@iap.tuwien.ac.at>
	<CANOyR67dDQG-ii3ckytSWCmgWqv0DKe8RCVo_Qjs+YbL9pLuPA@mail.gmail.com>
	<C02777A4-953F-44B0-9E9A-03578E882441@nih.gov>
	<CANOyR67LKHr4Bcgs+jJfb8ekSLt8nxpya93kHTbWq8-H_0YkUA@mail.gmail.com>
	<FAD7E785-6261-4F3C-B3AA-08EF5F1B96CE@nih.gov>
	<5A01E5F0-D745-48DD-9DC8-90ECF4EB648F@iap.tuwien.ac.at>
	<CADN69ynn21553Zr1CrOA1XCRcfepC+od6wKqL4hQNUsXgxKZvg@mail.gmail.com>
	<C414254E-C9C7-4210-A61B-6ED679C5FD0E@iap.tuwien.ac.at>
	<CADN69ymbm86DSYgS0Z=85SeGGCfDvVO7GtnVHLfYkp832DfJBw@mail.gmail.com>
Message-ID: <5B1D9118-5E49-4040-B205-E50F6431A123@iap.tuwien.ac.at>

Hi Curtis,

Thank you for the additional information.

It seems that Avital's problem was related to compiling, not to the patches of the IJ1 code in Fiji.

Concerning the 'Compile&Run' command, this is EXTREMELY handy and it would be a major step backwards if this is not supported any more! 
If I get the java sources of a plugin, and it does not work exactly as I want, I can quickly try any changes that come into my mind or insert debugging code, try/catch statements, etc., and with a single click on Compile&Run (and the RETURN key to accept the same filename as before) I am already testing it on an image.  This is independent of any programming environment, I can do it on any computer anywhere in a lab, or on the laptop of a colleague of mine who has a problem and asks me for help.  And there won't be any automatic update reverting it to the published version.

Also, for publishing a plugin, it's simpler to provide the java code on a web page with the description than preparing an ImageJ update site in addition.  I can also send experimental plugin code to others by email, carry it around on a USB stick, etc.
All this would be gone without Compile&Run!

Best regards,

Michael
________________________________________________________________
On May 28, 2015, at 20:42, Curtis Rueden wrote:

> Hi Michael,
> 
> [Added the imagej-devel mailing list to CC, since this discussion may interest other ImageJ plugin developers.]
> 
> > A quick search for PlugInFilterRunner in the ij1-patcher seems to
> > indicate that the PlugInFilterRunner is not patched.
> 
> There is another project on top of ij1-patcher that does the bulk of the actual patching for ImageJ2:
> 
>     https://github.com/imagej/imagej-legacy
> 
> And it does have logic that affects PlugInFilters:
> 
>     https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/IJ1Helper.java#L591-L621
> 
> But at first glance, this is only used for the Script Editor's Run command in case the Java code being run is a PlugInFilter:
> 
>     https://github.com/imagej/imagej-legacy/blob/imagej-legacy-0.15.0/src/main/java/net/imagej/legacy/LegacyJavaRunner.java#L54
> 
> I apologize that I will not have time to dig into this issue more over the summer -- but I'm insanely busy with work on the ImageJ Common data model and ImageJ OPS and SCIFIO APIs, ImageJ-OMERO integration, IT infrastructure resources and Fiji plugin maintenance, upcoming Madison ImageJ conference planning, paper writing, etc.
> 
> Backwards compatibility with ImageJ1 is extremely challenging, especially as things continue to evolve -- e.g., the major changes to how Java works on OS X, and the breaking changes of Java 8. The best we can do right now is to prioritize work that critically affects a large number of ImageJ users, where no easy workaround is possible. In the case of compiling Java plugins, there are several ways of doing it that do not require "Compile and Run" and similar, so for now that's what I'll recommend. I hope that plugin developers will make installation easy for their users by creating ImageJ update sites, rather than shipping bare .java files.
> 
> Regards,
> Curtis
> 
> P.S. When searching for code, you might try http://search.imagej.net/ and click the GitHub button.
> 
> 
> On Thu, May 21, 2015 at 3:01 PM, Michael Schmid <schmid at iap.tuwien.ac.at> wrote:
> Hi Curtis,
> 
> thank you!
> My fault was looking at the fiji, not the imagej repository.
> 
> A quick search for PlugInFilterRunner in the ij1-patcher seems to indicate that the PlugInFilterRunner is not patched.
> I agree that the ij1-patcher is not easy too understand, and I did not find anything that looks like it could cause the problem of Avital.
> 
> Michael
> ________________________________________________________________
> Michael Schmid                    email: schmid at iap.tuwien.ac.at
> Institut f?r Angewandte Physik, Technische Universit?t Wien
> Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
> Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
> ________________________________________________________________
> 
> On May 21, 2015, at 21:23, Curtis Rueden wrote:
> 
> > Hi Michael,
> >
> > > [I must admit, I know nothing about how Fiji modifies ImageJ; in a
> > > quick search I did not find anything on fiji.sc or the github]
> >
> > The relevant project is:
> > https://github.com/imagej/ij1-patcher/
> >
> > But digging into it is a substantial endeavor.
> >
> > Regards,
> > Curtis
> >
> > On Thu, May 21, 2015 at 1:35 PM, Michael Schmid <schmid at iap.tuwien.ac.at> wrote:
> > Hi Wayne,
> >
> > thank you for finding this out!
> >
> > It must be a strange Fiji bug! When called like this, the Versatile Wand behaves like an ordinary ExtendedPlugInFilter. It uses the ImagePlus passed to the showDialog method, which comes directly from WindowManager.getCurrentImage() executed by the PlugInFilterRunner.
> >
> > [I must admit, I know nothing about how Fiji modifies ImageJ; in a quick search I did not find anything on fiji.sc or the github]
> >
> > Best regards,
> >
> > Michael
> > ________________________________________________________________
> > Michael Schmid                    email: schmid at iap.tuwien.ac.at
> > Institut f?r Angewandte Physik, Technische Universit?t Wien
> > Wiedner Hauptstr. 8-10/E134, A 1040 Wien, Austria
> > Tel. +43 1 58801-13452 or -13453, Fax +43 1 58801 13499
> > ________________________________________________________________
> >
> > On May 21, 2015, at 18:54, Rasband, Wayne (NIH/NIMH) [E] wrote:
> >
> > > Dear Avital,
> > >
> > > This is a Fiji issue. You should be able to work around it by deleting the file ?Versatile_Wand.java" (location is shown in Console error messages), copying Versatile_Wand.class into the Fiji.app/plugins folder, and restarting Fiji. I have attached a copy of Versatile_Wand.class or you can download it from the Versatile Wand webpage.
> > >
> > > Best regards,
> > >
> > > -wayne
> > >
> > >
> > >> On May 21, 2015, at 3:03 AM, Avital Steinberg <steinbergavital at GMAIL.COM> wrote:
> > >>
> > >> Hi Wayne,
> > >> When I run your code (in which you create 2 images), I get an error message - ROI manager, "the active image does not have a selection". Also, it didn't form an ROI - the ROI manager is empty.
> > >>
> > >> There is also a console window that shows red warnings - I've had it for a long time, ever since I upgraded imageJ. This console shows up both on my mac and also on my Linux machine. I don't remember when it first showed up. It didn't bother me, since everything was working then.
> > >>
> > >> Are the attached warning messages related to the problem?
> > >>
> > >> Thanks,
> > >> Avital
> > >>
> > >> On Wed, May 20, 2015 at 6:42 PM, Rasband, Wayne (NIH/NIMH) [E] <rasbandw at mail.nih.gov> wrote:
> > >> Dear Avital,
> > >>
> > >> The following version of your test macro creates a selection in the saved image.
> > >>
> > >> Best regards,
> > >>
> > >> -wayne
> > >>
> > >>   setBatchMode(true);
> > >>   newImage("Untitled", "8-bit ramp", 500, 500, 1);
> > >>   image1ID = getImageID();
> > >>   newImage("Untitled", "8-bit ramp", 500, 500, 1);
> > >>   image2ID = getImageID();
> > >>   selectImage(image1ID);
> > >>   if(isActive(image1ID))
> > >>      print("The first image is active");
> > >>   else
> > >>      print("The first image isn't active");
> > >>   if (isActive(image2ID))
> > >>      print("The second image is active");
> > >>   else
> > >>      print("The second image isn't active");
> > >>   run("Gaussian Blur...", "sigma=2");
> > >>   run("Set Scale...", "distance=0");
> > >>   run("Versatile Wand", "value=60 color=-100 gradient=10 connectedness=8-connected x=2 y=2 do");
> > >>   run("ROI Manager...");
> > >>   roiManager("Add");
> > >>   saveAs("tiff", getDirectory("home")+"test.tif?)
> > >>
> > >>
> > >>> On May 20, 2015, at 5:35 AM, Avital Steinberg <steinbergavital at GMAIL.COM> wrote:
> > >>>
> > >>> Thanks, but the problem isn't solved. Can anyone else check if they're
> > >>> having similar problems running this code? Does this code create a
> > >>> selection in the saved image also for you?
> > >>>
> > >>> setBatchMode(true);
> > >>> open();
> > >>> image1ID = getImageID();
> > >>> open();
> > >>> image2ID = getImageID();
> > >>> selectImage(image1ID);
> > >>> if(isActive(image1ID)){
> > >>>   print("The first image is active");
> > >>> }
> > >>> else {
> > >>>   print("The first image isn't active");
> > >>> }
> > >>>
> > >>> if(isActive(image2ID)){
> > >>>   print("The second image is active");
> > >>> }
> > >>> else {
> > >>>   print("The second image isn't active");
> > >>> }
> > >>> makePoint(1854, 726);
> > >>> run("Gaussian Blur...", "sigma=2");
> > >>> run("Set Scale...", "distance=0");
> > >>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>> connectedness=8-connected x=2 y=2 do");
> > >>> run("ROI Manager...");
> > >>> roiManager("Add");
> > >>> saveAs("Tiff");
> > >>>
> > >>>
> > >>> I am using ImageJ 1.49t7, which came with Java 1.6.0_065 (64 bit). I am
> > >>> running it on a mac, but I had the same problems also on a Linux machine
> > >>> with ImageJ 1.49s and java 1.6.0_24.
> > >>>
> > >>> MakePoint isn't needed, but it's besides the point, since the bug has
> > >>> nothing to do with it and exists also without it.
> > >>>
> > >>> Thanks,
> > >>> Avital
> > >>>
> > >>> On Tue, May 19, 2015 at 6:25 PM, Michael Schmid <schmid at iap.tuwien.ac.at>
> > >>> wrote:
> > >>>
> > >>>> Hi Avital,
> > >>>>
> > >>>> sorry, I can't reproduce the problem. Your macro works; it blurs the first
> > >>>> image and does the wand selection on it. I also get the selection in the
> > >>>> ROI Manager.
> > >>>> I tried with both 8-bit grayscale as well as RGB images.
> > >>>>
> > >>>> What I don't understand is the "makePoint(1854, 726)" command; Gaussian
> > >>>> Blur does not care about point selections. So it blurs the whole image.
> > >>>>
> > >>>> I am using ImageJ 1.49u4, Java 1.6.0_45.
> > >>>>
> > >>>> Michael
> > >>>> ________________________________________________________________
> > >>>> On May 19, 2015, at 17:01, Avital Steinberg wrote:
> > >>>>
> > >>>>> Hi,
> > >>>>> I'm trying to use Versatile Wand in batch mode. The following macro works
> > >>>>> well in batch mode:
> > >>>>>
> > >>>>> setBatchMode(true);
> > >>>>> open();
> > >>>>> makePoint(1854, 726);
> > >>>>> run("Gaussian Blur...", "sigma=2");
> > >>>>> run("Set Scale...", "distance=0");
> > >>>>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>>>> connectedness=8-connected x=2 y=2 do");
> > >>>>> run("ROI Manager...");
> > >>>>> roiManager("Add");
> > >>>>> saveAs("Tiff");
> > >>>>>
> > >>>>> However - when I try to work with multiple images, select the active
> > >>>> image
> > >>>>> and then use the Versatile Wand, no selection is created:
> > >>>>>
> > >>>>> setBatchMode(true);
> > >>>>> open();
> > >>>>> image1ID = getImageID();
> > >>>>> open();
> > >>>>> image2ID = getImageID();
> > >>>>> selectImage(image1ID);
> > >>>>> if(isActive(image1ID)){
> > >>>>>  print("The first image is active");
> > >>>>> }
> > >>>>> else {
> > >>>>>  print("The first image isn't active");
> > >>>>> }
> > >>>>>
> > >>>>> if(isActive(image2ID)){
> > >>>>>  print("The second image is active");
> > >>>>> }
> > >>>>> else {
> > >>>>>  print("The second image isn't active");
> > >>>>> }
> > >>>>> makePoint(1854, 726);
> > >>>>> run("Gaussian Blur...", "sigma=2");
> > >>>>> run("Set Scale...", "distance=0");
> > >>>>> run("Versatile Wand", "value=60 color=-100 gradient=10
> > >>>> connectedness=8-connected x=2 y=2 do");
> > >>>>> run("ROI Manager...");
> > >>>>> roiManager("Add");
> > >>>>> saveAs("Tiff");
> > >>>>>
> > >>>>> Why wouldn't this script work? Only one image is active.
> > >>>>>
> > >>>>> Thank you,
> > >>>>> Avital
> > >>>>
> > >>>> --
> > >>>> ImageJ mailing list: http://imagej.nih.gov/ij/list.html
> > >>>>
> > >>>
> > >>> --
> > >>> ImageJ mailing list: http://imagej.nih.gov/ij/list.html
> > >>
> > >>
> > >> <OutputWindowsWaynesCode.jpg><ConsoleWindowRedWarnings.jpg>
> > >
> > > <Versatile_Wand.class>
> >
> >
> 
> 



From ollion at mnhn.fr  Sat May 30 11:35:54 2015
From: ollion at mnhn.fr (Jean Ollion)
Date: Sat, 30 May 2015 18:35:54 +0200
Subject: [ImageJ-devel] TANGO
In-Reply-To: <5567F428.7030003@snv.jussieu.fr>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
	<CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
	<5567F428.7030003@snv.jussieu.fr>
Message-ID: <CA+zNSK-tbo-++SxdCG4JQUrpxY=_BXaz+7fMq7ndVQUF+4CyTg@mail.gmail.com>

Hello To everyone,

There is no roadblock to tango working in ij2, the problem of Alexandra is
only due to a problem with the fiji updater, for some reason in her system
(macosx64) only tango is updated and not mcib (but it works properly in my
system, linux64). Any clue about what the problem might be?

@Curtis, in your answer to Alexandra, what do you mean by "It would be best
for TANGO to be distributed via an ImageJ update site, which are only
supported in ImageJ2" ?
For the moment our pugin Tango is distributed under FIJI via an official
update site, and works in legacy mode (uses the "old" plugin system, and
doesn't use libraries of ImageJ2). Do you mean this type of distribution
won't be supported anymore?

Best,
Jean
 Dear Alex and IJ2 developers,

TANGO uses its own library for image processing and object analysis. We use
ImageJ and IJ1 mainly for opening images and drawing Rois of our 3D objects
as a overlay of the image. We would be happy to discuss more about
integration of TANGO into IJ2 . For completeness if you want to add plugins
into TANGO (filtering, segmentation, or measurements),you can use our own
MCIB library. We however already provide basic functions to exchange image
data between TANGO and IJ1, maybe we should write, using some help, basic
data exchange between TANGO and IJ2.

Best,

Thomas

PS : in copy the main developer of TANGO, Jean

On 29/05/15 05:25, Curtis Rueden wrote:

Hi Alex,

 > One of the developers of TANGO told me to use ImageJ1 because he
> wasn't sure how the switch between libraries is managed. Do I need to
> reinstall in this case?

 When he says "use ImageJ1" he means:
  http://imagej.net/download.html

 But please, encourage the TANGO developer to contact the imagej-devel
mailing list to discuss any roadblocks to TANGO working properly in
ImageJ2. It would be best for TANGO to be distributed via an ImageJ update
site, which are only supported in ImageJ2.

 Regards,
Curtis

On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick <
alexandra.bortnick at gmail.com> wrote:

> Hi Curtis,
>
>  One of the developers of TANGO told me to use ImageJ1 because he wasn't
> sure how the switch between libraries is managed. Do I need to reinstall in
> this case?
>
>  -Alex
>
>


_______________________________________________
ImageJ-devel mailing
listImageJ-devel at imagej.nethttp://imagej.net/mailman/listinfo/imagej-devel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150530/8218c009/attachment.html>

From ctrueden at wisc.edu  Sun May 31 03:06:05 2015
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Sun, 31 May 2015 03:06:05 -0500
Subject: [ImageJ-devel] TANGO
In-Reply-To: <CA+zNSK-tbo-++SxdCG4JQUrpxY=_BXaz+7fMq7ndVQUF+4CyTg@mail.gmail.com>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
	<CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
	<5567F428.7030003@snv.jussieu.fr>
	<CA+zNSK-tbo-++SxdCG4JQUrpxY=_BXaz+7fMq7ndVQUF+4CyTg@mail.gmail.com>
Message-ID: <CADN69y=TUXf30WDAKORJsYoPuEw-iAqeM6dVtRi2sBbOs9ATOg@mail.gmail.com>

Hi Jean,

> @Curtis, in your answer to Alexandra, what do you mean by "It would be
> best for TANGO to be distributed via an ImageJ update site, which are
> only supported in ImageJ2" ?

I was responding to Alexandra's statement at the beginning of the thread:

> One of the developers of TANGO told me to use ImageJ1 because he
> wasn't sure how the switch between libraries is managed.

I understand that Tango has an official update site, which is great! What I
meant is that I think update sites are the best way to distribute complex
plugins like Tango?and update sites only work with ImageJ2, not ImageJ1.

Hence, the advice to "use ImageJ1" struck me as odd. Based on my
conversation with Alex in another thread, I think there was some confusion
about what constitutes "ImageJ1" vs. "ImageJ2", which has hopefully been
cleared up.

> for some reason in her system (macosx64) only tango is updated and not
> mcib (but it works properly in my system, linux64). Any clue about
> what the problem might be?

I took a look at the Tango update site, and noticed a couple of problems:

1) TANGO's platform-specific libraries are not in the correct locations. TANGO
ships its libraries in lib/Linux64, lib/Win64 and lib/Mac64, which will not
be added to the java.library.path properly.

- 64-bit Linux libraries should go in lib/linux64
- 64-bit Windows libraries should go in lib/win64
- OS X libraries should go in lib/macosx

You can verify this for yourself on each platform by running "ImageJ-xyz
--dry-run" and noting the value of the "-Djava.library.path" argument.
E.g., on my OS X system, it is:


  -Djava.library.path=/Applications/Fiji.app/lib/macosx:/Applications/Fiji.app/mm/macosx

2) TANGO's lib/Mac64 directory does not have any OS X native libraries in
it. I'm not sure whether this is intentional, though.

3) The TANGO update site does not ship any mcib libraries. You can verify
this by running Help > Update..., changing the View Options to "View files
of the 'Tango' update site" and typing "mcib" into the Search box.

I downloaded http://sites.imagej.net/Tango/db.xml.gz and searched it for
"mcib" and the string does not appear. This means that in fact, no files
with "mcib" in the name have ever been uploaded to the Tango update site.

Perhaps the reason TANGO works on your Linux system is that you have the
mcib library present in a different directory of the java.library.path?
Perhaps a system-wide installation? You may want to test on another fresh
Linux system, rather than only your developer system.

HTH,
Curtis


On Sat, May 30, 2015 at 11:35 AM, Jean Ollion <ollion at mnhn.fr> wrote:

> Hello To everyone,
>
> There is no roadblock to tango working in ij2, the problem of Alexandra is
> only due to a problem with the fiji updater, for some reason in her system
> (macosx64) only tango is updated and not mcib (but it works properly in my
> system, linux64). Any clue about what the problem might be?
>
> @Curtis, in your answer to Alexandra, what do you mean by "It would be
> best for TANGO to be distributed via an ImageJ update site, which are only
> supported in ImageJ2" ?
> For the moment our pugin Tango is distributed under FIJI via an official
> update site, and works in legacy mode (uses the "old" plugin system, and
> doesn't use libraries of ImageJ2). Do you mean this type of distribution
> won't be supported anymore?
>
> Best,
> Jean
>  Dear Alex and IJ2 developers,
>
> TANGO uses its own library for image processing and object analysis. We
> use ImageJ and IJ1 mainly for opening images and drawing Rois of our 3D
> objects as a overlay of the image. We would be happy to discuss more about
> integration of TANGO into IJ2 . For completeness if you want to add plugins
> into TANGO (filtering, segmentation, or measurements),you can use our own
> MCIB library. We however already provide basic functions to exchange image
> data between TANGO and IJ1, maybe we should write, using some help, basic
> data exchange between TANGO and IJ2.
>
> Best,
>
> Thomas
>
> PS : in copy the main developer of TANGO, Jean
>
> On 29/05/15 05:25, Curtis Rueden wrote:
>
> Hi Alex,
>
>  > One of the developers of TANGO told me to use ImageJ1 because he
> > wasn't sure how the switch between libraries is managed. Do I need to
> > reinstall in this case?
>
>  When he says "use ImageJ1" he means:
>   http://imagej.net/download.html
>
>  But please, encourage the TANGO developer to contact the imagej-devel
> mailing list to discuss any roadblocks to TANGO working properly in
> ImageJ2. It would be best for TANGO to be distributed via an ImageJ update
> site, which are only supported in ImageJ2.
>
>  Regards,
> Curtis
>
> On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick <
> alexandra.bortnick at gmail.com> wrote:
>
>> Hi Curtis,
>>
>>  One of the developers of TANGO told me to use ImageJ1 because he wasn't
>> sure how the switch between libraries is managed. Do I need to reinstall in
>> this case?
>>
>>  -Alex
>>
>>
>
>
> _______________________________________________
> ImageJ-devel mailing listImageJ-devel at imagej.nethttp://imagej.net/mailman/listinfo/imagej-devel
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150531/07d90aad/attachment.html>

From ollion at mnhn.fr  Sun May 31 04:52:13 2015
From: ollion at mnhn.fr (Jean Ollion)
Date: Sun, 31 May 2015 11:52:13 +0200
Subject: [ImageJ-devel] TANGO
In-Reply-To: <CADN69y=TUXf30WDAKORJsYoPuEw-iAqeM6dVtRi2sBbOs9ATOg@mail.gmail.com>
References: <CAGxO8QqBk4pgtUL98dL5PzLW=tpiwBdfcBE=2khh+7S5F=sNbQ@mail.gmail.com>
	<CADN69y=2R4d7XJjdT+qz=Q2CTP+bLFMYsoDDaRB0B2VL7_SrUw@mail.gmail.com>
	<5567F428.7030003@snv.jussieu.fr>
	<CA+zNSK-tbo-++SxdCG4JQUrpxY=_BXaz+7fMq7ndVQUF+4CyTg@mail.gmail.com>
	<CADN69y=TUXf30WDAKORJsYoPuEw-iAqeM6dVtRi2sBbOs9ATOg@mail.gmail.com>
Message-ID: <CA+zNSK-DiXdVaN1P3GWStru28DboomfPbjbZY0akewTPxfaOhw@mail.gmail.com>

Hello Curtis,
Thank you for your detailed answer.
Another developer took care of the distribution on the fiji update site so
i'm not aware of these problems i will look at it. Though I think the
system specific files are only installation scripts for the mongodb
database, and do not need to be included in the java.library.path

About the confusion Ij1/Ij2 yes it has been cleared up, thank you. i wasn't
aware that fiji was already ij2 so when i said "use imagej1" it actually
meant "stay in legacy mode", but anyway it wasn'f the problem.

About mcib, it is an independent update site, and used as a dependency of
tango (this is documented on tango's website but still not on the readme
file of the update site, wich is bad!). We already tested this installation
on fresh linux, windows and macosx systems, including Alexandra's system.
The problem Alexandra is experimenting is recent, i am trying to solve it
with her, if we don't manage, i will ask you for advice.
Best,
Jean
Le 31 mai 2015 10:06, "Curtis Rueden" <ctrueden at wisc.edu> a ?crit :

> Hi Jean,
>
> > @Curtis, in your answer to Alexandra, what do you mean by "It would be
> > best for TANGO to be distributed via an ImageJ update site, which are
> > only supported in ImageJ2" ?
>
> I was responding to Alexandra's statement at the beginning of the thread:
>
> > One of the developers of TANGO told me to use ImageJ1 because he
> > wasn't sure how the switch between libraries is managed.
>
> I understand that Tango has an official update site, which is great! What
> I meant is that I think update sites are the best way to distribute complex
> plugins like Tango?and update sites only work with ImageJ2, not ImageJ1.
>
> Hence, the advice to "use ImageJ1" struck me as odd. Based on my
> conversation with Alex in another thread, I think there was some confusion
> about what constitutes "ImageJ1" vs. "ImageJ2", which has hopefully been
> cleared up.
>
> > for some reason in her system (macosx64) only tango is updated and not
> > mcib (but it works properly in my system, linux64). Any clue about
> > what the problem might be?
>
> I took a look at the Tango update site, and noticed a couple of problems:
>
> 1) TANGO's platform-specific libraries are not in the correct locations. TANGO
> ships its libraries in lib/Linux64, lib/Win64 and lib/Mac64, which will not
> be added to the java.library.path properly.
>
> - 64-bit Linux libraries should go in lib/linux64
> - 64-bit Windows libraries should go in lib/win64
> - OS X libraries should go in lib/macosx
>
> You can verify this for yourself on each platform by running "ImageJ-xyz
> --dry-run" and noting the value of the "-Djava.library.path" argument.
> E.g., on my OS X system, it is:
>
>
>   -Djava.library.path=/Applications/Fiji.app/lib/macosx:/Applications/Fiji.app/mm/macosx
>
> 2) TANGO's lib/Mac64 directory does not have any OS X native libraries in
> it. I'm not sure whether this is intentional, though.
>
> 3) The TANGO update site does not ship any mcib libraries. You can verify
> this by running Help > Update..., changing the View Options to "View files
> of the 'Tango' update site" and typing "mcib" into the Search box.
>
> I downloaded http://sites.imagej.net/Tango/db.xml.gz and searched it for
> "mcib" and the string does not appear. This means that in fact, no files
> with "mcib" in the name have ever been uploaded to the Tango update site.
>
> Perhaps the reason TANGO works on your Linux system is that you have the
> mcib library present in a different directory of the java.library.path?
> Perhaps a system-wide installation? You may want to test on another fresh
> Linux system, rather than only your developer system.
>
> HTH,
> Curtis
>
>
> On Sat, May 30, 2015 at 11:35 AM, Jean Ollion <ollion at mnhn.fr> wrote:
>
>> Hello To everyone,
>>
>> There is no roadblock to tango working in ij2, the problem of Alexandra
>> is only due to a problem with the fiji updater, for some reason in her
>> system (macosx64) only tango is updated and not mcib (but it works properly
>> in my system, linux64). Any clue about what the problem might be?
>>
>> @Curtis, in your answer to Alexandra, what do you mean by "It would be
>> best for TANGO to be distributed via an ImageJ update site, which are only
>> supported in ImageJ2" ?
>> For the moment our pugin Tango is distributed under FIJI via an official
>> update site, and works in legacy mode (uses the "old" plugin system, and
>> doesn't use libraries of ImageJ2). Do you mean this type of distribution
>> won't be supported anymore?
>>
>> Best,
>> Jean
>>  Dear Alex and IJ2 developers,
>>
>> TANGO uses its own library for image processing and object analysis. We
>> use ImageJ and IJ1 mainly for opening images and drawing Rois of our 3D
>> objects as a overlay of the image. We would be happy to discuss more about
>> integration of TANGO into IJ2 . For completeness if you want to add plugins
>> into TANGO (filtering, segmentation, or measurements),you can use our own
>> MCIB library. We however already provide basic functions to exchange image
>> data between TANGO and IJ1, maybe we should write, using some help, basic
>> data exchange between TANGO and IJ2.
>>
>> Best,
>>
>> Thomas
>>
>> PS : in copy the main developer of TANGO, Jean
>>
>> On 29/05/15 05:25, Curtis Rueden wrote:
>>
>> Hi Alex,
>>
>>  > One of the developers of TANGO told me to use ImageJ1 because he
>> > wasn't sure how the switch between libraries is managed. Do I need to
>> > reinstall in this case?
>>
>>  When he says "use ImageJ1" he means:
>>   http://imagej.net/download.html
>>
>>  But please, encourage the TANGO developer to contact the imagej-devel
>> mailing list to discuss any roadblocks to TANGO working properly in
>> ImageJ2. It would be best for TANGO to be distributed via an ImageJ update
>> site, which are only supported in ImageJ2.
>>
>>  Regards,
>> Curtis
>>
>> On Thu, May 28, 2015 at 3:48 PM, Alexandra Bortnick <
>> alexandra.bortnick at gmail.com> wrote:
>>
>>> Hi Curtis,
>>>
>>>  One of the developers of TANGO told me to use ImageJ1 because he
>>> wasn't sure how the switch between libraries is managed. Do I need to
>>> reinstall in this case?
>>>
>>>  -Alex
>>>
>>>
>>
>>
>> _______________________________________________
>> ImageJ-devel mailing listImageJ-devel at imagej.nethttp://imagej.net/mailman/listinfo/imagej-devel
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20150531/c5613a3e/attachment-0001.html>

