<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] [fiji-devel] New methods in CalibratedSpace
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20%5Bfiji-devel%5D%20New%20methods%20in%20CalibratedSpace&In-Reply-To=%3C1342164024.2223.8.camel%40saalfeld-thinkpad%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001069.html">
   <LINK REL="Next"  HREF="001071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace</H1>
    <B>Stephan Saalfeld</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20%5Bfiji-devel%5D%20New%20methods%20in%20CalibratedSpace&In-Reply-To=%3C1342164024.2223.8.camel%40saalfeld-thinkpad%3E"
       TITLE="[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace">saalfeld at mpi-cbg.de
       </A><BR>
    <I>Fri Jul 13 02:20:24 CDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001069.html">[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace
</A></li>
        <LI>Next message: <A HREF="001071.html">[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1070">[ date ]</a>
              <a href="thread.html#1070">[ thread ]</a>
              <a href="subject.html#1070">[ subject ]</a>
              <a href="author.html#1070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I would not change the way ImgPlusImg and ImgPlus are designed right now
and not mix them.  Keep in mind that ImgPlusImg can return the ImagePlus
by which you have access to Calibration and all the other ImageJ
metadata.

I support adding a method wrapImgPlus or wrapToImgPlus (for better
grammar).

Best,
Stephan




On Thu, 2012-07-12 at 17:40 -0400, Stephan Preibisch wrote: 
&gt;<i> Good point J-Y, wrap should always return an ImagePlusImg ... 
</I>&gt;<i> 
</I>&gt;<i> But I do not really like that ImagePlusImg is an ImgPlus, because ImgPlus is an Img and has an Img. And on top ImagePlusImg is an Img, too. But then it could return itself, no, that gets too convolved for my taste ...
</I>&gt;<i> 
</I>&gt;<i> why not add a second wrap method then, we could call it:
</I>&gt;<i> 
</I>&gt;<i> ImgPlus imp = wrapMetaData( ImagePlus );
</I>&gt;<i> 
</I>&gt;<i> or so?
</I>&gt;<i> 
</I>&gt;<i> On Jul 12, 2012, at 17:28 , Jean-Yves Tinevez wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; On 12-Jul-12 23:22, Curtis Rueden wrote:
</I>&gt;<i> &gt;&gt; Hi Steffi &amp; J-Y,
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; &gt; if ( img instanceOf ImagePlusImg )
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I think using instanceof in this way is quite evil, and should be avoided whenever possible. It is something I very much want to avoid in the core ImgLib2 and ImageJ2 code, because it prohibits extensibility. Better is to put the common functionality into an interface method declaration and then implement it differently in the different subclasses.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; That said, how to avoid writing code like this depends on the situation. We'd have to look over the various places in code that it is currently happening...
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; &gt; 1) break it and maybe it is just fine
</I>&gt;<i> &gt;&gt; &gt; 2) make a wrapImgPlus method
</I>&gt;<i> &gt;&gt; &gt; Maybe 1) is the better way to go, I just wanted to bring up potential implications ....
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; In this case, given that it would be easy to simply add the wrapImgPlus methods, that may be a safer way to go. Anyone else have an opinion?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Maybe
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; we could take the thing in reverse:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; - have wrap() methods return an actual ImagePlusImg
</I>&gt;<i> &gt; - have ImagePlusImg be an ImgPlus
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I quickly looked and this is not trivial: ImagePlusImg is already a PlanarImg, and we would have to add some hierarchy in the middle...
</I>&gt;<i> 
</I>

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001069.html">[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace
</A></li>
	<LI>Next message: <A HREF="001071.html">[ImageJ-devel] [fiji-devel] New methods in CalibratedSpace
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1070">[ date ]</a>
              <a href="thread.html#1070">[ thread ]</a>
              <a href="subject.html#1070">[ subject ]</a>
              <a href="author.html#1070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
