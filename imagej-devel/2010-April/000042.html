<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [ImageJ-devel] JUnit tests, was Re: when to close cursors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20JUnit%20tests%2C%20was%20Re%3A%20when%20to%20close%20cursors&In-Reply-To=%3Calpine.DEB.1.00.1004150129320.4883%40intel-tinevez-2-302%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000040.html">
   <LINK REL="Next"  HREF="000049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ImageJ-devel] JUnit tests, was Re: when to close cursors</H1>
    <B>Johannes Schindelin</B> 
    <A HREF="mailto:imagej-devel%40imagej.net?Subject=Re%3A%20%5BImageJ-devel%5D%20JUnit%20tests%2C%20was%20Re%3A%20when%20to%20close%20cursors&In-Reply-To=%3Calpine.DEB.1.00.1004150129320.4883%40intel-tinevez-2-302%3E"
       TITLE="[ImageJ-devel] JUnit tests, was Re: when to close cursors">Johannes.Schindelin at gmx.de
       </A><BR>
    <I>Wed Apr 14 18:37:39 CDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000040.html">[ImageJ-devel] when to close cursors,	was Re: [fiji-devel] imglib coding style
</A></li>
        <LI>Next message: <A HREF="000049.html">[ImageJ-devel] [fiji-devel] JUnit tests,	was Re: when to close cursors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, 15 Apr 2010, Stephan Saalfeld wrote:

&gt;<i> Cursor.hasNext() == false does not mean that the cursor is out of image 
</I>&gt;<i> bounds and, depending on the container may still point to some data. 
</I>&gt;<i> Image keeping track of its cursors, it is good to close them for freeing 
</I>&gt;<i> this data.  Currently, this is important in cell containers only.
</I>&gt;<i> 
</I>&gt;<i> I think that the recent design changes regarding data access make this
</I>&gt;<i> tracking of cursors obsolete and so Cursor.close() too.  A good hint is
</I>&gt;<i> that Image.removeCursor() is just never called.  But I am very tired and
</I>&gt;<i> have to check this.
</I>
Well, for the moment, I just played it safe. Please check out the 
junit-tests branch (based on master~2, so it will need adjusting once the 
huge changes of containerlevel come in).

I know that I have to add a few comments, but I just spent almost 2 hours 
to hunt down a bug that I introduced in Fiji's javac 3 weeks ago, so I am 
thoroughly tired.

The current version of the tests is here:

<A HREF="http://pacific.mpi-cbg.de/cgi-bin/gitweb.cgi?p=imglib.git;a=commitdiff;h=fd8eb4b6a9ad62d4103d36017d9da7ff8f4fedae">http://pacific.mpi-cbg.de/cgi-bin/gitweb.cgi?p=imglib.git;a=commitdiff;h=fd8eb4b6a9ad62d4103d36017d9da7ff8f4fedae</A>

The idea is to have a few helper methods in TestBase which can

- construct images algorithmically
- compare images to some calculated values
- compare &quot;signatures&quot;, i.e. first and second order moments of intensity 
  and coordinates.

Obviously, I want to avoid large test images in the repository, and I want 
to make it very simple to add tests, because we need them.

Ciao,
Johannes



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000040.html">[ImageJ-devel] when to close cursors,	was Re: [fiji-devel] imglib coding style
</A></li>
	<LI>Next message: <A HREF="000049.html">[ImageJ-devel] [fiji-devel] JUnit tests,	was Re: when to close cursors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://imagej.net/mailman/listinfo/imagej-devel">More information about the ImageJ-devel
mailing list</a><br>
</body></html>
