From davide.heller at imls.uzh.ch  Mon Dec  2 05:39:17 2013
From: davide.heller at imls.uzh.ch (Davide Heller)
Date: Mon, 2 Dec 2013 12:39:17 +0100
Subject: [ImageJ-devel] Skeletonize command behavior
Message-ID: <9D4046D7-9767-4C11-B5C0-844410ADFBC1@imls.uzh.ch>

Dear all, 

     I am using the default Skeletonize command (Process>Binary>Skeletonize) to process a cell tissue segmentation result (see example https://www.dropbox.com/sh/xeg2cgh35qr9g6g/5sVHvWRbZ1 skeletonize_input.tif, 4kb). While 1.46m (1.46r tested) produces a connected set of lines in location [30,40] (skeletonize_result_1.46m.tif, 4kb), the future versions (first tested 1.47h, last 1.48h, skeletonize_result_1.47h-48h.tif, 4kb) do produce an unconnected version. I noticed a change to the Skeletonize command introduced with version 1.47d, but I am not sure whether this is the cause. 

Assuming 8-connectivity of the skeletonization, actually also the previous result has a flaw preserving a 4px-square in the same location. Could anybody comment on which behavior is the correct one or if both are wrong.

Many thanks,
Davide

******************************************

Davide Heller
PhD candidate
Mering & Basler laboratory
Institute of Molecular Life Sciences

+41 44 635 31 24

Room Y55-L-48
University of Zurich
Winterthurerstrasse 190
CH-8057

******************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131202/816bfc87/attachment.html>

From ctrueden at wisc.edu  Mon Dec  2 15:42:11 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Mon, 2 Dec 2013 15:42:11 -0600
Subject: [ImageJ-devel] Java Swing layout
In-Reply-To: <17FAE827-01FE-46F8-B36F-5C3E27BE6C28@ucsf.edu>
References: <17FAE827-01FE-46F8-B36F-5C3E27BE6C28@ucsf.edu>
Message-ID: <CADN69ykSppFm6j-LU0dJ8WRKN0G1xwfCAEo=vbaK1ntavq_rNw@mail.gmail.com>

Hi Nico,

> I remember that you mentioned the MiG Layout manager a while back on
> one of the mailing list, and am curious to hear if you have experience
> working with it, and whether or not it would be worth trying it out.

MigLayout is my layout manager of choice. Be warned that I always hand code
my GUIs, but I think MigLayout removes some of the most painful aspects of
it. If you "git grep" the ImageJ2 codebase for MigLayout, there are a few
examples in there. Here is a pretty good one:

https://github.com/imagej/imagej/blob/imagej-2.0.0-beta-7.5/ui/swing/commands/src/main/java/imagej/ui/swing/commands/CommandFinderPanel.java#L134

But really the MigLayout white paper linked from their front page is pretty
much all you need to know to get started!

Regards,
Curtis


On Thu, Nov 21, 2013 at 1:12 PM, Nico Stuurman <nico.stuurman at ucsf.edu>wrote:

> Hi Curtis,
>
> I'll be embarking on writing a Micro-Manager plugin to control a diSPIM
> microscope and will need to do quite a bit of GUI code writing.  So far I
> have mainly been using the Netbeans GUI builder, or hand-coding GUIs, none
> of which are very nice.  I remember that you mentioned the MiG Layout
> manager a while back on one of the mailing list, and am curious to hear if
> you have experience working with it, and whether or not it would be worth
> trying it out.
>
> Thanks for you opinion!
>
> Best,
>
> Nico
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131202/d0575666/attachment.html>

From ctrueden at wisc.edu  Mon Dec  2 16:33:30 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Mon, 2 Dec 2013 16:33:30 -0600
Subject: [ImageJ-devel] LUT ranges
In-Reply-To: <519288CC.10804@wisc.edu>
References: <519288CC.10804@wisc.edu>
Message-ID: <CADN69y=pzsQ0LoUJXZtEGayPdewPRw6Np4uefjhcuE_ZY+xhqQ@mail.gmail.com>

Hi Aivar,

To ensure we continue tracking the problems with LUT ranges that you
describe, I filed a ticket:
http://trac.imagej.net/ticket/2032

Regards,
Curtis


On Tue, May 14, 2013 at 1:56 PM, Aivar Grislis <grislis at wisc.edu> wrote:

> This e-mail discusses some issues regarding what I would call the LUT
> range, the min/max value that a LUT is mapped to.
>
> My motivation comes from SLIM Plugin:  In SLIM Plugin the min/max LUT
> range is used to colorized fitted pixels and also to control the range of
> generated histograms.  Suppose a user has fitted some data that has been
> gathered for multiple spectral channels.  It would be useful to be able to
> combine all of the channels when setting min/max, to see how the channels
> relate to each other, and also to be able to set an individual channel
> min/max independently, to zoom in on an individual channel.  I can discuss
> further upon request.
>
> IJ1 only supported one min/max range per image, so only a combined
> channels LUT range is possible.  IJ2 supports more than one, but it's
> limited:
>
> IJ2 currently supports individual RealLUTConverters and hence individual
> min/max ranges only for the special-cased CHANNEL Axis. Having individual
> RealLUTConverters is essential to the way RGB images are rendered (you need
> separate red, green, and blue converters).  However being able to specify
> separate ranges is actually not important in that case.
>
> (Currently there's a bug in DefaultDatasetView
> http://trac.imagej.net/ticket/1866 . For RGB images each channel
> converter is autoscaled independently, which only distorts the colors.  You
> want to set the same scale for all.  Here's a thought experiment:  Suppose
> you have an all-blue image with one gray pixel.  The only red in the entire
> image is in that gray pixel.  You don't want to autoscale that red
> component value so it becomes the maximal value possible.  See the attached
> image for 1866.)
>
> For more flexibility I'd suggest adding two new properties to the Axis
> class:  One would be whether it supports multiple LUTs.  The other would be
> whether LUT ranges should be combined.
>
> The default would be for both properties to be false.  We'd have to ensure
> they are both true in the RGB, CHANNEL Axis situation. Otherwise a
> programmer could tweak these settings before the dataset is displayed,
> especially when setting up a custom Axis type.
>
> Thanks!
> Aivar
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131202/cb386986/attachment.html>

From ctrueden at wisc.edu  Wed Dec  4 15:57:16 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Wed, 4 Dec 2013 15:57:16 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
Message-ID: <CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>

Hi Brian & everyone,

> there is currently a bug in ImgSaver preventing things from working
...
> We are working on a fix now and will reply back when the bug is
> resolved.

Just a quick update that ImgSaver of scifio-0.7.3 is working better. The
following code now produces a multi-page TIFF as expected:

--snip--
import io.scif.SCIFIO;
import io.scif.img.ImgOpener;
import io.scif.img.ImgOptions;
import io.scif.img.ImgOptions.ImgMode;
import io.scif.img.ImgSaver;
import net.imglib2.meta.ImgPlus;

public class WriteAnImgPlus {
public static void main(final String... args) throws Exception {
final SCIFIO scifio = new SCIFIO();
 final ImgOpener opener = new ImgOpener(scifio.getContext());

// NB: ImgSaver only supports PlanarImg for now!
 final ImgOptions options = new ImgOptions().setImgModes(ImgMode.PLANAR);
final ImgPlus<?> imgPlus =
 opener.openImg("stack&axes=X,Y,Z&lengths=128,128,10.fake", options);

System.out.println("imgPlus = " + imgPlus);
 System.out.println("numDimensions = " + imgPlus.numDimensions());
for (int d=0; d<imgPlus.numDimensions(); d++) {
 System.out.println("dim #" + d + " = " + imgPlus.dimension(d));
System.out.println("axis #" + d + " = " + imgPlus.axis(d).type());
 }

final ImgSaver saver = new ImgSaver(scifio.getContext());
saver.saveImg("stack.tif", (ImgPlus) imgPlus);
 }
}
--snap--

As of this writing, please note that you will only be able to save as
OME-TIFF if you include the ome-formats library [1] plus dependencies on
your classpath.

Regards,
Curtis

[1] https://github.com/scifio/ome-formats


On Thu, Oct 24, 2013 at 1:14 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:

> Hi Brian,
>
> Apologies for the long delay in reply. It is better to write to a public
> mailing list. I am CCing imagej-devel.
>
> > Is the following code snippet still correct given recent changes??
> >
> > AxisType[] ax = new AxisType[3]; ax[0]=Axes.X; ax[1]=Axes.Y;
> > ax[2]=Axes.Z;
> >
> > ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>  >
> > new ImgSaver().saveImg("name.ome.tif", imgPlus);
>
> Firstly, as an aside, please note that ImgSaver has moved from the
> net.imglib2:imglib2-io project into io.scif:scifio core.
>
> But yes, the above code is still supposed to work.
>
> However, in practice there is currently a bug in ImgSaver preventing
> things from working correctly.
>
> Here is a complete (non-)working example:
> https://gist.github.com/ctrueden/6234396
>
> We are working on a fix now and will reply back when the bug is resolved.
>
> Regards,
> Curtis
>
>
> On Tue, Aug 13, 2013 at 5:21 AM, Brian Northan <bnorthan at gmail.com> wrote:
>
>> Hi Curtis
>>
>> So after updating imglib this morning I now get lots of errors.  Which is
>> expected after your changes.  So I suspect after I sort through them and
>> rework my code for the changes that saving the axis types will work again.
>>
>> But one other quick question.  Is the ImageJ2 scripting ready for use??
>> I looked at it a bit a while ago but it didn't seem quite ready.   I have a
>> series of commands I call, so temporarily I just use a bash script calling
>> Imagej2 in headless mode, with a utility I wrote to parse command name and
>> parameters.   Eventually I will switch to the ImageJ scripting...  is it
>> usable yet or should I wait a few more months?
>>
>> Thanks, this stuff is really great.
>>
>> Brian
>>
>> On Tue, Aug 13, 2013 at 4:46 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>
>>> Hi Curtis
>>>
>>> I have some simple code to wrap an 3D Img<T> as an ImgPlus, define the
>>> axis as x,y and z and then save it.  Up until a week or so ago it seemed to
>>> work fine.  But now when I read back the image it come in as x, y, t.   Is
>>> the following code snippet still correct given recent changes??   Thanks-
>>> Brian
>>>
>>> AxisType[] ax = new AxisType[3];
>>>         ax[0]=Axes.X;
>>>         ax[1]=Axes.Y;
>>>         ax[2]=Axes.Z;
>>>
>>> ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>>>
>>> new ImgSaver().saveImg("name.ome.tif", imgPlus);
>>>
>>>
>>>
>>> On Mon, Aug 12, 2013 at 1:39 PM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>
>>>> Hi all,
>>>>
>>>> > I will merge the img-metadata branch to master on Thursday.
>>>>
>>>> Got a bit busy in the interim, but img-metadata is now merged to
>>>> imglib.git's master branch:
>>>>
>>>>
>>>> https://github.com/imagej/imglib/commit/e4e26aa05e0f42ff1a90e8c6d67235431471de44
>>>>
>>>>  The commit message gives a quick gist of the changes, including future
>>>> directions.
>>>>
>>>> Please let me know of any questions or problems with it!
>>>>
>>>> Regards,
>>>> Curtis
>>>>
>>>>
>>>> On Tue, Jul 30, 2013 at 10:28 AM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>>
>>>>> Hi all, and especially ImgLib2 developers,
>>>>>
>>>>> At the ImgLib2 hackathon this past May, I started work on a branch to
>>>>> make it easier to attach per-axis metadata to N-dimensional spaces. I think
>>>>> this branch is finally in a merge-worthy state.
>>>>>
>>>>> It introduces an AnnotatedSpace extension to EuclideanSpace which lets
>>>>> you attach on Axis per dimension. It defines TypedSpace, which declares an
>>>>> AxisType for each Axis, as well as a CalibratedSpace, which in addition
>>>>> adds a calibration value and optional unit name to the mix.
>>>>>
>>>>> This approach is much more flexible than the previous CalibratedSpace,
>>>>> which has been renamed to OldCalibratedSpace and deprecated until we can
>>>>> fully transition all the code away from it. In particular, having the axes
>>>>> attached to the space directly will allows Views to maintain the axis
>>>>> metadata without much additional work.
>>>>>
>>>>> Note that these new classes are defined in the net.imglib2.meta
>>>>> component, which was split into a separate module called imglib2-meta. The
>>>>> ImgPlus class moved there, too (it should have been there all along). So
>>>>> merging this branch will cause some code breakage, but all should be
>>>>> straightforward to fix: rename usages of CalibratedSpace to
>>>>> OldCalibratedSpace, and rename the ImgPlus package from net.imglib2.img to
>>>>> net.imglib2.meta.
>>>>>
>>>>> Going forward, we can also add a CalibratedViews class to the
>>>>> net.imglib2.meta package which has some additional features such as
>>>>> exposing resampled Imgs from a source CalibratedSpace into a target one
>>>>> based on the units used. We can lean on a units library for this, as we
>>>>> have discussed in the past.
>>>>>
>>>>> If interested, you can browse the branch at:
>>>>> https://github.com/imagej/imglib/compare/img-metadata
>>>>>
>>>>> If no one objects, I will merge the img-metadata branch to master on
>>>>> Thursday.
>>>>>
>>>>> Regards,
>>>>> Curtis
>>>>>
>>>>>
>>>>
>>>> _______________________________________________
>>>> ImageJ-devel mailing list
>>>> ImageJ-devel at imagej.net
>>>> http://imagej.net/mailman/listinfo/imagej-devel
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131204/c164d41a/attachment.html>

From pietzsch at mpi-cbg.de  Wed Dec  4 18:35:57 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Thu, 5 Dec 2013 01:35:57 +0100
Subject: [ImageJ-devel] SCIFIO via Avian
In-Reply-To: <31F23E9A-69CE-4338-9824-5C0E2287747B@mpi-cbg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<529915B9.5040602@iwr.uni-heidelberg.de>
	<31F23E9A-69CE-4338-9824-5C0E2287747B@mpi-cbg.de>
Message-ID: <30DAB23F-C52F-4568-AA45-050171B69624@mpi-cbg.de>

Hi guys,

I made a benchmark for ArrayImg backed by
- primitive arrays
- direct buffers
- sun.misc.Unsafe (off-heap memory)
https://github.com/imagej/imglib/blob/2e1929873e2f4bafcfe9d90ad616fedb8b7ed4f0/tests/src/test/java/net/imglib2/img/BufferAndUnsafeBenchmark.java
(in branch "buffer-and-unsafe")

On my computer, the result is that Unsafe is the about the same speed as primitive arrays. Direct buffers are consistently slower:

copy image using class net.imglib2.img.array.ArrayImgFactory
median: 52 ms

copy image using class net.imglib2.img.array.ArrayImgUnsafeFactory
median: 52 ms

copy image using class net.imglib2.img.array.ArrayImgBufferFactory
median: 59 ms

The not-so-good news is that using the same type backed by different accesses will make the calls into the ByteAccess (or whatever the type is) polymorphic, spoiling it for the JIT (at least if both are used from the same call-site).
This is visible in the second part of the benchmark. Here, a constant UnsignedByteType is added to every pixel of the image. Because the new UnsignedByteType(1) is always backed by a primitive array, we hit the bimorphic case for Unsafe and direct buffer, and this results in a big slowdown:

add constant to image using class net.imglib2.img.array.ArrayImgFactory
median: 22 ms

add constant to image using class net.imglib2.img.array.ArrayImgUnsafeFactory
median: 122 ms

add constant to image using class net.imglib2.img.array.ArrayImgBufferFactory
median: 186 ms

We can try some tricks to make UnsignedByteType constants backed by the other ByteAccess types, but in general I see no easy way around this.
Maybe someone has a few months to spare to make imglib3 using ASM or Javassist to manually inline this stuff (that would solve the bottleneck in making a proper bidirectional read/write type hierarchy?) Of course, we can always hope that the JIT will "get it" at some point in the future, but I think this is quite a pathological case.

I think, we should go for the sun.misc.Unsafe for now.
If it really turns out to be a show-stopper, we will have to look into using primitive arrays and pinning. One downside of that would be that then the memory must be owned by Java, so it would be a problem for the Avian integration. Another downside is that JNI implementations are not forced to pin the array, they may just decide to copy the data.

I also made a imglib2-vigra branch that uses Unsafe https://github.com/tpietzsch/vigra-imglib2/commits/unsafe (requires the buffer-and-unsafe branch of imglib2).

best regards,
Tobias

On Nov 30, 2013, at 12:36 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de> wrote:

> Hi Johannes and Ulli,
> 
> with respect to the need to set up the paths in the pom.xml:
> This is an issue with the nar-maven-plugin, which compiles and packages the native code.
> With Johannes' help, I submitted an integration test to the nar-maven-plugin project, that illustrates this problem. So hopefully it will be fixed at some point in the future.
> Ulli, I remember that there was another issue on Windows: The dll was named differently to what the NarHelper class expects. Could you elaborate on that?
> 
> With respect to what we did on the vigra-imglib2 project. I forked your project, Johannes, https://github.com/tpietzsch/vigra-imglib2.
> We worked on the "buffer" branch.
> This is using direct buffers as the underlying data structure for both ImgLib2's ArrayImg and VIGRA's MultiArrayView. At the moment, the direct buffer is allocated on the Java side, but as you pointed out, one can use JNI's NewDirectByteBuffer() from the C++ side. I think this is a good solution, because it leaves the option for both scenarios, Java embedded in C++ and C++ embedded in Java. The ByteBuffer is wrapped in a ImgLib2 Access (e.g. IntAccess for Imgs of IntType. It is easy to provide two constructors there, one which allocates the buffer and one which takes an existing buffer. Responsibility for freeing the memory is not a problem. Note that JNI NewDirectByteBuffer is constructed with already allocated memory. So, if C++ allocated the memory, Java may garbage-collect the ByteBuffer, but will not free the memory block. If creating the ByteBuffer form Java, Java will also free the memory.
> The good thing is that both ImgLib ArrayImgs and VIGRA MultiArrayViews were designed to wrap flat arrays, which is what is happening here.
> 
> The ByteBuffer code came from the ImgLib2 branch "buffer-and-unsafe", where I played with using direct buffers and sun.misc.Unsafe to back ArrayImgs instead of Java primitive arrays.
> sun.misc.Unsafe is the other viable option. In contrast to primitive arrays and direct buffers it does not suffer from the 2G size limit of Java arrays. Of course, if we put it behind an ArrayImg, we cannot make use of that fact yet. So we could have a BigArrayImg at some point in the future (which would be useful in its own right). Otherwise, same advantages as explained above.
> The benchmark that Johannes mentioned was comparing the speed of ArrayImgs backed by primitive arrays, direct buffers, and sun.misc.Unsafe, respectively. I just had a look and I couldn't find it. I'll recreate it next week.
> 
> Note, that I copied the byte buffer stuff from the ImgLib2 branch "buffer-and-unsafe", so that vigra-imglib2 works with the current ImgLib2 beta.
> 
> But wrapping the images back and forth was only part of what we did. An important point is to make it easy to make bindings to VIGRA functions withou writing lots of boilderplate code on either side of JNI. Based on earlier VIGRA-Matlab wrapper we made some macros that allow to write on the C++ side
> 
> JNIEXPORT void JNICALL Java_net_imglib2_vigra_VigraWrapper_gaussianSmoothMultiArray
>   (JNIEnv *env, jclass, jlongArray shape, jint typeId, jobject sourceData, jobject destData, jdouble sigma)
> {
>     using namespace vigra; // to get UInt8 and Int32
>     #define F(T) gaussianSmoothMultiArray<T>(env, shape, typeId, sourceData, destData, sigma)
>     ALLOW_TYPES(typeId, UInt8, Int32, float)
>     #undef F
> }
> 
> This creates a switch statement that instantiates the VIGRA template function for the specified C++ types and dispatches to these according to the corresponding ImgLib type.
> The same is done for supported dimensionalities (because with templates we have to specify that at compile time).
> 
> The plan is to directly pass in the ArrayImg jobject (and maybe even views later) and extract the type and dimension etc directly from that.
> This would mean, that on the Java side, we only have one native method for each exported VIGRA function, basically with the same signature and just replacing MultiArrayView with Img.
> 
> best regards,
> Tobias
> 
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/34d4bdeb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/34d4bdeb/attachment-0001.pgp>

From Johannes.Schindelin at gmx.de  Wed Dec  4 21:28:54 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Thu, 5 Dec 2013 04:28:54 +0100 (CET)
Subject: [ImageJ-devel] SCIFIO via Avian
In-Reply-To: <30DAB23F-C52F-4568-AA45-050171B69624@mpi-cbg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<529915B9.5040602@iwr.uni-heidelberg.de>
	<31F23E9A-69CE-4338-9824-5C0E2287747B@mpi-cbg.de>
	<30DAB23F-C52F-4568-AA45-050171B69624@mpi-cbg.de>
Message-ID: <alpine.DEB.1.00.1312050352150.1191@s15462909.onlinehome-server.info>

Hi Tobi,

On Thu, 5 Dec 2013, Tobias Pietzsch wrote:

> I made a benchmark for ArrayImg backed by
> - primitive arrays
> - direct buffers
> - sun.misc.Unsafe (off-heap memory)
> https://github.com/imagej/imglib/blob/2e1929873e2f4bafcfe9d90ad616fedb8b7ed4f0/tests/src/test/java/net/imglib2/img/BufferAndUnsafeBenchmark.java
> (in branch "buffer-and-unsafe")

Thanks!

> On my computer, the result is that Unsafe is the about the same speed as primitive arrays. Direct buffers are consistently slower:
> 
> copy image using class net.imglib2.img.array.ArrayImgFactory
> median: 52 ms
> 
> copy image using class net.imglib2.img.array.ArrayImgUnsafeFactory
> median: 52 ms
> 
> copy image using class net.imglib2.img.array.ArrayImgBufferFactory
> median: 59 ms

Okay. But please, do not use the Median for measuring the performance. All
you are doing is to confuse the benchmark with noise: the theoretically
optimal runtime can really not be measured in multi-process environments,
but at least we know that it can only be reached, never succeeded. For
that reason, best-of-5 is a well-established technique to measure
performance. (By necessity, the Median will be a worse approximation to
the time you would like to determine than the best time...)

> The not-so-good news is that using the same type backed by different
> accesses will make the calls into the ByteAccess (or whatever the type
> is) polymorphic, spoiling it for the JIT (at least if both are used from
> the same call-site).

Yes, this is something we will need to address sooner or later. As I
demonstrated at our hackathon in Madison, I have a couple of good ideas.
It just needs a proper home for them, and I think scijava-ops is actually
the best place.

> I think, we should go for the sun.misc.Unsafe for now.

Fair enough.

> If it really turns out to be a show-stopper, we will have to look into
> using primitive arrays and pinning. One downside of that would be that
> then the memory must be owned by Java, so it would be a problem for the
> Avian integration.

No, not at all. Avian has very good memory management.

But Avian also supports Unsafe, even if other JVMs might not (Unsafe is
not a part of the official Java API, after all, with Oracle's JVM you
still have to play dirty tricks to access Unsafe).

In contrast to Oracle's JVM, Avian makes accessing Unsafe very easy and
not only that: Avian's JIT will completely inline the memory accesses via
Unsafe:

	https://github.com/ReadyTalk/avian/blob/master/src/compile.cpp#L3965

In effect, Avian's access via Unsafe is -- apart from the one-time cost of
JITting the code at the start of the program -- *as* performant as native
C accesses would be.

> Another downside is that JNI implementations are not forced to pin the
> array, they may just decide to copy the data.

That's not quite correct: the larger the data structure you are accessing,
the more less possible it is that the JNI implementation can move the data
around. This is not dictated by the standard, but by simple considerations
of practicability.

> I also made a imglib2-vigra branch that uses Unsafe
> https://github.com/tpietzsch/vigra-imglib2/commits/unsafe (requires the
> buffer-and-unsafe branch of imglib2).

Great!

In related news, I managed to get literally all the important changes into
Avian that are required to run SCIFIO (in the process being the top #4
committer of Avian).

Also in related news, the nar-maven-plugin is already at version
3.0.0-rc-2, available via Maven Central (Tobi, rc-2 already has the
changes you wanted for javah, no need to depentd on a SNAPSHOT release
that was never deployed). Just for the record, I am top #3 committer of
the nar-maven-plugin project and now co-maintainer with Curtis Rueden,
all driven by the vigra-imglib2 project.

My next steps will be a little slower because real work caught up with me.
But my plan is to provide an easy way to compile the native part of
vigra-imglib2. Part of the solution will be to have Avian and VIGRA as
submodules (I know, Git submodules could have been designed much better,
but for the task at hand, they come in handy). To address the rest of the
problem Ulli faced, I will modify the Maven project so that the output
will be a C++ library that has Avian and SCIFIO/ImgLib2 compiled-in,
without the need to compile other stuff manually or install too many other
components (although C++ compiler and CMake will always have to be
installed by the user, unfortunately).

Ciao,
Johannes


From ullrich.koethe at iwr.uni-heidelberg.de  Thu Dec  5 12:15:17 2013
From: ullrich.koethe at iwr.uni-heidelberg.de (Ullrich Koethe)
Date: Thu, 05 Dec 2013 19:15:17 +0100
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
Message-ID: <52A0C2B5.2030208@iwr.uni-heidelberg.de>

Hi Johannes and Tobias,

following your instructions, I now installed all dependencies on Linux 
(64-bit Ubuntu, gcc 4.7.3). Here is what I got:

In scifio, maven compiles, but then complains

    Failed tests:   testDefaultEnabled(io.scif.filters.utests.FilterTest)

In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a 
number of compiler warnings which seem to be uncritical on first glance, 
but are confusingly flagged as "[ERROR]" in the maven output.

When I finally run './avian-run.sh', I get the following output

java.io.EOFException
   at java.util.zip.InflaterInputStream.read (line 54)
   at java.util.zip.ZipFile$1.read (line 120)
   at java.util.zip.ZipFile$1.read (line 114)
   at java.util.zip.InflaterInputStream.read (line 39)
   at java.util.zip.ZipFile$1.read (line 106)
   at java.util.Properties$InputStreamParser.readCharacter (line 192)
   at java.util.Properties$Parser.parse (line 106)
   at java.util.Properties.load (line 21)
   at net.imglib2.vigra.NarHelper.loadLibrary (line 41)
   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
   at io.scif.img.ImgOpener.openImg (line 301)
   at io.scif.img.ImgOpener.openImg (line 217)
   at io.scif.img.ImgOpener.openImg (line 200)
   at Example.main (line 34)
   at Example.main (line 22)
java.lang.ExceptionInInitializerError
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
   at io.scif.img.ImgOpener.openImg (line 301)
   at io.scif.img.ImgOpener.openImg (line 217)
   at io.scif.img.ImgOpener.openImg (line 200)
   at Example.main (line 34)
   at Example.main (line 22)
caused by: java.lang.UnsatisfiedLinkError: Could not find native library
   at net.imglib2.vigra.NarHelper.loadLibrary (line 78)
   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
   at io.scif.img.ImgOpener.openImg (line 301)
   at io.scif.img.ImgOpener.openImg (line 217)
   at io.scif.img.ImgOpener.openImg (line 200)
   at Example.main (line 34)
   at Example.main (line 22)

No image is created. The input image I used is attached.

When I try to compile Tobias' code (branch 'buffer'), I get

[WARNING] The POM for 
com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is 
missing, no dependency information available
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]
[ERROR]   The project net.imglib2.vigra:vigra-imglib2:1.0.0-SNAPSHOT 
(/home/ukoethe/src/vigra-imglib2/pom.xml) has 2 errors
[ERROR]     Unresolveable build extension: Plugin 
com.github.maven-nar:nar-maven-plugin:3.0.0-rc-3-SNAPSHOT or one of its 
dependencies could not be resolved: Failure to find 
com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT in 
http://mvnplugins.fusesource.org/repo/release was cached in the local 
repository, resolution will not be reattempted until the update interval 
of mvnplugins.fusesource.org has elapsed or updates are forced -> [Help 2]

Best regards
Ulli
-------------- next part --------------
A non-text attachment was scrubbed...
Name: img.pgm
Type: application/octet-stream
Size: 65551 bytes
Desc: not available
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/060f23e4/attachment-0001.obj>

From hinerm at gmail.com  Thu Dec  5 13:23:40 2013
From: hinerm at gmail.com (Mark Hiner)
Date: Thu, 5 Dec 2013 13:23:40 -0600
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <52A0C2B5.2030208@iwr.uni-heidelberg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
Message-ID: <CA+B=mGrdce6yjhB4K5Mf-OUwX8T1iRQBSH5aTYhOQzaidp1+Tg@mail.gmail.com>

Hi Ullrich,

 I found this issue a while ago on my Windows 8 (64-bit) laptop, but
stopped looking at it after a brief investigation, since the test was
passing on our Win7 VM (and every other system I've tried it on).

 Anyway, Curtis and I are trying to reproduce on other systems right now to
figure out what's going on.

 Which Java version are you using?

The issue can be found here:
https://github.com/scifio/scifio/issues/79

Thanks for bringing it to our attention!

- Mark


On Thu, Dec 5, 2013 at 12:15 PM, Ullrich Koethe <
ullrich.koethe at iwr.uni-heidelberg.de> wrote:

> Hi Johannes and Tobias,
>
> following your instructions, I now installed all dependencies on Linux
> (64-bit Ubuntu, gcc 4.7.3). Here is what I got:
>
> In scifio, maven compiles, but then complains
>
>    Failed tests:   testDefaultEnabled(io.scif.filters.utests.FilterTest)
>
> In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a
> number of compiler warnings which seem to be uncritical on first glance,
> but are confusingly flagged as "[ERROR]" in the maven output.
>
> When I finally run './avian-run.sh', I get the following output
>
> java.io.EOFException
>   at java.util.zip.InflaterInputStream.read (line 54)
>   at java.util.zip.ZipFile$1.read (line 120)
>   at java.util.zip.ZipFile$1.read (line 114)
>   at java.util.zip.InflaterInputStream.read (line 39)
>   at java.util.zip.ZipFile$1.read (line 106)
>   at java.util.Properties$InputStreamParser.readCharacter (line 192)
>   at java.util.Properties$Parser.parse (line 106)
>   at java.util.Properties.load (line 21)
>   at net.imglib2.vigra.NarHelper.loadLibrary (line 41)
>   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>   at io.scif.img.ImgOpener.openImg (line 301)
>   at io.scif.img.ImgOpener.openImg (line 217)
>   at io.scif.img.ImgOpener.openImg (line 200)
>   at Example.main (line 34)
>   at Example.main (line 22)
> java.lang.ExceptionInInitializerError
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>   at io.scif.img.ImgOpener.openImg (line 301)
>   at io.scif.img.ImgOpener.openImg (line 217)
>   at io.scif.img.ImgOpener.openImg (line 200)
>   at Example.main (line 34)
>   at Example.main (line 22)
> caused by: java.lang.UnsatisfiedLinkError: Could not find native library
>   at net.imglib2.vigra.NarHelper.loadLibrary (line 78)
>   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>   at io.scif.img.ImgOpener.openImg (line 301)
>   at io.scif.img.ImgOpener.openImg (line 217)
>   at io.scif.img.ImgOpener.openImg (line 200)
>   at Example.main (line 34)
>   at Example.main (line 22)
>
> No image is created. The input image I used is attached.
>
> When I try to compile Tobias' code (branch 'buffer'), I get
>
> [WARNING] The POM for com.github.maven-nar:nar-
> maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing, no dependency
> information available
> [ERROR] The build could not read 1 project -> [Help 1]
> [ERROR]
> [ERROR]   The project net.imglib2.vigra:vigra-imglib2:1.0.0-SNAPSHOT
> (/home/ukoethe/src/vigra-imglib2/pom.xml) has 2 errors
> [ERROR]     Unresolveable build extension: Plugin com.github.maven-nar:nar-
> maven-plugin:3.0.0-rc-3-SNAPSHOT or one of its dependencies could not be
> resolved: Failure to find com.github.maven-nar:nar-
> maven-plugin:jar:3.0.0-rc-3-SNAPSHOT in http://mvnplugins.fusesource.
> org/repo/release was cached in the local repository, resolution will not
> be reattempted until the update interval of mvnplugins.fusesource.org has
> elapsed or updates are forced -> [Help 2]
>
> Best regards
> Ulli
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/9f405797/attachment.html>

From pietzsch at mpi-cbg.de  Thu Dec  5 14:06:21 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Thu, 5 Dec 2013 21:06:21 +0100
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <52A0C2B5.2030208@iwr.uni-heidelberg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
Message-ID: <3509A376-E166-4B01-BA73-B24B8910B92F@mpi-cbg.de>

Hi Ulli,

> When I try to compile Tobias' code (branch 'buffer'), I get
> 
> [WARNING] The POM for com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing, no dependency information available
> [ERROR] The build could not read 1 project -> [Help 1]


my bad, I set a version of the nar-maven-plugin that cannot be obtained from the public maven repository but must be build locally.
I reverted to version 3.0.0-rc-2. It should work now. Can you try again?
best regards,
Tobias

On Dec 5, 2013, at 7:15 PM, Ullrich Koethe <ullrich.koethe at iwr.uni-heidelberg.de> wrote:

> Hi Johannes and Tobias,
> 
> following your instructions, I now installed all dependencies on Linux (64-bit Ubuntu, gcc 4.7.3). Here is what I got:
> 
> In scifio, maven compiles, but then complains
> 
>   Failed tests:   testDefaultEnabled(io.scif.filters.utests.FilterTest)
> 
> In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a number of compiler warnings which seem to be uncritical on first glance, but are confusingly flagged as "[ERROR]" in the maven output.
> 
> When I finally run './avian-run.sh', I get the following output
> 
> java.io.EOFException
>  at java.util.zip.InflaterInputStream.read (line 54)
>  at java.util.zip.ZipFile$1.read (line 120)
>  at java.util.zip.ZipFile$1.read (line 114)
>  at java.util.zip.InflaterInputStream.read (line 39)
>  at java.util.zip.ZipFile$1.read (line 106)
>  at java.util.Properties$InputStreamParser.readCharacter (line 192)
>  at java.util.Properties$Parser.parse (line 106)
>  at java.util.Properties.load (line 21)
>  at net.imglib2.vigra.NarHelper.loadLibrary (line 41)
>  at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>  at io.scif.img.ImgOpener.openImg (line 301)
>  at io.scif.img.ImgOpener.openImg (line 217)
>  at io.scif.img.ImgOpener.openImg (line 200)
>  at Example.main (line 34)
>  at Example.main (line 22)
> java.lang.ExceptionInInitializerError
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>  at io.scif.img.ImgOpener.openImg (line 301)
>  at io.scif.img.ImgOpener.openImg (line 217)
>  at io.scif.img.ImgOpener.openImg (line 200)
>  at Example.main (line 34)
>  at Example.main (line 22)
> caused by: java.lang.UnsatisfiedLinkError: Could not find native library
>  at net.imglib2.vigra.NarHelper.loadLibrary (line 78)
>  at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>  at io.scif.img.ImgOpener.openImg (line 301)
>  at io.scif.img.ImgOpener.openImg (line 217)
>  at io.scif.img.ImgOpener.openImg (line 200)
>  at Example.main (line 34)
>  at Example.main (line 22)
> 
> No image is created. The input image I used is attached.
> 
> When I try to compile Tobias' code (branch 'buffer'), I get
> 
> [WARNING] The POM for com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing, no dependency information available
> [ERROR] The build could not read 1 project -> [Help 1]
> [ERROR]
> [ERROR]   The project net.imglib2.vigra:vigra-imglib2:1.0.0-SNAPSHOT (/home/ukoethe/src/vigra-imglib2/pom.xml) has 2 errors
> [ERROR]     Unresolveable build extension: Plugin com.github.maven-nar:nar-maven-plugin:3.0.0-rc-3-SNAPSHOT or one of its dependencies could not be resolved: Failure to find com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT in http://mvnplugins.fusesource.org/repo/release was cached in the local repository, resolution will not be reattempted until the update interval of mvnplugins.fusesource.org has elapsed or updates are forced -> [Help 2]
> 
> Best regards
> Ulli
> <img.pgm>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/00863374/attachment.pgp>

From hiner at wisc.edu  Thu Dec  5 14:24:06 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Thu, 5 Dec 2013 14:24:06 -0600
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <3509A376-E166-4B01-BA73-B24B8910B92F@mpi-cbg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
	<3509A376-E166-4B01-BA73-B24B8910B92F@mpi-cbg.de>
Message-ID: <CA+B=mGpkGmmeR8fwZN-CoN7HMhW_ijr04YTmzHyTfcs1r7QJ+w@mail.gmail.com>

Hello again Ullrich,

 I believe the SCIFIO test failure is fixed on the latest master (commit
877bf5<https://github.com/scifio/scifio/commit/877bf58fa27f4aaca09e5caf92a56c5c30d670d9>).
Note to self: don't rely on annotations in src/test/java.

 Sorry for the inconvenience, but thanks again for bringing it up.

- Mark


On Thu, Dec 5, 2013 at 2:06 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de> wrote:

> Hi Ulli,
>
> > When I try to compile Tobias' code (branch 'buffer'), I get
> >
> > [WARNING] The POM for
> com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing,
> no dependency information available
> > [ERROR] The build could not read 1 project -> [Help 1]
>
>
> my bad, I set a version of the nar-maven-plugin that cannot be obtained
> from the public maven repository but must be build locally.
> I reverted to version 3.0.0-rc-2. It should work now. Can you try again?
> best regards,
> Tobias
>
> On Dec 5, 2013, at 7:15 PM, Ullrich Koethe <
> ullrich.koethe at iwr.uni-heidelberg.de> wrote:
>
> > Hi Johannes and Tobias,
> >
> > following your instructions, I now installed all dependencies on Linux
> (64-bit Ubuntu, gcc 4.7.3). Here is what I got:
> >
> > In scifio, maven compiles, but then complains
> >
> >   Failed tests:   testDefaultEnabled(io.scif.filters.utests.FilterTest)
> >
> > In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a
> number of compiler warnings which seem to be uncritical on first glance,
> but are confusingly flagged as "[ERROR]" in the maven output.
> >
> > When I finally run './avian-run.sh', I get the following output
> >
> > java.io.EOFException
> >  at java.util.zip.InflaterInputStream.read (line 54)
> >  at java.util.zip.ZipFile$1.read (line 120)
> >  at java.util.zip.ZipFile$1.read (line 114)
> >  at java.util.zip.InflaterInputStream.read (line 39)
> >  at java.util.zip.ZipFile$1.read (line 106)
> >  at java.util.Properties$InputStreamParser.readCharacter (line 192)
> >  at java.util.Properties$Parser.parse (line 106)
> >  at java.util.Properties.load (line 21)
> >  at net.imglib2.vigra.NarHelper.loadLibrary (line 41)
> >  at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
> >  at io.scif.img.ImgOpener.openImg (line 301)
> >  at io.scif.img.ImgOpener.openImg (line 217)
> >  at io.scif.img.ImgOpener.openImg (line 200)
> >  at Example.main (line 34)
> >  at Example.main (line 22)
> > java.lang.ExceptionInInitializerError
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
> >  at io.scif.img.ImgOpener.openImg (line 301)
> >  at io.scif.img.ImgOpener.openImg (line 217)
> >  at io.scif.img.ImgOpener.openImg (line 200)
> >  at Example.main (line 34)
> >  at Example.main (line 22)
> > caused by: java.lang.UnsatisfiedLinkError: Could not find native library
> >  at net.imglib2.vigra.NarHelper.loadLibrary (line 78)
> >  at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
> >  at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
> >  at io.scif.img.ImgOpener.openImg (line 301)
> >  at io.scif.img.ImgOpener.openImg (line 217)
> >  at io.scif.img.ImgOpener.openImg (line 200)
> >  at Example.main (line 34)
> >  at Example.main (line 22)
> >
> > No image is created. The input image I used is attached.
> >
> > When I try to compile Tobias' code (branch 'buffer'), I get
> >
> > [WARNING] The POM for
> com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing,
> no dependency information available
> > [ERROR] The build could not read 1 project -> [Help 1]
> > [ERROR]
> > [ERROR]   The project net.imglib2.vigra:vigra-imglib2:1.0.0-SNAPSHOT
> (/home/ukoethe/src/vigra-imglib2/pom.xml) has 2 errors
> > [ERROR]     Unresolveable build extension: Plugin
> com.github.maven-nar:nar-maven-plugin:3.0.0-rc-3-SNAPSHOT or one of its
> dependencies could not be resolved: Failure to find
> com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT in
> http://mvnplugins.fusesource.org/repo/release was cached in the local
> repository, resolution will not be reattempted until the update interval of
> mvnplugins.fusesource.org has elapsed or updates are forced -> [Help 2]
> >
> > Best regards
> > Ulli
> > <img.pgm>
>
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/f5d6f486/attachment-0001.html>

From ctrueden at wisc.edu  Thu Dec  5 15:06:56 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 5 Dec 2013 15:06:56 -0600
Subject: [ImageJ-devel] ImgLib2 + KNIME hackathon report
Message-ID: <CADN69ynh4zdEraazcv3t2KVKXEFzhbU1NKACtSNzZk3VPfQb0g@mail.gmail.com>

Hi all,

In mid-November, the ImageJ2 team at LOCI was visited by Christian Dietz of
the University of Konstanz, lead developer of the KNIME Image Processing
project [1]. We spent a week of intensely programming to improve the
integration of KNIME with ImgLib2 and ImageJ2.

Christian wrote up a summary of the topics covered and work performed:

IJ2 <-> KNIME bi-directional integration (goal: have something end of 2013)
* KNIME automatically generates Nodes from Plugins (DONE)
* IJ2 will be able to record KNIME Workflows (WIP)
* IJ2 runs KNIME Workflows Headless (WIP)
* IJ2 provides an update-site for OSGi wrapped bundles (WIP)
* KNIME can be updated using the IJ2 Update-Sites/FIJI-Personal
Update-Sites (WIP)

Come up with a plan for Algorithms/Experimental and make these suggestions
* Common code repository for plugins (scijava-ops)
* Started to define interfaces
* We need to reimplement / unify a lot of stuff
* General convolution/wrapping methods are needed
* Define coding conventions for imglib2-algorithms
* Define coding (social and technical) conventions for scijava-ops

Get a grip on descriptor sets
* Unified interfaces
* Now part of scijava-ops, using scijava-common

Discuss/Merge all open pull-requests ImgLib2 (Done)
* Projectors merged!
* WrappedImg merged!
* FlatIterableInterval merged!
* Mail sent to clean-up branches

SCIFIOCellImg with Memory Service
* Development branch: https://github.com/scifio/scifio/tree/cache-imps
* Refactored SCIFIOCells to cache via phantom reference instead of
finalization (done)
* Created MemoryService to manage a new RefHandler class of plugins and
provide configurable memory safeguards (done)
* Taking a test case of re-writing each pixel in a dataset, improved cache
performance from 59.6s write, 57.1s read to 35.2s write, 1.6s read (done)
* Two tests still failing unpredictably due to garbage collection reliance
(I think). As soon as these are fixed, the update SCIFIOCell/MemoryService
functionality will be released in SCIFIO 0.7.4.
* Integration to KNIME started but not finished (easy task, thanks Mark!)

Have a running real-life example at LOCI (or start setting one up) (Done)
* Working Examples running at LOCI (Tracking/Segmentation/Measurement)
* Two more potential projects for integration
* Anytime: Just ask Martin/Christian for any assistance or even send them
the images as they are happy to help with workflows
* Guide how to install KNIME Image Processing (DONE)

Overall, it was an immensely productive hackathon. For most of the "WIP"
items above, we have working code which just needs a little polish.

I will send out a separate email soon with more details on the scijava-ops
project.

Any other questions, feel free to ask!

Regards,
Curtis

[1] http://knime.imagej.net/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131205/7e43a3e6/attachment.html>

From Johannes.Schindelin at gmx.de  Thu Dec  5 15:54:06 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Thu, 5 Dec 2013 22:54:06 +0100 (CET)
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <52A0C2B5.2030208@iwr.uni-heidelberg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
Message-ID: <alpine.DEB.1.00.1312052250540.1191@s15462909.onlinehome-server.info>

Hi Ulli,

On Thu, 5 Dec 2013, Ullrich Koethe wrote:

> following your instructions, I now installed all dependencies on Linux
> (64-bit Ubuntu, gcc 4.7.3). Here is what I got:
> 
> In scifio, maven compiles, but then complains
> 
>    Failed tests:   testDefaultEnabled(io.scif.filters.utests.FilterTest)

Hopefully you will not need to compile SCIFIO yourself anymore soon (I
require https://github.com/scifio/scifio/pull/98 or something similar to
be merged for that).

> In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a
> number of compiler warnings which seem to be uncritical on first glance,
> but are confusingly flagged as "[ERROR]" in the maven output.

Which ones? (Please just paste such errors when you encounter them, of
course I could reproduce, if only I had more time!)

> When I finally run './avian-run.sh', I get the following output
> 
> java.io.EOFException
>   at java.util.zip.InflaterInputStream.read (line 54)
>   at java.util.zip.ZipFile$1.read (line 120)
>   at java.util.zip.ZipFile$1.read (line 114)
>   at java.util.zip.InflaterInputStream.read (line 39)
>   at java.util.zip.ZipFile$1.read (line 106)
>   at java.util.Properties$InputStreamParser.readCharacter (line 192)
>   at java.util.Properties$Parser.parse (line 106)
>   at java.util.Properties.load (line 21)
>   at net.imglib2.vigra.NarHelper.loadLibrary (line 41)
>   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>   at io.scif.img.ImgOpener.openImg (line 301)
>   at io.scif.img.ImgOpener.openImg (line 217)
>   at io.scif.img.ImgOpener.openImg (line 200)
>   at Example.main (line 34)
>   at Example.main (line 22)
> java.lang.ExceptionInInitializerError
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
>   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
>   at io.scif.img.ImgOpener.openImg (line 301)
>   at io.scif.img.ImgOpener.openImg (line 217)
>   at io.scif.img.ImgOpener.openImg (line 200)
>   at Example.main (line 34)
>   at Example.main (line 22)
> caused by: java.lang.UnsatisfiedLinkError: Could not find native library

I will make that error message more informative. Thanks for testing.

Hopefully I will be able to set aside time to work on this project next
week.

Ciao,
Dscho


From pietzsch at mpi-cbg.de  Thu Dec  5 20:52:16 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 03:52:16 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
Message-ID: <3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>

On Dec 5, 2013, at 11:56 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:

> Hi again,
> 
> > * Encapsulates internal dependencies such as java.util.concurrent
> > (e.g., Avian doesn't have that package!).
> 
> And Android / J2ME doesn't have java.util.concurrent either. I am interested in porting ImageJ2 to Android (which would necessitate a port of ImgLib2 to Android). The more "weird" Java packages we use, the more involved it will be to refactor those usages out later to make such a thing possible. The "swappability" of SJC services will obviate the need to do it in some cases.

On a closer look, ThreadService uses java.util.concurrent.Callable and import java.util.concurrent.Future.
It also extends java.util.concurrent.ThreadFactory. So the Android/AVIAN argument is not really valid.

To reiterate my previous question why not extend the ExecutorService interface instead?
One answer I could give to that myself is that we do not need/want the full ExecutorService, e.g., an imglib algorithm should not be allowed to shutdown() the ExecutorService.
On the other hand, we do not need/want the full ThreadService, e.g. using newThread() from the ThreadFactory is not wanted.

So could we maybe extract the part of ExecutorService that we are interested in (invokeAll, invokeAny, and submit variants) into a new interface and make ThreadService extend that?
This would still not allow us to pass a standard ExecutorService into imglib algorithms but a ThreadService. I could live with it.
The question then is whether this should live in imglib, in scijava-common, or somewhere else. I hesitate making scijava-common a dependency of imglib. I know just having scijava-common as a dependency does not force me to use the application container but still? Making imglib a dependency of scijava-common is not a good idea either.
Hmm...

best regards,
Tobias

> 
> Regards,
> Curtis
> 
> 
> On Thu, Dec 5, 2013 at 4:48 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
> Hi Tobias,
> 
> > Curtis, could you elaborate on why you prefer scijava-common
> > ThreadService? I just had a look and, as an interface, I cannot see
> > what would make it preferable to ExecutorService. For me a point in
> > favour of ExecutorService is that it is in the JDK. What additional
> > value would ThreadService provide?
> 
> For me, the fact that we control the ThreadService API contract is a point in its favor. If we need to add some functionality, we cannot add it to ExecutorService, because it is part of core Java. But the SciJava Common API can adapt to our needs.
> 
> > Would it be an option to let ThreadService extends ExecutorService?
> 
> As a rule of thumb, I prefer composition to inheritance [1]. The SciJava Common ThreadService *has* an ExecutorService internally. Right now, that is not exposed in the API contract, but we could do so (i.e., a "setExecutor" method). That would also solve Lee's single-threaded use case without requiring him to override the DefaultThreadService implementation itself.
> 
> > Correct me if I'm wrong, but I thought the same was the idea about
> > ExecutorService?
> 
> Yes. ExecutorService is an interface, so if the ImgLib2 API contract uses that interface, it is true that callers can pass whatever kind of ExecutorService they want. And that is a form of dependency injection.
> 
> The SciJava Common approach uses SezPoz to discover plugins (including services) and organize them by priority. If a ThreadService is found on the classpath with higher priority than the DefaultThreadService, it will take precedence for any SciJava application context that needs a ThreadService.
> 
> Advantages of ExecutorService:
> * Avoids dependency on SciJava Common, and potential overhead of SJC application context.
> * Easy to override threading behavior on a case-by-case basis (i.e., pass different ExecutorServices to different algorithms).
> 
> Advantages of ThreadService:
> * Can improve the API as needed.
> * Encapsulates internal dependencies such as java.util.concurrent (e.g., Avian doesn't have that package!).
> * Easy to globally override threading behavior for an entire application context.
> 
> There are surely other reasons to go one way or the other, but that's all that's coming out of my brain at the moment.
> 
> Regards,
> Curtis
> 
> [1] https://en.wikipedia.org/wiki/Composition_over_inheritance
> 
> 
> 
> On Thu, Dec 5, 2013 at 4:27 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de> wrote:
> 
> On Dec 5, 2013, at 10:32 PM, Johannes Schindelin <Johannes.Schindelin at gmx.de> wrote:
> 
> > Hi Tobi,
> >
> > On Thu, 5 Dec 2013, Tobias Pietzsch wrote:
> >
> >> Curtis, could you elaborate on why you prefer scijava-common ThreadService?
> >
> > Very easy: scijava-common's ThreadService can be overridden by your own
> > implementation. Such as a ThreadService backed by KNIME's own?
> 
> Correct me if I'm wrong, but I thought the same was the idea about ExecutorService?
> best regards,
> Tobias
> 
> >
> > Remember, not everybody starts everything on a single-user desktop
> > machine, in an Oracle JVM launched from within Eclipse with a Swing/AWT
> > user interface ;-)
> >
> > Ciao,
> > Dscho
> 
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/2bb32aba/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/2bb32aba/attachment.pgp>

From ullrich.koethe at iwr.uni-heidelberg.de  Fri Dec  6 03:35:23 2013
From: ullrich.koethe at iwr.uni-heidelberg.de (Ullrich Koethe)
Date: Fri, 06 Dec 2013 10:35:23 +0100
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <3509A376-E166-4B01-BA73-B24B8910B92F@mpi-cbg.de>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
	<3509A376-E166-4B01-BA73-B24B8910B92F@mpi-cbg.de>
Message-ID: <52A19A5B.5040204@iwr.uni-heidelberg.de>

Hi Tobias,

>> When I try to compile Tobias' code (branch 'buffer'), I get
>>
>> [WARNING] The POM for com.github.maven-nar:nar-maven-plugin:jar:3.0.0-rc-3-SNAPSHOT is missing, no dependency information available
>> [ERROR] The build could not read 1 project -> [Help 1]
>
>
> my bad, I set a version of the nar-maven-plugin that cannot be obtained from the public maven repository but must be build locally.
> I reverted to version 3.0.0-rc-2. It should work now. Can you try again?

Yes, it works. Thank you very much!

Ulli


From pietzsch at mpi-cbg.de  Fri Dec  6 05:15:26 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 12:15:26 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
Message-ID: <8B8AB3EF-28DB-4FC0-B1F7-679D5759D7D9@mpi-cbg.de>

Hi JY,

exactly. That's what I meant when I wrote
> One thing that I'm missing with the ExecutorService is getting an estimate of many worker threads there are. This is useful to guide a heuristic of how many tasks a problem should be split.
> We now just use Runtime.getRuntime().availableProcessors() for that purpose, but it would be nice to have something better. 

Maybe I wasn't being clear enough.

Usually (also in the Gauss) I split the task into number of subtasks that is a multiple of the number available workers.
The reasoning behind this is that the workers might finish a task at different speeds. This can be caused by other stuff (even outside the JVM) using resources. Or it can be caused by simply the tasks being more or less demanding. For instant in spot detection, probably a frame that is completely black will finish a bit earlier than a normal frame.
So if there are N workers and N tasks, N-1 workers are waiting for the slowest task to finish. Splitting into more tasks, once a worker is finished, it will just pick the next unprocessed task.
With very many tasks, I guess there is a point where the task management overhead is slowing it down, so a reasonable heuristic is required (to be defined:-)

best regards,
Tobias

On Dec 6, 2013, at 9:29 AM, Jean-Yves Tinevez <jean-yves.tinevez at pasteur.fr> wrote:

> Hi all
> 
> Ok thank you very much this is inspiring. 
> 
> I see the discussion is still going on and that we (the team) did not reach a definitive conclusion yet. 
> 
> I just want to add a question item to the discussion: 
> Sometimes you need to have information on the multithreading configuration that has been set upstream.
> 
> For instance, taking the example of TrackMate spot detection:
> 
> Each frame of a movie can be processed concurrently: I generate a task for each frame, and can feed this task to any interface we are discussing right now. For this, I do not need to know how many threads are allocated to the service: it will decide how to process the tasks I generated. 
> 
> By there are many algorithms in imglib2 that can process a single image in a multithreaded way, by splitting it into small pieces. For instance, you can compute the Gauss convolution on 2 threads, and it will split the source image in 2. For this, the algorithm needs to have some info on the "multitasking resources" available right? If you have 24 workers, and that each worker receives one frame to segment, the segmenter needs to know it is unwise to split the source image over several extra workers. No?
> 
> How is this achieved in real world applications?
> best
> jy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/d70a0cc5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/d70a0cc5/attachment.pgp>

From leek at broadinstitute.org  Fri Dec  6 07:27:50 2013
From: leek at broadinstitute.org (Lee Kamentsky)
Date: Fri, 6 Dec 2013 08:27:50 -0500
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
Message-ID: <CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>

Hi all,

On Fri, Dec 6, 2013 at 3:29 AM, Jean-Yves Tinevez <
jean-yves.tinevez at pasteur.fr> wrote:

> Hi all
>
> Each frame of a movie can be processed concurrently: I generate a task for
> each frame, and can feed this task to any interface we are discussing right
> now. For this, I do not need to know how many threads are allocated to the
> service: it will decide how to process the tasks I generated.
>
> By there are many algorithms in imglib2 that can process a single image in
> a multithreaded way, by splitting it into small pieces. For instance, you
> can compute the Gauss convolution on 2 threads, and it will split the
> source image in 2. For this, the algorithm needs to have some info on the
> "multitasking resources" available right? If you have 24 workers, and that
> each worker receives one frame to segment, the segmenter needs to know it
> is unwise to split the source image over several extra workers. No?
>
> How is this achieved in real world applications?
>
I think we're in a lucky sweet spot where the size of our data is big and
the number of processors is small. I think you want to amortize the cost of
enqueueing the work, thread signaling and thread context switching over a
pretty big chunk of data - and that's operating-system and
processor-specific in my experience, so it's best to benchmark. If I
remember correctly, as an example, Ilastik 0.5 breaks its images into
chunks of 10K pixels and runs perhaps 100 filters on each, plus a
random-forest evaluation. In that case, the large-grain operation makes the
optimization question pretty moot since the computation is so expensive
(and doing the chunking at the top level might be a good design choice).

It would be kind of cool if the service could give you an idea of the cost
of running one future and of the size of the thread pool. This is
notoriously difficult to measure, but a rough cut might be to find the
minimum time from enqueing a future until its execution and multiply that
by 2. If you knew the cost of running your algorithm on N pixels, you could
figure out how to slice it. It would also be kind of cool if your imglib
data container (or some helper class that encapsulated this expertise)
could give you a collection of iterators appropriate for the cost of your
operation and the thread service it would be run on.

> best
> jy
>
> --
> --
> Please avoid top-posting, and please make sure to reply-to-all!
>
> Mailing list web interface: http://groups.google.com/group/fiji-devel
>
> ---
> You received this message because you are subscribed to the Google Groups
> "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/26ba541a/attachment.html>

From pietzsch at mpi-cbg.de  Fri Dec  6 09:10:54 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 16:10:54 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
Message-ID: <626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>

Hi,

Problem: Did anyone think about the possibility of deadlocks?

Lets take the scenario that Lee mentioned. We enqueue a lot of tasks that each trigger computation of a set of features for an image each.
Probably the features can be computed in parallel, so basically what a single task does is: create subtasks, submit to ExecutorService, then block until they complete.
The subtask for a single feature of a single image might again create subtasks for parts of the image and block until they complete.
This may easily lead to the situation that all threads in the ExecutorService block because they wait for subtasks that are not executed because all threads block? Right?

So unfortunately, in my opinion that rules out both ExecutorService and SJC ThreadService (unless heavily modified).


How to solve this? The perfect solution is ForkJoin from java.util.concurrent, http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html
Unfortunately this was introduced only in Java 7 and thats a problem because we want to be 1.6 compatible.

So what should we do?
There seems to be the option of using the Fork/Join framework from jdk1.6 http://homes.cs.washington.edu/~djg/teachingMaterials/grossmanSPAC_forkJoinFramework.html#installation. If I understand correctly, this is the exact implementation as used in jdk1.7.
The other option is to reinvent that particular wheel in scijava-common or imglib2.

best regards,
Tobias


On Dec 6, 2013, at 2:27 PM, Lee Kamentsky <leek at broadinstitute.org> wrote:

> Hi all,
> 
> On Fri, Dec 6, 2013 at 3:29 AM, Jean-Yves Tinevez <jean-yves.tinevez at pasteur.fr> wrote:
> Hi all
> 
> Each frame of a movie can be processed concurrently: I generate a task for each frame, and can feed this task to any interface we are discussing right now. For this, I do not need to know how many threads are allocated to the service: it will decide how to process the tasks I generated.
> 
> By there are many algorithms in imglib2 that can process a single image in a multithreaded way, by splitting it into small pieces. For instance, you can compute the Gauss convolution on 2 threads, and it will split the source image in 2. For this, the algorithm needs to have some info on the "multitasking resources" available right? If you have 24 workers, and that each worker receives one frame to segment, the segmenter needs to know it is unwise to split the source image over several extra workers. No?
> 
> How is this achieved in real world applications?
> I think we're in a lucky sweet spot where the size of our data is big and the number of processors is small. I think you want to amortize the cost of enqueueing the work, thread signaling and thread context switching over a pretty big chunk of data - and that's operating-system and processor-specific in my experience, so it's best to benchmark. If I remember correctly, as an example, Ilastik 0.5 breaks its images into chunks of 10K pixels and runs perhaps 100 filters on each, plus a random-forest evaluation. In that case, the large-grain operation makes the optimization question pretty moot since the computation is so expensive (and doing the chunking at the top level might be a good design choice).
> 
> It would be kind of cool if the service could give you an idea of the cost of running one future and of the size of the thread pool. This is notoriously difficult to measure, but a rough cut might be to find the minimum time from enqueing a future until its execution and multiply that by 2. If you knew the cost of running your algorithm on N pixels, you could figure out how to slice it. It would also be kind of cool if your imglib data container (or some helper class that encapsulated this expertise) could give you a collection of iterators appropriate for the cost of your operation and the thread service it would be run on.
> best
> jy
> 
> --
> --
> Please avoid top-posting, and please make sure to reply-to-all!
> 
> Mailing list web interface: http://groups.google.com/group/fiji-devel
> 
> ---
> You received this message because you are subscribed to the Google Groups "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/0d8e455b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/0d8e455b/attachment-0001.pgp>

From Johannes.Schindelin at gmx.de  Fri Dec  6 09:34:37 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Fri, 6 Dec 2013 16:34:37 +0100 (CET)
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
Message-ID: <alpine.DEB.1.00.1312060915120.10295@bonsai2>

Hi Tobi,

On Fri, 6 Dec 2013, Tobias Pietzsch wrote:

> On Dec 5, 2013, at 11:56 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
> 
> > > * Encapsulates internal dependencies such as java.util.concurrent
> > > (e.g., Avian doesn't have that package!).
> > 
> > And Android / J2ME doesn't have java.util.concurrent either. I am
> > interested in porting ImageJ2 to Android (which would necessitate a
> > port of ImgLib2 to Android). The more "weird" Java packages we use,
> > the more involved it will be to refactor those usages out later to
> > make such a thing possible. The "swappability" of SJC services will
> > obviate the need to do it in some cases.
> 
> On a closer look, ThreadService uses java.util.concurrent.Callable and
> import java.util.concurrent.Future.

Yes, they do. At least Callable is so simple that it does not make sense
whatsoever to reimplement it.

> It also extends java.util.concurrent.ThreadFactory. So the Android/AVIAN
> argument is not really valid.

Whoa, slow! The *more* you take from the concurrent package, the *harder*
it gets to support Android/Avian. It's not "take it or leave it". So
Curtis' argument is a very valid one! Just because you use two interfaces
that are easily provided in a support library does not mean that you could
just as easily buy into the complete concurrent package, because that one
is *not* easily provided in a support library!

> To reiterate my previous question why not extend the ExecutorService
> interface instead?
>
> One answer I could give to that myself is that we do not need/want the
> full ExecutorService, e.g., an imglib algorithm should not be allowed to
> shutdown() the ExecutorService.

There you go.

> On the other hand, we do not need/want the full ThreadService, e.g.
> using newThread() from the ThreadFactory is not wanted.

In ImgLib2 core, no you do not need that right now. But scijava-common is
about striking a balance between what ImgLib2 needs and what other
scientific Java projects need.

Personally, I have a strong faith in ImgLib2 being able to cope with the
ThreadService providing the newThread() method and just not use it.

I also have a strong faith that both Lee with his SingleThreadService and
myself with whatever I have to implement to support the ThreadService in
Avian (if ever needed, really) will have a much smaller problem
implementing ThreadService than a full-fledged ExecutorService.

> So could we maybe extract the part of ExecutorService that we are
> interested in (invokeAll, invokeAny, and submit variants) into a new
> interface and make ThreadService extend that?

The idea of ThreadService (it being an interface already) was to *be* that
new interface.

> This would still not allow us to pass a standard ExecutorService into
> imglib algorithms but a ThreadService. I could live with it.

And again, scijava-common already has a default implementation using the
ExecutorService (which we will have to override in the case of Android or
Avian).

> The question then is whether this should live in imglib, in
> scijava-common, or somewhere else. I hesitate making scijava-common a
> dependency of imglib.

Yes, you made that point earlier.

Personally, I am less and less convinced that it is a good idea to go out
of our way to make ImgLib2-core a kitchen sink. It is about
multi-dimensional data processing, after all, not about common
functionality to scientific Java projects.

The name scijava-common was chosen to reflect the desire to put code used
commonly in scientific Java projects into that library rather than
reinvent the wheel in every scientific Java project.

And it is understandable that the same scientists who would not use
Bio-Formats for reading and writing AVIs (because the name suggests that
Bio-Formats is intended for biologists, and they are physicists, after
all) would refuse to link to ImgLib2-core for the useful stuff unrelated
to image processing because they do not want to process images.

Again, that is why scijava-common was started, and we put quite useful
functionality into it that all arose from the Fiji/ImageJ2 projects but is
of wider interest than just image processing, at the same time managing to
keep the library small and sweet.

> I know just having scijava-common as a dependency does not force me to
> use the application container but still? Making imglib a dependency of
> scijava-common is not a good idea either.

Exactly. I think it is a wise idea to trust Curtis on the separation of
concerns because he has spent literally the past four years on that
subject.

In particular, your intuition that imglib2-core should not be a dependency
of scijava-common makes absolute sense from the point of view that modules
need to be separated by virtue of their particular focus: the
scijava-common library's focus being quite obviously *the* base for
scientific Java programming, right?

Ciao,
Dscho

From ctrueden at wisc.edu  Fri Dec  6 12:52:45 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Fri, 6 Dec 2013 12:52:45 -0600
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
	<alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
	<F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
Message-ID: <CADN69ymL5HU4XyiKrRexgxR-f5qmC28VnguDK1sAfjWCuED6WQ@mail.gmail.com>

Hi all,

After sleeping on it, I do not think SJC ThreadService is actually the way
to go for providing better threading configuration of algorithms. But
unlike Tobias, I do *not* think this is because SJC contexts are
burdensome. Specifically, in response to Tobias's comment:

> [SJC] is absolutely not the right thing if you are building a library in
my opinion.

I strongly disagree; SJC was created to benefit SCIFIO, and it has done so
tremendously. I can elaborate on this if you like, but suffice to say that
even libraries have configuration and state and services that they need to
provide, and a unified context is an excellent way to do this. If you
instead rely on statics, you will create something that cannot be extended.
We learned this from painful experience with Bio-Formats!

Anyway, the reason I think SJC ThreadService is wrong for this use case is
due to another bullet point I mentioned earlier:

> Easy to override threading behavior on a case-by-case basis
> (i.e., pass different ExecutorServices to different algorithms).

That is, SJC services are singletons, intended to store state for the
application context. The threading configuration for running an algorithm
might be different than that for another algorithm running in the same
context. We need to be able to configure it individually. While
ThreadService might be able to serve as a sensible default configuration
(i.e., "just use SJC's ExecutorService by default"), it should not be
forced on every algorithm.

> As I pointed out, this has been done exactly right in Java 7 Fork/Join
> framework (by people who presumably put more thought and experience
> into it than we could). If the majority insists that we reimplement
> something similar, then at least let us use the same interfaces.

I agree that it would be great if we could use something that has been
vetted by the greater Java community. However, this makes porting to
non-JavaSE-7 platforms much more difficult. Tobias, I know you pointed out
some java.util.concurrent leakages into ThreadService -- we weren't being
overly careful about it yet -- but my point stands that SJC has the
potential to make those sorts of ports easier if we put effort into it.
More Jenkins builds against alternative Java implementations would be a
great start toward that.

Anyway, it's not that I *want* to reimplement something similar to Java 7's
Fork/Join... it's that I don't have a good alternative if we also want to
support those other scenarios. One possible compromise would be design our
own agnostic interface, and provide an implementation in its own module
which uses Java 7's Fork/Join. That way, it will be possible to provide an
alternative implementation on platforms which don't support it. This sort
of interface-driven extensible design is *exactly* what SJC seeks to make
possible with its plugin framework.

Regards,
Curtis


On Fri, Dec 6, 2013 at 12:39 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:

> Hi,
>
> On Dec 6, 2013, at 7:28 PM, Johannes Schindelin <
> Johannes.Schindelin at gmx.de> wrote:
>
> > Hi Lee,
> >
> > On Fri, 6 Dec 2013, Lee Kamentsky wrote:
> >>
> >> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de
> >wrote:
> >>
> >>> Problem: Did anyone think about the possibility of deadlocks?
> >>
> >> Nice catch, Tobias
> >
> > Does anybody have a different reaction than "Oh well, that's right, we
> > cannot use the ExecutorService, then, but instead need to adapt the
> > ThreadService so it handles this one right"?
>
> Here, I have a different reaction:
> As I pointed out, this has been done exactly right in Java 7 Fork/Join
> framework (by people who presumably put more thought and experience into it
> than we could).
> If the majority insists that we reimplement something similar, then at
> least let us use the same interfaces.
>
> best regards,
> Tobias
>
> >
> > Ciao,
> > Dscho
> >
> > --
> > --
> > Please avoid top-posting, and please make sure to reply-to-all!
> >
> > Mailing list web interface: http://groups.google.com/group/fiji-devel
> >
> > ---
> > You received this message because you are subscribed to the Google
> Groups "Fiji-devel" group.
> > To unsubscribe from this group and stop receiving emails from it, send
> an email to fiji-devel+unsubscribe at googlegroups.com.
> > For more options, visit https://groups.google.com/groups/opt_out.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/c616d6de/attachment.html>

From Johannes.Schindelin at gmx.de  Fri Dec  6 12:57:41 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Fri, 6 Dec 2013 19:57:41 +0100 (CET)
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <2B51BEEF-DA40-41A0-B0E3-C9BDF56B871F@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<alpine.DEB.1.00.1312060915120.10295@bonsai2>
	<2B51BEEF-DA40-41A0-B0E3-C9BDF56B871F@mpi-cbg.de>
Message-ID: <alpine.DEB.1.00.1312061947240.1191@s15462909.onlinehome-server.info>

Hi Tobi,

On Fri, 6 Dec 2013, Tobias Pietzsch wrote:

> As far as I see it, a big part of scijava-common is to be a dependency
> injection framework.

That is just part of it, but yes, it is a part.

> It can provide an application context, it can harvest annotations from
> my classes, it can even modify my eclipse projects.

It can add a file to your Eclipse project that works around an incorrect
interpretation of the Java specification, yes: annotation processing is
only performed correctly by Eclipse if you add that file.

> This is exactly the right thing to use if you are building an
> application.

And if you are building extensible frameworks with extension points, such
as: segmentation and tracking plugins for TrackMate, feature plugins for
the Trainable Segmentation, generic extensions for TrakEM2, commands for
the 3D Viewer, and yes, also operations for scijava-ops.

Extensibility is something that a lot of projects related to Fiji had to
reinvent due to lack of a base library providing a common extensibility
framework.

With scijava-common, there is no more need to do so.

I have to admit that it gets hard for me to accept that we are contesting
about reusability here. Reusable classes in a library that weighs in with
a whopping two hundred kilobytes.

If you insist on not having such a dependency in imglib2-core, fine, I
cannot change your mind, I can only point out that imglib2-core will have
to reinvent at least a large part of scijava-common's functionality, one
by one, and as ImgLib2 will be used for the most part in projects that
already rely at least transitively on scijava-common (including your own
big data viewer), that will be a true duplication.

I rest my case because there is nothing else I can do, really.
Dscho


From saalfeld at mpi-cbg.de  Fri Dec  6 13:12:16 2013
From: saalfeld at mpi-cbg.de (Stephan Saalfeld)
Date: Fri, 06 Dec 2013 14:12:16 -0500
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <CADN69ymL5HU4XyiKrRexgxR-f5qmC28VnguDK1sAfjWCuED6WQ@mail.gmail.com>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
	<alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
	<F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
	<CADN69ymL5HU4XyiKrRexgxR-f5qmC28VnguDK1sAfjWCuED6WQ@mail.gmail.com>
Message-ID: <1386357136.12771.39.camel@saalfeld-thinkpad>

Hi all,

what about having a Java 7 Fork/Join inspired ThreadService as an
independent component forming a dependency of SJC?  As SJC grows,
cutting it into pieces that can optionally be grouped by parent-poms is
probably due sooner or later anyways.  May be this is the day of birth
for SJCC (SJC-concurrency).

Tobias, thanks for bringing up the deadlock issue!

Best,
Stephan



On Fri, 2013-12-06 at 12:52 -0600, Curtis Rueden wrote: 
> Hi all,
> 
> After sleeping on it, I do not think SJC ThreadService is actually the way
> to go for providing better threading configuration of algorithms. But
> unlike Tobias, I do *not* think this is because SJC contexts are
> burdensome. Specifically, in response to Tobias's comment:
> 
> > [SJC] is absolutely not the right thing if you are building a library in
> my opinion.
> 
> I strongly disagree; SJC was created to benefit SCIFIO, and it has done so
> tremendously. I can elaborate on this if you like, but suffice to say that
> even libraries have configuration and state and services that they need to
> provide, and a unified context is an excellent way to do this. If you
> instead rely on statics, you will create something that cannot be extended.
> We learned this from painful experience with Bio-Formats!
> 
> Anyway, the reason I think SJC ThreadService is wrong for this use case is
> due to another bullet point I mentioned earlier:
> 
> > Easy to override threading behavior on a case-by-case basis
> > (i.e., pass different ExecutorServices to different algorithms).
> 
> That is, SJC services are singletons, intended to store state for the
> application context. The threading configuration for running an algorithm
> might be different than that for another algorithm running in the same
> context. We need to be able to configure it individually. While
> ThreadService might be able to serve as a sensible default configuration
> (i.e., "just use SJC's ExecutorService by default"), it should not be
> forced on every algorithm.
> 
> > As I pointed out, this has been done exactly right in Java 7 Fork/Join
> > framework (by people who presumably put more thought and experience
> > into it than we could). If the majority insists that we reimplement
> > something similar, then at least let us use the same interfaces.
> 
> I agree that it would be great if we could use something that has been
> vetted by the greater Java community. However, this makes porting to
> non-JavaSE-7 platforms much more difficult. Tobias, I know you pointed out
> some java.util.concurrent leakages into ThreadService -- we weren't being
> overly careful about it yet -- but my point stands that SJC has the
> potential to make those sorts of ports easier if we put effort into it.
> More Jenkins builds against alternative Java implementations would be a
> great start toward that.
> 
> Anyway, it's not that I *want* to reimplement something similar to Java 7's
> Fork/Join... it's that I don't have a good alternative if we also want to
> support those other scenarios. One possible compromise would be design our
> own agnostic interface, and provide an implementation in its own module
> which uses Java 7's Fork/Join. That way, it will be possible to provide an
> alternative implementation on platforms which don't support it. This sort
> of interface-driven extensible design is *exactly* what SJC seeks to make
> possible with its plugin framework.
> 
> Regards,
> Curtis
> 
> 
> On Fri, Dec 6, 2013 at 12:39 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:
> 
> > Hi,
> >
> > On Dec 6, 2013, at 7:28 PM, Johannes Schindelin <
> > Johannes.Schindelin at gmx.de> wrote:
> >
> > > Hi Lee,
> > >
> > > On Fri, 6 Dec 2013, Lee Kamentsky wrote:
> > >>
> > >> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de
> > >wrote:
> > >>
> > >>> Problem: Did anyone think about the possibility of deadlocks?
> > >>
> > >> Nice catch, Tobias
> > >
> > > Does anybody have a different reaction than "Oh well, that's right, we
> > > cannot use the ExecutorService, then, but instead need to adapt the
> > > ThreadService so it handles this one right"?
> >
> > Here, I have a different reaction:
> > As I pointed out, this has been done exactly right in Java 7 Fork/Join
> > framework (by people who presumably put more thought and experience into it
> > than we could).
> > If the majority insists that we reimplement something similar, then at
> > least let us use the same interfaces.
> >
> > best regards,
> > Tobias
> >
> > >
> > > Ciao,
> > > Dscho
> > >
> > > --
> > > --
> > > Please avoid top-posting, and please make sure to reply-to-all!
> > >
> > > Mailing list web interface: http://groups.google.com/group/fiji-devel
> > >
> > > ---
> > > You received this message because you are subscribed to the Google
> > Groups "Fiji-devel" group.
> > > To unsubscribe from this group and stop receiving emails from it, send
> > an email to fiji-devel+unsubscribe at googlegroups.com.
> > > For more options, visit https://groups.google.com/groups/opt_out.
> >
> >
> 
> -- 



From leek at broadinstitute.org  Fri Dec  6 13:09:54 2013
From: leek at broadinstitute.org (Lee Kamentsky)
Date: Fri, 6 Dec 2013 14:09:54 -0500
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
	<alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
	<F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
Message-ID: <CAHLFyjfNif3-0P1_1suG4oT7ym8z=ie=50a+yUdkXk9+D7aUKw@mail.gmail.com>

Hi Tobias,

On Fri, Dec 6, 2013 at 1:39 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de> wrote:

> Hi,
>
> On Dec 6, 2013, at 7:28 PM, Johannes Schindelin <
> Johannes.Schindelin at gmx.de> wrote:
>
> > Hi Lee,
> >
> > On Fri, 6 Dec 2013, Lee Kamentsky wrote:
> >>
> >> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de
> >wrote:
> >>
> >>> Problem: Did anyone think about the possibility of deadlocks?
> >>
> >> Nice catch, Tobias
> >
> > Does anybody have a different reaction than "Oh well, that's right, we
> > cannot use the ExecutorService, then, but instead need to adapt the
> > ThreadService so it handles this one right"?
>
> Here, I have a different reaction:
> As I pointed out, this has been done exactly right in Java 7 Fork/Join
> framework (by people who presumably put more thought and experience into it
> than we could).
> If the majority insists that we reimplement something similar, then at
> least let us use the same interfaces.
>
> It looks to me like a computation has to know whether or not it is being
run inside a ForkJoinThread. If so, it calls ForkJoinTask.invoke() to
complete the computation and if not it calls invoke on the pool. I don't
think  this completely solves our problem - if X calls Y which invokes Z on
the thread, then Z should invoke on the pool, but if X invokes Y which
invokes Z, then Z should invoke on the ForkJoinTask. The mechanism should
make its decision based on the thread identity and not burden the framework
with keeping track of where it is. So I say that they didn't get it right
and that we can do better.

> best regards,
> Tobias
>
> >
> > Ciao,
> > Dscho
> >
> > --
> > --
> > Please avoid top-posting, and please make sure to reply-to-all!
> >
> > Mailing list web interface: http://groups.google.com/group/fiji-devel
> >
> > ---
> > You received this message because you are subscribed to the Google
> Groups "Fiji-devel" group.
> > To unsubscribe from this group and stop receiving emails from it, send
> an email to fiji-devel+unsubscribe at googlegroups.com.
> > For more options, visit https://groups.google.com/groups/opt_out.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/151e08f2/attachment.html>

From Johannes.Schindelin at gmx.de  Fri Dec  6 12:28:06 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Fri, 6 Dec 2013 19:28:06 +0100 (CET)
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
Message-ID: <alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>

Hi Lee,

On Fri, 6 Dec 2013, Lee Kamentsky wrote:
>
> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:
>
> > Problem: Did anyone think about the possibility of deadlocks?
>
> Nice catch, Tobias

Does anybody have a different reaction than "Oh well, that's right, we
cannot use the ExecutorService, then, but instead need to adapt the
ThreadService so it handles this one right"?

Ciao,
Dscho


From leek at broadinstitute.org  Fri Dec  6 12:13:42 2013
From: leek at broadinstitute.org (Lee Kamentsky)
Date: Fri, 6 Dec 2013 13:13:42 -0500
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
Message-ID: <CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>

Hi,
Nice catch, Tobias
On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:

> Hi,
>
> Problem: Did anyone think about the possibility of deadlocks?
>
> Lets take the scenario that Lee mentioned. We enqueue a lot of tasks that
> each trigger computation of a set of features for an image each.
> Probably the features can be computed in parallel, so basically what a
> single task does is: create subtasks, submit to ExecutorService, then block
> until they complete.
> The subtask for a single feature of a single image might again create
> subtasks for parts of the image and block until they complete.
> This may easily lead to the situation that all threads in the
> ExecutorService block because they wait for subtasks that are not executed
> because all threads block? Right?
>
>  They block AND are idle for no good reason - doubly bad.

So unfortunately, in my opinion that rules out both ExecutorService and SJC
> ThreadService (unless heavily modified).
>
>
> How to solve this? The perfect solution is ForkJoin from
> java.util.concurrent,
> http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html
> Unfortunately this was introduced only in Java 7 and thats a problem
> because we want to be 1.6 compatible.
>

There have been recent attempts to solve this in  Python (e.g.
http://greenlet.readthedocs.org/en/latest/). If you have a language with
lightweight pseudo-stacks and pseudo-threads, it's easy to just swap
"stacks" when you hit one of the blocking states and trade for a task
that's unblocked. For Java and C, true stacks are big (1MB) and the
swapping is not so good.

One semi-elegant solution is for the service to check whether the thread
requesting redemption of a future is a worker thread. If so, the function
that blocks just takes some work to be done off of the work queue, choosing
the work queued by its thread and completes it. An idle thread is also
allowed to take stuff off of this queue. So you need to attach thread
identity to the objects being enqueued. There's no downside to making a
worker thread complete the items queued by itself - the work has probably
been queued  up optimally at a higher level.

>
> So what should we do?
> There seems to be the option of using the Fork/Join framework from jdk1.6
> http://homes.cs.washington.edu/~djg/teachingMaterials/grossmanSPAC_forkJoinFramework.html#installation. If
> I understand correctly, this is the exact implementation as used in jdk1.7.
> The other option is to reinvent that particular wheel in scijava-common or
> imglib2.
>
> best regards,
> Tobias
>
>
> On Dec 6, 2013, at 2:27 PM, Lee Kamentsky <leek at broadinstitute.org> wrote:
>
> Hi all,
>
> On Fri, Dec 6, 2013 at 3:29 AM, Jean-Yves Tinevez <
> jean-yves.tinevez at pasteur.fr> wrote:
>
>> Hi all
>>
>> Each frame of a movie can be processed concurrently: I generate a task
>> for each frame, and can feed this task to any interface we are discussing
>> right now. For this, I do not need to know how many threads are allocated
>> to the service: it will decide how to process the tasks I generated.
>>
>> By there are many algorithms in imglib2 that can process a single image
>> in a multithreaded way, by splitting it into small pieces. For instance,
>> you can compute the Gauss convolution on 2 threads, and it will split the
>> source image in 2. For this, the algorithm needs to have some info on the
>> "multitasking resources" available right? If you have 24 workers, and that
>> each worker receives one frame to segment, the segmenter needs to know it
>> is unwise to split the source image over several extra workers. No?
>>
>> How is this achieved in real world applications?
>>
> I think we're in a lucky sweet spot where the size of our data is big and
> the number of processors is small. I think you want to amortize the cost of
> enqueueing the work, thread signaling and thread context switching over a
> pretty big chunk of data - and that's operating-system and
> processor-specific in my experience, so it's best to benchmark. If I
> remember correctly, as an example, Ilastik 0.5 breaks its images into
> chunks of 10K pixels and runs perhaps 100 filters on each, plus a
> random-forest evaluation. In that case, the large-grain operation makes the
> optimization question pretty moot since the computation is so expensive
> (and doing the chunking at the top level might be a good design choice).
>
> It would be kind of cool if the service could give you an idea of the cost
> of running one future and of the size of the thread pool. This is
> notoriously difficult to measure, but a rough cut might be to find the
> minimum time from enqueing a future until its execution and multiply that
> by 2. If you knew the cost of running your algorithm on N pixels, you could
> figure out how to slice it. It would also be kind of cool if your imglib
> data container (or some helper class that encapsulated this expertise)
> could give you a collection of iterators appropriate for the cost of your
> operation and the thread service it would be run on.
>
>> best
>> jy
>>
>> --
>> --
>> Please avoid top-posting, and please make sure to reply-to-all!
>>
>> Mailing list web interface: http://groups.google.com/group/fiji-devel
>>
>> ---
>> You received this message because you are subscribed to the Google Groups
>> "Fiji-devel" group.
>> To unsubscribe from this group and stop receiving emails from it, send an
>> email to fiji-devel+unsubscribe at googlegroups.com.
>> For more options, visit https://groups.google.com/groups/opt_out.
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/a45f608d/attachment.html>

From pietzsch at mpi-cbg.de  Fri Dec  6 12:36:44 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 19:36:44 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <alpine.DEB.1.00.1312060915120.10295@bonsai2>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<alpine.DEB.1.00.1312060915120.10295@bonsai2>
Message-ID: <2B51BEEF-DA40-41A0-B0E3-C9BDF56B871F@mpi-cbg.de>

Hi Johannes,

> And it is understandable that the same scientists who would not use
> Bio-Formats for reading and writing AVIs (because the name suggests that
> Bio-Formats is intended for biologists, and they are physicists, after
> all) would refuse to link to ImgLib2-core for the useful stuff unrelated
> to image processing because they do not want to process images.
> 
> Again, that is why scijava-common was started, and we put quite useful
> functionality into it that all arose from the Fiji/ImageJ2 projects but is
> of wider interest than just image processing, at the same time managing to
> keep the library small and sweet.

As far as I see it, a big part of scijava-common is to be a dependency injection framework.
It can provide an application context, it can harvest annotations from my classes, it can even modify my eclipse projects.
This is exactly the right thing to use if you are building an application.
It is absolutely not the right thing if you are building a library in my opinion.

best regards,
Tobias

On Dec 6, 2013, at 4:34 PM, Johannes Schindelin <Johannes.Schindelin at gmx.de> wrote:

> Hi Tobi,
> 
> On Fri, 6 Dec 2013, Tobias Pietzsch wrote:
> 
>> On Dec 5, 2013, at 11:56 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>> 
>>>> * Encapsulates internal dependencies such as java.util.concurrent
>>>> (e.g., Avian doesn't have that package!).
>>> 
>>> And Android / J2ME doesn't have java.util.concurrent either. I am
>>> interested in porting ImageJ2 to Android (which would necessitate a
>>> port of ImgLib2 to Android). The more "weird" Java packages we use,
>>> the more involved it will be to refactor those usages out later to
>>> make such a thing possible. The "swappability" of SJC services will
>>> obviate the need to do it in some cases.
>> 
>> On a closer look, ThreadService uses java.util.concurrent.Callable and
>> import java.util.concurrent.Future.
> 
> Yes, they do. At least Callable is so simple that it does not make sense
> whatsoever to reimplement it.
> 
>> It also extends java.util.concurrent.ThreadFactory. So the Android/AVIAN
>> argument is not really valid.
> 
> Whoa, slow! The *more* you take from the concurrent package, the *harder*
> it gets to support Android/Avian. It's not "take it or leave it". So
> Curtis' argument is a very valid one! Just because you use two interfaces
> that are easily provided in a support library does not mean that you could
> just as easily buy into the complete concurrent package, because that one
> is *not* easily provided in a support library!
> 
>> To reiterate my previous question why not extend the ExecutorService
>> interface instead?
>> 
>> One answer I could give to that myself is that we do not need/want the
>> full ExecutorService, e.g., an imglib algorithm should not be allowed to
>> shutdown() the ExecutorService.
> 
> There you go.
> 
>> On the other hand, we do not need/want the full ThreadService, e.g.
>> using newThread() from the ThreadFactory is not wanted.
> 
> In ImgLib2 core, no you do not need that right now. But scijava-common is
> about striking a balance between what ImgLib2 needs and what other
> scientific Java projects need.
> 
> Personally, I have a strong faith in ImgLib2 being able to cope with the
> ThreadService providing the newThread() method and just not use it.
> 
> I also have a strong faith that both Lee with his SingleThreadService and
> myself with whatever I have to implement to support the ThreadService in
> Avian (if ever needed, really) will have a much smaller problem
> implementing ThreadService than a full-fledged ExecutorService.
> 
>> So could we maybe extract the part of ExecutorService that we are
>> interested in (invokeAll, invokeAny, and submit variants) into a new
>> interface and make ThreadService extend that?
> 
> The idea of ThreadService (it being an interface already) was to *be* that
> new interface.
> 
>> This would still not allow us to pass a standard ExecutorService into
>> imglib algorithms but a ThreadService. I could live with it.
> 
> And again, scijava-common already has a default implementation using the
> ExecutorService (which we will have to override in the case of Android or
> Avian).
> 
>> The question then is whether this should live in imglib, in
>> scijava-common, or somewhere else. I hesitate making scijava-common a
>> dependency of imglib.
> 
> Yes, you made that point earlier.
> 
> Personally, I am less and less convinced that it is a good idea to go out
> of our way to make ImgLib2-core a kitchen sink. It is about
> multi-dimensional data processing, after all, not about common
> functionality to scientific Java projects.
> 
> The name scijava-common was chosen to reflect the desire to put code used
> commonly in scientific Java projects into that library rather than
> reinvent the wheel in every scientific Java project.
> 
> And it is understandable that the same scientists who would not use
> Bio-Formats for reading and writing AVIs (because the name suggests that
> Bio-Formats is intended for biologists, and they are physicists, after
> all) would refuse to link to ImgLib2-core for the useful stuff unrelated
> to image processing because they do not want to process images.
> 
> Again, that is why scijava-common was started, and we put quite useful
> functionality into it that all arose from the Fiji/ImageJ2 projects but is
> of wider interest than just image processing, at the same time managing to
> keep the library small and sweet.
> 
>> I know just having scijava-common as a dependency does not force me to
>> use the application container but still? Making imglib a dependency of
>> scijava-common is not a good idea either.
> 
> Exactly. I think it is a wise idea to trust Curtis on the separation of
> concerns because he has spent literally the past four years on that
> subject.
> 
> In particular, your intuition that imglib2-core should not be a dependency
> of scijava-common makes absolute sense from the point of view that modules
> need to be separated by virtue of their particular focus: the
> scijava-common library's focus being quite obviously *the* base for
> scientific Java programming, right?
> 
> Ciao,
> Dscho

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/8fc37682/attachment-0001.pgp>

From pietzsch at mpi-cbg.de  Fri Dec  6 12:39:36 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 19:39:36 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
	<alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
Message-ID: <F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>

Hi,

On Dec 6, 2013, at 7:28 PM, Johannes Schindelin <Johannes.Schindelin at gmx.de> wrote:

> Hi Lee,
> 
> On Fri, 6 Dec 2013, Lee Kamentsky wrote:
>> 
>> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:
>> 
>>> Problem: Did anyone think about the possibility of deadlocks?
>> 
>> Nice catch, Tobias
> 
> Does anybody have a different reaction than "Oh well, that's right, we
> cannot use the ExecutorService, then, but instead need to adapt the
> ThreadService so it handles this one right"?

Here, I have a different reaction:
As I pointed out, this has been done exactly right in Java 7 Fork/Join framework (by people who presumably put more thought and experience into it than we could).
If the majority insists that we reimplement something similar, then at least let us use the same interfaces.

best regards,
Tobias

> 
> Ciao,
> Dscho
> 
> -- 
> -- 
> Please avoid top-posting, and please make sure to reply-to-all!
> 
> Mailing list web interface: http://groups.google.com/group/fiji-devel
> 
> --- 
> You received this message because you are subscribed to the Google Groups "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/5fe4ccf8/attachment.pgp>

From pietzsch at mpi-cbg.de  Fri Dec  6 15:23:58 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Fri, 6 Dec 2013 22:23:58 +0100
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <CADN69ymL5HU4XyiKrRexgxR-f5qmC28VnguDK1sAfjWCuED6WQ@mail.gmail.com>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
	<7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>
	<CAHLFyjdo2PHBL-TEiGn0aSZ+uZqtCVN3APiQh5Cp6PZHsANoHQ@mail.gmail.com>
	<626AD368-0AC3-4B19-B615-7FFDDA52AE43@mpi-cbg.de>
	<CAHLFyjd4EU7vNoOz_kWRjmn-WW9ExCyxVq=k=0Y34y-QMfOXHQ@mail.gmail.com>
	<alpine.DEB.1.00.1312061926420.1191@s15462909.onlinehome-server.info>
	<F0C5D974-057A-4B79-A78E-7B4AF7EC088D@mpi-cbg.de>
	<CADN69ymL5HU4XyiKrRexgxR-f5qmC28VnguDK1sAfjWCuED6WQ@mail.gmail.com>
Message-ID: <321A397C-0872-4513-BB62-016372139513@mpi-cbg.de>

Hi Curtis,

> > [SJC] is absolutely not the right thing if you are building a library in my opinion.
> 
> I strongly disagree; SJC was created to benefit SCIFIO, and it has done so tremendously. I can elaborate on this if you like, but suffice to say that even libraries have configuration and state and services that they need to provide, and a unified context is an excellent way to do this. If you instead rely on statics, you will create something that cannot be extended. We learned this from painful experience with Bio-Formats!


Yes, could you please elaborate on this!
Maybe I should say that I have just recently (two days ago to be honest) started to seriously get into scijava-common and I like it very much so far. But I still don't see where it would benefit imglib2 core. I would like to have imglib2 be as close to purely functional as possible, no state, no side effects. As much as possible, at least.
Could you please explain where SCIFIO benefits from being stateful and where being stateful would probably help imglib?

best regards,
Tobias

On Dec 6, 2013, at 7:52 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:

> Hi all,
> 
> After sleeping on it, I do not think SJC ThreadService is actually the way to go for providing better threading configuration of algorithms. But unlike Tobias, I do *not* think this is because SJC contexts are burdensome. Specifically, in response to Tobias's comment:
> 
> > [SJC] is absolutely not the right thing if you are building a library in my opinion.
> 
> I strongly disagree; SJC was created to benefit SCIFIO, and it has done so tremendously. I can elaborate on this if you like, but suffice to say that even libraries have configuration and state and services that they need to provide, and a unified context is an excellent way to do this. If you instead rely on statics, you will create something that cannot be extended. We learned this from painful experience with Bio-Formats!
> 
> Anyway, the reason I think SJC ThreadService is wrong for this use case is due to another bullet point I mentioned earlier:
> 
> > Easy to override threading behavior on a case-by-case basis
> > (i.e., pass different ExecutorServices to different algorithms).
> 
> That is, SJC services are singletons, intended to store state for the application context. The threading configuration for running an algorithm might be different than that for another algorithm running in the same context. We need to be able to configure it individually. While ThreadService might be able to serve as a sensible default configuration (i.e., "just use SJC's ExecutorService by default"), it should not be forced on every algorithm.
> 
> > As I pointed out, this has been done exactly right in Java 7 Fork/Join
> > framework (by people who presumably put more thought and experience
> > into it than we could). If the majority insists that we reimplement
> > something similar, then at least let us use the same interfaces.
> 
> I agree that it would be great if we could use something that has been vetted by the greater Java community. However, this makes porting to non-JavaSE-7 platforms much more difficult. Tobias, I know you pointed out some java.util.concurrent leakages into ThreadService -- we weren't being overly careful about it yet -- but my point stands that SJC has the potential to make those sorts of ports easier if we put effort into it. More Jenkins builds against alternative Java implementations would be a great start toward that.
> 
> Anyway, it's not that I *want* to reimplement something similar to Java 7's Fork/Join... it's that I don't have a good alternative if we also want to support those other scenarios. One possible compromise would be design our own agnostic interface, and provide an implementation in its own module which uses Java 7's Fork/Join. That way, it will be possible to provide an alternative implementation on platforms which don't support it. This sort of interface-driven extensible design is *exactly* what SJC seeks to make possible with its plugin framework.
> 
> Regards,
> Curtis
> 
> 
> On Fri, Dec 6, 2013 at 12:39 PM, Tobias Pietzsch <pietzsch at mpi-cbg.de> wrote:
> Hi,
> 
> On Dec 6, 2013, at 7:28 PM, Johannes Schindelin <Johannes.Schindelin at gmx.de> wrote:
> 
> > Hi Lee,
> >
> > On Fri, 6 Dec 2013, Lee Kamentsky wrote:
> >>
> >> On Fri, Dec 6, 2013 at 10:10 AM, Tobias Pietzsch <pietzsch at mpi-cbg.de>wrote:
> >>
> >>> Problem: Did anyone think about the possibility of deadlocks?
> >>
> >> Nice catch, Tobias
> >
> > Does anybody have a different reaction than "Oh well, that's right, we
> > cannot use the ExecutorService, then, but instead need to adapt the
> > ThreadService so it handles this one right"?
> 
> Here, I have a different reaction:
> As I pointed out, this has been done exactly right in Java 7 Fork/Join framework (by people who presumably put more thought and experience into it than we could).
> If the majority insists that we reimplement something similar, then at least let us use the same interfaces.
> 
> best regards,
> Tobias
> 
> >
> > Ciao,
> > Dscho
> >
> > --
> > --
> > Please avoid top-posting, and please make sure to reply-to-all!
> >
> > Mailing list web interface: http://groups.google.com/group/fiji-devel
> >
> > ---
> > You received this message because you are subscribed to the Google Groups "Fiji-devel" group.
> > To unsubscribe from this group and stop receiving emails from it, send an email to fiji-devel+unsubscribe at googlegroups.com.
> > For more options, visit https://groups.google.com/groups/opt_out.
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/6b396197/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131206/6b396197/attachment.pgp>

From ullrich.koethe at iwr.uni-heidelberg.de  Mon Dec  9 08:25:17 2013
From: ullrich.koethe at iwr.uni-heidelberg.de (Ullrich Koethe)
Date: Mon, 09 Dec 2013 15:25:17 +0100
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <alpine.DEB.1.00.1312052250540.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1312052250540.1191@s15462909.onlinehome-server.info>
Message-ID: <52A5D2CD.4040303@iwr.uni-heidelberg.de>

Hi Johannes,

 >> In vigra-imglib2 (branch 'wip'), 'mvn install' compiles and produces a
 >> number of compiler warnings which seem to be uncritical on first glance,
 >> but are confusingly flagged as "[ERROR]" in the maven output.
 >
 > Which ones? (Please just paste such errors when you encounter them, of
 > course I could reproduce, if only I had more time!)
 >

These warnings are related to VIGRA itself, so there is no need for you 
to act on them. I merely complained about the fact that warnings are 
flagged as [ERROR] by maven. In fact, that's not quite precise: The 
actual warning is correctly flagged as [WARNING], but the preceding 
diagnostic lines which merely provide template instantiation context 
(i.e. the call stack leading up to the warning) are flagged as [ERROR]. 
It would be much better to flag them as [CONTEXT] or similar.

[ERROR] In file included from 
/home/ukoethe/src/vigra-imglib2/src/main/cxx/VigraImg3DUnsignedByte.cxx:2:0:
...
[ERROR] 
/home/ukoethe/src/vigra-imglib2/src/main/cxx/VigraImg3DUnsignedByte.cxx:54:45: 
   required from here
[WARNING] 
/home/ukoethe/vigra-git/vigra/include/vigra/multi_array.hxx:3194:55: 
warning: conversion to 'int' from 'vigra::MultiArrayView<2u, unsigned 
char, vigra::StridedArrayTag>::difference_type_1 {aka long int}' may 
alter its value [-Wconversion]

In the meantime, the error message produced by ./avian-run.sh changed. 
But it looks like the same problem as before.

java.lang.ExceptionInInitializerError
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
   at io.scif.img.ImgOpener.openImg (line 301)
   at io.scif.img.ImgOpener.openImg (line 217)
   at io.scif.img.ImgOpener.openImg (line 200)
   at Example.main (line 34)
   at Example.main (line 22)
caused by: java.lang.UnsatisfiedLinkError: library not found: 
/home/ukoethe/src/vigra-imglib2/target/nar/vigra-imglib2-1.0.0-SNAPSHOT-amd64-Linux-gpp-jni/lib/amd64-Linux-gpp/jni/libvigra-imglib2-1.0.0-SNAPSHOT.so
   at java.lang.Runtime.load
   at java.lang.Runtime.load (line 32)
   at java.lang.System.load (line 117)
   at net.imglib2.vigra.NarHelper.loadLibrary (line 75)
   at net.imglib2.vigra.VigraImg3DUnsignedByte.<clinit> (line 23)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 19)
   at net.imglib2.vigra.VigraImgFactory3DUnsignedByte.create (line 14)
   at io.scif.img.ImgOpener.openImg (line 301)
   at io.scif.img.ImgOpener.openImg (line 217)
   at io.scif.img.ImgOpener.openImg (line 200)
   at Example.main (line 34)
   at Example.main (line 22)

The library it complains about exists:

 >> ls -l 
/home/ukoethe/src/vigra-imglib2/target/nar/vigra-imglib2-1.0.0-SNAPSHOT-amd64-Linux-gpp-jni/lib/amd64-Linux-gpp/jni/libvigra-imglib2-1.0.0-SNAPSHOT.so

-rwxr-xr-x 1 ukoethe ukoethe 122627 Dec  9 14:51 
/home/ukoethe/src/vigra-imglib2/target/nar/vigra-imglib2-1.0.0-SNAPSHOT-amd64-Linux-gpp-jni/lib/amd64-Linux-gpp/jni/libvigra-imglib2-1.0.0-SNAPSHOT.so

Best regards
Ulli


From ullrich.koethe at iwr.uni-heidelberg.de  Mon Dec  9 08:42:27 2013
From: ullrich.koethe at iwr.uni-heidelberg.de (Ullrich Koethe)
Date: Mon, 09 Dec 2013 15:42:27 +0100
Subject: [ImageJ-devel] [VIGRA] Avian VM and Bio-Formats
In-Reply-To: <alpine.DEB.1.00.1312052250540.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1310170222150.1191@s15462909.onlinehome-server.info>
	<52600288.1050509@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1310171922080.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1311281016230.3906@bonsai2>
	<52979B98.6070500@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291502130.1191@s15462909.onlinehome-server.info>
	<5298D752.1070701@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1311291952020.1191@s15462909.onlinehome-server.info>
	<52A0C2B5.2030208@iwr.uni-heidelberg.de>
	<alpine.DEB.1.00.1312052250540.1191@s15462909.onlinehome-server.info>
Message-ID: <52A5D6D3.50102@iwr.uni-heidelberg.de>

Hi Johannes,

>> When I finally run './avian-run.sh', I get the following output
>>
>> java.io.EOFException
>> caused by: java.lang.UnsatisfiedLinkError: Could not find native library
>

I solved the problem - it was just a omission in the LD_LIBRARY_PATH. 
'./avian-run.sh' now works and produced the desired output.

Best regards
Ulli


From bnorthan at gmail.com  Mon Dec  9 10:27:25 2013
From: bnorthan at gmail.com (Brian Northan)
Date: Mon, 9 Dec 2013 11:27:25 -0500
Subject: [ImageJ-devel] Scripting examples
Message-ID: <CAMWa8i3ftSQibFSjFaP8kqfqZEoyUkmzV+7emWaPyDs_D9yX6g@mail.gmail.com>

Hi Curtis (and list)

Thanks for the continued updates on the status of the scripting.  You
mentioned that it is getting closer with the merger of a
'script-parameters' branch.  Are there any particular classes or example
code that would be useful to look at right now??  Or would it be best to
wait a few weeks for more updates.

Thanks

Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131209/3a61d54a/attachment.html>

From Martin.Horn at uni-konstanz.de  Tue Dec 10 05:22:21 2013
From: Martin.Horn at uni-konstanz.de (Martin Horn)
Date: Tue, 10 Dec 2013 12:22:21 +0100
Subject: [ImageJ-devel] KNIME Image Processing Extension 1.1.0
Message-ID: <52A6F96D.7000201@uni-konstanz.de>

Hi all,

we are happy to announce the release of the new version 1.1.0 of the 
KNIME Image Processing and Analysis Extension.

Beside several bug-fixes and improvements under the hood, few new nodes 
have been added and the list of available tutorials and example 
workflows has been extended.

As usual, the details about the extension can be found at 
http://tech.knime.org/community/image-processing.

General information about KNIME and the recently released KNIME version 
2.9.0 is available at http://www.knime.org.

In case of any problems or questions don't hesitate to contact us.

Christian & Martin



From Johannes.Schindelin at gmx.de  Wed Dec 11 08:59:47 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Wed, 11 Dec 2013 15:59:47 +0100 (CET)
Subject: [ImageJ-devel] [fiji-devel] KNIME Image Processing Extension
	1.1.0
In-Reply-To: <52A6F96D.7000201@uni-konstanz.de>
References: <52A6F96D.7000201@uni-konstanz.de>
Message-ID: <alpine.DEB.1.00.1312111559040.1191@s15462909.onlinehome-server.info>

Hi Martin & Christian,

On Tue, 10 Dec 2013, Martin Horn wrote:

> we are happy to announce the release of the new version 1.1.0 of the KNIME
> Image Processing and Analysis Extension.
> 
> Beside several bug-fixes and improvements under the hood, few new nodes have
> been added and the list of available tutorials and example workflows has been
> extended.

Awesome news!

Congratulations,
Dscho


From hiner at wisc.edu  Wed Dec 11 10:56:12 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Wed, 11 Dec 2013 10:56:12 -0600
Subject: [ImageJ-devel] [fiji-devel] ImgLib2 + KNIME hackathon report
In-Reply-To: <CADN69ynh4zdEraazcv3t2KVKXEFzhbU1NKACtSNzZk3VPfQb0g@mail.gmail.com>
References: <CADN69ynh4zdEraazcv3t2KVKXEFzhbU1NKACtSNzZk3VPfQb0g@mail.gmail.com>
Message-ID: <CA+B=mGpLD9OdYv9uga4WMi9u9nA284MDbq+WJw78S=ZeHue_xw@mail.gmail.com>

Hi all,

SCIFIOCellImg with Memory Service
> * Development branch: https://github.com/scifio/scifio/tree/cache-imps
> * Refactored SCIFIOCells to cache via phantom reference instead of
> finalization (done)
> * Created MemoryService to manage a new RefHandler class of plugins and
> provide configurable memory safeguards (done)
> * Taking a test case of re-writing each pixel in a dataset, improved cache
> performance from 59.6s write, 57.1s read to 35.2s write, 1.6s read (done)
> * Two tests still failing unpredictably due to garbage collection reliance
> (I think). As soon as these are fixed, the update SCIFIOCell/MemoryService
> functionality will be released in SCIFIO 0.7.4.
> * Integration to KNIME started but not finished (easy task, thanks Mark!)
>
>
>
 Just wanted to let people know that this functionality is now available in
the SCIFIO-0.7.4 release <https://github.com/scifio/scifio/releases>.

 I ended up focusing the changes to the PhantomReference refactoring and
performance improvements. If anyone's interested why, I wrote up an
explanation on the original ticket<https://github.com/scifio/scifio/issues/69>
.

 To elaborate on the write/read test I was using as a metric, Christian
Dietz provided a ~90MB dataset and made a simple program that iterates over
each pixel, writing it to a random value, then iterates over the dataset
again reading each pixel's value.

 With the 0.7.3 cell cache, the writing operation actually took over 100s
when limiting the JVM to 50MB ram. Reading the data back took at least 50s.

 By adjusting when certain operations run, moving a lot of cleanup to
separate threads, and avoiding unnecessary disk checks, as of 0.7.4 the
same operation now takes ~16s to write and ~2s to read on the same machine.
And of course the code is significantly improved, as we're no longer
relying on overridden finalize methods or System.gc calls.

 Anyway, I'm sure there will still be more improvements to make but I think
the cell cache was significantly enhanced. Thanks to Christian for
providing the motivation + PhantomReference info!

- Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131211/f9fc0198/attachment.html>

From bnorthan at gmail.com  Thu Dec 12 08:23:48 2013
From: bnorthan at gmail.com (Brian Northan)
Date: Thu, 12 Dec 2013 09:23:48 -0500
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
Message-ID: <CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>

Hi Curtis

I was testing out the ImgSaver updates and seem to be having trouble saving
a 32 bit float image.  At some point in the chain the format seems to be
getting set to 32 bit unsigned int.

Not sure if I am doing something wrong... basically my code looks exactly
like your example.  I did step through the scifio code a bit and was
looking at the translation steps for the meta data.  In TiffFormat.java,
"typedTranslate" the format gets set to either 2 or 1 depending on whether
it is signed...

firstIFD.putIFDValue(IFD.SAMPLE_FORMAT, FormatTools.isSigned(m
                .getPixelType()) ? 2 : 1);

In the next step where the translated meta data is set for the destination,
it seems to be looking for a sample format of 3 for float.  But the sample
format was set to 2 in the previous step...

final int bitFormat = getIFDIntValue(SAMPLE_FORMAT);
....
case 32:
                if (bitFormat == 3) return FormatTools.FLOAT;
                return bitFormat == 2 ? FormatTools.INT32 :
FormatTools.UINT32;

On first glance it would seem to me the SAMPLE_FORMAT should be set to 3
(for float) somehow in the typedTranslate function.   However I'm not
overly familiar with the code.

Brian



On Wed, Dec 4, 2013 at 4:57 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:

> Hi Brian & everyone,
>
> > there is currently a bug in ImgSaver preventing things from working
> ...
> > We are working on a fix now and will reply back when the bug is
> > resolved.
>
> Just a quick update that ImgSaver of scifio-0.7.3 is working better. The
> following code now produces a multi-page TIFF as expected:
>
> --snip--
> import io.scif.SCIFIO;
> import io.scif.img.ImgOpener;
> import io.scif.img.ImgOptions;
> import io.scif.img.ImgOptions.ImgMode;
> import io.scif.img.ImgSaver;
> import net.imglib2.meta.ImgPlus;
>
> public class WriteAnImgPlus {
> public static void main(final String... args) throws Exception {
> final SCIFIO scifio = new SCIFIO();
>  final ImgOpener opener = new ImgOpener(scifio.getContext());
>
> // NB: ImgSaver only supports PlanarImg for now!
>  final ImgOptions options = new ImgOptions().setImgModes(ImgMode.PLANAR);
> final ImgPlus<?> imgPlus =
>  opener.openImg("stack&axes=X,Y,Z&lengths=128,128,10.fake", options);
>
> System.out.println("imgPlus = " + imgPlus);
>  System.out.println("numDimensions = " + imgPlus.numDimensions());
> for (int d=0; d<imgPlus.numDimensions(); d++) {
>  System.out.println("dim #" + d + " = " + imgPlus.dimension(d));
> System.out.println("axis #" + d + " = " + imgPlus.axis(d).type());
>  }
>
> final ImgSaver saver = new ImgSaver(scifio.getContext());
> saver.saveImg("stack.tif", (ImgPlus) imgPlus);
>  }
> }
> --snap--
>
> As of this writing, please note that you will only be able to save as
> OME-TIFF if you include the ome-formats library [1] plus dependencies on
> your classpath.
>
> Regards,
> Curtis
>
> [1] https://github.com/scifio/ome-formats
>
>
> On Thu, Oct 24, 2013 at 1:14 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>
>> Hi Brian,
>>
>> Apologies for the long delay in reply. It is better to write to a public
>> mailing list. I am CCing imagej-devel.
>>
>> > Is the following code snippet still correct given recent changes??
>> >
>> > AxisType[] ax = new AxisType[3]; ax[0]=Axes.X; ax[1]=Axes.Y;
>> > ax[2]=Axes.Z;
>> >
>> > ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>>  >
>> > new ImgSaver().saveImg("name.ome.tif", imgPlus);
>>
>> Firstly, as an aside, please note that ImgSaver has moved from the
>> net.imglib2:imglib2-io project into io.scif:scifio core.
>>
>> But yes, the above code is still supposed to work.
>>
>> However, in practice there is currently a bug in ImgSaver preventing
>> things from working correctly.
>>
>> Here is a complete (non-)working example:
>> https://gist.github.com/ctrueden/6234396
>>
>> We are working on a fix now and will reply back when the bug is resolved.
>>
>> Regards,
>> Curtis
>>
>>
>> On Tue, Aug 13, 2013 at 5:21 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>
>>> Hi Curtis
>>>
>>> So after updating imglib this morning I now get lots of errors.  Which
>>> is expected after your changes.  So I suspect after I sort through them and
>>> rework my code for the changes that saving the axis types will work again.
>>>
>>> But one other quick question.  Is the ImageJ2 scripting ready for use??
>>> I looked at it a bit a while ago but it didn't seem quite ready.   I have a
>>> series of commands I call, so temporarily I just use a bash script calling
>>> Imagej2 in headless mode, with a utility I wrote to parse command name and
>>> parameters.   Eventually I will switch to the ImageJ scripting...  is it
>>> usable yet or should I wait a few more months?
>>>
>>> Thanks, this stuff is really great.
>>>
>>> Brian
>>>
>>> On Tue, Aug 13, 2013 at 4:46 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>>
>>>> Hi Curtis
>>>>
>>>> I have some simple code to wrap an 3D Img<T> as an ImgPlus, define the
>>>> axis as x,y and z and then save it.  Up until a week or so ago it seemed to
>>>> work fine.  But now when I read back the image it come in as x, y, t.   Is
>>>> the following code snippet still correct given recent changes??   Thanks-
>>>> Brian
>>>>
>>>> AxisType[] ax = new AxisType[3];
>>>>         ax[0]=Axes.X;
>>>>         ax[1]=Axes.Y;
>>>>         ax[2]=Axes.Z;
>>>>
>>>> ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>>>>
>>>> new ImgSaver().saveImg("name.ome.tif", imgPlus);
>>>>
>>>>
>>>>
>>>> On Mon, Aug 12, 2013 at 1:39 PM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> > I will merge the img-metadata branch to master on Thursday.
>>>>>
>>>>> Got a bit busy in the interim, but img-metadata is now merged to
>>>>> imglib.git's master branch:
>>>>>
>>>>>
>>>>> https://github.com/imagej/imglib/commit/e4e26aa05e0f42ff1a90e8c6d67235431471de44
>>>>>
>>>>>  The commit message gives a quick gist of the changes, including
>>>>> future directions.
>>>>>
>>>>> Please let me know of any questions or problems with it!
>>>>>
>>>>> Regards,
>>>>> Curtis
>>>>>
>>>>>
>>>>> On Tue, Jul 30, 2013 at 10:28 AM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>>>
>>>>>> Hi all, and especially ImgLib2 developers,
>>>>>>
>>>>>> At the ImgLib2 hackathon this past May, I started work on a branch to
>>>>>> make it easier to attach per-axis metadata to N-dimensional spaces. I think
>>>>>> this branch is finally in a merge-worthy state.
>>>>>>
>>>>>> It introduces an AnnotatedSpace extension to EuclideanSpace which
>>>>>> lets you attach on Axis per dimension. It defines TypedSpace, which
>>>>>> declares an AxisType for each Axis, as well as a CalibratedSpace, which in
>>>>>> addition adds a calibration value and optional unit name to the mix.
>>>>>>
>>>>>> This approach is much more flexible than the previous
>>>>>> CalibratedSpace, which has been renamed to OldCalibratedSpace and
>>>>>> deprecated until we can fully transition all the code away from it. In
>>>>>> particular, having the axes attached to the space directly will allows
>>>>>> Views to maintain the axis metadata without much additional work.
>>>>>>
>>>>>> Note that these new classes are defined in the net.imglib2.meta
>>>>>> component, which was split into a separate module called imglib2-meta. The
>>>>>> ImgPlus class moved there, too (it should have been there all along). So
>>>>>> merging this branch will cause some code breakage, but all should be
>>>>>> straightforward to fix: rename usages of CalibratedSpace to
>>>>>> OldCalibratedSpace, and rename the ImgPlus package from net.imglib2.img to
>>>>>> net.imglib2.meta.
>>>>>>
>>>>>> Going forward, we can also add a CalibratedViews class to the
>>>>>> net.imglib2.meta package which has some additional features such as
>>>>>> exposing resampled Imgs from a source CalibratedSpace into a target one
>>>>>> based on the units used. We can lean on a units library for this, as we
>>>>>> have discussed in the past.
>>>>>>
>>>>>> If interested, you can browse the branch at:
>>>>>> https://github.com/imagej/imglib/compare/img-metadata
>>>>>>
>>>>>> If no one objects, I will merge the img-metadata branch to master on
>>>>>> Thursday.
>>>>>>
>>>>>> Regards,
>>>>>> Curtis
>>>>>>
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> ImageJ-devel mailing list
>>>>> ImageJ-devel at imagej.net
>>>>> http://imagej.net/mailman/listinfo/imagej-devel
>>>>>
>>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131212/283f7c15/attachment.html>

From ctrueden at wisc.edu  Thu Dec 12 14:28:47 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 12 Dec 2013 14:28:47 -0600
Subject: [ImageJ-devel] [ome-devel] Make LOCI data browser default IJ /
	Fiji viewer ?
In-Reply-To: <CAEpSnnabxMvYC_gPvCz0+e816oHRr_pPaAR-Bvuu8GhUGseeAg@mail.gmail.com>
References: <CAEpSnna9hgeb=2wo+TxQJUzsfXHu-ikMU4KDSJGCCGxQZghaAQ@mail.gmail.com>
	<CADN69y=wXMbJMKxc5XOx12oGjLdXmu=9F8LCRFCLtNUm9YR2kw@mail.gmail.com>
	<CAEpSnnabxMvYC_gPvCz0+e816oHRr_pPaAR-Bvuu8GhUGseeAg@mail.gmail.com>
Message-ID: <CADN69y=kj-xayCwi-QDijdN4RZVBTaWPG=_PU734nYPXKUu8tQ@mail.gmail.com>

Hi Hadrien,

[Cross-posting with imagej-devel since this discussion is relevant there
too.]

> My problem is when for example I duplicate or make a z projection on
> an OME Tiff file under data browser, the new viewer will be hyperstack
> (IJ/Fiji default viewer). However if I export the file with LOCI
> exporter and then I re open it with LOCI importer I can still have
> data browser and OME metadata are here as well.

Ah. So at minimum, what you need is a way to wrap an ImageJ hyperstack back
into a Data Browser window again. You can do that with this Beanshell
one-liner:

    new loci.plugins.util.DataBrowser(IJ.getImage());

Paste that line into the script editor and save as (e.g.) data-browser.bsh.
When you run it, the currently active image window will be converted to a
Data Browser window.

You can even install the script into the menus and map a shortcut key to
it, although of course that's still not completely automatic. For a totally
seamless override of the default image viewer you'll have to wait for IJ2.

> It really awesome if you can backport some IJ2 features to Fiji 1
> since IJ2 won't be released before at least one year from what I
> saw...

Yes, we are working toward more of a gradual release schedule. Rather than
releasing "ImageJ2" as one monolithic thing (which it really isn't), we
want to start integrating the already polished parts of it into Fiji as
soon as possible. We are currently working on the "legacy" interoperability
layer to facilitate this.

> are you considering in a mid/long term to merge Fiji/IJ2 ? Does it
> make really sense to separate both ? I think it would be best for
> everyone (devs and users) to have only one place for download and
> development so you would have a better visiblity and it will be much
> more clear for potential contributors or bug reporters to know where
> they need to go

That is essentially what we are doing, yes. ImageJ2 is the core software;
several parts of Fiji core infrastructure have migrated into ImageJ2. So at
heart, Fiji is now a big collection of life sciences plugins -- i.e., an
ImageJ update site. As such, you can currently obtain a working Fiji
installation by downloading ImageJ2, running the updater, and toggling the
Fiji update site.

Fiji and ImageJ2 are fundamentally the same software, using the same
launcher. It's just that if you download "Fiji" and run it, it currently
starts up in ImageJ1 mode at the moment. But Fiji ships with ImageJ2 and
you can launch it in that mode instead if you prefer -- or switch to
ImageJ2 mode after launching using the "Switch to Modern Mode" command
under the Help menu.

Ultimately, we probably do not want to get rid of the two distinct web
sites and project names though, since people are familiar with both. That
said, we are integrating resources when feasible: e.g., wiki.imagej.net and
fiji.sc are really both the same wiki with a different skin, to make
cross-linking more seamless. But we want to ensure it is clear that ImageJ2
is not a life-sciences-specific project, whereas Fiji is. Historically,
because Fiji has a life sciences focus, there have been some users who
refused to switch from vanilla ImageJ1 to Fiji even though Fiji makes
users' lives easier in lots of ways.

Regards,
Curtis


On Wed, Dec 11, 2013 at 3:41 PM, Hadrien Mary <hadrien.mary at gmail.com>wrote:

> Thansk for the answer Curtis !o
>
> It's my fault because I didn't explain entirely the issue but I already
> knew all these behaviours. My problem is when for example I duplicate or
> make a z projection on an OME Tiff file under data browser, the new viewer
> will be hyperstack (IJ/Fiji default viewer). However if I export the file
> with LOCI exporter and then I re open it with LOCI importer I can still
> have data browser and OME metadata are here as well.
>
> Anyway I now understand all IJ1 core limitations and I guess this problem
> is also due to IJ1 and so I will wait for IJ2. It really awesome if you can
> backport some IJ2 features to Fiji 1 since IJ2 won't be released before at
> least one year from what I saw...
>
> PS: quick question to end: are you considering in a mid/long term to merge
> Fiji/IJ2 ? Does it make really sense to separate both ? I think it would be
> best for everyone (devs and users) to have only one place for download and
> development so you would have a better visiblity and it will be much more
> clear for potential contributors or bug reporters to know where they need
> to go... I am sure you already think about all of that, so I am sorry if my
> question is naive but I didn't find any informations on the web.
>
> Best,
>
>
> --
> Hadrien Mary
>
> Ph.D student in Biology
> Tournier-Gachet Team
> CNRS - LBCMCP - UMR 5088
>
> Universit? de Toulouse - B?t. 4R3B1
> 118, route de Narbonne - 31062 Toulouse
>
>
> On Wed, Dec 11, 2013 at 10:26 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>
>> Hi Hadrien,
>>
>> > Is there is a way to make LOCI data browser the default viewer on IJ /
>> > Fiji ?
>>
>> Sort of. The Bio-Formats Importer dialog will remember that you selected
>> the Data Browser as your stack viewer, and hence it will be initially
>> selected upon subsequent calls to the Importer.
>>
>> However, when using the File > Open command, ImageJ only calls
>> Bio-Formats in certain cases. The rule of thumb is: if the format is one
>> that only Bio-Formats knows how to handle, Bio-Formats will be called. If
>> not, ImageJ will handle it internally, or with a different plugin. This
>> behavior is not configurable.
>>
>> So, if ImageJ does not call Bio-Formats (which it won't when opening e.g.
>> a TIFF file), you will not end up with the Data Browser viewer.
>>
>> > Or at least use LOCI data browser when an OME Tiff file is detected ?
>>
>> Unfortunately, because OME-TIFF files end with the .ome.tif (or
>> .ome.tiff) extension, ImageJ will prefer its own internal TIFF reader to
>> Bio-Formats, even though its own internal reader does not actually support
>> OME-TIFF's metadata.
>>
>> Your options are either: A) open the file using File > Import >
>> Bio-Formats rather than File > Open; or B) run Plugins > LOCI > LOCI
>> Plugins Shortcut Window and then drag-and-drop your OME-TIFF files onto
>> that window.
>>
>> Regards,
>> Curtis
>>
>> P.S. We have solved this problem in ImageJ2, thanks to its improved
>> plugin framework and use of the extensible SCIFIO image I/O library. We are
>> also planning to retrofit SCIFIO into Fiji in ImageJ 1.x mode, to address
>> this problem there, too.
>>
>>
>> On Wed, Dec 11, 2013 at 1:29 PM, Hadrien Mary <hadrien.mary at gmail.com>wrote:
>>
>>> Hi,
>>>
>>> Is there is a way to make LOCI data browser the default viewer on IJ /
>>> Fiji ? Or at least use LOCI data browser when an OME Tiff file is detected ?
>>>
>>> Best,
>>>
>>> --
>>> Hadrien Mary
>>>
>>> Ph.D student in Biology
>>> Tournier-Gachet Team
>>> CNRS - LBCMCP - UMR 5088
>>>
>>> Universit? de Toulouse - B?t. 4R3B1
>>> 118, route de Narbonne - 31062 Toulouse
>>>
>>> _______________________________________________
>>> ome-devel mailing list
>>> ome-devel at lists.openmicroscopy.org.uk
>>> http://lists.openmicroscopy.org.uk/mailman/listinfo/ome-devel
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131212/b0b58334/attachment.html>

From hadrien.mary at gmail.com  Thu Dec 12 14:51:01 2013
From: hadrien.mary at gmail.com (Hadrien Mary)
Date: Thu, 12 Dec 2013 21:51:01 +0100
Subject: [ImageJ-devel] [ome-devel] Make LOCI data browser default IJ /
	Fiji viewer ?
In-Reply-To: <CADN69y=kj-xayCwi-QDijdN4RZVBTaWPG=_PU734nYPXKUu8tQ@mail.gmail.com>
References: <CAEpSnna9hgeb=2wo+TxQJUzsfXHu-ikMU4KDSJGCCGxQZghaAQ@mail.gmail.com>
	<CADN69y=wXMbJMKxc5XOx12oGjLdXmu=9F8LCRFCLtNUm9YR2kw@mail.gmail.com>
	<CAEpSnnabxMvYC_gPvCz0+e816oHRr_pPaAR-Bvuu8GhUGseeAg@mail.gmail.com>
	<CADN69y=kj-xayCwi-QDijdN4RZVBTaWPG=_PU734nYPXKUu8tQ@mail.gmail.com>
Message-ID: <CAEpSnnYvXdYBQPet_47VZgE_+9cu5zWxo-4AMwPam76bzOO4zQ@mail.gmail.com>

Thank you for this detailled answer Curtis !


--
Hadrien Mary

Ph.D student in Biology
Tournier-Gachet Team
CNRS - LBCMCP - UMR 5088

Universit? de Toulouse - B?t. 4R3B1
118, route de Narbonne - 31062 Toulouse


On Thu, Dec 12, 2013 at 9:28 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:

> Hi Hadrien,
>
> [Cross-posting with imagej-devel since this discussion is relevant there
> too.]
>
> > My problem is when for example I duplicate or make a z projection on
> > an OME Tiff file under data browser, the new viewer will be hyperstack
> > (IJ/Fiji default viewer). However if I export the file with LOCI
> > exporter and then I re open it with LOCI importer I can still have
> > data browser and OME metadata are here as well.
>
> Ah. So at minimum, what you need is a way to wrap an ImageJ hyperstack
> back into a Data Browser window again. You can do that with this Beanshell
> one-liner:
>
>     new loci.plugins.util.DataBrowser(IJ.getImage());
>
> Paste that line into the script editor and save as (e.g.)
> data-browser.bsh. When you run it, the currently active image window will
> be converted to a Data Browser window.
>
> You can even install the script into the menus and map a shortcut key to
> it, although of course that's still not completely automatic. For a totally
> seamless override of the default image viewer you'll have to wait for IJ2.
>
> > It really awesome if you can backport some IJ2 features to Fiji 1
> > since IJ2 won't be released before at least one year from what I
> > saw...
>
> Yes, we are working toward more of a gradual release schedule. Rather than
> releasing "ImageJ2" as one monolithic thing (which it really isn't), we
> want to start integrating the already polished parts of it into Fiji as
> soon as possible. We are currently working on the "legacy" interoperability
> layer to facilitate this.
>
> > are you considering in a mid/long term to merge Fiji/IJ2 ? Does it
> > make really sense to separate both ? I think it would be best for
> > everyone (devs and users) to have only one place for download and
> > development so you would have a better visiblity and it will be much
> > more clear for potential contributors or bug reporters to know where
> > they need to go
>
>  That is essentially what we are doing, yes. ImageJ2 is the core software;
> several parts of Fiji core infrastructure have migrated into ImageJ2. So at
> heart, Fiji is now a big collection of life sciences plugins -- i.e., an
> ImageJ update site. As such, you can currently obtain a working Fiji
> installation by downloading ImageJ2, running the updater, and toggling the
> Fiji update site.
>
> Fiji and ImageJ2 are fundamentally the same software, using the same
> launcher. It's just that if you download "Fiji" and run it, it currently
> starts up in ImageJ1 mode at the moment. But Fiji ships with ImageJ2 and
> you can launch it in that mode instead if you prefer -- or switch to
> ImageJ2 mode after launching using the "Switch to Modern Mode" command
> under the Help menu.
>
> Ultimately, we probably do not want to get rid of the two distinct web
> sites and project names though, since people are familiar with both. That
> said, we are integrating resources when feasible: e.g., wiki.imagej.netand
> fiji.sc are really both the same wiki with a different skin, to make
> cross-linking more seamless. But we want to ensure it is clear that ImageJ2
> is not a life-sciences-specific project, whereas Fiji is. Historically,
> because Fiji has a life sciences focus, there have been some users who
> refused to switch from vanilla ImageJ1 to Fiji even though Fiji makes
> users' lives easier in lots of ways.
>
> Regards,
> Curtis
>
>
> On Wed, Dec 11, 2013 at 3:41 PM, Hadrien Mary <hadrien.mary at gmail.com>wrote:
>
>> Thansk for the answer Curtis !o
>>
>> It's my fault because I didn't explain entirely the issue but I already
>> knew all these behaviours. My problem is when for example I duplicate or
>> make a z projection on an OME Tiff file under data browser, the new viewer
>> will be hyperstack (IJ/Fiji default viewer). However if I export the file
>> with LOCI exporter and then I re open it with LOCI importer I can still
>> have data browser and OME metadata are here as well.
>>
>> Anyway I now understand all IJ1 core limitations and I guess this problem
>> is also due to IJ1 and so I will wait for IJ2. It really awesome if you can
>> backport some IJ2 features to Fiji 1 since IJ2 won't be released before at
>> least one year from what I saw...
>>
>> PS: quick question to end: are you considering in a mid/long term to
>> merge Fiji/IJ2 ? Does it make really sense to separate both ? I think it
>> would be best for everyone (devs and users) to have only one place for
>> download and development so you would have a better visiblity and it will
>> be much more clear for potential contributors or bug reporters to know
>> where they need to go... I am sure you already think about all of that, so
>> I am sorry if my question is naive but I didn't find any informations on
>> the web.
>>
>> Best,
>>
>>
>> --
>> Hadrien Mary
>>
>> Ph.D student in Biology
>> Tournier-Gachet Team
>> CNRS - LBCMCP - UMR 5088
>>
>> Universit? de Toulouse - B?t. 4R3B1
>> 118, route de Narbonne - 31062 Toulouse
>>
>>
>> On Wed, Dec 11, 2013 at 10:26 PM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>
>>> Hi Hadrien,
>>>
>>> > Is there is a way to make LOCI data browser the default viewer on IJ /
>>> > Fiji ?
>>>
>>> Sort of. The Bio-Formats Importer dialog will remember that you selected
>>> the Data Browser as your stack viewer, and hence it will be initially
>>> selected upon subsequent calls to the Importer.
>>>
>>> However, when using the File > Open command, ImageJ only calls
>>> Bio-Formats in certain cases. The rule of thumb is: if the format is one
>>> that only Bio-Formats knows how to handle, Bio-Formats will be called. If
>>> not, ImageJ will handle it internally, or with a different plugin. This
>>> behavior is not configurable.
>>>
>>> So, if ImageJ does not call Bio-Formats (which it won't when opening
>>> e.g. a TIFF file), you will not end up with the Data Browser viewer.
>>>
>>> > Or at least use LOCI data browser when an OME Tiff file is detected ?
>>>
>>> Unfortunately, because OME-TIFF files end with the .ome.tif (or
>>> .ome.tiff) extension, ImageJ will prefer its own internal TIFF reader to
>>> Bio-Formats, even though its own internal reader does not actually support
>>> OME-TIFF's metadata.
>>>
>>> Your options are either: A) open the file using File > Import >
>>> Bio-Formats rather than File > Open; or B) run Plugins > LOCI > LOCI
>>> Plugins Shortcut Window and then drag-and-drop your OME-TIFF files onto
>>> that window.
>>>
>>> Regards,
>>> Curtis
>>>
>>> P.S. We have solved this problem in ImageJ2, thanks to its improved
>>> plugin framework and use of the extensible SCIFIO image I/O library. We are
>>> also planning to retrofit SCIFIO into Fiji in ImageJ 1.x mode, to address
>>> this problem there, too.
>>>
>>>
>>> On Wed, Dec 11, 2013 at 1:29 PM, Hadrien Mary <hadrien.mary at gmail.com>wrote:
>>>
>>>> Hi,
>>>>
>>>> Is there is a way to make LOCI data browser the default viewer on IJ /
>>>> Fiji ? Or at least use LOCI data browser when an OME Tiff file is detected ?
>>>>
>>>> Best,
>>>>
>>>> --
>>>> Hadrien Mary
>>>>
>>>> Ph.D student in Biology
>>>> Tournier-Gachet Team
>>>> CNRS - LBCMCP - UMR 5088
>>>>
>>>> Universit? de Toulouse - B?t. 4R3B1
>>>> 118, route de Narbonne - 31062 Toulouse
>>>>
>>>> _______________________________________________
>>>> ome-devel mailing list
>>>> ome-devel at lists.openmicroscopy.org.uk
>>>> http://lists.openmicroscopy.org.uk/mailman/listinfo/ome-devel
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131212/a3f1d706/attachment-0001.html>

From hiner at wisc.edu  Fri Dec 13 08:24:15 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Fri, 13 Dec 2013 08:24:15 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
Message-ID: <CA+B=mGrt5ypQwL1UGCa1fh-rrW70xYBZvUCrHJdscCiRPkbQDQ@mail.gmail.com>

Hi Brian,



> On first glance it would seem to me the SAMPLE_FORMAT should be set to 3
> (for float) somehow in the typedTranslate function.   However I'm not
> overly familiar with the code.
>

 Your fix was absolutely correct. I updated SCIFIO
master<https://github.com/scifio/scifio/commit/ece33ccc7c1b4bfdb13e749dce96b440d66db534>to
account for floats when translating.

 Anyway, I really appreciate you taking the time - not just to report the
bug - but to delve into the code! Since it takes extra effort on your part
to debug, if you ever would like your name attached to your work, please
feel welcome to submit pull requests (e.g. to
scifio<https://github.com/scifio/scifio/pulls>
).

Thanks again for reporting this issue - let us know if anything else comes
up!

- Mark


On Thu, Dec 12, 2013 at 8:23 AM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi Curtis
>
> I was testing out the ImgSaver updates and seem to be having trouble
> saving a 32 bit float image.  At some point in the chain the format seems
> to be getting set to 32 bit unsigned int.
>
> Not sure if I am doing something wrong... basically my code looks exactly
> like your example.  I did step through the scifio code a bit and was
> looking at the translation steps for the meta data.  In TiffFormat.java,
> "typedTranslate" the format gets set to either 2 or 1 depending on whether
> it is signed...
>
> firstIFD.putIFDValue(IFD.SAMPLE_FORMAT, FormatTools.isSigned(m
>                 .getPixelType()) ? 2 : 1);
>
> In the next step where the translated meta data is set for the
> destination, it seems to be looking for a sample format of 3 for float.
> But the sample format was set to 2 in the previous step...
>
> final int bitFormat = getIFDIntValue(SAMPLE_FORMAT);
> ....
> case 32:
>                 if (bitFormat == 3) return FormatTools.FLOAT;
>                 return bitFormat == 2 ? FormatTools.INT32 :
> FormatTools.UINT32;
>
> On first glance it would seem to me the SAMPLE_FORMAT should be set to 3
> (for float) somehow in the typedTranslate function.   However I'm not
> overly familiar with the code.
>
> Brian
>
>
>
> On Wed, Dec 4, 2013 at 4:57 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>
>> Hi Brian & everyone,
>>
>> > there is currently a bug in ImgSaver preventing things from working
>> ...
>> > We are working on a fix now and will reply back when the bug is
>> > resolved.
>>
>> Just a quick update that ImgSaver of scifio-0.7.3 is working better. The
>> following code now produces a multi-page TIFF as expected:
>>
>> --snip--
>> import io.scif.SCIFIO;
>> import io.scif.img.ImgOpener;
>> import io.scif.img.ImgOptions;
>> import io.scif.img.ImgOptions.ImgMode;
>> import io.scif.img.ImgSaver;
>> import net.imglib2.meta.ImgPlus;
>>
>> public class WriteAnImgPlus {
>> public static void main(final String... args) throws Exception {
>> final SCIFIO scifio = new SCIFIO();
>>  final ImgOpener opener = new ImgOpener(scifio.getContext());
>>
>> // NB: ImgSaver only supports PlanarImg for now!
>>  final ImgOptions options = new ImgOptions().setImgModes(ImgMode.PLANAR);
>> final ImgPlus<?> imgPlus =
>>  opener.openImg("stack&axes=X,Y,Z&lengths=128,128,10.fake", options);
>>
>> System.out.println("imgPlus = " + imgPlus);
>>  System.out.println("numDimensions = " + imgPlus.numDimensions());
>> for (int d=0; d<imgPlus.numDimensions(); d++) {
>>  System.out.println("dim #" + d + " = " + imgPlus.dimension(d));
>> System.out.println("axis #" + d + " = " + imgPlus.axis(d).type());
>>  }
>>
>> final ImgSaver saver = new ImgSaver(scifio.getContext());
>> saver.saveImg("stack.tif", (ImgPlus) imgPlus);
>>  }
>> }
>> --snap--
>>
>> As of this writing, please note that you will only be able to save as
>> OME-TIFF if you include the ome-formats library [1] plus dependencies on
>> your classpath.
>>
>> Regards,
>> Curtis
>>
>> [1] https://github.com/scifio/ome-formats
>>
>>
>> On Thu, Oct 24, 2013 at 1:14 PM, Curtis Rueden <ctrueden at wisc.edu> wrote:
>>
>>> Hi Brian,
>>>
>>> Apologies for the long delay in reply. It is better to write to a public
>>> mailing list. I am CCing imagej-devel.
>>>
>>> > Is the following code snippet still correct given recent changes??
>>> >
>>> > AxisType[] ax = new AxisType[3]; ax[0]=Axes.X; ax[1]=Axes.Y;
>>> > ax[2]=Axes.Z;
>>> >
>>> > ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>>>  >
>>> > new ImgSaver().saveImg("name.ome.tif", imgPlus);
>>>
>>> Firstly, as an aside, please note that ImgSaver has moved from the
>>> net.imglib2:imglib2-io project into io.scif:scifio core.
>>>
>>> But yes, the above code is still supposed to work.
>>>
>>> However, in practice there is currently a bug in ImgSaver preventing
>>> things from working correctly.
>>>
>>> Here is a complete (non-)working example:
>>> https://gist.github.com/ctrueden/6234396
>>>
>>> We are working on a fix now and will reply back when the bug is resolved.
>>>
>>> Regards,
>>> Curtis
>>>
>>>
>>> On Tue, Aug 13, 2013 at 5:21 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>>
>>>> Hi Curtis
>>>>
>>>> So after updating imglib this morning I now get lots of errors.  Which
>>>> is expected after your changes.  So I suspect after I sort through them and
>>>> rework my code for the changes that saving the axis types will work again.
>>>>
>>>> But one other quick question.  Is the ImageJ2 scripting ready for
>>>> use??  I looked at it a bit a while ago but it didn't seem quite ready.   I
>>>> have a series of commands I call, so temporarily I just use a bash script
>>>> calling Imagej2 in headless mode, with a utility I wrote to parse command
>>>> name and parameters.   Eventually I will switch to the ImageJ scripting...
>>>> is it usable yet or should I wait a few more months?
>>>>
>>>> Thanks, this stuff is really great.
>>>>
>>>> Brian
>>>>
>>>> On Tue, Aug 13, 2013 at 4:46 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>>>
>>>>> Hi Curtis
>>>>>
>>>>> I have some simple code to wrap an 3D Img<T> as an ImgPlus, define the
>>>>> axis as x,y and z and then save it.  Up until a week or so ago it seemed to
>>>>> work fine.  But now when I read back the image it come in as x, y, t.   Is
>>>>> the following code snippet still correct given recent changes??   Thanks-
>>>>> Brian
>>>>>
>>>>> AxisType[] ax = new AxisType[3];
>>>>>         ax[0]=Axes.X;
>>>>>         ax[1]=Axes.Y;
>>>>>         ax[2]=Axes.Z;
>>>>>
>>>>> ImgPlus<T> imgPlus = new ImgPlus<T>(image, name, ax);
>>>>>
>>>>> new ImgSaver().saveImg("name.ome.tif", imgPlus);
>>>>>
>>>>>
>>>>>
>>>>> On Mon, Aug 12, 2013 at 1:39 PM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>> > I will merge the img-metadata branch to master on Thursday.
>>>>>>
>>>>>> Got a bit busy in the interim, but img-metadata is now merged to
>>>>>> imglib.git's master branch:
>>>>>>
>>>>>>
>>>>>> https://github.com/imagej/imglib/commit/e4e26aa05e0f42ff1a90e8c6d67235431471de44
>>>>>>
>>>>>>  The commit message gives a quick gist of the changes, including
>>>>>> future directions.
>>>>>>
>>>>>> Please let me know of any questions or problems with it!
>>>>>>
>>>>>> Regards,
>>>>>> Curtis
>>>>>>
>>>>>>
>>>>>> On Tue, Jul 30, 2013 at 10:28 AM, Curtis Rueden <ctrueden at wisc.edu>wrote:
>>>>>>
>>>>>>> Hi all, and especially ImgLib2 developers,
>>>>>>>
>>>>>>> At the ImgLib2 hackathon this past May, I started work on a branch
>>>>>>> to make it easier to attach per-axis metadata to N-dimensional spaces. I
>>>>>>> think this branch is finally in a merge-worthy state.
>>>>>>>
>>>>>>> It introduces an AnnotatedSpace extension to EuclideanSpace which
>>>>>>> lets you attach on Axis per dimension. It defines TypedSpace, which
>>>>>>> declares an AxisType for each Axis, as well as a CalibratedSpace, which in
>>>>>>> addition adds a calibration value and optional unit name to the mix.
>>>>>>>
>>>>>>> This approach is much more flexible than the previous
>>>>>>> CalibratedSpace, which has been renamed to OldCalibratedSpace and
>>>>>>> deprecated until we can fully transition all the code away from it. In
>>>>>>> particular, having the axes attached to the space directly will allows
>>>>>>> Views to maintain the axis metadata without much additional work.
>>>>>>>
>>>>>>> Note that these new classes are defined in the net.imglib2.meta
>>>>>>> component, which was split into a separate module called imglib2-meta. The
>>>>>>> ImgPlus class moved there, too (it should have been there all along). So
>>>>>>> merging this branch will cause some code breakage, but all should be
>>>>>>> straightforward to fix: rename usages of CalibratedSpace to
>>>>>>> OldCalibratedSpace, and rename the ImgPlus package from net.imglib2.img to
>>>>>>> net.imglib2.meta.
>>>>>>>
>>>>>>> Going forward, we can also add a CalibratedViews class to the
>>>>>>> net.imglib2.meta package which has some additional features such as
>>>>>>> exposing resampled Imgs from a source CalibratedSpace into a target one
>>>>>>> based on the units used. We can lean on a units library for this, as we
>>>>>>> have discussed in the past.
>>>>>>>
>>>>>>> If interested, you can browse the branch at:
>>>>>>> https://github.com/imagej/imglib/compare/img-metadata
>>>>>>>
>>>>>>> If no one objects, I will merge the img-metadata branch to master on
>>>>>>> Thursday.
>>>>>>>
>>>>>>> Regards,
>>>>>>> Curtis
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> ImageJ-devel mailing list
>>>>>> ImageJ-devel at imagej.net
>>>>>> http://imagej.net/mailman/listinfo/imagej-devel
>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>
> _______________________________________________
> ImageJ-devel mailing list
> ImageJ-devel at imagej.net
> http://imagej.net/mailman/listinfo/imagej-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131213/d79d0a12/attachment.html>

From hinerm at gmail.com  Fri Dec 13 12:40:30 2013
From: hinerm at gmail.com (Mark Hiner)
Date: Fri, 13 Dec 2013 12:40:30 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
Message-ID: <CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>

Hi Brian,


>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to get the
> absolute latest??)
>

Yep this should be the latest snapshot.

in my POM and ran into an exception when executing my code.
>

...


>      at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>

That stack trace suggests that an older version of the TIFFFormat is being
used. It must be from prior commit
37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because
the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
assuming it's from the 0.7.4 release.

 Are you just running the code snippet that Curtis posted a while back (or
your own similar snippet)? Or are you using SCIFIO in IJ2, or another
application?

 Could you run "mvn dependency:tree", or check the "Maven Dependencies" tab
if you're using Eclipse? I'm assuming something must still have a 0.7.4
SCIFIO reference, which is being pulled in instead of 0.7.5...

Sorry for the inconvenience.. let me know what you find!

Thanks,
Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131213/248f2d1d/attachment.html>

From bnorthan at gmail.com  Fri Dec 13 13:49:15 2013
From: bnorthan at gmail.com (Brian Northan)
Date: Fri, 13 Dec 2013 14:49:15 -0500
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
Message-ID: <CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>

Hi Mark

I am using IJ2 in headless mode with some custom commands I wrote.  So it
is always possible that I still have old references somewhere.  However
that stack trace was actually generated with 0.7.4.  When I had noted that
0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make sure that
worked but it also had the same exception.  Then I went back to 0.7.3 which
worked (other than the floating point problem).

Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am using IJ2
maybe there is something else wrong in the dependency tree??  One of the
IJ2 components??  Should I set the sci-java version to a SNAPSHOT version
too??  It is 1.111 right now.

     at org.scijava.Context.inject(Context.java:273)
    at
org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
    at
org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
    at
org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
    at
org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
    at
org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
    at
org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
    at
org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
    at org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
    at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
    at
org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
    at
io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
    at
io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
    at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
    at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
    at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
    at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
    at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
    at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
    at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
    at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
    at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)



On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:

>
> Hi Brian,
>
>
>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to get the
>> absolute latest??)
>>
>
> Yep this should be the latest snapshot.
>
>  in my POM and ran into an exception when executing my code.
>>
>
> ...
>
>
>>      at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>
>
> That stack trace suggests that an older version of the TIFFFormat is being
> used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
> assuming it's from the 0.7.4 release.
>
>  Are you just running the code snippet that Curtis posted a while back (or
> your own similar snippet)? Or are you using SCIFIO in IJ2, or another
> application?
>
>  Could you run "mvn dependency:tree", or check the "Maven Dependencies"
> tab if you're using Eclipse? I'm assuming something must still have a 0.7.4
> SCIFIO reference, which is being pulled in instead of 0.7.5...
>
> Sorry for the inconvenience.. let me know what you find!
>
> Thanks,
> Mark
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131213/e6131439/attachment.html>

From Johannes.Schindelin at gmx.de  Fri Dec 13 23:12:01 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Sat, 14 Dec 2013 06:12:01 +0100 (CET)
Subject: [ImageJ-devel] The mystery of the vanishing menu in ImageJ2
Message-ID: <alpine.DEB.1.00.1312140605510.1191@s15462909.onlinehome-server.info>

Hi all,

I dedicate this mail to Barry because he reported the issue first, and
besides, I miss him ;-)

The issue Barry pointed out earlier, on Ubuntu, was that ImageJ2 started
behaving strangely with regards to the menu: as soon as the mouse was
hovering over the tool bar, the menu would go away.

Back then, I could not reproduce the issue, but today I could, so I went
on a hunt, and here is the write-up for everybody to enjoy:

First of all, I figured that I should find out whether some strange AWT
events were processed, so I fired up Eclipse -- because I wanted to use
Eclipse's debugger to investigate the issue -- and added this code to the
end of AbstractSwingUI#createUI():

-- snip --
Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {

	@Override
	public void eventDispatched(AWTEvent event) {
		System.err.println("event: " + event);
	}
}, -1);
-- snap --

Basically, this code asks Java to output all the UI events as they
happen.

Then, I set a breakpoint on the first line and started ImageJ2 in debug
mode. A little-known gem is that Eclipse's Console window not only shows
the standard output and standard error stream of the debugged program,
but also accepts the standard input. I used this fact by adding some
empty lines (simply focusing the Console window and hitting the Return
key a couple of times) as soon as the main window was visible because
the events that had been shown so far could not be responsible (or so I
thought).

But after moving the mouse over the toolbar (and the menu bar
vanishing), really only the obvious events were shown: mouse enter,
mouse moves (and then mouse leave).

So I imagined that another way to debug the issue might be to look
whether there actually *was* a menu bar still when the tool bar was
painted after the mouse entered the main window.

To this end, I patched in a paintComponent method into the SwingToolBar
class:

-- snip --
	@Override
	public void paintComponent(final Graphics g) {
		Container c = getParent();
		c = c.getParent();
		c = c.getParent();
		c = c.getParent();
		System.err.println(c);
		System.err.println(((JFrame)c).getJMenuBar());
		super.paintComponent(g);
	}
-- snap --

Of course, that was not the initial version. The initial version assumed
that already the direct parent container of the tool bar would be the
JFrame, and in hindsight, I'd better have written something like:

		Container c = getParent();
		while (c != null && !(c instanceof JFrame)) {
			c = c.getParent();
		}

but hindsight is 20/20 and I did not have the luxury of that yet.
However, I had the luxury of incremental compilation (as performed by
Eclipse, one of the few things I really like about Eclipse): I could set
a breakpoint on the "System.err.println(c);" call, launch ImageJ2 in debug
mode, and then insert the "c = c.getParent();" lines one by one, saving
them, which would trigger Eclipse's incremental compiler and move
execution back to the first line of the method, until I had the right
amount.

And sure enough, the first time round, there was a menu bar, but after
moving the mouse over the main window the menu bar was null!

Therefore the next step was to find out when it was set to null. To find
out, I edited the SwingApplicationFrame class (which I found out from
inspecting the "c" variable in the SwingToolBar#paintComponent(Graphics)
method above) like so:

-- snip --
	@Override
	public void setJMenuBar(final JMenuBar bar) {
		super.setJMenuBar(bar);
	}
-- snap --

and -- you probably guessed it by now -- added a breakpoint on the
"super.setJMenuBar(bar);" line.

It turns out that it is called the first time from
AbstractSwingUI#createUI(), as expected, but then -- unexpectedly --
from MacOSXPlatform#onEvent(WinActivatedEvent)! On Linux, no less...

There we have the culprit. As I found out by inserting

-- snip --
if (c.getName().endsWith("WinActivatedEvent")) {
	System.err.println();
}
-- snap --

into the DefaultEventService#subscribe(Class, EventSubscriber) method
and -- you probably guessed that again -- setting a breakpoint on the
"System.err.println();" line (after importing scijava-common into the
Eclipse workspace and adjusting ImageJ2's pom.xml to set the
scijava-common.version property to point to the checked out version),
MacOSXPlatform is registered as an event listener.

This is the consequence of some subtle, recent change that at the same
time a Context is injected, the class is also automatically registered
as event listener if it has @EventHandler-annotated methods).

Now, MacOSXPlatform's onEvent() method does not verify that the current
platform is actually MacOSX, nor does the EventService "forget" the
MacOSXPlatform as one would expect when the MacOSXPlatform is
garbage-collected after it has been determined that it does not match
the current platform because the PlatformService is now a
SingletonService that does not let go of its instances...

So we actually need two changes to fix this:

1) MacOSXPlatform#onEvent(WinActivatedEvent) needs to be safe, and

2) the DefaultPlatformService must not keep references to Platform
instances that are not applicable to the currently-running platform.

https://github.com/imagej/imagej/commit/c814f4b0 addresses 1) while
https://github.com/scijava/scijava-common/commit/46f64db2 and
https://github.com/scijava/scijava-common/commit/522f524 address 2)

Ciao,
Dscho


From bdezonia at gmail.com  Fri Dec 13 23:58:00 2013
From: bdezonia at gmail.com (Barry DeZonia)
Date: Fri, 13 Dec 2013 23:58:00 -0600
Subject: [ImageJ-devel] The mystery of the vanishing menu in ImageJ2
In-Reply-To: <alpine.DEB.1.00.1312140605510.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1312140605510.1191@s15462909.onlinehome-server.info>
Message-ID: <CAKcvfuSx_8T0ta5uVKOY1faHbikpc0uH-hw5p8sGdihu2xOPMg@mail.gmail.com>

Good catch Johannes! I miss you and the rest of the gang too. Remember I'll
always be around until you've closed all the tickets I ever filed. :) Happy
holidays and best wishes to the ImageJ2 team.


On Fri, Dec 13, 2013 at 11:12 PM, Johannes Schindelin <
Johannes.Schindelin at gmx.de> wrote:

> Hi all,
>
> I dedicate this mail to Barry because he reported the issue first, and
> besides, I miss him ;-)
>
> The issue Barry pointed out earlier, on Ubuntu, was that ImageJ2 started
> behaving strangely with regards to the menu: as soon as the mouse was
> hovering over the tool bar, the menu would go away.
>
> Back then, I could not reproduce the issue, but today I could, so I went
> on a hunt, and here is the write-up for everybody to enjoy:
>
> First of all, I figured that I should find out whether some strange AWT
> events were processed, so I fired up Eclipse -- because I wanted to use
> Eclipse's debugger to investigate the issue -- and added this code to the
> end of AbstractSwingUI#createUI():
>
> -- snip --
> Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
>
>         @Override
>         public void eventDispatched(AWTEvent event) {
>                 System.err.println("event: " + event);
>         }
> }, -1);
> -- snap --
>
> Basically, this code asks Java to output all the UI events as they
> happen.
>
> Then, I set a breakpoint on the first line and started ImageJ2 in debug
> mode. A little-known gem is that Eclipse's Console window not only shows
> the standard output and standard error stream of the debugged program,
> but also accepts the standard input. I used this fact by adding some
> empty lines (simply focusing the Console window and hitting the Return
> key a couple of times) as soon as the main window was visible because
> the events that had been shown so far could not be responsible (or so I
> thought).
>
> But after moving the mouse over the toolbar (and the menu bar
> vanishing), really only the obvious events were shown: mouse enter,
> mouse moves (and then mouse leave).
>
> So I imagined that another way to debug the issue might be to look
> whether there actually *was* a menu bar still when the tool bar was
> painted after the mouse entered the main window.
>
> To this end, I patched in a paintComponent method into the SwingToolBar
> class:
>
> -- snip --
>         @Override
>         public void paintComponent(final Graphics g) {
>                 Container c = getParent();
>                 c = c.getParent();
>                 c = c.getParent();
>                 c = c.getParent();
>                 System.err.println(c);
>                 System.err.println(((JFrame)c).getJMenuBar());
>                 super.paintComponent(g);
>         }
> -- snap --
>
> Of course, that was not the initial version. The initial version assumed
> that already the direct parent container of the tool bar would be the
> JFrame, and in hindsight, I'd better have written something like:
>
>                 Container c = getParent();
>                 while (c != null && !(c instanceof JFrame)) {
>                         c = c.getParent();
>                 }
>
> but hindsight is 20/20 and I did not have the luxury of that yet.
> However, I had the luxury of incremental compilation (as performed by
> Eclipse, one of the few things I really like about Eclipse): I could set
> a breakpoint on the "System.err.println(c);" call, launch ImageJ2 in debug
> mode, and then insert the "c = c.getParent();" lines one by one, saving
> them, which would trigger Eclipse's incremental compiler and move
> execution back to the first line of the method, until I had the right
> amount.
>
> And sure enough, the first time round, there was a menu bar, but after
> moving the mouse over the main window the menu bar was null!
>
> Therefore the next step was to find out when it was set to null. To find
> out, I edited the SwingApplicationFrame class (which I found out from
> inspecting the "c" variable in the SwingToolBar#paintComponent(Graphics)
> method above) like so:
>
> -- snip --
>         @Override
>         public void setJMenuBar(final JMenuBar bar) {
>                 super.setJMenuBar(bar);
>         }
> -- snap --
>
> and -- you probably guessed it by now -- added a breakpoint on the
> "super.setJMenuBar(bar);" line.
>
> It turns out that it is called the first time from
> AbstractSwingUI#createUI(), as expected, but then -- unexpectedly --
> from MacOSXPlatform#onEvent(WinActivatedEvent)! On Linux, no less...
>
> There we have the culprit. As I found out by inserting
>
> -- snip --
> if (c.getName().endsWith("WinActivatedEvent")) {
>         System.err.println();
> }
> -- snap --
>
> into the DefaultEventService#subscribe(Class, EventSubscriber) method
> and -- you probably guessed that again -- setting a breakpoint on the
> "System.err.println();" line (after importing scijava-common into the
> Eclipse workspace and adjusting ImageJ2's pom.xml to set the
> scijava-common.version property to point to the checked out version),
> MacOSXPlatform is registered as an event listener.
>
> This is the consequence of some subtle, recent change that at the same
> time a Context is injected, the class is also automatically registered
> as event listener if it has @EventHandler-annotated methods).
>
> Now, MacOSXPlatform's onEvent() method does not verify that the current
> platform is actually MacOSX, nor does the EventService "forget" the
> MacOSXPlatform as one would expect when the MacOSXPlatform is
> garbage-collected after it has been determined that it does not match
> the current platform because the PlatformService is now a
> SingletonService that does not let go of its instances...
>
> So we actually need two changes to fix this:
>
> 1) MacOSXPlatform#onEvent(WinActivatedEvent) needs to be safe, and
>
> 2) the DefaultPlatformService must not keep references to Platform
> instances that are not applicable to the currently-running platform.
>
> https://github.com/imagej/imagej/commit/c814f4b0 addresses 1) while
> https://github.com/scijava/scijava-common/commit/46f64db2 and
> https://github.com/scijava/scijava-common/commit/522f524 address 2)
>
> Ciao,
> Dscho
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131213/12a49bab/attachment-0001.html>

From hiner at wisc.edu  Mon Dec 16 08:07:41 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Mon, 16 Dec 2013 08:07:41 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
	<CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
Message-ID: <CA+B=mGr+z1FiDfOJLJJBX1n2F971YoYVXcNjYcqiTTjds2F5+Q@mail.gmail.com>

Hi Brian,

 Ahhh.. I'm sorry! I misunderstood. If that's the actual stack trace then
no, I don't think you are having any problems with the dependency tree, and
all your pom settings should be fine given that stack trace.

 Sidetrack: the pom-scijava doesn't actually have snapshot versions. It's
basically just versioning glue - it defines a version properties to help
ensure consistent versions of the various SciJava libraries (like SCIFIO)
are consumed. Using 1.111 is fine, as we want to use the latest version of
everything since SCIFIO-0.7.4/0.7.5 are quite new. Let me know if that's
not clear...

  Anyway, since we know it worked in 0.7.3, I would like to
bisect<https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html>and
figure out what happened. However, I currently can't reproduce the
issue. When I open a float dataset with SCIFIO 0.7.5 in IJ2 I'm able to
write it as a .tif. So you're probably exposing a bug with other commands
interacting with SCIFIO.

 Can you share your custom commands? If not, could you let me know which
commands you're calling?

Thanks,
- Mark




On Fri, Dec 13, 2013 at 1:49 PM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi Mark
>
> I am using IJ2 in headless mode with some custom commands I wrote.  So it
> is always possible that I still have old references somewhere.  However
> that stack trace was actually generated with 0.7.4.  When I had noted that
> 0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make sure that
> worked but it also had the same exception.  Then I went back to 0.7.3 which
> worked (other than the floating point problem).
>
> Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am using IJ2
> maybe there is something else wrong in the dependency tree??  One of the
> IJ2 components??  Should I set the sci-java version to a SNAPSHOT version
> too??  It is 1.111 right now.
>
>      at org.scijava.Context.inject(Context.java:273)
>     at
> org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
>     at
> org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
>     at
> org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
>     at
> org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
>     at
> org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
>     at
> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
>     at
> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
>     at org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
>     at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
>     at
> org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
>     at
> io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
>     at
> io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
>      at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
>
>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>
>
>
> On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:
>
>>
>> Hi Brian,
>>
>>
>>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to get
>>> the absolute latest??)
>>>
>>
>> Yep this should be the latest snapshot.
>>
>>  in my POM and ran into an exception when executing my code.
>>>
>>
>> ...
>>
>>
>>>      at
>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>
>>
>> That stack trace suggests that an older version of the TIFFFormat is
>> being used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
>> assuming it's from the 0.7.4 release.
>>
>>  Are you just running the code snippet that Curtis posted a while back
>> (or your own similar snippet)? Or are you using SCIFIO in IJ2, or another
>> application?
>>
>>  Could you run "mvn dependency:tree", or check the "Maven Dependencies"
>> tab if you're using Eclipse? I'm assuming something must still have a 0.7.4
>> SCIFIO reference, which is being pulled in instead of 0.7.5...
>>
>> Sorry for the inconvenience.. let me know what you find!
>>
>> Thanks,
>> Mark
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131216/9b7d7952/attachment.html>

From bnorthan at gmail.com  Mon Dec 16 11:23:55 2013
From: bnorthan at gmail.com (Brian Northan)
Date: Mon, 16 Dec 2013 12:23:55 -0500
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CA+B=mGproDP1qioEeVZaLNP4JzMwYsyTHA63XaEevHWF7Oezwg@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
	<CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
	<CA+B=mGr+z1FiDfOJLJJBX1n2F971YoYVXcNjYcqiTTjds2F5+Q@mail.gmail.com>
	<CA+B=mGproDP1qioEeVZaLNP4JzMwYsyTHA63XaEevHWF7Oezwg@mail.gmail.com>
Message-ID: <CAMWa8i282xYqkTcQGwDXyAiUYa+RYamDQ3XhDt5bR1TP3-nQnA@mail.gmail.com>

Hi Mark

My code is here: https://github.com/bnorthan/projects -- be warned it is in
need of some refactoring which I plan to do as ImageJ2 scripting becomes
available.

A simple example of running my custom commands is in
"SimpleCreatePhantoms.sh"  (the other scripts will not work because of
references to things on my own machine).

The code is for a project I did earlier in the year (
http://spie.org/x648.xml?product_id=2002974).

The main program is called DeconvolutionTest.java... which has ended up
evolving into a command parser.  I never really polished it though because
I am going to throw it away and use ImageJ2 scripting as that develops.
A lot of things in the code base fall into that category, things I put
together quickly but are meant to be replaced with the "proper" imagej2
component.

SimpleCreatePhantoms.sh just calls a command to create a blank phantom,
then a second command to place a sphere in it.


On Mon, Dec 16, 2013 at 9:09 AM, Mark Hiner <hinerm at gmail.com> wrote:

> P.S. please feel free to send your commands via private e-mail, if you
> don't want them to be public.
>
> Similarly, if you can share the dataset you're using that would be
> ideal... but no worries if it's proprietary or anything.
>
>
> On Mon, Dec 16, 2013 at 8:07 AM, Mark Hiner <hiner at wisc.edu> wrote:
>
>> Hi Brian,
>>
>>  Ahhh.. I'm sorry! I misunderstood. If that's the actual stack trace then
>> no, I don't think you are having any problems with the dependency tree, and
>> all your pom settings should be fine given that stack trace.
>>
>>  Sidetrack: the pom-scijava doesn't actually have snapshot versions. It's
>> basically just versioning glue - it defines a version properties to help
>> ensure consistent versions of the various SciJava libraries (like SCIFIO)
>> are consumed. Using 1.111 is fine, as we want to use the latest version of
>> everything since SCIFIO-0.7.4/0.7.5 are quite new. Let me know if that's
>> not clear...
>>
>>   Anyway, since we know it worked in 0.7.3, I would like to bisect<https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html>and figure out what happened. However, I currently can't reproduce the
>> issue. When I open a float dataset with SCIFIO 0.7.5 in IJ2 I'm able to
>> write it as a .tif. So you're probably exposing a bug with other commands
>> interacting with SCIFIO.
>>
>>  Can you share your custom commands? If not, could you let me know which
>> commands you're calling?
>>
>> Thanks,
>> - Mark
>>
>>
>>
>>
>> On Fri, Dec 13, 2013 at 1:49 PM, Brian Northan <bnorthan at gmail.com>wrote:
>>
>>> Hi Mark
>>>
>>> I am using IJ2 in headless mode with some custom commands I wrote.  So
>>> it is always possible that I still have old references somewhere.  However
>>> that stack trace was actually generated with 0.7.4.  When I had noted that
>>> 0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make sure that
>>> worked but it also had the same exception.  Then I went back to 0.7.3 which
>>> worked (other than the floating point problem).
>>>
>>> Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am using
>>> IJ2 maybe there is something else wrong in the dependency tree??  One of
>>> the IJ2 components??  Should I set the sci-java version to a SNAPSHOT
>>> version too??  It is 1.111 right now.
>>>
>>>      at org.scijava.Context.inject(Context.java:273)
>>>     at
>>> org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
>>>     at
>>> org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
>>>     at
>>> org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
>>>     at
>>> org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
>>>     at
>>> org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
>>>     at
>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
>>>     at
>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
>>>     at
>>> org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
>>>     at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
>>>     at
>>> org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
>>>     at
>>> io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
>>>     at
>>> io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
>>>      at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
>>>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
>>>
>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>
>>>
>>>
>>> On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:
>>>
>>>>
>>>> Hi Brian,
>>>>
>>>>
>>>>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to get
>>>>> the absolute latest??)
>>>>>
>>>>
>>>> Yep this should be the latest snapshot.
>>>>
>>>>  in my POM and ran into an exception when executing my code.
>>>>>
>>>>
>>>> ...
>>>>
>>>>
>>>>>      at
>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>>>>     at
>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>
>>>>
>>>> That stack trace suggests that an older version of the TIFFFormat is
>>>> being used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
>>>> assuming it's from the 0.7.4 release.
>>>>
>>>>  Are you just running the code snippet that Curtis posted a while back
>>>> (or your own similar snippet)? Or are you using SCIFIO in IJ2, or another
>>>> application?
>>>>
>>>>  Could you run "mvn dependency:tree", or check the "Maven Dependencies"
>>>> tab if you're using Eclipse? I'm assuming something must still have a 0.7.4
>>>> SCIFIO reference, which is being pulled in instead of 0.7.5...
>>>>
>>>> Sorry for the inconvenience.. let me know what you find!
>>>>
>>>> Thanks,
>>>> Mark
>>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131216/ae2577f2/attachment-0001.html>

From hiner at wisc.edu  Mon Dec 16 13:46:25 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Mon, 16 Dec 2013 13:46:25 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CAMWa8i282xYqkTcQGwDXyAiUYa+RYamDQ3XhDt5bR1TP3-nQnA@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
	<CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
	<CA+B=mGr+z1FiDfOJLJJBX1n2F971YoYVXcNjYcqiTTjds2F5+Q@mail.gmail.com>
	<CA+B=mGproDP1qioEeVZaLNP4JzMwYsyTHA63XaEevHWF7Oezwg@mail.gmail.com>
	<CAMWa8i282xYqkTcQGwDXyAiUYa+RYamDQ3XhDt5bR1TP3-nQnA@mail.gmail.com>
Message-ID: <CA+B=mGqEsceF2dQ=pv3nJtAJuPQQ5QWbdOympjg7y1rMAbd5YA@mail.gmail.com>

Hi Brian,

 So, running your CreatePhantomCommand via the DeconvolutionTest class
actually creates a blank image for me... I ran it from Eclipse directly
though.

 Also, I did observe the same error message that you saw, but the message
was just logged and execution continued (because the services that failed
to instantiate weren't necessary for execution.. so the "error" nature of
the message is a bit of an overstatement in this case).

 It is possible that some classes in SCIFIO erroneously have required
services that aren't available in headless mode, but nothing stood out to
me as suspicious.

Could you do two more things for me:

1) Try running your scripts without using a headless IJ2 to verify this
works on your end.

2) Set the Java system property: "scijava.log.level=4" and re-paste the
error output. This will turn full debugging on.

Thanks,
Mark


On Mon, Dec 16, 2013 at 11:23 AM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi Mark
>
> My code is here: https://github.com/bnorthan/projects -- be warned it is
> in need of some refactoring which I plan to do as ImageJ2 scripting becomes
> available.
>
> A simple example of running my custom commands is in
> "SimpleCreatePhantoms.sh"  (the other scripts will not work because of
> references to things on my own machine).
>
> The code is for a project I did earlier in the year (
> http://spie.org/x648.xml?product_id=2002974).
>
> The main program is called DeconvolutionTest.java... which has ended up
> evolving into a command parser.  I never really polished it though because
> I am going to throw it away and use ImageJ2 scripting as that develops.
> A lot of things in the code base fall into that category, things I put
> together quickly but are meant to be replaced with the "proper" imagej2
> component.
>
> SimpleCreatePhantoms.sh just calls a command to create a blank phantom,
> then a second command to place a sphere in it.
>
>
> On Mon, Dec 16, 2013 at 9:09 AM, Mark Hiner <hinerm at gmail.com> wrote:
>
>> P.S. please feel free to send your commands via private e-mail, if you
>> don't want them to be public.
>>
>> Similarly, if you can share the dataset you're using that would be
>> ideal... but no worries if it's proprietary or anything.
>>
>>
>> On Mon, Dec 16, 2013 at 8:07 AM, Mark Hiner <hiner at wisc.edu> wrote:
>>
>>> Hi Brian,
>>>
>>>  Ahhh.. I'm sorry! I misunderstood. If that's the actual stack trace
>>> then no, I don't think you are having any problems with the dependency
>>> tree, and all your pom settings should be fine given that stack trace.
>>>
>>>  Sidetrack: the pom-scijava doesn't actually have snapshot versions.
>>> It's basically just versioning glue - it defines a version properties to
>>> help ensure consistent versions of the various SciJava libraries (like
>>> SCIFIO) are consumed. Using 1.111 is fine, as we want to use the latest
>>> version of everything since SCIFIO-0.7.4/0.7.5 are quite new. Let me know
>>> if that's not clear...
>>>
>>>   Anyway, since we know it worked in 0.7.3, I would like to bisect<https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html>and figure out what happened. However, I currently can't reproduce the
>>> issue. When I open a float dataset with SCIFIO 0.7.5 in IJ2 I'm able to
>>> write it as a .tif. So you're probably exposing a bug with other commands
>>> interacting with SCIFIO.
>>>
>>>  Can you share your custom commands? If not, could you let me know which
>>> commands you're calling?
>>>
>>> Thanks,
>>> - Mark
>>>
>>>
>>>
>>>
>>> On Fri, Dec 13, 2013 at 1:49 PM, Brian Northan <bnorthan at gmail.com>wrote:
>>>
>>>> Hi Mark
>>>>
>>>> I am using IJ2 in headless mode with some custom commands I wrote.  So
>>>> it is always possible that I still have old references somewhere.  However
>>>> that stack trace was actually generated with 0.7.4.  When I had noted that
>>>> 0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make sure that
>>>> worked but it also had the same exception.  Then I went back to 0.7.3 which
>>>> worked (other than the floating point problem).
>>>>
>>>> Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am using
>>>> IJ2 maybe there is something else wrong in the dependency tree??  One of
>>>> the IJ2 components??  Should I set the sci-java version to a SNAPSHOT
>>>> version too??  It is 1.111 right now.
>>>>
>>>>      at org.scijava.Context.inject(Context.java:273)
>>>>     at
>>>> org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
>>>>     at
>>>> org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
>>>>     at
>>>> org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
>>>>     at
>>>> org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
>>>>     at
>>>> org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
>>>>     at
>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
>>>>     at
>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
>>>>     at
>>>> org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
>>>>     at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
>>>>     at
>>>> org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
>>>>     at
>>>> io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
>>>>     at
>>>> io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
>>>>      at
>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
>>>>     at io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
>>>>
>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>
>>>>
>>>>
>>>> On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:
>>>>
>>>>>
>>>>> Hi Brian,
>>>>>
>>>>>
>>>>>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to get
>>>>>> the absolute latest??)
>>>>>>
>>>>>
>>>>> Yep this should be the latest snapshot.
>>>>>
>>>>>  in my POM and ran into an exception when executing my code.
>>>>>>
>>>>>
>>>>> ...
>>>>>
>>>>>
>>>>>>      at
>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>>>>>     at
>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>>
>>>>>
>>>>> That stack trace suggests that an older version of the TIFFFormat is
>>>>> being used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
>>>>> assuming it's from the 0.7.4 release.
>>>>>
>>>>>  Are you just running the code snippet that Curtis posted a while back
>>>>> (or your own similar snippet)? Or are you using SCIFIO in IJ2, or another
>>>>> application?
>>>>>
>>>>>  Could you run "mvn dependency:tree", or check the "Maven
>>>>> Dependencies" tab if you're using Eclipse? I'm assuming something must
>>>>> still have a 0.7.4 SCIFIO reference, which is being pulled in instead of
>>>>> 0.7.5...
>>>>>
>>>>> Sorry for the inconvenience.. let me know what you find!
>>>>>
>>>>> Thanks,
>>>>> Mark
>>>>>
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131216/c948f9f2/attachment.html>

From bnorthan at gmail.com  Mon Dec 16 14:19:50 2013
From: bnorthan at gmail.com (Brian Northan)
Date: Mon, 16 Dec 2013 15:19:50 -0500
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CA+B=mGqEsceF2dQ=pv3nJtAJuPQQ5QWbdOympjg7y1rMAbd5YA@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
	<CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
	<CA+B=mGr+z1FiDfOJLJJBX1n2F971YoYVXcNjYcqiTTjds2F5+Q@mail.gmail.com>
	<CA+B=mGproDP1qioEeVZaLNP4JzMwYsyTHA63XaEevHWF7Oezwg@mail.gmail.com>
	<CAMWa8i282xYqkTcQGwDXyAiUYa+RYamDQ3XhDt5bR1TP3-nQnA@mail.gmail.com>
	<CA+B=mGqEsceF2dQ=pv3nJtAJuPQQ5QWbdOympjg7y1rMAbd5YA@mail.gmail.com>
Message-ID: <CAMWa8i10EimnUz+vRcX372UcGZ2cUnGpkPu630FLfQzFyWn57g@mail.gmail.com>

Hi Mark

I just checked and It did work after all...  I actually never checked to
see if the final output was created.  I just saw the exception and assumed
it had stopped.

So everything appears great now,.  Looks like the floating point numbers
are being saved correctly.

Thanks for the fix

Brian


On Mon, Dec 16, 2013 at 2:46 PM, Mark Hiner <hiner at wisc.edu> wrote:

> Hi Brian,
>
>  So, running your CreatePhantomCommand via the DeconvolutionTest class
> actually creates a blank image for me... I ran it from Eclipse directly
> though.
>
>  Also, I did observe the same error message that you saw, but the message
> was just logged and execution continued (because the services that failed
> to instantiate weren't necessary for execution.. so the "error" nature of
> the message is a bit of an overstatement in this case).
>
>  It is possible that some classes in SCIFIO erroneously have required
> services that aren't available in headless mode, but nothing stood out to
> me as suspicious.
>
> Could you do two more things for me:
>
> 1) Try running your scripts without using a headless IJ2 to verify this
> works on your end.
>
> 2) Set the Java system property: "scijava.log.level=4" and re-paste the
> error output. This will turn full debugging on.
>
> Thanks,
> Mark
>
>
> On Mon, Dec 16, 2013 at 11:23 AM, Brian Northan <bnorthan at gmail.com>wrote:
>
>> Hi Mark
>>
>> My code is here: https://github.com/bnorthan/projects -- be warned it is
>> in need of some refactoring which I plan to do as ImageJ2 scripting becomes
>> available.
>>
>> A simple example of running my custom commands is in
>> "SimpleCreatePhantoms.sh"  (the other scripts will not work because of
>> references to things on my own machine).
>>
>> The code is for a project I did earlier in the year (
>> http://spie.org/x648.xml?product_id=2002974).
>>
>> The main program is called DeconvolutionTest.java... which has ended up
>> evolving into a command parser.  I never really polished it though because
>> I am going to throw it away and use ImageJ2 scripting as that develops.
>> A lot of things in the code base fall into that category, things I put
>> together quickly but are meant to be replaced with the "proper" imagej2
>> component.
>>
>> SimpleCreatePhantoms.sh just calls a command to create a blank phantom,
>> then a second command to place a sphere in it.
>>
>>
>> On Mon, Dec 16, 2013 at 9:09 AM, Mark Hiner <hinerm at gmail.com> wrote:
>>
>>> P.S. please feel free to send your commands via private e-mail, if you
>>> don't want them to be public.
>>>
>>> Similarly, if you can share the dataset you're using that would be
>>> ideal... but no worries if it's proprietary or anything.
>>>
>>>
>>> On Mon, Dec 16, 2013 at 8:07 AM, Mark Hiner <hiner at wisc.edu> wrote:
>>>
>>>> Hi Brian,
>>>>
>>>>  Ahhh.. I'm sorry! I misunderstood. If that's the actual stack trace
>>>> then no, I don't think you are having any problems with the dependency
>>>> tree, and all your pom settings should be fine given that stack trace.
>>>>
>>>>  Sidetrack: the pom-scijava doesn't actually have snapshot versions.
>>>> It's basically just versioning glue - it defines a version properties to
>>>> help ensure consistent versions of the various SciJava libraries (like
>>>> SCIFIO) are consumed. Using 1.111 is fine, as we want to use the latest
>>>> version of everything since SCIFIO-0.7.4/0.7.5 are quite new. Let me know
>>>> if that's not clear...
>>>>
>>>>   Anyway, since we know it worked in 0.7.3, I would like to bisect<https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html>and figure out what happened. However, I currently can't reproduce the
>>>> issue. When I open a float dataset with SCIFIO 0.7.5 in IJ2 I'm able to
>>>> write it as a .tif. So you're probably exposing a bug with other commands
>>>> interacting with SCIFIO.
>>>>
>>>>  Can you share your custom commands? If not, could you let me know
>>>> which commands you're calling?
>>>>
>>>> Thanks,
>>>> - Mark
>>>>
>>>>
>>>>
>>>>
>>>> On Fri, Dec 13, 2013 at 1:49 PM, Brian Northan <bnorthan at gmail.com>wrote:
>>>>
>>>>> Hi Mark
>>>>>
>>>>> I am using IJ2 in headless mode with some custom commands I wrote.  So
>>>>> it is always possible that I still have old references somewhere.  However
>>>>> that stack trace was actually generated with 0.7.4.  When I had noted that
>>>>> 0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make sure that
>>>>> worked but it also had the same exception.  Then I went back to 0.7.3 which
>>>>> worked (other than the floating point problem).
>>>>>
>>>>> Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am using
>>>>> IJ2 maybe there is something else wrong in the dependency tree??  One of
>>>>> the IJ2 components??  Should I set the sci-java version to a SNAPSHOT
>>>>> version too??  It is 1.111 right now.
>>>>>
>>>>>      at org.scijava.Context.inject(Context.java:273)
>>>>>     at
>>>>> org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
>>>>>     at
>>>>> org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
>>>>>     at
>>>>> org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
>>>>>     at
>>>>> org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
>>>>>     at
>>>>> org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
>>>>>     at
>>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
>>>>>     at
>>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
>>>>>     at
>>>>> org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
>>>>>     at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
>>>>>     at
>>>>> org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
>>>>>     at
>>>>> io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
>>>>>     at
>>>>> io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
>>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
>>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
>>>>>      at
>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
>>>>>     at
>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
>>>>>
>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>
>>>>>
>>>>>
>>>>> On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:
>>>>>
>>>>>>
>>>>>> Hi Brian,
>>>>>>
>>>>>>
>>>>>>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to
>>>>>>> get the absolute latest??)
>>>>>>>
>>>>>>
>>>>>> Yep this should be the latest snapshot.
>>>>>>
>>>>>>  in my POM and ran into an exception when executing my code.
>>>>>>>
>>>>>>
>>>>>> ...
>>>>>>
>>>>>>
>>>>>>>      at
>>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>>>>>>     at
>>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>>>
>>>>>>
>>>>>> That stack trace suggests that an older version of the TIFFFormat is
>>>>>> being used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
>>>>>> assuming it's from the 0.7.4 release.
>>>>>>
>>>>>>  Are you just running the code snippet that Curtis posted a while
>>>>>> back (or your own similar snippet)? Or are you using SCIFIO in IJ2, or
>>>>>> another application?
>>>>>>
>>>>>>  Could you run "mvn dependency:tree", or check the "Maven
>>>>>> Dependencies" tab if you're using Eclipse? I'm assuming something must
>>>>>> still have a 0.7.4 SCIFIO reference, which is being pulled in instead of
>>>>>> 0.7.5...
>>>>>>
>>>>>> Sorry for the inconvenience.. let me know what you find!
>>>>>>
>>>>>> Thanks,
>>>>>> Mark
>>>>>>
>>>>>
>>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131216/85c7e662/attachment-0001.html>

From hiner at wisc.edu  Mon Dec 16 14:32:34 2013
From: hiner at wisc.edu (Mark Hiner)
Date: Mon, 16 Dec 2013 14:32:34 -0600
Subject: [ImageJ-devel] [ImgLib2] The img-metadata branch
In-Reply-To: <CAMWa8i10EimnUz+vRcX372UcGZ2cUnGpkPu630FLfQzFyWn57g@mail.gmail.com>
References: <CADN69ykbTxxsr6z6RcEqbb3hRpXgrOCZcw9700_zSFOCPNO_kg@mail.gmail.com>
	<CADN69ymwt_qLY2aYuGPonWEbS5sQxAmYHi==YdAvNe464yEV_w@mail.gmail.com>
	<CAMWa8i1+H5X=O+oe14SE200jkq5hPKZmVYnX=-q0NrKpJp8x2Q@mail.gmail.com>
	<CAMWa8i1t-haNinXjkaoDFntRF-8aW+1Si8QZYQZKePxHzptVtQ@mail.gmail.com>
	<CADN69ymbqEzu+XCRQr051ke1vppEf9frOUe=CEK4GSmop_00eg@mail.gmail.com>
	<CADN69ykKh8Y0eu11yLn08uRS0WqfP165fOPyW5ojXCppfsMFZw@mail.gmail.com>
	<CAMWa8i04n31BRSKN-8guCpFW-HS_HAbcZQvsmroib3WPwMjDVg@mail.gmail.com>
	<CA+B=mGpwd4a+JVyxKAiMtGZeEtMv_oqghc6SKxyw04OJfkd-Uw@mail.gmail.com>
	<CAMWa8i0fmiF51aN7s-kNJzDCuVZygp35-HFjKywrbB0avs-Gjw@mail.gmail.com>
	<CA+B=mGqfQ-jdmXv69addi3SrG=KN7pLDk1VR5pdzEigVGwD4fg@mail.gmail.com>
	<CAMWa8i0sLRvc3N8XgCNTcHs7nV-nxzVbt+Gxb+RbBH8KFRGLXg@mail.gmail.com>
	<CA+B=mGr+z1FiDfOJLJJBX1n2F971YoYVXcNjYcqiTTjds2F5+Q@mail.gmail.com>
	<CA+B=mGproDP1qioEeVZaLNP4JzMwYsyTHA63XaEevHWF7Oezwg@mail.gmail.com>
	<CAMWa8i282xYqkTcQGwDXyAiUYa+RYamDQ3XhDt5bR1TP3-nQnA@mail.gmail.com>
	<CA+B=mGqEsceF2dQ=pv3nJtAJuPQQ5QWbdOympjg7y1rMAbd5YA@mail.gmail.com>
	<CAMWa8i10EimnUz+vRcX372UcGZ2cUnGpkPu630FLfQzFyWn57g@mail.gmail.com>
Message-ID: <CA+B=mGo0iXWwmwcLhGVBF9AbuCegzQaAxf5ca4ikv974iYhQ2g@mail.gmail.com>

No problem. That "error" message when failing to create services is
confusing.

Glad it's working, let us know if you have any more problems!

- Mark


On Mon, Dec 16, 2013 at 2:19 PM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi Mark
>
> I just checked and It did work after all...  I actually never checked to
> see if the final output was created.  I just saw the exception and assumed
> it had stopped.
>
> So everything appears great now,.  Looks like the floating point numbers
> are being saved correctly.
>
> Thanks for the fix
>
> Brian
>
>
> On Mon, Dec 16, 2013 at 2:46 PM, Mark Hiner <hiner at wisc.edu> wrote:
>
>> Hi Brian,
>>
>>  So, running your CreatePhantomCommand via the DeconvolutionTest class
>> actually creates a blank image for me... I ran it from Eclipse directly
>> though.
>>
>>  Also, I did observe the same error message that you saw, but the message
>> was just logged and execution continued (because the services that failed
>> to instantiate weren't necessary for execution.. so the "error" nature of
>> the message is a bit of an overstatement in this case).
>>
>>  It is possible that some classes in SCIFIO erroneously have required
>> services that aren't available in headless mode, but nothing stood out to
>> me as suspicious.
>>
>> Could you do two more things for me:
>>
>> 1) Try running your scripts without using a headless IJ2 to verify this
>> works on your end.
>>
>> 2) Set the Java system property: "scijava.log.level=4" and re-paste the
>> error output. This will turn full debugging on.
>>
>> Thanks,
>> Mark
>>
>>
>> On Mon, Dec 16, 2013 at 11:23 AM, Brian Northan <bnorthan at gmail.com>wrote:
>>
>>> Hi Mark
>>>
>>> My code is here: https://github.com/bnorthan/projects -- be warned it
>>> is in need of some refactoring which I plan to do as ImageJ2 scripting
>>> becomes available.
>>>
>>> A simple example of running my custom commands is in
>>> "SimpleCreatePhantoms.sh"  (the other scripts will not work because of
>>> references to things on my own machine).
>>>
>>> The code is for a project I did earlier in the year (
>>> http://spie.org/x648.xml?product_id=2002974).
>>>
>>> The main program is called DeconvolutionTest.java... which has ended up
>>> evolving into a command parser.  I never really polished it though because
>>> I am going to throw it away and use ImageJ2 scripting as that develops.
>>> A lot of things in the code base fall into that category, things I put
>>> together quickly but are meant to be replaced with the "proper" imagej2
>>> component.
>>>
>>> SimpleCreatePhantoms.sh just calls a command to create a blank phantom,
>>> then a second command to place a sphere in it.
>>>
>>>
>>> On Mon, Dec 16, 2013 at 9:09 AM, Mark Hiner <hinerm at gmail.com> wrote:
>>>
>>>> P.S. please feel free to send your commands via private e-mail, if you
>>>> don't want them to be public.
>>>>
>>>> Similarly, if you can share the dataset you're using that would be
>>>> ideal... but no worries if it's proprietary or anything.
>>>>
>>>>
>>>> On Mon, Dec 16, 2013 at 8:07 AM, Mark Hiner <hiner at wisc.edu> wrote:
>>>>
>>>>> Hi Brian,
>>>>>
>>>>>  Ahhh.. I'm sorry! I misunderstood. If that's the actual stack trace
>>>>> then no, I don't think you are having any problems with the dependency
>>>>> tree, and all your pom settings should be fine given that stack trace.
>>>>>
>>>>>  Sidetrack: the pom-scijava doesn't actually have snapshot versions.
>>>>> It's basically just versioning glue - it defines a version properties to
>>>>> help ensure consistent versions of the various SciJava libraries (like
>>>>> SCIFIO) are consumed. Using 1.111 is fine, as we want to use the latest
>>>>> version of everything since SCIFIO-0.7.4/0.7.5 are quite new. Let me know
>>>>> if that's not clear...
>>>>>
>>>>>   Anyway, since we know it worked in 0.7.3, I would like to bisect<https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html>and figure out what happened. However, I currently can't reproduce the
>>>>> issue. When I open a float dataset with SCIFIO 0.7.5 in IJ2 I'm able to
>>>>> write it as a .tif. So you're probably exposing a bug with other commands
>>>>> interacting with SCIFIO.
>>>>>
>>>>>  Can you share your custom commands? If not, could you let me know
>>>>> which commands you're calling?
>>>>>
>>>>> Thanks,
>>>>> - Mark
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Fri, Dec 13, 2013 at 1:49 PM, Brian Northan <bnorthan at gmail.com>wrote:
>>>>>
>>>>>> Hi Mark
>>>>>>
>>>>>> I am using IJ2 in headless mode with some custom commands I wrote.
>>>>>> So it is always possible that I still have old references somewhere.
>>>>>> However that stack trace was actually generated with 0.7.4.  When I had
>>>>>> noted that 0.7.5-SNAPSHOT threw an exception, I went back to 0.7.4 to make
>>>>>> sure that worked but it also had the same exception.  Then I went back to
>>>>>> 0.7.3 which worked (other than the floating point problem).
>>>>>>
>>>>>> Below is the stack trace using 0.7.5-SNAPSHOT.   (btw since I am
>>>>>> using IJ2 maybe there is something else wrong in the dependency tree??  One
>>>>>> of the IJ2 components??  Should I set the sci-java version to a SNAPSHOT
>>>>>> version too??  It is 1.111 right now.
>>>>>>
>>>>>>      at org.scijava.Context.inject(Context.java:273)
>>>>>>     at
>>>>>> org.scijava.plugin.DefaultPluginService.createInstance(DefaultPluginService.java:241)
>>>>>>     at
>>>>>> org.scijava.plugin.DefaultPluginService.createInstances(DefaultPluginService.java:229)
>>>>>>     at
>>>>>> org.scijava.plugin.DefaultPluginService.createInstancesOfType(DefaultPluginService.java:220)
>>>>>>     at
>>>>>> org.scijava.plugin.AbstractSingletonService.createInstances(AbstractSingletonService.java:95)
>>>>>>     at
>>>>>> org.scijava.plugin.AbstractSingletonService.getInstances(AbstractSingletonService.java:73)
>>>>>>     at
>>>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:87)
>>>>>>     at
>>>>>> org.scijava.plugin.AbstractSingletonService$1.get(AbstractSingletonService.java:83)
>>>>>>     at
>>>>>> org.scijava.object.ObjectIndex.resolvePending(ObjectIndex.java:391)
>>>>>>     at org.scijava.object.ObjectIndex.get(ObjectIndex.java:136)
>>>>>>     at
>>>>>> org.scijava.object.DefaultObjectService.getObjects(DefaultObjectService.java:89)
>>>>>>     at
>>>>>> io.scif.codec.DefaultCodecService.getCodec(DefaultCodecService.java:65)
>>>>>>     at
>>>>>> io.scif.formats.tiff.TiffCompression.compress(TiffCompression.java:330)
>>>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:391)
>>>>>>     at io.scif.formats.tiff.TiffSaver.writeImage(TiffSaver.java:279)
>>>>>>      at
>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1250)
>>>>>>     at
>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1290)
>>>>>>
>>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Fri, Dec 13, 2013 at 1:40 PM, Mark Hiner <hinerm at gmail.com> wrote:
>>>>>>
>>>>>>>
>>>>>>> Hi Brian,
>>>>>>>
>>>>>>>
>>>>>>>>  I referenced the scifio 0.7.5-SNAPSHOT (would that be correct to
>>>>>>>> get the absolute latest??)
>>>>>>>>
>>>>>>>
>>>>>>> Yep this should be the latest snapshot.
>>>>>>>
>>>>>>>  in my POM and ran into an exception when executing my code.
>>>>>>>>
>>>>>>>
>>>>>>> ...
>>>>>>>
>>>>>>>
>>>>>>>>      at
>>>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1255)
>>>>>>>>     at
>>>>>>>> io.scif.formats.TIFFFormat$Writer.savePlane(TIFFFormat.java:1295)
>>>>>>>>     at io.scif.AbstractWriter.savePlane(AbstractWriter.java:107)
>>>>>>>>     at io.scif.img.ImgSaver.writePlanes(ImgSaver.java:532)
>>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:380)
>>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:133)
>>>>>>>>     at io.scif.img.ImgSaver.saveImg(ImgSaver.java:114)
>>>>>>>>
>>>>>>>
>>>>>>> That stack trace suggests that an older version of the TIFFFormat is
>>>>>>> being used. It must be from prior commit 37953<https://github.com/scifio/scifio/commit/379530aab9a9848e59363d87dcbdb79c4842bfc3>(because the TiffSaver.writeImage call is now on line 1250, not 1255). I'm
>>>>>>> assuming it's from the 0.7.4 release.
>>>>>>>
>>>>>>>  Are you just running the code snippet that Curtis posted a while
>>>>>>> back (or your own similar snippet)? Or are you using SCIFIO in IJ2, or
>>>>>>> another application?
>>>>>>>
>>>>>>>  Could you run "mvn dependency:tree", or check the "Maven
>>>>>>> Dependencies" tab if you're using Eclipse? I'm assuming something must
>>>>>>> still have a 0.7.4 SCIFIO reference, which is being pulled in instead of
>>>>>>> 0.7.5...
>>>>>>>
>>>>>>> Sorry for the inconvenience.. let me know what you find!
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Mark
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131216/be8277b7/attachment.html>

From ctrueden at wisc.edu  Tue Dec 17 16:56:19 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Tue, 17 Dec 2013 16:56:19 -0600
Subject: [ImageJ-devel] ImgLib2 repository moved to its own organization
Message-ID: <CADN69ymJghTnsuJTjJYhTvDJF4QRuAygeuwAwwTkj3gERt8aeA@mail.gmail.com>

Hi all,

Just wanted to let people know that the ImgLib2 Git repository on GitHub
has moved to its own organization. The new URL is:

    https://github.com/imglib/imglib

The old location (in the imagej organization space) now redirects to the
new location. The old Git repository still works as well, though it is best
if you update your remote:

    git remote set-url origin git://github.com/imglib/imglib
    git remote set-url origin --push git at github.com:imglib/imglib

We'll update the docs over time as we notice out of date links.

Regards,
Curtis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131217/579f5b46/attachment.html>

From stephan.preibisch at gmx.de  Wed Dec 18 05:54:33 2013
From: stephan.preibisch at gmx.de (Stephan Preibisch)
Date: Wed, 18 Dec 2013 12:54:33 +0100
Subject: [ImageJ-devel] Fwd: Build failed in Jenkins: ImgLib #2279
References: <B7C9307F-BA81-47D0-9847-750B1C31C738@gmx.de>
Message-ID: <FA5ECD51-D964-4C65-B6B0-38CB3F058D18@gmx.de>

Ok, now I need help :) Although I reverted my commit it still does not compile. Does this make sense? I am sure it is my fault but I have still no idea why this would happen. 

It should be the exactly same state as before, or?

Thanks a lot,
Steffi

> On Dec 18, 2013, at 12:49 , jenkins at imagej.net wrote:
> 
>> See <http://jenkins.imagej.net/job/ImgLib/2279/changes>
>> 
>> Changes:
>> 
>> [Stephan Preibisch] For some reason this fails to compile on jenkins, reverting it
>> 
>> ------------------------------------------
>> [...truncated 371 lines...]
>> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-HistogramTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.TestSortedGrayLevelIterator.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-imglib.ops.Rev2FunctionalIdeasTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestPlot.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.kdtree.VolumetricSearchTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.fft.FFTTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.localization.EllipticGaussianOrthoTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.localization.GaussianTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.localization.MLEllipticGaussianEstimatorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.localization.MLGaussianEstimatorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.localization.PeakFitterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.algorithm.region.BresenhamLineTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.BinningTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.IterableIntervalSubsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.PointTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.RealPointTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.TestAbstractRealLocalizable.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.collection.RealPointSampleListTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.cell.CellContainerFactoryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.cell.CellContainerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.cell.CellCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.cell.CellTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.HyperSliceImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestTransformations.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.AxesTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultCalibratedRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultCalibratedSpaceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultNamedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultSourcedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultTypedAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.DefaultTypedSpaceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.ImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.IntervalUtilsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.SpaceUtilsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.DefaultLinearAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.ExponentialAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.ExponentialRecoveryAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.GammaVariateAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.GaussianAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.IdentityAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.InverseRodbardAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.LogLinearAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.PolynomialAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.PowerAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.axis.RodbardAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.units.DefaultUnitServiceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.meta.view.HyperSliceImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.realtransform.InvertibleRealTransformSequenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.realtransform.RealTransformSequenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-script.imglib.test.TestTransformations.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Performance: File TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>> Failed to send e-mail to squareys because no e-mail address is known, and no default e-mail domain is configured
> 
> ---
> 
> Dr. Stephan Preibisch
> HFSP Fellow
> Robert H. Singer / Eugene Myers lab
> 
> Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG
> 
> email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org / preibisch at mpi-cbg.de
> web: http://www.preibisch.net/
> 

---

Dr. Stephan Preibisch
HFSP Fellow
Robert H. Singer / Eugene Myers lab

Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG

email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org / preibisch at mpi-cbg.de
web: http://www.preibisch.net/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131218/807a16e1/attachment-0001.html>

From ctrueden at wisc.edu  Thu Dec 19 16:36:42 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 19 Dec 2013 16:36:42 -0600
Subject: [ImageJ-devel] [fiji-devel] Fwd: Build failed in Jenkins:
	ImgLib #2279
In-Reply-To: <FA5ECD51-D964-4C65-B6B0-38CB3F058D18@gmx.de>
References: <B7C9307F-BA81-47D0-9847-750B1C31C738@gmx.de>
	<FA5ECD51-D964-4C65-B6B0-38CB3F058D18@gmx.de>
Message-ID: <CADN69ymp0m3-=dPgZPScP5Cgd6i23R9Qa-cZu7jacoL2Ew7_cg@mail.gmail.com>

Hi Steffi and everyone,

> Although I reverted my commit it still does not compile. Does this
> make sense? I am sure it is my fault but I have still no idea why this
> would happen.

For the record, the problem (which is now fixed) was due to a reboot of the
ImageJ Maven development server. My fault, not Steffi's.

For details, see:
https://github.com/imglib/imglib/commit/e989540e844538258577d95dd24fa615a1e7c238
https://github.com/imglib/imglib/commit/ce27291ce50eb888c2606916daebcfed56e329ad#commitcomment-4894654

Regards,
Curtis


On Wed, Dec 18, 2013 at 5:54 AM, Stephan Preibisch <stephan.preibisch at gmx.de
> wrote:

> Ok, now I need help :) Although I reverted my commit it still does not
> compile. Does this make sense? I am sure it is my fault but I have still no
> idea why this would happen.
>
> It should be the exactly same state as before, or?
>
> Thanks a lot,
> Steffi
>
> On Dec 18, 2013, at 12:49 , jenkins at imagej.net wrote:
>
> See <http://jenkins.imagej.net/job/ImgLib/2279/changes>
>
> Changes:
>
> [Stephan Preibisch] For some reason this fails to compile on jenkins,
> reverting it
>
> ------------------------------------------
> [...truncated 371 lines...]
> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-HistogramTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.TestSortedGrayLevelIterator.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-imglib.ops.Rev2FunctionalIdeasTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestPlot.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.algorithm.kdtree.VolumetricSearchTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.algorithm.fft.FFTTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.algorithm.localization.EllipticGaussianOrthoTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.algorithm.localization.GaussianTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.algorithm.localization.MLEllipticGaussianEstimatorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.algorithm.localization.MLGaussianEstimatorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.algorithm.localization.PeakFitterTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.algorithm.region.BresenhamLineTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.BinningTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.IterableIntervalSubsetTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.PointTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.RealPointTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.TestAbstractRealLocalizable.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.collection.RealPointSampleListTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.cell.CellContainerFactoryTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.cell.CellContainerTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.cell.CellCursorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.cell.CellTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.HyperSliceImgPlusTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors
> [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestTransformations.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.AxesTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.meta.DefaultCalibratedRealIntervalTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.DefaultCalibratedSpaceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.DefaultNamedTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.DefaultSourcedTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.DefaultTypedAxisTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.DefaultTypedSpaceTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.ImgPlusTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.IntervalUtilsTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.SpaceUtilsTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.DefaultLinearAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.ExponentialAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.meta.axis.ExponentialRecoveryAxisTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.GammaVariateAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.GaussianAxisTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.IdentityAxisTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.InverseRodbardAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.LogLinearAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.PolynomialAxisTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.PowerAxisTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.axis.RodbardAxisTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.units.DefaultUnitServiceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.meta.view.HyperSliceImgPlusTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.realtransform.InvertibleRealTransformSequenceTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.realtransform.RealTransformSequenceTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-script.imglib.test.TestTransformations.xml reported
> 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml
> reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of
> errors [SUCCESS]. Build status is: FAILURE
> Performance: File
> TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0%
> of errors [SUCCESS]. Build status is: FAILURE
> Failed to send e-mail to squareys because no e-mail address is known, and
> no default e-mail domain is configured
>
>
> ---
>
> Dr. Stephan Preibisch
> HFSP Fellow
> Robert H. Singer / Eugene Myers lab
>
> Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG
>
> email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org /
> preibisch at mpi-cbg.de
> web: http://www.preibisch.net/ <http://fly.mpi-cbg.de/preibisch>
>
>
>  ---
>
> Dr. Stephan Preibisch
> HFSP Fellow
> Robert H. Singer / Eugene Myers lab
>
> Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG
>
> email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org /
> preibisch at mpi-cbg.de
> web: http://www.preibisch.net/ <http://fly.mpi-cbg.de/preibisch>
>
>  --
> --
> Please avoid top-posting, and please make sure to reply-to-all!
>
> Mailing list web interface: http://groups.google.com/group/fiji-devel
>
> ---
> You received this message because you are subscribed to the Google Groups
> "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131219/0a703231/attachment-0001.html>

From ctrueden at wisc.edu  Thu Dec 19 17:17:04 2013
From: ctrueden at wisc.edu (Curtis Rueden)
Date: Thu, 19 Dec 2013 17:17:04 -0600
Subject: [ImageJ-devel] Scripting examples
In-Reply-To: <CAMWa8i3ftSQibFSjFaP8kqfqZEoyUkmzV+7emWaPyDs_D9yX6g@mail.gmail.com>
References: <CAMWa8i3ftSQibFSjFaP8kqfqZEoyUkmzV+7emWaPyDs_D9yX6g@mail.gmail.com>
Message-ID: <CADN69y=50Ta_KdAr3Xyxt+yN2XjkQT1=Yun+CfnfiqOD_HCXNw@mail.gmail.com>

Hi Brian,

> You mentioned that it is getting closer with the merger of a
> 'script-parameters' branch.

Yep, the current master branch supports running parameterized scripts in
any supported scripting language. But what doesn't work yet is running them
from the Script Editor. That work is pending on the 'script-editor-cleanup'
branch, which unfortunately I doubt will be finished before year's end.

> Are there any particular classes or example code that would be useful
> to look at right now??

No real examples yet, sorry. The closest thing ATM is the unit tests:

Beanshell: http://git.io/ozG67g
Clojure: http://git.io/XXjbwg
JavaScript: http://git.io/YNMdMQ
JRuby: http://git.io/S72JqQ (but broken, unfortunately)
Jython: http://git.io/wa4SQw

> Or would it be best to wait a few weeks for more updates.

Well, in a few more weeks, parameterized scripts will be working from the
Script Editor, and we will also have a tutorial in imagej-tutorials. But
fundamentally it is working now, if you are feeling impatient. :-)

Regards,
Curtis


On Mon, Dec 9, 2013 at 10:27 AM, Brian Northan <bnorthan at gmail.com> wrote:

> Hi Curtis (and list)
>
> Thanks for the continued updates on the status of the scripting.  You
> mentioned that it is getting closer with the merger of a
> 'script-parameters' branch.  Are there any particular classes or example
> code that would be useful to look at right now??  Or would it be best to
> wait a few weeks for more updates.
>
> Thanks
>
> Brian
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131219/3189d441/attachment.html>

From stephan.preibisch at gmx.de  Fri Dec 20 03:34:25 2013
From: stephan.preibisch at gmx.de (Stephan Preibisch)
Date: Fri, 20 Dec 2013 10:34:25 +0100
Subject: [ImageJ-devel] [fiji-devel] Fwd: Build failed in Jenkins:
	ImgLib #2279
In-Reply-To: <CADN69ymp0m3-=dPgZPScP5Cgd6i23R9Qa-cZu7jacoL2Ew7_cg@mail.gmail.com>
References: <B7C9307F-BA81-47D0-9847-750B1C31C738@gmx.de>
	<FA5ECD51-D964-4C65-B6B0-38CB3F058D18@gmx.de>
	<CADN69ymp0m3-=dPgZPScP5Cgd6i23R9Qa-cZu7jacoL2Ew7_cg@mail.gmail.com>
Message-ID: <ACCDF115-378F-4F8E-9CAB-012412B74D8A@gmx.de>

Thanks a lot Curtis!

This is one of the examples where incorporating apriori knowledge ("I must have done something wrong") was surprisingly wrong, ha ha :)

Cheers,
Steffi

On Dec 19, 2013, at 23:36 , Curtis Rueden wrote:

> Hi Steffi and everyone,
> 
> > Although I reverted my commit it still does not compile. Does this
> > make sense? I am sure it is my fault but I have still no idea why this
> > would happen.
> 
> For the record, the problem (which is now fixed) was due to a reboot of the ImageJ Maven development server. My fault, not Steffi's.
> 
> For details, see:
> https://github.com/imglib/imglib/commit/e989540e844538258577d95dd24fa615a1e7c238
> https://github.com/imglib/imglib/commit/ce27291ce50eb888c2606916daebcfed56e329ad#commitcomment-4894654
> 
> Regards,
> Curtis
> 
> 
> On Wed, Dec 18, 2013 at 5:54 AM, Stephan Preibisch <stephan.preibisch at gmx.de> wrote:
> Ok, now I need help :) Although I reverted my commit it still does not compile. Does this make sense? I am sure it is my fault but I have still no idea why this would happen. 
> 
> It should be the exactly same state as before, or?
> 
> Thanks a lot,
> Steffi
> 
>> On Dec 18, 2013, at 12:49 , jenkins at imagej.net wrote:
>> 
>>> See <http://jenkins.imagej.net/job/ImgLib/2279/changes>
>>> 
>>> Changes:
>>> 
>>> [Stephan Preibisch] For some reason this fails to compile on jenkins, reverting it
>>> 
>>> ------------------------------------------
>>> [...truncated 371 lines...]
>>> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-HistogramTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.TestSortedGrayLevelIterator.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-imglib.ops.Rev2FunctionalIdeasTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestPlot.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.kdtree.VolumetricSearchTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.AllConnectedComponentsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.WatershedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.fft.FFTTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.localization.EllipticGaussianOrthoTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.localization.GaussianTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.localization.MLEllipticGaussianEstimatorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.localization.MLGaussianEstimatorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.localization.PeakFitterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.algorithm.region.BresenhamLineTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.BinningTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.IterableIntervalSubsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.PointTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.RealPointTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.TestAbstractRealLocalizable.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.collection.RealPointSampleListTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.cell.CellContainerFactoryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.cell.CellContainerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.cell.CellCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.cell.CellTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.cell.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.list.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.planar.CopyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.sparse.NtreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.transform.ImgTranslationAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.nearestneighbor.KDTreeTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.nearestneighbor.NearestNeighborSearchOnIterableRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsBorderTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorDoubleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsMirrorSingleBoundaryTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.outofbounds.OutOfBoundsPeriodicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.position.transform.FloorOffsetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.AbstractIterableRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.BinaryMaskRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.CompositeRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.EllipseRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.GeneralPathRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.PolygonRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.roi.RectangleRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.sampler.special.TestConstantRealRandomAccessible.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.ImgUtilTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.KthElementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.LinAlgHelpersTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.PartitionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.util.RealSumTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.HyperSliceImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.RandomAccessTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.RandomAccessibleIntervalCursorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.SequentializeTransformTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.BasicTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.LabelingOutOfBoundsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.LabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.labeling.SparseLabelingTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-tests.roi.TestAbstractRegionOfInterest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.ImagePlusAdapterTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.img.ImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestTransformations.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.io.img.virtual.VirtualImgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.AxesTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultCalibratedRealIntervalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultCalibratedSpaceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultNamedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultSourcedTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultTypedAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.DefaultTypedSpaceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.ImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.IntervalUtilsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.SpaceUtilsTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.DefaultLinearAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.ExponentialAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.ExponentialRecoveryAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.GammaVariateAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.GaussianAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.IdentityAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.InverseRodbardAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.LogLinearAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.PolynomialAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.PowerAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.axis.RodbardAxisTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.units.DefaultUnitServiceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.meta.view.HyperSliceImgPlusTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example10Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example11Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example12Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example1Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example2Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example3Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example4Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example5Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example6Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example7Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example8Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.example.Example9Test.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryAndNotTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.bool.BinaryXorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAddTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexAvgTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyLeftTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexCopyRightTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexDivideTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexMultiplyTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.binary.complex.ComplexSubtractTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.randomaccessibleinterval.unary.regiongrowing.CCATest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexExpTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexIntegerPowerTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexLogTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.operation.unary.complex.ComplexReciprocalTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.ConditionalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.GeneralPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.HyperVolumePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.IterableIntervalPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.OnePointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetComplementTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetDifferenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetIntersectionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetRegionOfInterestTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.PointSetUnionTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.RoiPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetIteratorTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.ops.pointset.TextSpecifiedPointSetTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.realtransform.InvertibleRealTransformSequenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.realtransform.RealTransformSequenceTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestBufferedImageImg.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestExtend.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestIntegralImage.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestIntegralImagePerformance.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestReduce.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-script.imglib.test.TestTransformations.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.MixedTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.SlicingTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Performance: File TEST-net.imglib2.view.TranslationTransformConcatenateTest.xml reported 0.0% of errors [SUCCESS]. Build status is: FAILURE
>>> Failed to send e-mail to squareys because no e-mail address is known, and no default e-mail domain is configured
>> 
>> ---
>> 
>> Dr. Stephan Preibisch
>> HFSP Fellow
>> Robert H. Singer / Eugene Myers lab
>> 
>> Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG
>> 
>> email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org / preibisch at mpi-cbg.de
>> web: http://www.preibisch.net/
>> 
> 
> ---
> 
> Dr. Stephan Preibisch
> HFSP Fellow
> Robert H. Singer / Eugene Myers lab
> 
> Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG
> 
> email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org / preibisch at mpi-cbg.de
> web: http://www.preibisch.net/
> 
> 
> -- 
> -- 
> Please avoid top-posting, and please make sure to reply-to-all!
>  
> Mailing list web interface: http://groups.google.com/group/fiji-devel
>  
> --- 
> You received this message because you are subscribed to the Google Groups "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.
> 
> 
> -- 
> -- 
> Please avoid top-posting, and please make sure to reply-to-all!
>  
> Mailing list web interface: http://groups.google.com/group/fiji-devel
>  
> --- 
> You received this message because you are subscribed to the Google Groups "Fiji-devel" group.
> To unsubscribe from this group and stop receiving emails from it, send an email to fiji-devel+unsubscribe at googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.

---

Dr. Stephan Preibisch
HFSP Fellow
Robert H. Singer / Eugene Myers lab

Albert Einstein College of Medicine / HHMI Janelia Farm / MPI-CBG

email: stephan.preibisch at einstein.yu.edu / preibischs at janelia.hhmi.org / preibisch at mpi-cbg.de
web: http://www.preibisch.net/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131220/0a95c254/attachment-0001.html>

From jean-yves.tinevez at pasteur.fr  Fri Dec  6 02:24:37 2013
From: jean-yves.tinevez at pasteur.fr (Jean-Yves Tinevez)
Date: Fri, 06 Dec 2013 08:24:37 -0000
Subject: [ImageJ-devel] [fiji-devel] Imglib2: using threadpools in core
	algorithms
In-Reply-To: <3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
References: <529B17AC.7000206@pasteur.fr>
	<CADN69ym0Wto6JXOKcrZrWh4OevJpeBU_+zpNTyw2EvpMk4VVFA@mail.gmail.com>
	<301D3AEE-8143-420E-8E83-89FF61A21109@mpi-cbg.de>
	<alpine.DEB.1.00.1312052230440.1191@s15462909.onlinehome-server.info>
	<4CEFA33F-892D-4F0C-A761-1AAE9D7D1CE9@mpi-cbg.de>
	<CADN69yn6j7XLN7FW=bOowgd_D=b0GQtr=HgqCb5eO+UsfJOh=g@mail.gmail.com>
	<CADN69ymxac+Rq_iS+Kd+m33FodpOPx54ZvbtJsyCn3m65iAYSg@mail.gmail.com>
	<3E302102-A6E8-4960-B2A1-7FF25F9F846D@mpi-cbg.de>
Message-ID: <7529D782-E182-4581-A2A4-623501BDB552@pasteur.fr>

Hi all

Ok thank you very much this is inspiring. 

I see the discussion is still going on and that we (the team) did not reach a definitive conclusion yet. 

I just want to add a question item to the discussion: 
Sometimes you need to have information on the multithreading configuration that has been set upstream.

For instance, taking the example of TrackMate spot detection:

Each frame of a movie can be processed concurrently: I generate a task for each frame, and can feed this task to any interface we are discussing right now. For this, I do not need to know how many threads are allocated to the service: it will decide how to process the tasks I generated. 

By there are many algorithms in imglib2 that can process a single image in a multithreaded way, by splitting it into small pieces. For instance, you can compute the Gauss convolution on 2 threads, and it will split the source image in 2. For this, the algorithm needs to have some info on the "multitasking resources" available right? If you have 24 workers, and that each worker receives one frame to segment, the segmenter needs to know it is unwise to split the source image over several extra workers. No?

How is this achieved in real world applications?
best
jy

From pietzsch at mpi-cbg.de  Tue Dec 24 08:47:27 2013
From: pietzsch at mpi-cbg.de (Tobias Pietzsch)
Date: Tue, 24 Dec 2013 15:47:27 +0100
Subject: [ImageJ-devel] scijava-common newbie question
Message-ID: <BD3B2A92-10D6-46D3-ADF8-5EB6C32E2635@mpi-cbg.de>

Hi,

after browsing around a bit in SCJ and IJ2 examples, I would like to apply some of it in my BigDataViewer plugin. Before I do it all wrong, I thought I ask for advice on best practices?

My first application scenario is the following:
I have some code that exports from various sources to BigDataViewer's hdf5 based file format. There is stuff that can go wrong, and usually the export takes some time. Thus, it would be nice to have some user feedback on progress and warnings etc. If the code is called from an IJ1 plugin, this should be directed to IJ.log and the IJ progressbar. If the code is called from other code, it should be directed to stdout. Currently I'm using my own ProgressListener interface and IJ /  sysout implementations.
However this seems like the textbook example for LogService, so I would like to replace my crooked reinvented wheel by a shiny new scijava one :-)

I'm a bit unclear on how to do it exactly:
1) A lot of the code lives in static methods. The correct (and only) way to get the LogService in there is as a method parameter, right?
2) Where do I instantiate the service? Probably in the respective IJ1 plugin, somthing like this:
    new Context(IJ1LogService.class) in the constructor, and then
    context.inject(this) to fill a @Parameter annotated LogService field.
    Is that about right?
3) Is there something like a ProgressService which could be implemented to set the IJ1 progressbar? (I had a quick look but couldn't find one)

thanks a lot for any pointers,
Tobias


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://imagej.net/pipermail/imagej-devel/attachments/20131224/13400180/attachment.pgp>

From schindelin at wisc.edu  Fri Dec 27 12:45:32 2013
From: schindelin at wisc.edu (Johannes Schindelin)
Date: Fri, 27 Dec 2013 19:45:32 +0100 (CET)
Subject: [ImageJ-devel] Incompatible licensing of ARGBARGBDoubleConverter
 and ARGBDoubleARGBConverter
Message-ID: <alpine.DEB.1.00.1312271939410.1191@s15462909.onlinehome-server.info>

Hi Stephan,

I just noticed that you added the RowAccumulator on Thu May 9 21:59:10
2013 to the examples, under the GPL. On Wed May 15 01:20:47 2013 you
renamed it to ARGBDoubleARGBConverter, on Tue Jul 16 13:55:51 2013
copy-edited it into ARGBARGBDoubleConverter, and on Wed Jul 31 17:06:26
2013 moved it into core.

Unfortunately, you did not change the license to BSD -- as required by
license/imglib2/license.txt (which is a 2-clause BSD).

Could you please either remove the file or re-license it to BSD?

Thanks,
Johannes


From schindelin at wisc.edu  Fri Dec 27 12:47:33 2013
From: schindelin at wisc.edu (Johannes Schindelin)
Date: Fri, 27 Dec 2013 19:47:33 +0100 (CET)
Subject: [ImageJ-devel] Incompatible licensing of
 ARGBARGBDoubleConverter and ARGBDoubleARGBConverter
In-Reply-To: <alpine.DEB.1.00.1312271939410.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1312271939410.1191@s15462909.onlinehome-server.info>
Message-ID: <alpine.DEB.1.00.1312271945460.1191@s15462909.onlinehome-server.info>

Hi Christian & Stephan,

similarly to the argb converters I just pointed out, the
Volatile2DRandomAccessibleProjector class -- attributed to Stephan, but
added to imglib2-core by Christian -- states that it is under the GPL
which is incompatible with ImgLib2's license.

Just as with the converters, would you please either remove the offending
file or relicense it as BSD?

Thank you,
Johannes


From schindelin at wisc.edu  Fri Dec 27 13:54:03 2013
From: schindelin at wisc.edu (Johannes Schindelin)
Date: Fri, 27 Dec 2013 20:54:03 +0100 (CET)
Subject: [ImageJ-devel] Clarification about licenses in IJ2 beta 7.6
Message-ID: <alpine.DEB.1.00.1312271926450.1191@s15462909.onlinehome-server.info>

Hi all,

having had way too much fun coding for a change, I thought I need to do
something that is distinctly no fun at all to bring me down somewhat. So I
researched the licenses in the current ImageJ2 version.

For the record:

base64		public domain	http://iharder.sourceforge.net/current/java/base64/
bcmail/bcprov	MIT		http://www.bouncycastle.org/licence.html
bsh		LGPL		http://www.beanshell.org/license.html
clojure		EPL		http://clojure.org/license
commons-lang3	APL		http://www.apache.org/licenses/
eventbus	APL		http://eventbus.org/license.html
ij		public domain	http://imagej.net/disclaimer.html
itext-2.1.5	LGPL [*1*]	http://en.wikipedia.org/wiki/IText
jai_imageio	BSD		https://github.com/scifio/scifio-jai-imageio-core
jama		public domain	http://math.nist.gov/javanumerics/jama/
javassist	MPL/LGPL/APL	http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/
jcommon		LGPL		http://www.jfree.org/jfreechart/
jdatepicker	BSD		http://sourceforge.net/projects/jdatepicker/
jfreechart	LGPL		http://www.jfree.org/jfreechart/
jhotdraw	LGPL		http://sourceforge.net/projects/jhotdraw/
jruby		EPL/GPL/LGPL	https://github.com/jruby/jruby/blob/master/COPYING
jsch		BSD		http://www.jcraft.com/jsch/
jython		Jython (BSD)	http://jython.org/license.html
mapdb		APL		http://www.mapdb.org/faq-general.html
markdown	BSD		https://markdownj.kenai.com/markdownj-core/license.html
miglayout	BSD/GPL		http://miglayout.com/
mines-jtk	CPL		http://inside.mines.edu/~dhale/jtk/
object-inspector BSD		https://github.com/sbridges/object-inspector/blob/master/LICENSE.TXT
rsyntaxtextarea	BSD		http://fifesoft.com/rsyntaxtextarea/RSyntaxTextArea.License.txt
scifio		BSD		https://github.com/scifio/scifio/blob/master/LICENSE.txt
scijava-common	BSD		https://github.com/scijava/scijava-common/blob/master/LICENSE.txt
serializer	APL		http://apache.org/licenses/
udunits		UCAR (BSD)	https://github.com/Unidata/UDUNITS-2/blob/master/LICENSE
xalan		APL		http://apache.org/licenses/
xml-apis	APL		http://apache.org/licenses/

MIT, LGPL, EPL, APL and CPL allow linking with code using a different
license (necessary because SciJava-common, ImageJ2 and the parts of
ImgLib2 [*2*] we use are provided under the BSD license) according to
http://en.wikipedia.org/wiki/Comparison_of_free_and_open-source_software_licenses

All the other files in ImageJ.app/jars/ are ij-* files and of course
BSD-licensed.

Ciao,
Johannes

Footnote *1*: While current versions of iText are licensed under the AGPL
(which distinctly prohibits linking to software under a different
license), iText versions up to 2.1.7 were covered by the LGPL. See also
http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=115193&p=173948#p173948

Footnote *2*: Ideally, ImgLib2 would have only one license, but sadly that
is not true. While -core (apart from the mis-licensed files I just pointed
out in two other mails), -algorithms, -ij, -meta, -ops, -realtransforms
and -ui are BSD-licensed, -algorithms-gpl, -algorithms-legacy,
-broken-algorithms, -broken-scripting, -broken-tests, -examples (!!!),
-scripting and -tests are under the GNU Public License (without a
clarification whether GPLv2 or GPLv2-or-later is meant).


From christian.dietz at uni-konstanz.de  Sat Dec 28 07:20:40 2013
From: christian.dietz at uni-konstanz.de (Christian Dietz)
Date: Sat, 28 Dec 2013 14:20:40 +0100
Subject: [ImageJ-devel] Incompatible licensing of
	ARGBARGBDoubleConverter and ARGBDoubleARGBConverter
In-Reply-To: <alpine.DEB.1.00.1312271945460.1191@s15462909.onlinehome-server.info>
References: <alpine.DEB.1.00.1312271939410.1191@s15462909.onlinehome-server.info>
	<alpine.DEB.1.00.1312271945460.1191@s15462909.onlinehome-server.info>
Message-ID: <52BED028.9050900@uni-konstanz.de>

Hi Dscho,

Thank you Dscho for pointing this out. I fixed this (and several other 
missing) license header in projectors/converters and opened a 
pull-request. Stephan, could you please review the pull-request if 
everything is OK and then merge it afterwards?

Guten Rutsch an alle ;-)

Christian


Am 27.12.2013 19:47, schrieb Johannes Schindelin:
> Hi Christian & Stephan,
>
> similarly to the argb converters I just pointed out, the
> Volatile2DRandomAccessibleProjector class -- attributed to Stephan, but
> added to imglib2-core by Christian -- states that it is under the GPL
> which is incompatible with ImgLib2's license.
>
> Just as with the converters, would you please either remove the offending
> file or relicense it as BSD?
>
> Thank you,
> Johannes



From jpoczatek at rics.bwh.harvard.edu  Mon Dec 30 09:59:42 2013
From: jpoczatek at rics.bwh.harvard.edu (Poczatek, Joseph Collin)
Date: Mon, 30 Dec 2013 15:59:42 +0000
Subject: [ImageJ-devel] Fiji updater operates on what directories and what
	file types?
Message-ID: <6892ECB54B992940B31DE659AC23A1A12710B50D@PHSX10MB15.partners.org>

Hi all,

I haven't been able to find this in the docs, but I was wondering what
the Fiji (or is it IJ2 now?) updater can push to a 3rd party update site.

Poking around I think that only some directories will be looked at:
Fiji.app/plugins/
Fiji.app/luts/
Fiji.app/jars/
Fiji.app/macros/
Fiji.app/scripts/

And only file types:
.class/.jar
.lut
.txt
appropriate macro/script extensions (.ijm, .py, .rb, etc)

Am I correct? What I was attempting was to push a 1-2 bash script that
was just "ImageJ-linux64 --all-my-special-args..." and having no
extension or .sh didn't take.

I can think of several workarounds, the most obvious is to create
Fiji.app/scripts/mything.bsh where I guess the worst that could happen
is someone tries to run it as a beanshell script.

Is there a better way to do this? I can also think of other use cases
besides this specific one.

Thanks,
Collin



The information in this e-mail is intended only for the person to whom it is
addressed. If you believe this e-mail was sent to you in error and the e-mail
contains patient information, please contact the Partners Compliance HelpLine at
http://www.partners.org/complianceline . If the e-mail was sent to you in error
but does not contain patient information, please contact the sender and properly
dispose of the e-mail.



From Johannes.Schindelin at gmx.de  Mon Dec 30 11:39:06 2013
From: Johannes.Schindelin at gmx.de (Johannes Schindelin)
Date: Mon, 30 Dec 2013 18:39:06 +0100 (CET)
Subject: [ImageJ-devel] [fiji-devel] Fiji updater operates on what
 directories and what file types?
In-Reply-To: <6892ECB54B992940B31DE659AC23A1A12710B50D@PHSX10MB15.partners.org>
References: <6892ECB54B992940B31DE659AC23A1A12710B50D@PHSX10MB15.partners.org>
Message-ID: <alpine.DEB.1.00.1312301821000.1191@s15462909.onlinehome-server.info>

Hi Joseph Collin,

On Mon, 30 Dec 2013, Poczatek, Joseph Collin wrote:

> I haven't been able to find this in the docs, but I was wondering what
> the Fiji (or is it IJ2 now?) updater can push to a 3rd party update site.

It is both: the Fiji Updater now *is* the ImageJ updater.

And yes, it can upload to 3rdparty update sites, as detailed in
http://fiji.sc/Adding_Update_Sites

> Poking around I think that only some directories will be looked at:
> Fiji.app/plugins/
> Fiji.app/luts/
> Fiji.app/jars/
> Fiji.app/macros/
> Fiji.app/scripts/
> 
> And only file types:
> .class/.jar
> .lut
> .txt
> appropriate macro/script extensions (.ijm, .py, .rb, etc)

Almost correct. The file extensions accepted are dependent on the
top-level directory. In plugins/ for example, .class, .jar, .ijm and
script extensions are allowed, but not .lut. In luts/, only .lut are
allowed. In lib/ (which you did not mention), there is no limitation on
file extensions.

This restrictions are not for dictatorship reasons, BTW, but to prevent
surprises from incorrect usage of the updater.

> Am I correct? What I was attempting was to push a 1-2 bash script that
> was just "ImageJ-linux64 --all-my-special-args..." and having no
> extension or .sh didn't take.

Bash scripts cannot be executed by ImageJ, hence it does not make too much
sense for the updater to ship them. Having said that, you could upload
them into, say, lib/.

> I can think of several workarounds, the most obvious is to create
> Fiji.app/scripts/mything.bsh where I guess the worst that could happen
> is someone tries to run it as a beanshell script.
> 
> Is there a better way to do this? I can also think of other use cases
> besides this specific one.

It is a very dangerous thing to let random people specify the way you run
things, therefore my suggested way would be to ship the Bash scripts
separately to the users (so they know they are from a trusted source, and
so they know to to complain to when their Windows machine has no clue how
to run Bash scripts).

Ciao,
Johannes


From jpoczatek at rics.bwh.harvard.edu  Tue Dec 31 09:56:33 2013
From: jpoczatek at rics.bwh.harvard.edu (Poczatek, Joseph Collin)
Date: Tue, 31 Dec 2013 15:56:33 +0000
Subject: [ImageJ-devel] [fiji-devel] Fiji updater operates on what
 directories and what file types?
References: <6892ECB54B992940B31DE659AC23A1A12710B50D@PHSX10MB15.partners.org>
	<alpine.DEB.1.00.1312301821000.1191@s15462909.onlinehome-server.info>
Message-ID: <6892ECB54B992940B31DE659AC23A1A12710B938@PHSX10MB15.partners.org>


Hi Johannes,

> Almost correct. The file extensions accepted are dependent on the
> top-level directory. In plugins/ for example, .class, .jar, .ijm and
> script extensions are allowed, but not .lut. In luts/, only .lut are
> allowed. In lib/ (which you did not mention), there is no limitation on
> file extensions.
>
> This restrictions are not for dictatorship reasons, BTW, but to prevent
> surprises from incorrect usage of the updater.
Ok, that makes sense. I didn't mention lib/ because it isn't in a fresh
Fiji install. Is it deprecated, or is it sticking around?

After that I got a little confused... Just to talk this out so I'm not
missing something.

>> Am I correct? What I was attempting was to push a 1-2 bash script that
>> was just "ImageJ-linux64 --all-my-special-args..." and having no
>> extension or .sh didn't take.
> Bash scripts cannot be executed by ImageJ, hence it does not make too much
> sense for the updater to ship them. Having said that, you could upload
> them into, say, lib/.

Couldn't you say the same thing about Fiji shipping with a .desktop
file? It's an analogous situation I think. We just want to make it easy
to launch Fiji in a certain way.

>> I can think of several workarounds, the most obvious is to create
>> Fiji.app/scripts/mything.bsh where I guess the worst that could happen
>> is someone tries to run it as a beanshell script.
>>
>> Is there a better way to do this? I can also think of other use cases
>> besides this specific one.
> It is a very dangerous thing to let random people specify the way you run
> things, therefore my suggested way would be to ship the Bash scripts
> separately to the users (so they know they are from a trusted source, and
> so they know to to complain to when their Windows machine has no clue how
> to run Bash scripts).
Maybe I should say that nothing I'm talking about is forced on the
user.  They could still run our plugin from the plugins menu like
normal. Putting a .sh file in lib/ sounds like the best option and we
don't have to use an incorrect extension.  Thanks for pointing that out.

Happy New Year,
Collin





The information in this e-mail is intended only for the person to whom it is
addressed. If you believe this e-mail was sent to you in error and the e-mail
contains patient information, please contact the Partners Compliance HelpLine at
http://www.partners.org/complianceline . If the e-mail was sent to you in error
but does not contain patient information, please contact the sender and properly
dispose of the e-mail.



